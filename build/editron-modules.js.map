{"version":3,"sources":["webpack://editronModules/webpack/bootstrap","webpack://editronModules/./editron.scss","webpack://editronModules/./editron.ts","webpack://editronModules/../../src/utils/validate.ts","webpack://editronModules/../../node_modules/symbol-observable/es/index.js","webpack://editronModules/../../src/plugins/dispatch.ts","webpack://editronModules/../../src/plugins/effects.ts","webpack://editronModules/../../node_modules/redux/es/redux.js","webpack://editronModules/../../node_modules/symbol-observable/es/ponyfill.js","webpack://editronModules/../../src/redux.ts","webpack://editronModules/../../src/utils/isListener.ts","webpack://editronModules/../../src/rematch.ts","webpack://editronModules/../../src/pluginFactory.ts","webpack://editronModules/../../src/utils/deprecate.ts","webpack://editronModules/../../src/utils/mergeConfig.ts","webpack://editronModules/../../src/index.ts","webpack://editronModules/./node_modules/@technik-sde/foxy/distmodule/Foxy.js","webpack://editronModules/./node_modules/@technik-sde/foxy/distmodule/handler/imageHandler.js","webpack://editronModules/./node_modules/@technik-sde/foxy/distmodule/handler/unsplash.js","webpack://editronModules/./node_modules/@technik-sde/foxy/distmodule/handler/videoHandler.js","webpack://editronModules/./node_modules/@technik-sde/foxy/distmodule/index.js","webpack://editronModules/./node_modules/@technik-sde/foxy/distmodule/utils.js","webpack://editronModules/./node_modules/deepmerge/dist/cjs.js","webpack://editronModules/./node_modules/gson-conform/lib/asArray.js","webpack://editronModules/./node_modules/gson-conform/lib/forEach.js","webpack://editronModules/./node_modules/gson-conform/lib/index.js","webpack://editronModules/./node_modules/gson-conform/lib/keyOf.js","webpack://editronModules/./node_modules/gson-conform/lib/keys.js","webpack://editronModules/./node_modules/gson-conform/lib/values.js","webpack://editronModules/./node_modules/gson-pointer/dist/gsonPointer.js","webpack://editronModules/./node_modules/gson-pointer/lib/removeUndefinedItems.ts","webpack://editronModules/./node_modules/gson-query/lib/common.js","webpack://editronModules/./node_modules/gson-query/lib/delete.js","webpack://editronModules/./node_modules/gson-query/lib/filter.js","webpack://editronModules/./node_modules/gson-query/lib/get.js","webpack://editronModules/./node_modules/gson-query/lib/index.js","webpack://editronModules/./node_modules/gson-query/lib/run.js","webpack://editronModules/./node_modules/json-schema-library/index.js","webpack://editronModules/./node_modules/json-schema-library/lib/SchemaService.js","webpack://editronModules/./node_modules/json-schema-library/lib/addSchema.js","webpack://editronModules/./node_modules/json-schema-library/lib/addValidator.js","webpack://editronModules/./node_modules/json-schema-library/lib/compile/getRef.js","webpack://editronModules/./node_modules/json-schema-library/lib/compile/index.js","webpack://editronModules/./node_modules/json-schema-library/lib/compile/joinScope.js","webpack://editronModules/./node_modules/json-schema-library/lib/compile/splitRef.js","webpack://editronModules/./node_modules/json-schema-library/lib/compileSchema.js","webpack://editronModules/./node_modules/json-schema-library/lib/config/settings.js","webpack://editronModules/./node_modules/json-schema-library/lib/config/strings.js","webpack://editronModules/./node_modules/json-schema-library/lib/cores/CoreInterface.js","webpack://editronModules/./node_modules/json-schema-library/lib/cores/Draft04.js","webpack://editronModules/./node_modules/json-schema-library/lib/cores/JsonEditor.js","webpack://editronModules/./node_modules/json-schema-library/lib/createSchemaOf.js","webpack://editronModules/./node_modules/json-schema-library/lib/each.js","webpack://editronModules/./node_modules/json-schema-library/lib/eachSchema.js","webpack://editronModules/./node_modules/json-schema-library/lib/getChildSchemaSelection.js","webpack://editronModules/./node_modules/json-schema-library/lib/getSchema.js","webpack://editronModules/./node_modules/json-schema-library/lib/getTemplate.js","webpack://editronModules/./node_modules/json-schema-library/lib/getTypeOf.js","webpack://editronModules/./node_modules/json-schema-library/lib/isValid.js","webpack://editronModules/./node_modules/json-schema-library/lib/resolveAllOf.js","webpack://editronModules/./node_modules/json-schema-library/lib/resolveAnyOf.js","webpack://editronModules/./node_modules/json-schema-library/lib/resolveOneOf.fuzzy.js","webpack://editronModules/./node_modules/json-schema-library/lib/resolveOneOf.strict.js","webpack://editronModules/./node_modules/json-schema-library/lib/resolveRef.strict.js","webpack://editronModules/./node_modules/json-schema-library/lib/resolveRef.withOverwrite.js","webpack://editronModules/./node_modules/json-schema-library/lib/schema/getTypeDefs.js","webpack://editronModules/./node_modules/json-schema-library/lib/schema/getTypeId.js","webpack://editronModules/./node_modules/json-schema-library/lib/schema/types.js","webpack://editronModules/./node_modules/json-schema-library/lib/step.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/__.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/copy.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/createCustomError.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/filter.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/flattenArray.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/merge.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/punycode.ucs2decode.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/render.js","webpack://editronModules/./node_modules/json-schema-library/lib/validate.js","webpack://editronModules/./node_modules/json-schema-library/lib/validateAsync.js","webpack://editronModules/./node_modules/json-schema-library/lib/validation/errors.js","webpack://editronModules/./node_modules/json-schema-library/lib/validation/format.js","webpack://editronModules/./node_modules/json-schema-library/lib/validation/keyword.js","webpack://editronModules/./node_modules/json-schema-library/lib/validation/type.js","webpack://editronModules/./node_modules/json-schema-library/lib/validation/typeKeywordMapping.js","webpack://editronModules/./node_modules/json-schema-library/remotes/index.js","webpack://editronModules/./node_modules/jsondiffpatch/dist/jsondiffpatch.umd.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/button/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/buttonform/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/checkbox/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/checkboxform/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/errors/getErrorClass.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/errors/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/imagepreview/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/input/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/inputform/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/inputform/sanitizeValue.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/isEmpty.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/label/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/list/getParentByClassname.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/list/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/popover/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/querylist/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/querylist/search.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/querylistform/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/radiobuttons/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/radiobuttonsform/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/select/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/selectform/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/switch/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/switchform/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/textarea/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/textareaform/index.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/components/types.js","webpack://editronModules/./node_modules/mithril-material-forms/distmodule/index.js","webpack://editronModules/./node_modules/mithril-material-forms/node_modules/autosize/dist/autosize.js","webpack://editronModules/./node_modules/nanoevents/index.js","webpack://editronModules/./node_modules/process/browser.js","webpack://editronModules/./node_modules/sortablejs/modular/sortable.esm.js","webpack://editronModules/./node_modules/valid-url/index.js","webpack://editronModules/(webpack)/buildin/global.js","webpack://editronModules/(webpack)/buildin/module.js","webpack://editronModules/./src/Controller.ts","webpack://editronModules/./src/components/actions/index.ts","webpack://editronModules/./src/components/container/index.ts","webpack://editronModules/./src/components/description/index.ts","webpack://editronModules/./src/components/errors/index.ts","webpack://editronModules/./src/components/header/index.ts","webpack://editronModules/./src/components/index.ts","webpack://editronModules/./src/components/overlay/index.ts","webpack://editronModules/./src/components/overlayselecttiles/Tile.ts","webpack://editronModules/./src/components/overlayselecttiles/index.ts","webpack://editronModules/./src/editors/AbstractEditor.ts","webpack://editronModules/./src/editors/AbstractValueEditor.ts","webpack://editronModules/./src/editors/arrayeditor/ArrayItem.ts","webpack://editronModules/./src/editors/arrayeditor/index.ts","webpack://editronModules/./src/editors/autocompleteeditor/index.ts","webpack://editronModules/./src/editors/objecteditor/index.ts","webpack://editronModules/./src/editors/oneofeditor/index.ts","webpack://editronModules/./src/editors/valueeditor/View.ts","webpack://editronModules/./src/editors/valueeditor/index.ts","webpack://editronModules/./src/plugin/delegationplugin/index.ts","webpack://editronModules/./src/plugin/index.ts","webpack://editronModules/./src/plugin/remotedataplugin/index.ts","webpack://editronModules/./src/plugin/selectionplugin/index.ts","webpack://editronModules/./src/plugin/sortableplugin/index.ts","webpack://editronModules/./src/plugin/syncplugin/index.ts","webpack://editronModules/./src/services/InstanceService.ts","webpack://editronModules/./src/services/LocationService.ts","webpack://editronModules/./src/services/OverlayService.ts","webpack://editronModules/./src/services/SchemaService.ts","webpack://editronModules/./src/services/SessionService.ts","webpack://editronModules/./src/services/ValidationService.ts","webpack://editronModules/./src/services/dataservice/change.ts","webpack://editronModules/./src/services/dataservice/index.ts","webpack://editronModules/./src/services/dataservice/pointersOf.ts","webpack://editronModules/./src/services/utils/BubblingCollectionObservable.ts","webpack://editronModules/./src/services/utils/Validation.ts","webpack://editronModules/./src/services/utils/copy.ts","webpack://editronModules/./src/services/utils/createDiff.ts","webpack://editronModules/./src/services/utils/diffpatch.ts","webpack://editronModules/./src/services/utils/ensureItemIDs.ts","webpack://editronModules/./src/services/utils/getScrollParent.ts","webpack://editronModules/./src/services/utils/isRootPointer.ts","webpack://editronModules/./src/store/global.ts","webpack://editronModules/./src/store/index.ts","webpack://editronModules/./src/store/models/data.ts","webpack://editronModules/./src/store/models/errors.ts","webpack://editronModules/./src/store/models/ui.ts","webpack://editronModules/./src/utils/UISchema.ts","webpack://editronModules/./src/utils/addItem.ts","webpack://editronModules/./src/utils/array.ts","webpack://editronModules/./src/utils/createElement.ts","webpack://editronModules/./src/utils/createProxy.ts","webpack://editronModules/./src/utils/i18n.ts","webpack://editronModules/./src/utils/index.ts","webpack://editronModules/./src/utils/isEmpty.ts","webpack://editronModules/./src/utils/isNodeContext.ts","webpack://editronModules/./src/utils/populated.ts","webpack://editronModules/./src/utils/selectEditor.ts","webpack://editronModules/./src/utils/selection.ts","webpack://editronModules/external \"m\""],"names":["validate","validations","root","dispatchPlugin","exposed","storeDispatch","action","state","console","warn","storeGetState","dispatch","this","createDispatcher","modelName","reducerName","payload","meta","Promise","type","onStoreCreated","store","getState","onModel","model","name","reducers","keys","match","apply","effectsPlugin","effects","_a","effectName","bind","isEffect","middleware","next","self","window","global","module","Function","randomString","Math","random","toString","substring","split","join","result","Symbol","observable","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","createStore","reducer","preloadedState","enhancer","_ref2","arguments","Error","undefined","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","slice","subscribe","listener","isSubscribed","push","index","indexOf","splice","obj","proto","Object","getPrototypeOf","isPlainObject","listeners","i","length","replaceReducer","nextReducer","$$observable","_ref","outerSubscribe","observer","TypeError","observeState","unsubscribe","combineReducers","reducerKeys","finalReducers","key","shapeAssertionError","finalReducerKeys","forEach","e","actionType","hasChanged","nextState","_i","_key","previousStateForKey","nextStateForKey","errorMessage","String","bindActionCreator","actionCreator","ownKeys","object","enumerableOnly","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread2","target","source","value","defineProperty","configurable","writable","getOwnPropertyDescriptors","defineProperties","compose","_len","funcs","Array","arg","reduce","a","b","applyMiddleware","middlewares","_dispatch","middlewareAPI","chain","map","composeEnhancersWithDevtools","devtoolOptions","options","disabled","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","Redux.compose","actionCreators","boundActionCreators","redux","models","Redux.combineReducers","Redux.createStore","initialState","mergeReducers","nextReducers","_this","createModelReducer","modelBaseReducer","baseReducer","modelReducers","modelReducer","combinedReducer","createRootReducer","rootReducers","mergedReducers","rootReducerAction","rootReducer","Redux.applyMiddleware","enhancers","corePlugins","Rematch","method","fn","plugins","plugin","forEachPlugin","getModels","config","addModel","createRedux","call","rematchStore","returned","pluginFactory","create","onInit","concat","warning","merge","original","init","initConfig","count","mergeConfig","deprecate","Foxy","handlers","handler","h","request","get","methodName","findHandler","reject","JSON","stringify","some","use","find","test","getImageURL","resolve","getImageInfo","utils","loadImageInfo","isUnsplashImage","parseURL","url","params","URLSearchParams","replace","has","width","parseInt","height","fit","quality","auto","getURL","baseURL","set","getVideoURL","getVideoInfo","loadVideoInfo","unsplash","image","video","isHandler","prototype","fetchOptions","src","Image","fetch","then","response","blob","imageBlob","URL","createObjectURL","imageSrc","addEventListener","naturalWidth","naturalHeight","document","createElement","duration","poster","onVideoLoaded","videoWidth","videoHeight","setAttribute","appendChild","isMergeableObject","isNonNullObject","isSpecial","stringValue","isReactElement","canUseSymbol","REACT_ELEMENT_TYPE","$$typeof","emptyTarget","val","isArray","cloneUnlessOtherwiseSpecified","clone","deepmerge","defaultArrayMerge","element","getMergeFunction","customMerge","getEnumerableOwnPropertySymbols","symbol","propertyIsEnumerable","getKeys","propertyIsOnObject","property","_","propertyIsUnsafe","hasOwnProperty","mergeObject","destination","arrayMerge","sourceIsArray","targetIsArray","sourceAndTargetTypesMatch","all","deepmergeAll","array","prev","deepmerge_1","exports","asArray","callback","values","require","keyOf","data","resultKey","itemValue","itemKey","t","define","n","r","d","S","p","isRoot","O","remove","removeUndefinedItems","v","y","c","o","u","l","f","s","decodeURIComponent","shift","g","m","pop","j","A","x","P","encodeURIComponent","toStringTag","rIsRegExp","stripPointerPrefix","pointer","convertToRegExp","pointerPartial","RegExp","splitRegExp","parsePointer","partials","current","pointerDelete","queryGet","POINTER","PARENT","queryDelete","jsonPointer","matches","ALL","common","queryKey","query","valid","queryRegExp","regex","MAP","filterValues","filterKeys","selectCurly","selectPlaceholder","splitQuery","temp","group","id","revertReplacement","propertyQuery","filterQuery","isValid","truthy","tests","or","cb","getCbFactory","VALUE","cbGetAll","cbGetMap","cbGetPointer","cbGetValue","run","queryRun","steps","_query","cbPassAll","unshift","strings","cores","Interface","Draft04","JsonEditor","addSchema","addValidator","compileSchema","createCustomError","createSchemaOf","each","eachSchema","getChildSchemaSelection","getSchema","getTemplate","getTypeOf","SchemaService","step","validateAsync","Core","gp","copy","parse","schema","core","cache","setSchema","parentPointer","parentSchema","variableSchema","remotes","addError","errorId","errorCreator","errors","addFormat","formatType","validationFunction","validateFormat","addKeyword","datatype","keyword","typeKeywords","includes","validateKeyword","error","format","splitRef","suffixes","isObject","getRef","context","rootSchema","$ref","__ref","$remote","ids","fragments","base","joinScope","COMPILED","COMPILED_REF","GET_REF","GET_ROOT","compile","force","rootSchemaAsString","scopes","getRoot","previousPointer","previousScope","scope","trailingHash","isDomain","trailingFragments","idAndPointer","previous","emptyValues","DECLARATOR_ONEOF","GET_TEMPLATE_RECURSION_LIMIT","floatingPointPrecision","propertyBlacklist","AdditionalItemsError","AdditionalPropertiesError","AnyOfError","AllOfError","EnumError","FormatDateTimeError","FormatEmailError","FormatUrlError","FormatUriError","FormatHostnameError","FormatIPV4Error","FormatIPV6Error","FormatRegExError","MaximumError","MaxItemsError","MaxLengthError","MaxPropertiesError","MinimumError","MinItemsError","MinLengthError","MinPropertiesError","MissingOneOfPropertyError","MissingDependencyError","MultipleOfError","MultipleOneOfError","NoAdditionalPropertiesError","NotError","OneOfError","OneOfPropertyError","PatternError","PatternPropertiesError","RequiredPropertyError","UndefinedValueError","UnknownPropertyError","UniqueItemsError","ValueNotEmptyError","resolveRef","resolveAnyOf","resolveAllOf","__rootSchema","CoreInterface","resolveOneOf","Draft04Core","validateType","JsonEditorCore","properties","items","dataType","nextSchema","getTypeDefs","nextTypeDefs","defs","def","eachDefinition","walk","definitions","defId","log","defschema","schemaPointer","code","oneOf","item","emptyObject","frags","_get","resolveOneOfFuzzy","settings","shouldResolveRef","convertValue","createTemplateSchema","templateSchema","anyOf","resolvedAnyOf","allOf","resolvedSchema","TYPE","templateData","getDefault","template","minItems","min","oneOfSchema","itemCount","max","one","templateValue","initValue","toLowerCase","mergedSchema","allOfSchema","allOfError","found","anyOfSchema","anyOfError","flattenArray","fuzzyObjectValue","oneOfProperty","oneOfValue","missingOneOfPropertyError","oneOfPropertySchema","errorOrPromise","oneOfPropertyError","schemaOfItem","fuzzyGreatest","fuzzyValue","oneOfError","multipleOneOfError","resolveRefMerge","gq","getTypeId","types","parent","keywords","validationKeywords","integer","not","number","string","stepType","itemsType","additionalItems","additionalItemsError","targetSchema","patternProperties","patterns","additionalProperties","unknownPropertyError","expectedType","render","__","fallback","dashCase","str","message","isPromise","isError","errorsOnly","list","overwriteMerge","destinationArray","sourceArray","ucs2decode","output","counter","charCodeAt","extra","getJsonSchemaType","jsType","Number","isInteger","receivedType","typeError","received","expected","invalidTypeError","createErrorNotification","onError","notifyError","resolvedErrors","stack","additionalPropertiesError","enumError","formatUrlError","formatUriError","formatDateTimeError","formatEmailError","formatHostnameError","formatIPV4Error","formatIPV6Error","formatRegExError","invalidSchemaError","maximumError","maxItemsError","maxLengthError","maxPropertiesError","minimumError","minItemsError","minLengthError","minPropertiesError","missingDependencyError","multipleOfError","noAdditionalPropertiesError","notError","patternError","patternPropertiesError","requiredPropertyError","undefinedValueError","uniqueItemsError","valueNotEmptyError","validUrl","isValidDateTime","isValidIPV4","isValidIPV6","FormatValidation","Date","email","hostname","ipv4","ipv6","uri","isUri","isWebUri","FPP","KeywordValidation","receivedProperties","prop","expectedProperties","pattern","subSchema","dependencies","dependencyErrors","dependency","missingProperty","valueStr","itemData","itemSchema","itemErrors","maximum","isNaN","exclusiveMaximum","maxItems","maxLength","lengthOfString","maxProperties","propertyCount","minLength","minimum","exclusiveMinimum","minProperties","multipleOf","description","patternExample","pp","expr","patternSchema","patternFound","valErrors","keyErrors","propertiesRequired","required","requiredNotEmpty","uniqueItems","itemPointer","duplicatePointer","TypeValidation","reset","factory","chalk","_typeof","iterator","constructor","classCallCheck","instance","Constructor","createClass","props","descriptor","protoProps","staticProps","receiver","desc","getter","inherits","subClass","superClass","setPrototypeOf","__proto__","possibleConstructorReturn","ReferenceError","slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","done","err","toConsumableArray","arr2","from","Processor","selfOptions","pipes","_options","pipe","pipeArg","processor","process","input","nextPipe","lastPipe","lastContext","nextAfterChildren","hasResult","Pipe","filters","debug","filterName","exiting","resultCheck","msg","append","_filters","prepend","_filters2","after","before","clear","shouldHaveResult","should","noResult","Context","setResult","exit","switchTo","child","childName","children","cloneRegExp","re","regexMatch","exec","getTime","cloned","DiffContext","_Context","left","right","cloneDiffValues","clone$$1","PatchContext","delta","ReverseContext","isArray$1","diffFilter","trivialMatchesDiffFilter","leftType","rightType","leftIsArray","rightIsArray","patchFilter","trivialMatchesPatchFilter","nested","regexArgs","reverseFilter","trivialReferseFilter","collectChildrenDiffFilter","_t","objectsDiffFilter","propertyFilter","patchFilter$1","nestedPatchFilter","collectChildrenPatchFilter","reverseFilter$1","nestedReverseFilter","collectChildrenReverseFilter","defaultMatch","array1","array2","index1","index2","lengthMatrix","len1","len2","matrix","backtrack","sequence","indices1","indices2","subsequence","get$1","innerContext","lcs","ARRAY_MOVE","isArray$2","arrayIndexOf","arraysHaveMatchByRef","val1","val2","matchItems","value1","value2","objectHash","matchByPosition","hash1","hash2","hashCache1","hashCache2","diffFilter$1","arraysDiffFilter","matchContext","commonHead","commonTail","trimmed1","trimmed2","seq","removedItems","detectMove","arrays","includeValueOnMove","removedItemsLength","indexOnArray2","isMove","removeItemIndex1","compare","numerically","numericallyBy","patchFilter$2","toRemove","toInsert","toModify","sort","indexDiff","removedValue","toInsertLength","insertion","toModifyLength","modification","collectChildrenPatchFilter$1","reverseFilter$2","arraysReverseFilter","newName","substr","reverseArrayDeltaIndex","itemDelta","reverseIndex","deltaIndex","deltaItem","moveFromIndex","moveToIndex","deleteIndex","collectChildrenReverseFilter$1","diffFilter$2","datesDiffFilter","createCommonjsModule","diffMatchPatch","diff_match_patch","Diff_Timeout","Diff_EditCost","Match_Threshold","Match_Distance","Patch_DeleteThreshold","Patch_Margin","Match_MaxBits","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","diff_main","text1","text2","opt_checklines","opt_deadline","MAX_VALUE","deadline","checklines","commonlength","diff_commonPrefix","commonprefix","diff_commonSuffix","commonsuffix","diffs","diff_compute_","diff_cleanupMerge","longtext","shorttext","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","diff_lineMode_","diff_bisect_","diff_linesToChars_","chars1","chars2","linearray","lineArray","diff_charsToLines_","diff_cleanupSemantic","count_delete","count_insert","text_delete","text_insert","text1_length","text2_length","max_d","ceil","v_offset","v_length","v1","v2","front","k1start","k1end","k2start","k2end","k1","k1_offset","x1","y1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","text1a","text2a","text1b","text2b","diffsb","lineHash","diff_linesToCharsMunge_","text","chars","lineStart","lineEnd","lineArrayLength","line","fromCharCode","pointermin","pointermax","pointermid","pointerstart","floor","pointerend","diff_commonOverlap_","text_length","best","dmp","diff_halfMatchI_","seed","best_common","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastequality","length_insertions1","length_deletions1","length_insertions2","length_deletions2","diff_cleanupSemanticLossless","deletion","overlap_length1","overlap_length2","diff_cleanupSemanticScore_","two","char1","char2","nonAlphaNumeric1","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diff_cleanupEfficiency","pre_ins","pre_del","post_ins","post_del","diff_xIndex","loc","last_chars1","last_chars2","diff_prettyHtml","html","pattern_amp","pattern_lt","pattern_gt","pattern_para","op","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","diff_toDelta","encodeURI","diff_fromDelta","diffsLength","tokens","param","decodeURI","ex","match_main","match_bitap_","match_alphabet_","match_bitapScore_","accuracy","proximity","abs","score_threshold","best_loc","lastIndexOf","matchmask","bin_min","bin_mid","bin_max","last_rd","start","finish","rd","charMatch","patch_addContext_","patch","start2","length1","padding","prefix","suffix","start1","length2","patch_make","opt_b","opt_c","patches","patch_obj","patchDiffLength","char_count1","char_count2","prepatch_text","postpatch_text","diff_type","diff_text","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","results","expected_loc","start_loc","end_loc","mod","paddingLength","extraLength","patch_size","bigpatch","precontext","empty","postcontext","patch_toText","patch_fromText","textline","textPointer","patchHeader","sign","coords1","coords2","TEXT_DIFF","DEFAULT_MIN_LENGTH","cachedDiffPatch","getDiffMatchPatch","diff_match_patch_not_found","diff","txt1","txt2","_patch","_error","textPatchFailed","diffFilter$3","textsDiffFilter","textDiff","diffMatchPatch$$1","patchFilter$3","textsPatchFilter","textDeltaReverse","lines","lineTmp","header","headerRegex","lineHeader","reverseFilter$3","textsReverseFilter","DiffPatcher","_processor","reverse","unpatch","isArray$3","getObjectKeys","names","trimUnderscore","arrayKeyToSortNumber","arrayKeyComparer","key1","key2","BaseFormatter","prepareContext","recurse","finalize","buffer","out","_buffer","typeFormattterNotFound","deltaType","typeFormattterErrorFormatter","leftKey","movedFrom","isLast","useMoveOriginHere","leftValue","getDeltaType","nodeType","nodeBegin","rootBegin","typeFormattter","nodeEnd","rootEnd","formatDeltaChildren","forEachDeltaKey","arrayKeys","moveDestinations","includeMoveDestinations","parseTextDiff","lineOutput","pieces","location","chr","pieceIndex","piecesLength","piece","pieceOutput","freeze","HtmlFormatter","_BaseFormatter","formatValue","htmlEscape","formatTextDiffString","nodeClass","hasArrows","adjustArrows","format_unchanged","format_movedestination","format_node","format_added","format_modified","format_deleted","format_moved","format_textdiff","replacements","jsondiffpatchHtmlFormatterAdjustArrows","nodeArg","node","getElementText","textContent","innerText","eachByQuery","el","elems","querySelectorAll","eachChildren","_ref3","parentNode","style","arrowParent","svg","path","display","querySelector","container","destinationElem","getAttribute","distance","offsetTop","top","curve","round","showUnchanged","show","delay","body","classes","showing","hiding","visible","hidden","classList","add","setTimeout","intervalId","setInterval","clearInterval","hideUnchanged","defaultInstance","AnnotatedFormatter","indent","levels","indentLevel","indentPad","row","json","htmlNote","wrapPropertyName","deltaAnnotations","added","formatLegend","modified","deleted","moved","textdiff","formatAnyChange","annotator","defaultInstance$1","format$1","annotated","OPERATIONS","move","JSONFormatter","pushCurrentOp","currentPath","pushMoveOp","to","toPath","last","sortBy","pred","compareByIndexDesc","indexA","indexB","lastA","lastB","opsByDescendingOrder","removeOps","splitA","splitB","partitionOps","fns","initArr","fill","position","acc","isMoveOp","isRemoveOp","_ref4","reorderOps","_partitionOps","_partitionOps2","moveOps","removedOps","restOps","removeOpsReverse","defaultInstance$2","format$2","jsonpatch","chalkColor","args","colors","movedestination","unchanged","textDiffLine","ConsoleFormatter","outLine","_len2","_key2","color","pushColor","popColor","defaultInstance$3","format$3","log$1","console$1","dateReviver","parts","UTC","defaultInstance$4","clone$1","formatters","getClassNames","attrs","classNames","theme","THEME_DEFAULT","raised","view","vnode","defaultFormOptions","getErrorClass","Label","Button","Errors","checked","onchange","onfocus","onblur","defaultOptions","title","placeholder","invertOrder","Checkbox","isVNode","tag","severity","trust","RATIO_DEFAULT","getRatioStyleProperty","ratio","getRatio","toFixed","dim","parseFloat","MetaDescription","isEmpty","InlineImage","maxRatio","oncreate","onload","ImagePreview","updateRatio","overflowContainer","ratioMax","ratioImg","paddingBottom","hasOverflow","asBackgroundImage","onclick","event","currentTarget","content","dom","hasFocus","_b","_c","inputAttributes","oninput","updateEvent","instantUpdate","TYPES","InputForm","$form","updateClasses","hasValue","contains","inputType","focusClass","errorClass","emptyClass","Input","sanitizeValue","intValue","floatValue","getParentByClassname","targetClass","displayRenderer","valueProp","selectedIndex","onSelect","onHover","fragment","onmousedown","findIndex","dataset","onmouseenter","Popover","onmount","onremove","removeChild","hide","targetElement","bound","getBoundingClientRect","setProperty","placeBelow","placeAbove","offsetParent","scrollY","documentElement","scrollTop","scrollX","scrollLeft","bottom","scrollHeight","offset","trim","raf","requestAnimationFrame","isListOfItems","suggestions","isGetFunction","currentIndex","showCurrentInput","resizeTimer","updateFilter","getSuggestions","updateCompletions","search","searchProp","popover","List","updateSelection","stopPropagation","preventDefault","blur","onkeydown","onkeyup","ignoreKeys","panel","DEFAULT_LIMIT","haystack","needle","limit","lowerCaseNeedle","byPosition","aIndex","bIndex","regStartsWith","regContains","QueryList","buttons","_vnode","$container","option","icon","label","button","toggle","RadioButtons","isOptionValue","transformOptions","activeClass","$wrapper","$icon","Select","Switch","emptyFunction","onupdate","autosize","update","rows","onbeforeremove","focus","textarea","textareaAttributes","destroy","Textarea","Map","_delete","createEvent","Event","bubbles","evt","initEvent","assign","ta","nodeName","heightOffset","clientWidth","cachedHeight","getComputedStyle","resize","boxSizing","paddingTop","borderTopWidth","borderBottomWidth","changeOverflow","offsetWidth","overflowY","getParentOverflows","Element","overflows","docTop","styleHeight","computed","actualHeight","offsetHeight","dispatchEvent","pageResize","removeEventListener","overflowX","wordWrap","methods","createNanoEvents","events","emit","on","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","len","nextTick","Item","browser","env","argv","version","versions","noop","addListener","once","off","removeListener","removeAllListeners","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","_defineProperty","_extends","_objectSpread","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","iter","userAgent","navigator","IE11OrLess","Edge","FireFox","Safari","IOS","ChromeForAndroid","captureMode","capture","passive","selector","msMatchesSelector","webkitMatchesSelector","getParentOrHost","host","closest","ctx","includeCTX","R_SPACE","toggleClass","className","css","defaultView","currentStyle","selfOnly","appliedTransforms","transform","matrixFn","DOMMatrix","WebKitCSSMatrix","CSSMatrix","MSCSSMatrix","tagName","getElementsByTagName","getWindowScrollingElement","scrollingElement","getRect","relativeToContainingBlock","relativeToNonStaticParent","undoScale","elRect","innerHeight","innerWidth","containerRect","elMatrix","scaleX","scaleY","isScrolledPast","elSide","parentSide","getParentAutoScrollElement","elSideVal","parentSideVal","getChild","childNum","currentChild","Sortable","ghost","dragged","draggable","lastChild","lastElementChild","previousElementSibling","toUpperCase","getRelativeScrollOffset","offsetLeft","winScroller","indexOfObject","includeSelf","elem","gotSelf","scrollWidth","clientHeight","elemCSS","extend","dst","isRectEqual","rect1","rect2","_throttleTimeout","throttle","ms","cancelThrottle","scrollBy","Polymer","$","jQuery","Zepto","cloneNode","setRect","rect","unsetRect","expando","AnimationStateManager","animationStates","animationCallbackId","captureAnimationState","animation","fromRect","thisAnimationDuration","childMatrix","addAnimationState","removeAnimationState","animateAll","animating","animationTime","time","toRect","prevFromRect","prevToRect","animatingRect","targetMatrix","calculateRealTime","animate","animationResetTimer","currentRect","translateX","translateY","animatingX","animatingY","repaint","easing","animated","sqrt","pow","defaults","initializeByDefault","PluginManager","mount","pluginEvent","eventName","sortable","eventCanceled","cancel","eventNameGlobal","pluginName","initializePlugins","initialized","modifyOption","getEventProperties","eventProperties","modifiedValue","optionListeners","rootEl","targetEl","cloneEl","toEl","fromEl","oldIndex","newIndex","oldDraggableIndex","newDraggableIndex","originalEvent","putSortable","extraEventProperties","onName","CustomEvent","cancelable","pullMode","lastPutMode","allEventProperties","dragEl","parentEl","ghostEl","nextEl","lastDownEl","cloneHidden","dragStarted","activeSortable","active","hideGhostForTarget","_hideGhostForTarget","unhideGhostForTarget","_unhideGhostForTarget","cloneNowHidden","cloneNowShown","dispatchSortableEvent","_dispatchEvent","info","activeGroup","awaitingDragStarted","ignoreNextClick","sortables","tapEvt","touchEvt","lastDx","lastDy","tapDistanceLeft","tapDistanceTop","lastTarget","lastDirection","pastFirstInvertThresh","isCircumstantialInvert","targetMoveDistance","ghostRelativeParent","ghostRelativeParentInitialScroll","_silent","savedInputChecked","documentExists","PositionGhostAbsolutely","CSSFloatProperty","supportDraggable","supportCssPointerEvents","cssText","pointerEvents","_detectDirection","elCSS","elWidth","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","child1","child2","firstChildCSS","secondChildCSS","firstChildWidth","marginLeft","marginRight","secondChildWidth","flexDirection","gridTemplateColumns","touchingSideChild2","_dragElInRowColumn","dragRect","targetRect","vertical","dragElS1Opp","dragElS2Opp","dragElOppLength","targetS1Opp","targetS2Opp","targetOppLength","_detectNearestEmptySortable","ret","threshold","emptyInsertThreshold","insideHorizontally","insideVertically","_prepareGroup","toFn","pull","sameGroup","otherGroup","originalGroup","checkPull","checkPut","put","revertClone","stopImmediatePropagation","nearestEmptyInsertDetectEvent","touches","nearest","clientX","clientY","_onDragOver","_checkOutsideTargetEl","_isOutsideThisEl","handle","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","ghostClass","chosenClass","dragClass","ignore","preventOnFilter","setData","dataTransfer","dropBubble","dragoverBubble","dataIdAttr","delayOnTouchOnly","touchStartThreshold","devicePixelRatio","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","nativeDraggable","_onTapStart","_getDirection","touch","pointerType","originalTarget","shadowRoot","composedPath","_saveInputCheckedState","isContentEditable","criteria","_prepareDragStart","ownerDocument","dragStartFn","nextSibling","_lastX","_lastY","_onDrop","_disableDelayedDragEvents","_triggerDragStart","_disableDraggable","_disableDelayedDrag","_delayedDragTouchMoveHandler","_dragStartTimer","_onTouchMove","_onDragStart","selection","_nextTick","getSelection","removeAllRanges","_dragStarted","_appendGhost","_nulling","_emulateDragOver","elementFromPoint","inserted","ghostMatrix","relativeScrollOffset","dx","dy","cssMatrix","_hideClone","cloneId","insertBefore","_loopId","effectAllowed","_dragStartId","revert","isOwner","canSort","fromSortable","completedFired","dragOverEvent","axis","completed","onMove","_onMove","changed","_showClone","_ignoreWhileAnimating","elLastChild","_ghostIsLast","targetBeforeFirstSwap","differentLevel","differentRowCol","side1","scrolledPastTop","scrollBefore","_getSwapDirection","sibling","dragIndex","nextElementSibling","moveVector","_unsilent","_offMoveEvents","_offUpEvents","_cancelNextTick","save","handleEvent","_globalDragOver","toArray","order","_generateId","closest$1","removeAttribute","dropEffect","willInsertAfter","onMoveFn","retVal","draggedRect","related","relatedRect","spacer","isLastTarget","mouseOnAxis","targetLength","targetS1","targetS2","invert","_getInsertDirection","href","sum","inputs","idx","is","cancelNextTick","detectDirection","autoScrolls","scrollEl","scrollRootEl","scrolling","lastAutoScrollX","lastAutoScrollY","touchEvt$1","pointerElemChangedInterval","AutoScrollPlugin","AutoScroll","scroll","scrollSensitivity","scrollSpeed","bubbleScroll","_handleAutoScroll","_handleFallbackAutoScroll","dragOverCompleted","dragOverBubble","drop","clearPointerElemChangedInterval","clearAutoScrolls","nulling","autoScroll","ogElemScroller","newElem","pid","isFallback","sens","speed","scrollThisInstance","scrollCustomFn","scrollFn","layersOut","currentParent","canScrollX","canScrollY","scrollPosX","scrollPosY","vx","vy","layer","scrollOffsetY","scrollOffsetX","toSortable","changedTouches","onSpill","Revert","startIndex","dragStart","Remove","parentSortable","lastSwapEl","SwapPlugin","Swap","swapClass","dragOverValid","swap","prevSwapEl","swapNodes","swapItem","n1","n2","p1","p2","i1","i2","isEqualNode","multiDragElements","multiDragClones","lastMultiDragSelect","multiDragSortable","initialFolding","folding","dragEl$1","clonesFromRect","clonesHidden","MultiDragPlugin","MultiDrag","_deselectMultiDrag","_checkKeyDown","_checkKeyUp","selectedClass","multiDragKey","multiDragElement","multiDragKeyDown","isMultiDrag","delayStartGlobal","delayEnded","setupClone","sortableIndex","insertMultiDragClones","showClone","hideClone","_ref5","dragStartGlobal","_ref6","multiDrag","_ref7","_this2","removeMultiDragElements","dragOver","_ref8","_ref9","insertMultiDragElements","_ref10","dragRectAbsolute","clonesHiddenBefore","dragOverAnimationCapture","_ref11","dragMatrix","dragOverAnimationComplete","_ref12","originalEvt","shiftKey","lastIndex","multiDragIndex","nullingGlobal","destroyGlobal","select","deselect","_this3","oldIndicies","newIndicies","clones","clonesInserted","elementsInserted","is_uri","is_iri","is_http_uri","is_http_iri","is_https_uri","is_https_iri","is_web_uri","is_web_iri","isHttpUri","isHttpsUri","splitUri","splitted","scheme","authority","allowHttps","port","webpackPolyfill","paths"],"mappings":"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","file":"editron-modules.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","module.exports = __webpack_public_path__ + \"editron.css\";","/**\n * Editron-Core. Depending on your build setup, use\n *\n * ```js\n * import { Controller } from \"editron\";\n * // or\n * const Controller = require(\"editron\").Controller;\n * ```\n *\n * to get the editron core entry point for a enjoyable formular world\n *\n * @type exported methods and utilities\n * @property Controller    - the main Editron-Class you want to start all form applications\n * @property components        - mithril components, for default html-generation of headers and containers\n * @property editors           - basic editron editors for object, array and simple value reprensentation\n * @property services          - services to work on data, json-schema, validation and more\n * @property utils             - utility functions, to generate ids, translate strings and resolve editors\n * @property plugin            - basic plugin implementation for editor registration\n */\nimport Controller from \"./src/Controller\";\n\nexport default Controller;\nexport * as components from \"./src/components\";\nexport * as utils from \"./src/utils\";\n// types\nexport type { Editor, EditorPlugin, Options } from \"./src/editors/Editor\";\nexport type { EditorUpdateEvent } from \"./src/editors/Editor\";\nexport type { ValidationError, EditronConfigAttrs, FormatValidator, KeywordValidator, JSONSchema } from \"./src/types\";\nexport type { Direction } from \"./src/utils/selection\";\n// editors\nexport { default as AbstractEditor } from \"./src/editors/AbstractEditor\";\nexport { default as AbstractValueEditor } from \"./src/editors/AbstractValueEditor\";\nexport { default as ArrayEditor } from \"./src/editors/arrayeditor\";\nexport { default as ObjectEditor } from \"./src/editors/objecteditor\";\nexport { default as OneOfEditor } from \"./src/editors/oneofeditor\";\nexport { default as ValueEditor } from \"./src/editors/valueeditor\";\nexport { default as AutocompleteEditor } from \"./src/editors/autocompleteeditor\";\n// services\nexport { default as DataService } from \"./src/services/dataservice\";\nexport { default as LocationService } from \"./src/services/LocationService\";\nexport { default as SchemaService } from \"./src/services/SchemaService\";\nexport { default as ValidationService } from \"./src/services/ValidationService\";\nexport { default as OverlayService } from \"./src/services/OverlayService\";\nexport { default as SessionService } from \"./src/services/SessionService\";\n// plugins\nexport { default as plugin } from \"./src/plugin\";\nexport { default as DelegationPlugin } from \"./src/plugin/delegationplugin\";\nexport { default as RemoteDataPlugin } from \"./src/plugin/remotedataplugin\";\nexport { default as SelectionPlugin } from \"./src/plugin/selectionplugin\";\nexport { default as SortablePlugin } from \"./src/plugin/sortableplugin\";\nexport { default as SyncPlugin } from \"./src/plugin/syncplugin\";\n","import { Validation } from '../typings'\n\n/**\n * validate\n *\n * takes an array of arrays of validations and\n * throws if an error occurs\n */\nconst validate = (validations: Validation[]): void => {\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tfor (const validation of validations) {\n\t\t\tconst condition = validation[0]\n\t\t\tconst errorMessage = validation[1]\n\t\t\tif (condition) {\n\t\t\t\tthrow new Error(errorMessage)\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default validate\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","import * as R from '../typings'\n\n/**\n * Dispatch Plugin\n *\n * generates dispatch[modelName][actionName]\n */\nconst dispatchPlugin: R.Plugin = {\n\texposed: {\n\t\t// required as a placeholder for store.dispatch\n\t\tstoreDispatch(action: R.Action, state: any) {\n\t\t\tconsole.warn('Warning: store not yet loaded')\n\t\t},\n\n\t\tstoreGetState() {\n\t\t\tconsole.warn('Warning: store not yet loaded')\n\t\t},\n\n\t\t/**\n\t\t * dispatch\n\t\t *\n\t\t * both a function (dispatch) and an object (dispatch[modelName][actionName])\n\t\t * @param action R.Action\n\t\t */\n\t\tdispatch(action: R.Action) {\n\t\t\treturn this.storeDispatch(action)\n\t\t},\n\n\t\t/**\n\t\t * createDispatcher\n\t\t *\n\t\t * genereates an action creator for a given model & reducer\n\t\t * @param modelName string\n\t\t * @param reducerName string\n\t\t */\n\t\tcreateDispatcher(modelName: string, reducerName: string) {\n\t\t\treturn async (payload?: any, meta?: any): Promise<any> => {\n\t\t\t\tconst action: R.Action = { type: `${modelName}/${reducerName}` }\n\t\t\t\tif (typeof payload !== 'undefined') {\n\t\t\t\t\taction.payload = payload\n\t\t\t\t}\n\t\t\t\tif (typeof meta !== 'undefined') {\n\t\t\t\t\taction.meta = meta\n\t\t\t\t}\n\t\t\t\treturn this.dispatch(action)\n\t\t\t}\n\t\t},\n\t},\n\n\t// access store.dispatch after store is created\n\tonStoreCreated(store: any) {\n\t\tthis.storeDispatch = store.dispatch\n\t\tthis.storeGetState = store.getState\n\t\treturn { dispatch: this.dispatch }\n\t},\n\n\t// generate action creators for all model.reducers\n\tonModel(model: R.Model) {\n\t\tthis.dispatch[model.name] = {}\n\t\tif (!model.reducers) {\n\t\t\treturn\n\t\t}\n\t\tfor (const reducerName of Object.keys(model.reducers)) {\n\t\t\tthis.validate([\n\t\t\t\t[\n\t\t\t\t\t!!reducerName.match(/\\/.+\\//),\n\t\t\t\t\t`Invalid reducer name (${model.name}/${reducerName})`,\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\ttypeof model.reducers[reducerName] !== 'function',\n\t\t\t\t\t`Invalid reducer (${model.name}/${reducerName}). Must be a function`,\n\t\t\t\t],\n\t\t\t])\n\t\t\tthis.dispatch[model.name][reducerName] = this.createDispatcher.apply(\n\t\t\t\tthis,\n\t\t\t\t[model.name, reducerName]\n\t\t\t)\n\t\t}\n\t},\n}\n\nexport default dispatchPlugin\n","/* tslint-disable member-ordering */\nimport * as R from '../typings'\n\n/**\n * Effects Plugin\n *\n * Plugin for handling async actions\n */\nconst effectsPlugin: R.Plugin = {\n\texposed: {\n\t\t// expose effects for access from dispatch plugin\n\t\teffects: {},\n\t},\n\n\t// add effects to dispatch so that dispatch[modelName][effectName] calls an effect\n\tonModel(model: R.Model): void {\n\t\tif (!model.effects) {\n\t\t\treturn\n\t\t}\n\n\t\tconst effects =\n\t\t\ttypeof model.effects === 'function'\n\t\t\t\t? model.effects(this.dispatch)\n\t\t\t\t: model.effects\n\n\t\tfor (const effectName of Object.keys(effects)) {\n\t\t\tthis.validate([\n\t\t\t\t[\n\t\t\t\t\t!!effectName.match(/\\//),\n\t\t\t\t\t`Invalid effect name (${model.name}/${effectName})`,\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\ttypeof effects[effectName] !== 'function',\n\t\t\t\t\t`Invalid effect (${model.name}/${effectName}). Must be a function`,\n\t\t\t\t],\n\t\t\t])\n\t\t\tthis.effects[`${model.name}/${effectName}`] = effects[effectName].bind(\n\t\t\t\tthis.dispatch[model.name]\n\t\t\t)\n\t\t\t// add effect to dispatch\n\t\t\t// is assuming dispatch is available already... that the dispatch plugin is in there\n\t\t\tthis.dispatch[model.name][effectName] = this.createDispatcher.apply(\n\t\t\t\tthis,\n\t\t\t\t[model.name, effectName]\n\t\t\t)\n\t\t\t// tag effects so they can be differentiated from normal actions\n\t\t\tthis.dispatch[model.name][effectName].isEffect = true\n\t\t}\n\t},\n\n\t// process async/await actions\n\tmiddleware(store) {\n\t\treturn next => async (action: R.Action) => {\n\t\t\t// async/await acts as promise middleware\n\t\t\tif (action.type in this.effects) {\n\t\t\t\tawait next(action)\n\t\t\t\treturn this.effects[action.type](\n\t\t\t\t\taction.payload,\n\t\t\t\t\tstore.getState(),\n\t\t\t\t\taction.meta\n\t\t\t\t)\n\t\t\t}\n\t\t\treturn next(action)\n\t\t}\n\t},\n}\n\nexport default effectsPlugin\n","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","import * as Redux from 'redux'\nimport * as R from './typings'\nimport isListener from './utils/isListener'\n\nconst composeEnhancersWithDevtools = (\n\tdevtoolOptions: R.DevtoolOptions = {}\n): any => {\n\tconst { disabled, ...options } = devtoolOptions\n\t/* istanbul ignore next */\n\treturn !disabled &&\n\t\ttypeof window === 'object' &&\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n\t\t? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(options)\n\t\t: Redux.compose\n}\n\nexport default function({\n\tredux,\n\tmodels,\n}: {\n\tredux: R.ConfigRedux\n\tmodels: R.Model[]\n}) {\n\tconst combineReducers = redux.combineReducers || Redux.combineReducers\n\tconst createStore: Redux.StoreCreator = redux.createStore || Redux.createStore\n\tconst initialState: any =\n\t\ttypeof redux.initialState !== 'undefined' ? redux.initialState : {}\n\n\tthis.reducers = redux.reducers\n\n\t// combine models to generate reducers\n\tthis.mergeReducers = (nextReducers: R.ModelReducers = {}) => {\n\t\t// merge new reducers with existing reducers\n\t\tthis.reducers = { ...this.reducers, ...nextReducers }\n\t\tif (!Object.keys(this.reducers).length) {\n\t\t\t// no reducers, just return state\n\t\t\treturn (state: any) => state\n\t\t}\n\t\treturn combineReducers(this.reducers)\n\t}\n\n\tthis.createModelReducer = (model: R.Model) => {\n\t\tconst modelBaseReducer = model.baseReducer\n\t\tconst modelReducers = {}\n\t\tfor (const modelReducer of Object.keys(model.reducers || {})) {\n\t\t\tconst action = isListener(modelReducer)\n\t\t\t\t? modelReducer\n\t\t\t\t: `${model.name}/${modelReducer}`\n\t\t\tmodelReducers[action] = model.reducers[modelReducer]\n\t\t}\n\t\tconst combinedReducer = (state: any = model.state, action: R.Action) => {\n\t\t\t// handle effects\n\t\t\tif (typeof modelReducers[action.type] === 'function') {\n\t\t\t\treturn modelReducers[action.type](state, action.payload, action.meta)\n\t\t\t}\n\t\t\treturn state\n\t\t}\n\n\t\tthis.reducers[model.name] = !modelBaseReducer\n\t\t\t? combinedReducer\n\t\t\t: (state: any, action: R.Action) =>\n\t\t\t\t\tcombinedReducer(modelBaseReducer(state, action), action)\n\t}\n\t// initialize model reducers\n\tfor (const model of models) {\n\t\tthis.createModelReducer(model)\n\t}\n\n\tthis.createRootReducer = (\n\t\trootReducers: R.RootReducers = {}\n\t): Redux.Reducer<any, R.Action> => {\n\t\tconst mergedReducers: Redux.Reducer<any> = this.mergeReducers()\n\t\tif (Object.keys(rootReducers).length) {\n\t\t\treturn (state, action) => {\n\t\t\t\tconst rootReducerAction = rootReducers[action.type]\n\t\t\t\tif (rootReducers[action.type]) {\n\t\t\t\t\treturn mergedReducers(rootReducerAction(state, action), action)\n\t\t\t\t}\n\t\t\t\treturn mergedReducers(state, action)\n\t\t\t}\n\t\t}\n\t\treturn mergedReducers\n\t}\n\n\tconst rootReducer = this.createRootReducer(redux.rootReducers)\n\n\tconst middlewares = Redux.applyMiddleware(...redux.middlewares)\n\tconst enhancers = composeEnhancersWithDevtools(redux.devtoolOptions)(\n\t\t...redux.enhancers,\n\t\tmiddlewares\n\t)\n\n\tthis.store = createStore(rootReducer, initialState, enhancers)\n\n\treturn this\n}\n","/**\n * isListener\n *\n * determines if an action is a listener on another model\n */\nexport default (reducer: string): boolean => reducer.indexOf('/') > -1\n","import pluginFactory from './pluginFactory'\nimport dispatchPlugin from './plugins/dispatch'\nimport effectsPlugin from './plugins/effects'\nimport createRedux from './redux'\nimport * as R from './typings'\nimport validate from './utils/validate'\n\nconst corePlugins: R.Plugin[] = [dispatchPlugin, effectsPlugin]\n\n/**\n * Rematch class\n *\n * an instance of Rematch generated by \"init\"\n */\nexport default class Rematch {\n\tprotected config: R.Config\n\tprotected models: R.Model[]\n\tprivate plugins: R.Plugin[] = []\n\tprivate pluginFactory: R.PluginFactory\n\n\tconstructor(config: R.Config) {\n\t\tthis.config = config\n\t\tthis.pluginFactory = pluginFactory(config)\n\t\tfor (const plugin of corePlugins.concat(this.config.plugins)) {\n\t\t\tthis.plugins.push(this.pluginFactory.create(plugin))\n\t\t}\n\t\t// preStore: middleware, model hooks\n\t\tthis.forEachPlugin('middleware', middleware => {\n\t\t\tthis.config.redux.middlewares.push(middleware)\n\t\t})\n\t}\n\tpublic forEachPlugin(method: string, fn: (content: any) => void) {\n\t\tfor (const plugin of this.plugins) {\n\t\t\tif (plugin[method]) {\n\t\t\t\tfn(plugin[method])\n\t\t\t}\n\t\t}\n\t}\n\tpublic getModels(models: R.Models): R.Model[] {\n\t\treturn Object.keys(models).map((name: string) => ({\n\t\t\tname,\n\t\t\t...models[name],\n\t\t\treducers: models[name].reducers || {},\n\t\t}))\n\t}\n\tpublic addModel(model: R.Model) {\n\t\tvalidate([\n\t\t\t[!model, 'model config is required'],\n\t\t\t[typeof model.name !== 'string', 'model \"name\" [string] is required'],\n\t\t\t[\n\t\t\t\tmodel.state === undefined && model.baseReducer === undefined,\n\t\t\t\t'model \"state\" is required',\n\t\t\t],\n\t\t\t[\n\t\t\t\tmodel.baseReducer !== undefined &&\n\t\t\t\t\ttypeof model.baseReducer !== 'function',\n\t\t\t\t'model \"baseReducer\" must be a function',\n\t\t\t],\n\t\t])\n\t\t// run plugin model subscriptions\n\t\tthis.forEachPlugin('onModel', onModel => onModel(model))\n\t}\n\tpublic init() {\n\t\t// collect all models\n\t\tthis.models = this.getModels(this.config.models)\n\t\tfor (const model of this.models) {\n\t\t\tthis.addModel(model)\n\t\t}\n\t\t// create a redux store with initialState\n\t\t// merge in additional extra reducers\n\t\tconst redux = createRedux.call(this, {\n\t\t\tredux: this.config.redux,\n\t\t\tmodels: this.models,\n\t\t})\n\n\t\tconst rematchStore = {\n\t\t\tname: this.config.name,\n\t\t\t...redux.store,\n\t\t\t// dynamic loading of models with `replaceReducer`\n\t\t\tmodel: (model: R.Model) => {\n\t\t\t\tthis.addModel(model)\n\t\t\t\tredux.mergeReducers(redux.createModelReducer(model))\n\t\t\t\tredux.store.replaceReducer(\n\t\t\t\t\tredux.createRootReducer(this.config.redux.rootReducers)\n\t\t\t\t)\n\t\t\t\tredux.store.dispatch({ type: '@@redux/REPLACE ' })\n\t\t\t},\n\t\t}\n\n\t\tthis.forEachPlugin('onStoreCreated', onStoreCreated => {\n\t\t\tconst returned = onStoreCreated(rematchStore)\n\t\t\t// if onStoreCreated returns an object value\n\t\t\t// merge its returned value onto the store\n\t\t\tif (returned) {\n\t\t\t\tObject.keys(returned || {}).forEach(key => {\n\t\t\t\t\trematchStore[key] = returned[key]\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\n\t\treturn rematchStore\n\t}\n}\n","import * as R from './typings'\nimport validate from './utils/validate'\n\n/**\n * PluginFactory\n *\n * makes Plugin objects extend and inherit from a root PluginFactory\n */\nexport default (config: R.Config) => ({\n\tconfig,\n\t/**\n\t * validate\n\t *\n\t * bind validate to the store for easy access\n\t */\n\tvalidate,\n\n\t/**\n\t * create plugin\n\t *\n\t * binds plugin properties and functions to an instance of PluginFactorys\n\t * @param plugin\n\t */\n\tcreate(plugin: R.Plugin): R.Plugin {\n\t\tvalidate([\n\t\t\t[\n\t\t\t\tplugin.onStoreCreated && typeof plugin.onStoreCreated !== 'function',\n\t\t\t\t'Plugin onStoreCreated must be a function',\n\t\t\t],\n\t\t\t[\n\t\t\t\tplugin.onModel && typeof plugin.onModel !== 'function',\n\t\t\t\t'Plugin onModel must be a function',\n\t\t\t],\n\t\t\t[\n\t\t\t\tplugin.middleware && typeof plugin.middleware !== 'function',\n\t\t\t\t'Plugin middleware must be a function',\n\t\t\t],\n\t\t])\n\n\t\tif (plugin.onInit) {\n\t\t\tplugin.onInit.call(this)\n\t\t}\n\n\t\tconst result: R.Plugin | any = {}\n\n\t\tif (plugin.exposed) {\n\t\t\tfor (const key of Object.keys(plugin.exposed)) {\n\t\t\t\tthis[key] =\n\t\t\t\t\ttypeof plugin.exposed[key] === 'function'\n\t\t\t\t\t\t? plugin.exposed[key].bind(this) // bind functions to plugin class\n\t\t\t\t\t\t: Object.create(plugin.exposed[key]) // add exposed to plugin class\n\t\t\t}\n\t\t}\n\t\tfor (const method of ['onModel', 'middleware', 'onStoreCreated']) {\n\t\t\tif (plugin[method]) {\n\t\t\t\tresult[method] = plugin[method].bind(this)\n\t\t\t}\n\t\t}\n\t\treturn result\n\t},\n})\n","/**\n * deprecate\n *\n * handles deprecation warnings in development\n */\nexport default (warning: string): void => {\n\tconsole.warn(warning)\n}\n","import * as R from '../typings'\nimport validate from './validate'\n\nconst merge = (original: any, next: any): any => {\n\treturn next ? { ...next, ...(original || {}) } : original || {}\n}\n\nconst isObject = (obj: object): boolean =>\n\tArray.isArray(obj) || typeof obj !== 'object'\n\n/**\n * mergeConfig\n *\n * merge init configs together\n */\nexport default (initConfig: R.InitConfig & { name: string }): R.Config => {\n\tconst config: R.Config = {\n\t\tname: initConfig.name,\n\t\tmodels: {},\n\t\tplugins: [],\n\t\t...initConfig,\n\t\tredux: {\n\t\t\treducers: {},\n\t\t\trootReducers: {},\n\t\t\tenhancers: [],\n\t\t\tmiddlewares: [],\n\t\t\t...initConfig.redux,\n\t\t\tdevtoolOptions: {\n\t\t\t\tname: initConfig.name,\n\t\t\t\t...(initConfig.redux && initConfig.redux.devtoolOptions\n\t\t\t\t\t? initConfig.redux.devtoolOptions\n\t\t\t\t\t: {}),\n\t\t\t},\n\t\t},\n\t}\n\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tvalidate([\n\t\t\t[!Array.isArray(config.plugins), 'init config.plugins must be an array'],\n\t\t\t[isObject(config.models), 'init config.models must be an object'],\n\t\t\t[\n\t\t\t\tisObject(config.redux.reducers),\n\t\t\t\t'init config.redux.reducers must be an object',\n\t\t\t],\n\t\t\t[\n\t\t\t\t!Array.isArray(config.redux.middlewares),\n\t\t\t\t'init config.redux.middlewares must be an array',\n\t\t\t],\n\t\t\t[\n\t\t\t\t!Array.isArray(config.redux.enhancers),\n\t\t\t\t'init config.redux.enhancers must be an array of functions',\n\t\t\t],\n\t\t\t[\n\t\t\t\tconfig.redux.combineReducers &&\n\t\t\t\t\ttypeof config.redux.combineReducers !== 'function',\n\t\t\t\t'init config.redux.combineReducers must be a function',\n\t\t\t],\n\t\t\t[\n\t\t\t\tconfig.redux.createStore &&\n\t\t\t\t\ttypeof config.redux.createStore !== 'function',\n\t\t\t\t'init config.redux.createStore must be a function',\n\t\t\t],\n\t\t])\n\t}\n\n\t// defaults\n\tfor (const plugin of config.plugins) {\n\t\tif (plugin.config) {\n\t\t\t// models\n\t\t\tconst models: R.Models = merge(config.models, plugin.config.models)\n\t\t\tconfig.models = models\n\n\t\t\t// plugins\n\t\t\tconfig.plugins = [...config.plugins, ...(plugin.config.plugins || [])]\n\n\t\t\t// redux\n\t\t\tif (plugin.config.redux) {\n\t\t\t\tconfig.redux.initialState = merge(\n\t\t\t\t\tconfig.redux.initialState,\n\t\t\t\t\tplugin.config.redux.initialState\n\t\t\t\t)\n\t\t\t\tconfig.redux.reducers = merge(\n\t\t\t\t\tconfig.redux.reducers,\n\t\t\t\t\tplugin.config.redux.reducers\n\t\t\t\t)\n\t\t\t\tconfig.redux.rootReducers = merge(\n\t\t\t\t\tconfig.redux.rootReducers,\n\t\t\t\t\tplugin.config.redux.reducers\n\t\t\t\t)\n\t\t\t\tconfig.redux.enhancers = [\n\t\t\t\t\t...config.redux.enhancers,\n\t\t\t\t\t...(plugin.config.redux.enhancers || []),\n\t\t\t\t]\n\t\t\t\tconfig.redux.middlewares = [\n\t\t\t\t\t...config.redux.middlewares,\n\t\t\t\t\t...(plugin.config.redux.middlewares || []),\n\t\t\t\t]\n\t\t\t\tconfig.redux.combineReducers =\n\t\t\t\t\tconfig.redux.combineReducers || plugin.config.redux.combineReducers\n\t\t\t\tconfig.redux.createStore =\n\t\t\t\t\tconfig.redux.createStore || plugin.config.redux.createStore\n\t\t\t}\n\t\t}\n\t}\n\treturn config\n}\n","import Rematch from './rematch'\nimport * as R from './typings'\nimport deprecate from './utils/deprecate'\nimport mergeConfig from './utils/mergeConfig'\n\nexport const getState = () => {\n\tdeprecate(`global getState has been removed in @rematch/core 1.0.0-beta.3.\n\tSee https://github.com/rematch/rematch/blob/master/CHANGELOG.md#100-beta3---2018-06-23 for details.\n\tFor a quick fix, import and use store.getState.`)\n}\n\nexport const dispatch = () => {\n\tdeprecate(`global dispatch has been removed in @rematch/core 1.0.0-beta.3.\n\tSee https://github.com/rematch/rematch/blob/master/CHANGELOG.md#100-beta3---2018-06-23 for details.\n\tFor a quick fix, import and use store.dispatch.`)\n}\n\n/**\n * global createModel\n *\n * creates a model for the given object\n * this is for autocomplete purposes only\n * returns the same object that was received as argument\n */\nexport function createModel<S = any, M extends R.ModelConfig<S> = any>(\n\tmodel: M\n) {\n\treturn model\n}\n\n// incrementer used to provide a store name if none exists\nlet count = 0\n\n/**\n * init\n *\n * generates a Rematch store\n * with a set configuration\n * @param config\n */\nexport const init = (initConfig: R.InitConfig = {}): R.RematchStore => {\n\tconst name = initConfig.name || count.toString()\n\tcount += 1\n\tconst config: R.Config = mergeConfig({ ...initConfig, name })\n\treturn new Rematch(config).init()\n}\n\nexport default {\n\tinit,\n}\n","export default class Foxy {\n    constructor(options = {}) {\n        this.handlers = options.handlers || [];\n    }\n    addHandler(handler, index = 0) {\n        if (this.handlers[index] == null) {\n            this.handlers.push(handler);\n        }\n        this.handlers.splice(index, 0, handler);\n    }\n    removeHandler(handler) {\n        this.handlers = this.handlers.filter(h => h !== handler);\n    }\n    getImageURL(request) {\n        return this.get(\"getImageURL\", request);\n    }\n    getImageInfo(request) {\n        return this.get(\"getImageInfo\", request);\n    }\n    getVideoURL(request) {\n        return this.get(\"getVideoURL\", request);\n    }\n    getVideoInfo(request) {\n        return this.get(\"getVideoInfo\", request);\n    }\n    getURL(request) {\n        return this.get(\"getURL\", request);\n    }\n    getJSON(request) {\n        return this.get(\"getJSON\", request);\n    }\n    get(methodName, request) {\n        const handler = this.findHandler(methodName, request);\n        if (handler == null) {\n            return Promise\n                .reject(new Error(`There is no handler for method '${methodName}(${JSON.stringify(request)})'`));\n        }\n        return handler[methodName](request);\n    }\n    isSupported(request) {\n        return this.handlers.some(handler => handler.use(request));\n    }\n    findHandler(methodName, request) {\n        return this.handlers\n            .find(handler => typeof handler[methodName] === \"function\" && handler.use(request) === true);\n    }\n}\n","import utils from \"../utils\";\nexport default {\n    use: (request) => /^https?:\\/\\//.test(request.source),\n    getImageURL: (request) => Promise.resolve(request.source),\n    getImageInfo: (request) => utils.loadImageInfo(request.source)\n};\n","import utils from \"../utils\";\n// https://images.unsplash.com/photo-1583248369069-9d91f1640fe6?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60\nconst isUnsplashImage = /^https:\\/\\/images\\.unsplash\\.com\\/photo-\\d{13}-[0-9a-f]{12}/;\nexport function parseURL(url) {\n    const result = {};\n    const params = new URLSearchParams(url.replace(/^.*\\?/, \"\"));\n    if (params.has(\"w\"))\n        result.width = parseInt(params.get(\"w\"));\n    if (params.has(\"h\"))\n        result.height = parseInt(params.get(\"h\"));\n    if (params.has(\"fit\"))\n        result.fit = params.get(\"fit\");\n    if (params.has(\"q\"))\n        result.quality = parseInt(params.get(\"q\"));\n    if (params.has(\"auto\"))\n        result.auto = params.get(\"auto\");\n    return result;\n}\nexport function getURL(request) {\n    const baseURL = request.source.replace(/\\?.*$/, \"\");\n    const params = new URLSearchParams(request.source.replace(/^.*\\?/, \"\"));\n    if (request.width)\n        params.set(\"w\", request.width);\n    if (request.height)\n        params.set(\"h\", request.height);\n    if (request.quality)\n        params.set(\"q\", request.quality);\n    if (request.fit)\n        params.set(\"fit\", request.fit);\n    if (request.auto)\n        params.set(\"auto\", request.auto);\n    return `${baseURL}?${params.toString()}`;\n}\nexport default {\n    use: request => isUnsplashImage.test(request.source),\n    getImageURL(request) {\n        return Promise.resolve(getURL(request));\n    },\n    getImageInfo(request) {\n        return utils.loadImageInfo(getURL(request));\n    }\n};\n","import utils from \"../utils\";\nexport default {\n    use: (request) => /^https?:\\/\\//.test(request.source),\n    getVideoURL: (request) => Promise.resolve(request.source),\n    getVideoInfo: (request) => utils.loadVideoInfo(request.source)\n};\n","import Foxy from \"./Foxy\";\nimport utils from \"./utils\";\nimport unsplash from \"./handler/unsplash\";\nimport image from \"./handler/imageHandler\";\nimport video from \"./handler/videoHandler\";\nconst handler = {\n    unsplash,\n    image,\n    video\n};\nexport { Foxy, handler, utils };\nexport default Foxy;\n","function isHandler(handler) {\n    return Object.prototype.toString.call(handler) === \"[object Object]\" && typeof handler.use === \"function\";\n}\nfunction loadImageInfo(url, fetchOptions = {}) {\n    const result = {\n        src: url,\n        image: new Image(),\n        type: \"\",\n        width: 0,\n        height: 0\n    };\n    return fetch(url, fetchOptions)\n        .then(response => response.blob())\n        .then(imageBlob => {\n        result.type = imageBlob.type.replace(/^[^/]+\\//, \"\");\n        return URL.createObjectURL(imageBlob);\n    })\n        .then(imageSrc => {\n        return new Promise((resolve, reject) => {\n            result.image.addEventListener(\"load\", () => resolve());\n            result.image.addEventListener(\"error\", reject);\n            result.image.src = imageSrc;\n        });\n    })\n        .then(() => {\n        result.width = result.image.naturalWidth;\n        result.height = result.image.naturalHeight;\n        return result;\n    });\n}\nfunction loadVideoInfo(url, fetchOptions = {}) {\n    const result = {\n        src: url,\n        width: 0,\n        height: 0,\n        video: document.createElement(\"video\"),\n        duration: 0,\n        poster: \"\"\n    };\n    return fetch(url, fetchOptions)\n        .then(response => response.blob())\n        .then(imageBlob => {\n        result.type = imageBlob.type.replace(/^[^/]+\\//, \"\");\n        return URL.createObjectURL(imageBlob);\n    })\n        .then(imageSrc => {\n        const onVideoLoaded = new Promise((resolve, reject) => {\n            result.video.addEventListener(\"error\", reject);\n            result.video.addEventListener(\"loadedmetadata\", () => {\n                const { video } = result;\n                result.width = video.videoWidth;\n                result.height = video.videoHeight;\n                result.duration = video.duration;\n                result.poster = video.poster;\n                resolve(result);\n            });\n            const source = document.createElement(\"source\");\n            source.setAttribute(\"src\", imageSrc);\n            result.video.appendChild(source);\n        });\n        return onVideoLoaded;\n    });\n}\nexport default {\n    loadImageInfo,\n    loadVideoInfo,\n    isHandler\n};\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","\"use strict\";\n\n\n/**\n * Converts an object to an array\n *\n * @param  {Mixed} value to convert to array\n * @return {Array} to array converted input\n */\nfunction asArray(value) {\n\tif (Array.isArray(value)) {\n\t\treturn value; // prevent duplication\n\t} else if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\treturn Object.keys(value).map(function (key) {\n\t\t\treturn value[key];\n\t\t});\n\t} else {\n\t\treturn [];\n\t}\n}\n\n\nmodule.exports = asArray;\n","\"use strict\";\n\n\n/**\n * Iterates over object or array, passing each key, value and parentObject to the callback\n *\n * @param  {Object|Array} value\tto iterate\n * @param  {Function} callback\treceiving key on given input value\n */\nfunction forEach(object, callback) {\n\tvar keys;\n\tif (Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\t} else if (Object.prototype.toString.call(object) === \"[object Object]\") {\n\t\tObject.keys(object).forEach(function (key) {\n\t\t\tcallback(object[key], key, object);\n\t\t});\n\t}\n}\n\n\nmodule.exports = forEach;\n","\"use strict\";\n\n\nexports.values = require(\"./values\");\nexports.asArray = require(\"./asArray\");\nexports.forEach = require(\"./forEach\");\nexports.keyOf = require(\"./keyOf\");\nexports.keys = require(\"./keys\");\n","\"use strict\";\n\n\nvar forEach = require(\"./forEach\");\n\n\n/**\n * Returns the key of the value\n *\n * @param  {Object|Array} data\tto scan\n * @param  {Mixed} value \t\tto search\n * @return {String|Number} key of (last) found result or null\n */\nfunction keyOf(data, value) {\n\tvar resultKey = null;\n\tforEach(data, function (itemValue, itemKey) {\n\t\tif (value === itemValue) {\n\t\t\tresultKey = itemKey;\n\t\t}\n\t});\n\n\treturn resultKey;\n}\n\n\nmodule.exports = keyOf;\n","\"use strict\";\n\n\n/**\n * Returns all keys of the given input data\n *\n * @param  {Mixed} value\n * @return {Array} containing keys of given value\n */\nfunction keys(value) {\n\tvar keys;\n\n\tif (Array.isArray(value)) {\n\t\tkeys = value.map(function (value, index) { return index; });\n\n\t} else if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\treturn Object.keys(value);\n\n\t} else {\n\t\tkeys = [];\n\t}\n\n\treturn keys;\n}\n\n\nmodule.exports = keys;\n","\"use strict\";\n\n\n/**\n * Returns all values of the given input data\n * @param  {Mixed} value input data\n * @return {Array} array of input data's values\n */\nfunction values(value) {\n\tvar values;\n\tif (Array.isArray(value)) {\n\t\t// []\n\t\tvalues = value;\n\t} else if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t// {}\n\t\tvalues = Object.keys(value).map(function (key) {\n\t\t\treturn value[key];\n\t\t});\n\t} else if (value != null) {\n\t\t// *\n\t\tvalues = [value];\n\t} else {\n\t\tvalues = [];\n\t}\n\treturn values;\n}\n\n\nmodule.exports = values;\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"gsonPointer\",[],t):\"object\"==typeof exports?exports.gsonPointer=t():e.gsonPointer=t()}(\"undefined\"!=typeof self?self:this,(function(){return(()=>{\"use strict\";var e={431:(e,t,n)=>{function r(e){return\"#\"===e||\"\"===e||Array.isArray(e)&&0===e.length||!1}n.r(t),n.d(t,{default:()=>S,get:()=>p,isRoot:()=>r,join:()=>O,remove:()=>b,removeUndefinedItems:()=>v,set:()=>y,split:()=>c});const o=/~1/g,i=/~0/g,u=/\\/+/g,l=/(^[#/]*|\\/+$)/g;function f(e){return e.replace(o,\"/\").replace(i,\"~\")}function s(e){return f(decodeURIComponent(e))}function c(e){if(null==e||\"string\"!=typeof e||r(e))return Array.isArray(e)?e:[];const t=e.indexOf(\"#\")>=0?s:f,n=(e=(e=e.replace(u,\"/\")).replace(l,\"\")).split(\"/\");for(let e=0,r=n.length;e<r;e+=1)n[e]=t(n[e]);return n}function p(e,t,n){if(null==t||null==e)return n;if(r(t))return e;const o=a(e,c(t));return void 0===o?n:o}function a(e,t){const n=t.shift();if(void 0!==e)return void 0!==n?a(e[n],t):e}const d=/^\\[.*\\]$/,g=/^\\[(.+)\\]$/;function y(e,t,n){if(null==t)return e;const r=c(t);if(0===r.length)return e;null==e&&(e=d.test(r[0])?[]:{});let o,i,u=e;for(;r.length>1;)o=r.shift(),i=d.test(r[0]),u=m(u,o,i);return o=r.pop(),h(u,o,n),e}function h(e,t,n){let r;const o=t.match(g);\"[]\"===t&&Array.isArray(e)?e.push(n):o?(r=o.pop(),e[r]=n):e[t]=n}function m(e,t,n){if(null!=e[t])return e[t];const r=n?[]:{};return h(e,t,r),r}function v(e){let t=0,n=0;for(;t+n<e.length;)void 0===e[t+n]&&(n+=1),e[t]=e[t+n],t+=1;return e.length=e.length-n,e}function b(e,t,n){const r=c(t),o=r.pop(),i=p(e,r);return i&&delete i[o],Array.isArray(i)&&!0!==n&&v(i),e}const j=/\\/+/g,A=/~/g,x=/\\//g;function P(e,t){if(0===e.length)return t?\"#\":\"\";for(let n=0,r=e.length;n<r;n+=1)e[n]=e[n].replace(A,\"~0\").replace(x,\"~1\"),t&&(e[n]=encodeURIComponent(e[n]));return((t?\"#/\":\"/\")+e.join(\"/\")).replace(j,\"/\")}function O(e,...t){const n=[];if(Array.isArray(e))return P(e,!0===arguments[1]);const r=arguments[arguments.length-1],o=\"boolean\"==typeof r?r:e&&\"#\"===e[0];for(let e=0,t=arguments.length;e<t;e+=1)n.push.apply(n,c(arguments[e]));const i=[];for(let e=0,t=n.length;e<t;e+=1)if(\"..\"===n[e]){if(0===i.length)return o?\"#\":\"\";i.pop()}else i.push(n[e]);return P(i,o)}const S={get:p,set:y,remove:b,join:O,split:c,isRoot:r,removeUndefinedItems:v}}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n(431)})()}));","/**\n * Removes all `undefined` values within an array without creating additional\n * arrays\n */\nexport default function removeUndefinedItems<T = any>(array: Array<T>): Array<T> {\n\tlet i = 0;\n\tlet skip = 0;\n\twhile ((i + skip) < array.length) {\n\t\tif (array[i + skip] === undefined) {\n\t\t\tskip += 1;\n\t\t}\n\t\tarray[i] = array[i + skip];\n\t\ti += 1;\n\t}\n\tarray.length = array.length - skip;\n\treturn array;\n}\n","var rIsRegExp = /^\\{.*\\}$/;\n\n\n/**\n * Removes root prefix of pointer\n *\n * @param  {String} pointer\n * @return {String} simple pointer path\n */\nfunction stripPointerPrefix(pointer) {\n    pointer = pointer.toString();\n    return pointer.replace(/[#/]*/, \"\");\n}\n\n\nfunction convertToRegExp(pointerPartial) {\n    return new RegExp(pointerPartial.replace(/^\\{|\\}$/g, \"\"));\n}\n\n\nfunction splitRegExp(pointer) {\n    pointer = pointer.replace(/^\\{|\\/\\{/g, \"§{\");\n    pointer = pointer.replace(/\\}\\/|\\}$/g, \"}§\");\n    return pointer.split(\"§\");\n}\n\n\n/**\n * Can not be used in conjuction with filters...\n * REMOVE stripPointer...\n *\n * @param  {String} pointer\n * @return {Array}\n */\nfunction parsePointer(pointer) {\n    var partials;\n    var current;\n    var result;\n    pointer = stripPointerPrefix(pointer);\n\n    if (pointer.indexOf(\"{\") === -1) {\n        return pointer.split(\"/\");\n    }\n\n    result = [];\n    partials = splitRegExp(pointer);\n\n    while ((current = partials.shift()) != null) {\n        if (current === \"\") {\n            continue;\n        }\n\n        if (rIsRegExp.test(current)) {\n            result.push(current);\n\n        } else {\n            result.push.apply(result, current.split(\"/\"));\n        }\n    }\n\n    return result;\n}\n\n\nexports.rIsRegExp = rIsRegExp;\nexports.convertToRegExp = convertToRegExp;\nexports.splitRegExp = splitRegExp;\nexports.parsePointer = parsePointer;\n\n","var pointerDelete = require(\"gson-pointer\").delete;\nvar removeUndefinedItems = require(\"gson-pointer/lib/removeUndefinedItems\");\nvar queryGet = require(\"./get\");\n\nvar POINTER = 3;\nvar PARENT = 2;\n\n\nfunction queryDelete(obj, jsonPointer) {\n    var matches = queryGet(obj, jsonPointer, queryGet.ALL);\n    matches.forEach(function (match) {\n        pointerDelete(obj, match[POINTER], true);\n    });\n    matches.forEach(function (match) {\n        if (Array.isArray(match[PARENT])) {\n            removeUndefinedItems(match[PARENT]);\n        }\n    });\n    return obj;\n}\n\n\nmodule.exports = queryDelete;\n","var o = require(\"gson-conform\");\nvar common = require(\"./common\");\n\n\nvar f = {\n    queryKey: function (obj, query) {\n        return function (key) {\n            return valid(obj[key], query);\n        };\n    },\n    queryRegExp: function (obj, query, regex) {\n        return function (key) {\n            return regex.test(key) ? valid(obj[key], query) : false;\n        };\n    }\n};\n\nvar MAP = {\n    \"false\": false,\n    \"true\": true,\n    \"null\": null\n};\n\n\n/**\n * Filter properties by query: select|if:property\n *\n * @param  {Object|Array} obj\n * @param  {String} query key:value pairs separated by &\n * @return {Array} values matching the given query\n */\nfunction filterValues(obj, query) {\n    return filterKeys(obj, query).map(function (key) {\n        return obj[key];\n    });\n}\n\nvar selectCurly = /(\\{[^}]*\\})/g;\nvar selectPlaceholder = /§§§\\d+§§§/g;\nfunction splitQuery(value) {\n    // nothing to escape\n    if (value.indexOf(\"?\") === -1 || value.indexOf(\"{\") === -1) {\n        return value.split(\"?\", 2);\n    }\n\n    // @todo this must be simpler to solve\n    var map = {};\n    var temp = value.replace(selectCurly, function replace(match, group, index) {\n        var id = \"§§§\" + index + \"§§§\";\n        map[id] = match;\n        return id;\n    });\n    var result = temp.split(\"?\", 2);\n    for (var i = 0; i < result.length; i += 1) {\n        result[i] = result[i].replace(selectPlaceholder, function revertReplacement(match) {\n            return map[match];\n        });\n    }\n    return result;\n}\n\n/**\n * Filter properties by query: select|if:property\n *\n * @param  {Object|Array} obj\n * @param  {String} query key:value pairs separated by &\n * @return {Array} object keys matching the given query\n */\nfunction filterKeys(obj, query) {\n    if (obj && query) {\n        var matches = splitQuery(query);\n        var propertyQuery = matches[0];\n        var filterQuery = matches[1];\n\n        var keys;\n        var regex;\n        if (propertyQuery === \"*\" || propertyQuery === \"**\") {\n            keys = o.keys(obj);\n            return keys.filter(f.queryKey(obj, filterQuery));\n\n        } else if (common.rIsRegExp.test(propertyQuery)) {\n            keys = o.keys(obj);\n            regex = common.convertToRegExp(propertyQuery);\n            return keys.filter(f.queryRegExp(obj, filterQuery, regex));\n\n        } else if (obj[propertyQuery] && valid(obj[propertyQuery], filterQuery)) {\n            return [propertyQuery];\n        }\n    }\n    return [];\n}\n\n\n/**\n * Returns true if the query matches. Query: key:value&key:value\n * @param  {Object|Array} obj\n * @param  {String} query key:value pairs separated by &\n * @return {Boolean} if query matched object\n */\nfunction valid(obj, query) {\n    if (!query) {\n        return true;\n    }\n    if (!obj) {\n        return false;\n    }\n\n    var key;\n    var value;\n    var isValid = true;\n    var truthy;\n\n    var tests = query\n        .replace(/(&&)/g, \"§$1§\")\n        .replace(/(\\|\\|)/g, \"§$1§\")\n        .split(\"§\");\n\n    var or = false;\n    for (var i = 0, l = tests.length; i < l; i += 2) {\n        if (tests[i].indexOf(\":!\") > -1) {\n            truthy = false;\n            value = tests[i].split(\":!\");\n\n        } else if (tests[i].indexOf(\":\") === -1) {\n            truthy = false;\n            value = [tests[i], undefined];\n\n        } else {\n            truthy = true;\n            value = tests[i].split(\":\");\n        }\n\n        key = value[0];\n        value = value[1];\n\n        if (value === \"undefined\") {\n            value = undefined; // undefined is unmappable\n        } else {\n            value = MAP[value] === undefined ? value : MAP[value];\n        }\n\n        // perform filter test, exception undefined is not matched for negated non-undefined values\n        value = (truthy ? (value === obj[key]) : (value !== obj[key] && (obj[key] !== undefined || key === undefined)));\n\n        if (or) {\n            isValid = isValid || value;\n        } else {\n            isValid = isValid && value;\n        }\n\n        or = tests[i + 1] === \"||\";\n    }\n\n    return isValid;\n}\n\n\nexports.values = filterValues;\nexports.keys = filterKeys;\nexports.valid = valid;\n","/* eslint no-unused-vars: 0 */\nvar query = require(\"./run\");\n\n\n/**\n * Returns the query results as an array or object, depending on its callback\n *\n * ## return type\n *\n * - get.ALL = 'all' returns all arguments of query callback [value, key, parent, pointer]\n * - get.POINTER = 'pointer' returns only the json pointers to the targets\n * - get.VALUE = 'value' Default. Returns only the matched value\n * - get.MAP = Returns an object with all available pointers and their data, like { pointer: value }\n *\n * @param  {Mixed} obj\n * @param  {Pointer} jsonPointer\n * @param  {String} type\t\t\t- type of return value. Defaults to \"value\"\n * @return {Array|Object} containing result in specified format\n */\nfunction queryGet(obj, jsonPointer, type) {\n    var matches = type === queryGet.MAP ? {} : [];\n    var cb = getCbFactory(type, matches);\n    query(obj, jsonPointer, cb);\n    return matches;\n}\n\nqueryGet.ALL = \"all\";\nqueryGet.MAP = \"map\";\nqueryGet.POINTER = \"pointer\";\nqueryGet.VALUE = \"value\";\n\n\nfunction getCbFactory(type, matches) {\n    if (typeof type === \"function\") {\n        return function cb(value, key, obj, pointer) {\n            matches.push(type(obj[key], key, obj, pointer));\n        };\n    }\n\n    switch (type) {\n        case queryGet.ALL:\n            return function cbGetAll(value, key, obj, pointer) {\n                matches.push([obj[key], key, obj, pointer]);\n            };\n\n        case queryGet.MAP:\n            return function cbGetMap(value, key, obj, pointer) {\n                matches[pointer] = value;\n            };\n\n        case queryGet.POINTER:\n            return function cbGetPointer(value, key, obj, pointer) {\n                matches.push(pointer);\n            };\n\n        case queryGet.VALUE:\n            return function cbGetValue(value, key, obj, pointer) {\n                matches.push(value);\n            };\n\n        default:\n            return function cbGetValue(value, key, obj, pointer) {\n                matches.push(value);\n            };\n    }\n}\n\n\nmodule.exports = queryGet;\n","exports.get = require(\"./get\");\nexports.run = require(\"./run\");\nexports.delete = require(\"./delete\");\nexports.filter = require(\"./filter\");\n","var filter = require(\"./filter\");\nvar parsePointer = require(\"./common\").parsePointer;\n// @note gson-pointer: only strings are valid pointer properties to join. Ensure key is a string (could be index)\nvar join = require(\"gson-pointer\").join;\n\n\n/**\n * callback for each match of json-glob-pointer\n *\n * @param  {Any} obj\n * @param  {String} jsonPointer - function (value, key, parentObject, pointerToValue)\n * @param  {Function} cb\n */\nfunction queryRun(obj, jsonPointer, cb) {\n    // get steps into obj\n    var steps = parsePointer(jsonPointer);\n    // cleanup first and last\n    if (steps[0] === \"\") {\n        // @todo due to pointer cleanup, this is probably never called\n        steps.shift();\n    }\n    if (steps[steps.length - 1] === \"\") {\n        steps.length -= 1;\n    }\n\n    _query(obj, steps, cb, \"#\");\n}\n\n\nfunction cbPassAll(obj, cb, pointer) {\n    return function (key) {\n        cb(obj[key], key, obj, join(pointer, String(key)));\n    };\n}\n\n\nfunction _query(obj, steps, cb, pointer) {\n    var matches;\n    var query = steps.shift();\n\n    if (steps.length === 0) {\n        // get keys matching the query and call back\n        matches = filter.keys(obj, query);\n        matches.forEach(cbPassAll(obj, cb, pointer));\n\n    } else if (/^\\*\\*/.test(query)) {\n        // run next query on current object\n        _query(obj, steps.slice(0), cb, pointer);\n\n    } else {\n        matches = filter.keys(obj, query);\n        matches.forEach(function (key) {\n            _query(obj[key], steps.slice(0), cb, join(pointer, String(key)));\n        });\n    }\n\n    if (/^\\*\\*/.test(query)) {\n        // match this query (**) again\n        steps.unshift(query);\n        matches = filter.keys(obj, query);\n        matches.forEach(function (key) {\n            _query(obj[key], steps.slice(0), cb, join(pointer, String(key)));\n        });\n    }\n}\n\n\nmodule.exports = queryRun;\n","module.exports = {\n    config: {\n        strings: require(\"./lib/config/strings\")\n    },\n    cores: {\n        Interface: require(\"./lib/cores/CoreInterface\"),\n        Draft04: require(\"./lib/cores/Draft04\"), // core implementing draft04 specs\n        JsonEditor: require(\"./lib/cores/JsonEditor\") // adjusted core of draft04 to better support the json-editor\n    },\n    addSchema: require(\"./lib/addSchema\"), // add a schema to be references via $ref\n    addValidator: require(\"./lib/addValidator\"), // add validation for keyword, format, datatype and customize errors\n    compileSchema: require(\"./lib/compileSchema\"),\n    createCustomError: require(\"./lib/utils/createCustomError\"),\n    createSchemaOf: require(\"./lib/createSchemaOf\"), // creates a simple schema based on the given data\n    each: require(\"./lib/each\"), // iterate over data, receiving each data-entry with its schema\n    eachSchema: require(\"./lib/eachSchema\"), // iterates over a json-schemas type definitions\n    getChildSchemaSelection: require(\"./lib/getChildSchemaSelection\"), // get available child schemas\n    getSchema: require(\"./lib/getSchema\"), // get schema of datapointer\n    getTemplate: require(\"./lib/getTemplate\"), // create data which is valid to the given schema\n    getTypeOf: require(\"./lib/getTypeOf\"), // returns the javascript datatype\n    isValid: require(\"./lib/isValid\"), // returns a boolean if the schema is valid\n    SchemaService: require(\"./lib/SchemaService\"),\n    step: require(\"./lib/step\"), // steps into a json-schema, returning the matching child-schema\n    validate: require(\"./lib/validate\"), // validates data by a schema\n    validateAsync: require(\"./lib/validateAsync\") // async validation of data by a schema\n};\n","const getSchema = require(\"./getSchema\");\nconst Core = require(\"./cores/JsonEditor\");\nconst gp = require(\"gson-pointer\");\n\n\nfunction copy(value) {\n    return JSON.parse(JSON.stringify(value));\n}\n\n\nclass SchemaService {\n\n    constructor(schema, data) {\n        this.core = new Core(schema);\n        this.schema = schema;\n        this.data = data;\n        this.cache = {};\n    }\n\n    updateData(data) {\n        this.data = data;\n        this.cache = {};\n    }\n\n    updateSchema(schema) {\n        this.schema = schema;\n        this.core.setSchema(schema);\n        this.cache = {};\n    }\n\n    get(pointer, data) {\n        if (data) { // possibly separate entry point\n            const schema = getSchema(this.core, data, this.schema, pointer);\n            return copy(schema);\n        }\n\n        if (pointer === \"#\") { // root\n            return this.schema;\n        }\n\n        if (this.cache[pointer]) { // return cached result\n            return this.cache[pointer];\n        }\n\n        const parentPointer = gp.join(pointer, \"..\");\n        let parentSchema = this.cache[parentPointer];\n        if (parentSchema == null) {\n            // store parent (major performance improvement if its within oneof)\n            parentSchema = getSchema(this.core, this.data, this.schema, parentPointer);\n            if (parentSchema.variableSchema !== true) {\n                this.cache[parentPointer] = copy(parentSchema);\n            }\n        }\n\n        // step from parent to child\n        const key = gp.split(pointer).pop();\n        let schema = getSchema(this.core, gp.get(this.data, parentPointer), this.cache[parentPointer], key);\n        schema = copy(schema);\n        if (schema.variableSchema !== true) {\n            this.cache[pointer] = schema;\n        }\n        return schema;\n    }\n}\n\n\nmodule.exports = SchemaService;\n","const remotes = require(\"../remotes\");\nconst compileSchema = require(\"./compileSchema\");\n\n\nmodule.exports = function addSchema(url, schema) {\n    schema.id = schema.id || url;\n    remotes[url] = compileSchema(schema);\n};\n","/**\n * @throws Error\n * Adds a custom error. May override existing errors\n *\n * @param {Core} core\n * @param {String} errorId          - id of error @see /lib/validation/errors\n * @param {Function} errorCreator   - function returning an error-object @see /lib/utils/createCustomError\n */\nfunction addError(core, errorId, errorCreator) {\n    if (typeof errorCreator !== \"function\") {\n        throw new Error(`Error callback 'errorCreator' must be of type function. Received ${typeof errorCreator}`);\n    }\n    core.errors[errorId] = errorCreator;\n}\n\n/**\n * Adds a custom format validator. Existing format may not be overriden (may still be modified manually)\n * @param {Core} core\n * @param {String} formatType           - format type (i.e. `format: \"html\"`)\n * @param {Function} validationFunction - called with (core, schema, value, pointer)\n */\nfunction addFormat(core, formatType, validationFunction) {\n    if (typeof validationFunction !== \"function\") {\n        throw new Error(`Validation function expected. Received ${typeof validationFunction}`);\n    }\n    if (core.validateFormat[formatType] == null) {\n        core.validateFormat[formatType] = validationFunction;\n        return;\n    }\n    throw new Error(`A format '${formatType}' is already registered to validation`);\n}\n\n/**\n * Adds a custom keyword validation to a specific type. May not override existing keywords.\n *\n * @param {Core} core\n * @param {String} datatype             - valid datatype like \"object\", \"array\", \"string\", etc\n * @param {String} keyword              - The keyword to add, i.e. `minWidth: ...`\n * @param {Function} validationFunction - called with (core, schema, value, pointer)\n */\nfunction addKeyword(core, datatype, keyword, validationFunction) {\n    if (typeof validationFunction !== \"function\") {\n        throw new Error(`Validation function expected. Received ${typeof validationFunction}`);\n    }\n    if (core.typeKeywords[datatype] == null) {\n        throw new Error(`Unknown datatype ${datatype}. Failed adding custom keyword validation.`);\n    }\n    if (core.typeKeywords[datatype].includes(keyword) === false) {\n        core.typeKeywords[datatype].push(keyword);\n    }\n    core.validateKeyword[keyword] = validationFunction;\n}\n\n\nmodule.exports = {\n    error: addError,\n    format: addFormat,\n    keyword: addKeyword\n};\n","const { get } = require(\"gson-pointer\");\nconst splitRef = require(\"./splitRef\");\nconst suffixes = /(#|\\/)+$/g;\nconst getTypeOf = require(\"../getTypeOf\");\n// const emptyValues = [\"\", null, \"#\"];\n\nconst isObject = val => (getTypeOf(val) === \"object\");\n\n\n// 1. combined is known\n// 2. base or pointer is known\n// 3. base + pointer is known\n\nmodule.exports = function getRef(context, rootSchema, $ref) {\n    if (isObject($ref)) {\n        $ref = $ref.__ref || $ref.$ref;\n    }\n\n    if ($ref == null) {\n        return rootSchema;\n    }\n\n    let schema;\n\n    // is it a known $ref?\n    const $remote = $ref.replace(suffixes, \"\");\n    if (context.remotes[$remote]) {\n        schema = context.remotes[$remote];\n        if (schema && schema.$ref) {\n            return getRef(context, rootSchema, schema.$ref);\n        }\n        return schema;\n    }\n    if (context.ids[$ref]) {\n        schema = get(rootSchema, context.ids[$ref]);\n        if (schema && schema.$ref) {\n            return getRef(context, rootSchema, schema.$ref);\n        }\n        return schema;\n    }\n\n    // is it a ref with host/pointer?\n    const fragments = splitRef($ref);\n    if (fragments.length === 0) {\n        return rootSchema;\n    }\n\n    if (fragments.length === 1) {\n        $ref = fragments[0];\n        if (context.remotes[$ref]) {\n            schema = context.remotes[$ref];\n            return getRef(context, rootSchema, schema.$ref);\n        }\n        if (context.ids[$ref]) {\n            schema = get(rootSchema, context.ids[$ref]);\n            if (schema && schema.$ref) {\n                return getRef(context, rootSchema, schema.$ref);\n            }\n            return schema;\n        }\n    }\n\n    if (fragments.length === 2) {\n        const base = fragments[0];\n        $ref = fragments[1];\n\n        if (context.remotes[base]) {\n            if (context.remotes[base].getRef) {\n                return context.remotes[base].getRef($ref);\n            }\n            // console.log(\"warning: uncompiled remote - context may be wrong\", base);\n            return getRef(context, context.remotes[base], $ref);\n        }\n        if (context.ids[base]) {\n            return getRef(context, get(rootSchema, context.ids[base]), $ref);\n        }\n    }\n\n    schema = get(rootSchema, context.ids[$ref] || $ref);\n    if (schema && schema.$ref) {\n        return getRef(context, rootSchema, schema.$ref);\n    }\n    return schema;\n};\n","/* eslint max-statements-per-line: [\"error\", { \"max\": 2 }] */\nconst eachSchema = require(\"../eachSchema\");\nconst remotes = require(\"../../remotes\");\nconst joinScope = require(\"./joinScope\");\nconst getRef = require(\"./getRef\");\n\nconst COMPILED = \"__compiled\";\nconst COMPILED_REF = \"__ref\";\nconst GET_REF = \"getRef\";\nconst GET_ROOT = \"getRoot\";\nconst suffixes = /(#|\\/)+$/g;\n\n\nfunction compile(rootSchema, force = false) {\n    if (rootSchema[COMPILED] !== undefined) { return rootSchema; } // eslint-disable-line\n    const context = { ids: {}, remotes: Object.assign({}, remotes) };\n    const rootSchemaAsString = JSON.stringify(rootSchema);\n    rootSchema = JSON.parse(rootSchemaAsString);\n    Object.defineProperty(rootSchema, COMPILED, { enumerable: false, value: true });\n    Object.defineProperty(rootSchema, GET_REF, { enumerable: false, value: getRef.bind(null, context, rootSchema) });\n    // Object.defineProperty(rootSchema, \"debug\", { enumerable: false, value: schema => {\n    //     console.log(JSON.stringify(context.ids, null, 2));\n    //     console.log(\"remotes\", Object.keys(remotes));\n    //     console.log(JSON.stringify(rootSchema, null, 2));\n    // } });\n    if (force === false && rootSchemaAsString.includes(\"$ref\") === false) {\n        // bail early, when no $refs are defined\n        return rootSchema;\n    }\n\n    const scopes = {};\n    const getRoot = () => rootSchema;\n    eachSchema(rootSchema, (schema, pointer) => {\n        if (schema.id) { context.ids[schema.id.replace(suffixes, \"\")] = pointer; }\n\n        // build up scopes and add them to $ref-resolution map\n        pointer = `#${pointer}`.replace(/##+/, \"#\");\n        const previousPointer = pointer.replace(/\\/[^/]+$/, \"\");\n        const parentPointer = pointer.replace(/\\/[^/]+\\/[^/]+$/, \"\");\n        const previousScope = scopes[previousPointer] || scopes[parentPointer];\n        const scope = joinScope(previousScope, schema.id);\n        scopes[pointer] = scope;\n        if (context.ids[scope] == null) { context.ids[scope] = pointer; }\n\n        if (schema.$ref) {\n            Object.defineProperty(schema, COMPILED_REF, { enumerable: false, value: joinScope(scope, schema.$ref) });\n            // @todo currently not used:\n            Object.defineProperty(schema, GET_ROOT, { enumerable: false, value: getRoot });\n            // console.log(\"compiled ref\", scope, schema.$ref, \"=>\", joinScope(scope, schema.$ref));\n        }\n    });\n\n    // console.log(JSON.stringify(context.ids, null, 2));\n    return rootSchema;\n}\n\n\nmodule.exports = compile;\n","/* eslint max-statements-per-line: [\"error\", { \"max\": 2 }] */\nconst suffixes = /(#|\\/)+$/;\nconst trailingHash = /#$/;\nconst isDomain = /^[^:]+:\\/\\/[^/]+\\//;\nconst trailingFragments = /\\/[^/]*$/;\nconst idAndPointer = /#.*$/;\n\nmodule.exports = function joinScope(previous, id) {\n    if (previous == null && id == null) { return \"#\"; }\n    if (id == null) { return previous.replace(trailingHash, \"\"); }\n    if (previous == null) { return id.replace(trailingHash, \"\"); }\n\n    if (id[0] === \"#\") { return `${previous.replace(idAndPointer, \"\")}${id.replace(suffixes, \"\")}`; }\n    if (isDomain.test(id)) { return id.replace(trailingHash, \"\"); }\n    return `${previous.replace(trailingFragments, \"\")}/${id.replace(trailingHash, \"\")}`;\n};\n","const suffixes = /(#|\\/)+$/g;\nconst emptyValues = [\"\", null, \"#\"];\n\n\nmodule.exports = function splitRef($ref) {\n    if (emptyValues.includes($ref)) {\n        return [];\n    }\n\n    $ref = $ref.replace(suffixes, \"\");\n    if ($ref.indexOf(\"#\") === -1) {\n        return [$ref.replace(suffixes, \"\")];\n    }\n    if ($ref.indexOf(\"#\") === 0) {\n        return [$ref.replace(suffixes, \"\")];\n    }\n    const result = $ref.split(\"#\");\n    result[0] = result[0].replace(suffixes, \"\");\n    result[1] = `#${result[1].replace(suffixes, \"\")}`;\n    return result;\n};\n","module.exports = require(\"./compile\");\n","module.exports = {\n    DECLARATOR_ONEOF: \"oneOfProperty\",\n    GET_TEMPLATE_RECURSION_LIMIT: 1,\n    floatingPointPrecision: 10000,\n    propertyBlacklist: [\"_id\"]\n};\n","/* eslint max-len: 0 */\nmodule.exports = {\n    // validation errors\n    AdditionalItemsError: \"Array at `{{pointer}}` may not have an additional item `{{key}}`\",\n    AdditionalPropertiesError: \"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`\",\n    AnyOfError: \"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`\",\n    AllOfError: \"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`\",\n    EnumError: \"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`\",\n    FormatDateTimeError: \"Value `{{value}}` at `{{pointer}}` is not a valid date-time\",\n    FormatEmailError: \"Value `{{value}}` at `{{pointer}}` is not a valid email\",\n    FormatUrlError: \"Value `{{value}}` at `{{pointer}}` is not a valid url\",\n    FormatUriError: \"Value `{{value}}` at `{{pointer}}` is not a valid uri\",\n    FormatHostnameError: \"Value `{{value}}` at `{{pointer}}` is not a valid hostname\",\n    FormatIPV4Error: \"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address\",\n    FormatIPV6Error: \"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address\",\n    FormatRegExError: \"Value `{{value}}` at `{{pointer}}` is not a valid regular expression\",\n    MaximumError: \"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum\",\n    MaxItemsError: \"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`\",\n    MaxLengthError: \"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.\",\n    MaxPropertiesError: \"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`\",\n    MinimumError: \"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum\",\n    MinItemsError: \"Too few items in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`\",\n    MinLengthError: \"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.\",\n    MinPropertiesError: \"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`\",\n    MissingOneOfPropertyError: \"Value at `{{pointer}}` property: `{{property}}`\",\n    MissingDependencyError: \"The required propery '{{missingProperty}}' in `{{pointer}}` is missing\",\n    MultipleOfError: \"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`\",\n    MultipleOneOfError: \"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`\",\n    NoAdditionalPropertiesError: \"Additional property `{{property}}` in `{{pointer}}` is not allowed\",\n    NotError: \"Value `{{value}}` at pointer should not match schema `{{not}}`\",\n    OneOfError: \"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema\",\n    OneOfPropertyError: \"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`\",\n    PatternError: \"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`\",\n    PatternPropertiesError: \"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}\",\n    RequiredPropertyError: \"The required property `{{key}}` is missing at `{{pointer}}`\",\n    TypeError: \"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`\",\n    UndefinedValueError: \"Value must not be undefined in `{{pointer}}`\",\n    UnknownPropertyError: \"Could not find a valid schema for property `{{pointer}}` within object\",\n    UniqueItemsError: \"Expected unique items in {{pointer}}: duplicate value `{{value}}` found at {{itemPointer}} and {{duplicatePointer}}\",\n    ValueNotEmptyError: \"A value for `{{property}}` is required at `{{pointer}}`\"\n};\n","const resolveRef = require(\"../resolveRef.withOverwrite\");\nconst compileSchema = require(\"../compileSchema\");\nconst resolveAnyOf = require(\"../resolveAnyOf\");\nconst resolveAllOf = require(\"../resolveAllOf\");\n\n\n/* eslint no-unused-vars: 0 no-empty-function: 0 */\nmodule.exports = class CoreInterface {\n\n    constructor(schema) {\n        this.setSchema(schema);\n    }\n\n    get rootSchema() {\n        return this.__rootSchema;\n    }\n\n    set rootSchema(rootSchema) {\n        if (rootSchema == null) {\n            return;\n        }\n        this.__rootSchema = compileSchema(rootSchema);\n    }\n\n    each(data, callback, schema = this.rootSchema, pointer = \"#\") {\n        return new Error(\"function 'each' is not implemented\");\n    }\n\n    validate(data, schema = this.rootSchema, pointer = \"#\") {\n        return [new Error(\"function 'validate' is not implemented\")];\n    }\n\n    isValid(data, schema = this.rootSchema, pointer = \"#\") {\n        return new Error(\"function 'isValid' is not implemented\");\n    }\n\n    resolveAnyOf(data, schema, pointer = \"#\") {\n        return resolveAnyOf(this, data, schema, pointer);\n    }\n\n    resolveAllOf(data, schema, pointer = \"#\") {\n        return resolveAllOf(this, data, schema, pointer);\n    }\n\n    resolveRef(schema) {\n        return new Error(\"function 'resolveRef' is not implemented\");\n    }\n\n    resolveOneOf(data, schema, pointer = \"#\") {\n        return new Error(\"function 'resolveOneOf' is not implemented\");\n    }\n\n    getSchema(pointer, data, schema = this.rootSchema) {\n        return new Error(\"function 'getSchema' is not implemented\");\n    }\n\n    getTemplate(data, schema = this.rootSchema) {\n        return new Error(\"function 'getTemplate' is not implemented\");\n    }\n\n    setSchema(schema) {\n        this.rootSchema = schema;\n    }\n\n    step(key, schema, data, pointer = \"#\") {\n        return new Error(\"function 'step' is not implemented\");\n    }\n};\n","const CoreInterface = require(\"./CoreInterface\");\nconst step = require(\"../step\");\nconst validate = require(\"../validate\");\nconst resolveOneOf = require(\"../resolveOneOf.strict\");\nconst resolveRef = require(\"../resolveRef.strict\");\nconst getTemplate = require(\"../getTemplate\");\nconst getSchema = require(\"../getSchema\");\nconst each = require(\"../each\");\nconst compileSchema = require(\"../compileSchema\");\n\nconst remotes = require(\"../../remotes\");\nremotes[\"http://json-schema.org/draft-04/schema\"] = compileSchema(require(\"../../remotes/draft04.json\"));\n\n\nclass Draft04Core extends CoreInterface {\n\n    constructor(schema) {\n        super(schema);\n        this.typeKeywords = JSON.parse(JSON.stringify(require(\"../validation/typeKeywordMapping\")));\n        this.validateKeyword = Object.assign({}, require(\"../validation/keyword\"));\n        this.validateType = Object.assign({}, require(\"../validation/type\"));\n        this.validateFormat = Object.assign({}, require(\"../validation/format\"));\n        this.errors = Object.assign({}, require(\"../validation/errors\"));\n    }\n\n    each(data, callback, schema = this.rootSchema, pointer = \"#\") {\n        each(this, data, callback, schema, pointer);\n    }\n\n    validate(data, schema = this.rootSchema, pointer = \"#\") {\n        return validate(this, data, schema, pointer);\n    }\n\n    isValid(data, schema = this.rootSchema, pointer = \"#\") {\n        return this.validate(data, schema, pointer).length === 0;\n    }\n\n    resolveOneOf(data, schema, pointer) {\n        return resolveOneOf(this, data, schema, pointer);\n    }\n\n    resolveRef(schema) {\n        return resolveRef(schema, this.rootSchema);\n    }\n\n    getSchema(pointer, data, schema = this.rootSchema) {\n        return getSchema(this, pointer, data, schema);\n    }\n\n    getTemplate(data, schema = this.rootSchema) {\n        return getTemplate(this, data, schema);\n    }\n\n    step(key, schema, data, pointer = \"#\") {\n        return step(this, key, schema, data, pointer);\n    }\n}\n\n\nmodule.exports = Draft04Core;\n","const CoreInterface = require(\"./CoreInterface\");\nconst step = require(\"../step\");\nconst validate = require(\"../validate\");\nconst resolveOneOf = require(\"../resolveOneOf.fuzzy\");\nconst resolveRef = require(\"../resolveRef.withOverwrite\");\nconst getTemplate = require(\"../getTemplate\");\nconst getSchema = require(\"../getSchema\");\nconst each = require(\"../each\");\n\n\nclass JsonEditorCore extends CoreInterface {\n\n    constructor(schema) {\n        super(schema);\n        this.typeKeywords = JSON.parse(JSON.stringify(require(\"../validation/typeKeywordMapping\")));\n        this.validateKeyword = Object.assign({}, require(\"../validation/keyword\"));\n        // set properties required per default and prevent no duplicate errors.\n        // This is required for fuzzy resolveOneOf\n        // this.validateKeyword.properties = this.validateKeyword.propertiesRequired;\n        // this.validateKeyword.required = this.validateKeyword.requiredNotEmpty;\n        this.validateType = Object.assign({}, require(\"../validation/type\"));\n        this.validateFormat = Object.assign({}, require(\"../validation/format\"));\n        this.errors = Object.assign({}, require(\"../validation/errors\"));\n    }\n\n    each(data, callback, schema = this.rootSchema, pointer = \"#\") {\n        each(this, data, callback, schema, pointer);\n    }\n\n    validate(data, schema = this.rootSchema, pointer = \"#\") {\n        return validate(this, data, schema, pointer);\n    }\n\n    isValid(data, schema = this.rootSchema, pointer = \"#\") {\n        return this.validate(data, schema, pointer).length === 0;\n    }\n\n    resolveOneOf(data, schema, pointer) {\n        return resolveOneOf(this, data, schema, pointer);\n    }\n\n    resolveRef(schema) {\n        return resolveRef(schema, this.rootSchema);\n    }\n\n    getSchema(pointer, data, schema = this.rootSchema) {\n        return getSchema(this, pointer, data, schema);\n    }\n\n    getTemplate(data, schema = this.rootSchema) {\n        return getTemplate(this, data, schema);\n    }\n\n    step(key, schema, data, pointer = \"#\") {\n        return step(this, key, schema, data, pointer);\n    }\n}\n\n\nmodule.exports = JsonEditorCore;\n","const getTypeOf = require(\"./getTypeOf\");\n\n\n/**\n * Create a simple json schema for the given input data\n * @param  {Mixed} data     - data to get json schema for\n * @return {Object} schema\n */\nfunction createSchemaOf(data) {\n    const schema = {\n        type: getTypeOf(data)\n    };\n\n    if (schema.type === \"object\") {\n        schema.properties = {};\n        Object.keys(data).forEach(key => (schema.properties[key] = createSchemaOf(data[key])));\n    }\n\n    if (schema.type === \"array\" && data.length === 1) {\n        schema.items = createSchemaOf(data[0]);\n\n    } else if (schema.type === \"array\") {\n        schema.items = data.map(createSchemaOf);\n    }\n\n    return schema;\n}\n\n\nmodule.exports = createSchemaOf;\n\n","const getTypeOf = require(\"./getTypeOf\");\n\n\n/**\n * Iterates over data, retrieving its schema\n *\n * @param  {CoreInterface} core - validator\n * @param  {Mixed} data         - the data to iterate\n * @param  {Function} callback  - will be called with (schema, data, pointer) on each item\n * @param  {Object} [schema]    - the schema matching the data. Defaults to rootSchema\n * @param  {String} [pointer]   - pointer to current data. Default to rootPointer\n */\nfunction each(core, data, callback, schema = core.rootSchema, pointer = \"#\") {\n    callback(schema, data, pointer);\n    const dataType = getTypeOf(data);\n\n    if (dataType === \"object\") {\n        Object.keys(data).forEach(key => {\n            const nextSchema = core.step(key, schema, data, pointer); // not save\n            const next = data[key]; // save\n            core.each(next, callback, nextSchema, `${pointer}/${key}`);\n        });\n    } else if (dataType === \"array\") {\n        data.forEach((next, key) => {\n            const nextSchema = core.step(key, schema, data, pointer);\n            core.each(next, callback, nextSchema, `${pointer}/${key}`);\n        });\n    }\n}\n\n\nmodule.exports = each;\n","const gp = require(\"gson-pointer\");\nconst getTypeDefs = require(\"./schema/getTypeDefs\");\nconst isObject = value => Object.prototype.toString.call(value) === \"[object Object]\";\n\n\nfunction nextTypeDefs(schema, pointer) {\n    if (this.callback(schema, pointer) === true) { // eslint-disable-line no-invalid-this\n        return; // stop iteration\n    }\n\n    const defs = getTypeDefs(schema);\n    // eslint-disable-next-line no-invalid-this\n    defs.forEach(next => this.nextTypeDefs(next.def, gp.join(pointer, next.pointer, false)));\n}\n\n\nfunction eachDefinition(walk, schema, pointer) {\n    Object.keys(schema.definitions)\n        .forEach(defId => {\n            if (!isObject(schema.definitions[defId])) {\n                console.log(`Invalid schema in ${pointer}/definitions/${defId}`);\n                return;\n            }\n            walk.nextTypeDefs(schema.definitions[defId], gp.join(pointer, \"definitions\", defId, false));\n        });\n}\n\n\nmodule.exports = function eachSchema(schema, callback, pointer = \"#\") {\n    const walk = { callback, nextTypeDefs };\n    walk.nextTypeDefs(schema, pointer);\n\n    if (schema.definitions == null) {\n        return;\n    }\n\n    walk.callback = (defschema, schemaPointer) => {\n        callback(defschema, schemaPointer);\n        if (defschema.definitions != null) {\n            eachDefinition(walk, defschema, schemaPointer);\n        }\n    };\n\n    eachDefinition(walk, schema, pointer);\n};\n","\n/**\n * Returns a list of possible child-schemas for the given property key. In case of a oneOf selection, multiple schemas\n * could be added at the given property (e.g. item-index), thus an array of options is returned. In all other cases\n * a list with a single item will be returned\n *\n * @param  {Core} core          - core to use\n * @param  {String} property    - parent schema of following property\n * @param  {Object} [schema]    - parent schema of following property\n * @return {Object}\n */\nmodule.exports = function getChildSchemaSelection(core, property, schema = core.rootSchema) {\n    const result = core.step(property, schema, {}, \"#\");\n\n    if (result.type === \"error\") {\n        if (result.code === \"one-of-error\") {\n            return result.data.oneOf.map(item => core.resolveRef(item));\n        }\n        return result;\n    }\n\n    return [result];\n};\n","const gp = require(\"gson-pointer\");\nconst emptyObject = {};\n\n\n/**\n * Returns the json-schema of a data-json-pointer.\n *\n *  Notes\n *      - Uses core.step to walk through data and schema\n *\n * @param  {CoreInterface} core\n * @param  {String} pointer     - json pointer in data to get the json schema for\n * @param  {Mixed} [data]       - the data object, which includes the json pointers value. This is optional, as\n *                                 long as no oneOf, anyOf, etc statement is part of the pointers schema\n * @param  {Object} [schema]    - the json schema to iterate. Defaults to core.rootSchema\n * @return {Object|Error} json schema object of the json-pointer or an error\n */\nfunction getSchema(core, pointer, data, schema = core.rootSchema) {\n    const frags = gp.split(pointer);\n    return _get(core, schema, frags, pointer, data);\n}\n\n\nfunction _get(core, schema, frags, pointer, data = emptyObject) {\n    if (frags.length === 0) {\n        return schema;\n    }\n\n    const key = frags.shift(); // step key\n    schema = core.step(key, schema, data, pointer); // step schema\n    if (schema && schema.type === \"error\") {\n        return schema;\n    }\n    data = data[key]; // step data\n    return _get(core, schema, frags, `${pointer}/${key}`, data);\n}\n\n\nmodule.exports = getSchema;\n","/* eslint quote-props: 0, max-statements-per-line: [\"error\", { \"max\": 2 }] */\nconst resolveOneOfFuzzy = require(\"./resolveOneOf.fuzzy\");\nconst getTypeOf = require(\"./getTypeOf\");\nconst merge = require(\"./utils/merge\");\nconst copy = require(\"./utils/copy\");\nconst settings = require(\"./config/settings\");\n\n\nlet cache;\nfunction shouldResolveRef(schema, pointer) {\n    // ensure we refactored consistently\n    if (pointer == null) { throw new Error(\"Missing pointer\"); }\n\n    const { $ref } = schema;\n    if ($ref == null) { return true; }\n\n    const value = (cache[pointer] == null || cache[pointer][$ref] == null) ? 0 : cache[pointer][$ref];\n    return value < settings.GET_TEMPLATE_RECURSION_LIMIT;\n}\n\nfunction resolveRef(core, schema, pointer) {\n    // ensure we refactored consistently\n    if (pointer == null) { throw new Error(\"missing pointer\", pointer); }\n\n    const { $ref } = schema;\n    if ($ref == null) { return schema; }\n\n    // @todo pointer + ref is redundant?\n    cache[pointer] = cache[pointer] || {};\n    cache[pointer][$ref] = cache[pointer][$ref] || 0;\n    cache[pointer][$ref] += 1;\n    return core.resolveRef(schema);\n}\n\n\nfunction convertValue(type, value) {\n    if (type === \"string\") {\n        return JSON.stringify(value);\n    } else if (typeof value !== \"string\") {\n        return null;\n    }\n    try {\n        value = JSON.parse(value);\n        if (typeof value === type) {\n            return value;\n        }\n    } catch (e) {} // eslint-disable-line no-empty\n    return null;\n}\n\n/**\n * Resolves $ref, allOf and anyOf schema-options, returning a combined json-schema.\n * Also returns a pointer-property on schema, that must be used as current pointer.\n * @param  {Core} core\n * @param  {JSONSchema} schema\n * @param  {any} data\n * @param  {JSONPointer} pointer\n * @return {JSONSchem} resolved json-schema or input-schema\n */\nfunction createTemplateSchema(core, schema, data, pointer) {\n    // invalid schema\n    if (getTypeOf(schema) !== \"object\") {\n        return Object.assign({ pointer }, schema);\n    }\n    // return if reached recursion limit\n    if (shouldResolveRef(schema, pointer) === false && data == null) { return false; }\n\n    // resolve $ref and copy schema\n    let templateSchema = copy(resolveRef(core, schema, pointer));\n\n    if (Array.isArray(schema.anyOf) && schema.anyOf.length > 0) {\n        // test if we may resolve\n        if (shouldResolveRef(schema.anyOf[0], `${pointer}/anyOf/0`)) {\n            const resolvedAnyOf = resolveRef(core, schema.anyOf[0], `${pointer}/anyOf/0`);\n            templateSchema = merge(templateSchema, resolvedAnyOf);\n            // add pointer return-value, if any\n            templateSchema.pointer = schema.anyOf[0].$ref || templateSchema.pointer;\n        }\n        delete templateSchema.anyOf;\n    }\n\n    // resolve allOf\n    if (Array.isArray(schema.allOf)) {\n        for (let i = 0, l = schema.allOf.length; i < l; i += 1) {\n            // test if we may resolve\n            if (shouldResolveRef(schema.allOf[i], `${pointer}/allOf/${i}`)) {\n                templateSchema = merge(templateSchema, resolveRef(core, schema.allOf[i], `${pointer}/allOf/${i}`));\n                // add pointer return-value, if any\n                templateSchema.pointer = schema.allOf[i].$ref || templateSchema.pointer;\n            }\n        }\n        delete templateSchema.allOf;\n    }\n\n    templateSchema.pointer = templateSchema.pointer || schema.$ref || pointer;\n    return templateSchema;\n}\n\n/**\n * Create data object matching the given schema\n *\n * @param  {CoreInterface} core     - json schema core\n * @param  {Mixed} [data]           - optional template data\n * @param  {Object} [schema]        - json schema, defaults to rootSchema\n * @return {Mixed} created template data\n */\nfunction getTemplate(core, data, schema, pointer) {\n    if (schema == null) { throw new Error(\"getTemplate: missing schema for data\", data); }\n    if (pointer == null) { throw new Error(\"Missing pointer\"); }\n\n    // resolve $ref references, allOf and first anyOf definitions\n    schema = createTemplateSchema(core, schema, data, pointer);\n    if (schema === false) { return undefined; }\n    pointer = schema.pointer;\n\n    if (schema.oneOf) {\n        // find correct schema for data\n        const resolvedSchema = resolveOneOfFuzzy(core, data, schema);\n        if (data == null && resolvedSchema.type === \"error\") {\n            schema = schema.oneOf[0];\n        } else if (resolvedSchema.type === \"error\") {\n            // @todo - check: do not return schema, but either input-data or undefined (clearing wrong data)\n            return data;\n        } else {\n            schema = resolvedSchema;\n        }\n    }\n\n    if (schema.type == null) {\n        return undefined;\n    }\n\n    // reset invalid type\n    if (data != null && getTypeOf(data) !== schema.type) {\n        data = convertValue(schema.type, data);\n    }\n\n    if (TYPE[schema.type] == null) { // eslint-disable-line no-use-before-define\n        throw new Error(`Unsupported type '${schema.type} in ${JSON.stringify(schema)}'`);\n    }\n\n    const templateData = TYPE[schema.type](core, schema, data, pointer); // eslint-disable-line no-use-before-define\n    return templateData;\n}\n\n\nconst TYPE = {\n    \"string\": (core, schema, data) => getDefault(schema, data, \"\"),\n    \"number\": (core, schema, data) => getDefault(schema, data, 0),\n    \"integer\": (core, schema, data) => getDefault(schema, data, 0),\n    \"boolean\": (core, schema, data) => getDefault(schema, data, false),\n    \"object\": (core, schema, data, pointer) => {\n        const template = schema.default === undefined ? {} : schema.default;\n        const d = {}; // do not assign data here, to keep ordering from json-schema\n\n        if (schema.properties) {\n            Object.keys(schema.properties).forEach(key => {\n                const value = (data == null || data[key] == null) ? template[key] : data[key];\n                d[key] = getTemplate(core, value, schema.properties[key], `${pointer}/properties/${key}`);\n            });\n        }\n\n        if (data) {\n            // merge any missing data (additionals) to resulting object\n            Object.keys(data).forEach(key => (d[key] == null && (d[key] = data[key])));\n        }\n\n        // returns object, which is ordered by json-schema\n        return d;\n    },\n    // build array type of items, ignores additionalItems\n    \"array\": (core, schema, data, pointer) => {\n        const template = schema.default === undefined ? [] : schema.default;\n        const d = data || [];\n        schema.minItems = schema.minItems || 0;\n\n        // items are undefined\n        if (schema.items == null) {\n            return d;\n        }\n\n        // build defined set of items\n        if (Array.isArray(schema.items)) {\n            for (let i = 0, l = Math.min(schema.minItems, schema.items.length); i < l; i += 1) {\n                d[i] = getTemplate(core, d[i] == null ? template[i] : d[i], schema.items[i], `${pointer}/items/${i}`);\n            }\n            return d;\n        }\n\n        // abort if the schema is invalid\n        if (getTypeOf(schema.items) !== \"object\") {\n            return d;\n        }\n\n        // resolve allOf and first anyOf definition\n        const templateSchema = createTemplateSchema(core, schema.items, data, pointer);\n        if (templateSchema === false) {\n            return d;\n        }\n        pointer = templateSchema.pointer || pointer;\n\n        // build oneOf\n        if (templateSchema.oneOf && d.length === 0) {\n            const oneOfSchema = templateSchema.oneOf[0];\n            for (let i = 0; i < schema.minItems; i += 1) {\n                d[i] = getTemplate(core, d[i] == null ? template[i] : d[i], oneOfSchema, `${pointer}/oneOf/0`);\n            }\n            return d;\n        }\n\n        if (templateSchema.oneOf && d.length > 0) {\n            const itemCount = Math.max(schema.minItems, d.length);\n            for (let i = 0; i < itemCount; i += 1) {\n                const value = d[i] == null ? template[i] : d[i];\n                const one = resolveOneOfFuzzy(core, value, templateSchema);\n                if (one) {\n                    d[i] = getTemplate(core, value, one, `${pointer}/oneOf/${i}`);\n                } else {\n                    d[i] = value;\n                }\n            }\n            return d;\n        }\n\n        // build items-definition\n        if (templateSchema.type) {\n            for (let i = 0, l = Math.max(schema.minItems, d.length); i < l; i += 1) {\n                d[i] = getTemplate(core, d[i] == null ? template[i] : d[i], templateSchema, `${pointer}/items`);\n            }\n            return d;\n        }\n\n        return d;\n    }\n};\n\n\nfunction getDefault(schema, templateValue, initValue) {\n    if (templateValue != null) {\n        return templateValue;\n    } else if (schema.default === undefined && Array.isArray(schema.enum)) {\n        return schema.enum[0];\n    } else if (schema.default === undefined) {\n        return initValue;\n    }\n    return schema.default;\n}\n\n\nmodule.exports = (core, data, schema = core.rootSchema) => {\n    cache = { \"mi\": \"..\" };\n    return getTemplate(core, data, schema, \"#\");\n};\n","const toString = Object.prototype.toString;\n\nmodule.exports = function getTypeOf(value) {\n    // eslint-disable-next-line newline-per-chained-call\n    return toString.call(value).match(/\\s([^\\]]+)\\]/).pop().toLowerCase();\n};\n","/**\n * Test if the data is valid according to the given schema\n *\n * @param  {CoreInterface} core - validator\n * @param  {Mixed} value        - value to validate\n * @param  {Schema} [schema]    - json schema\n * @param  {String} [pointer]   - json pointer pointing to value\n * @return {Boolean} if schema does match given value\n */\nmodule.exports = function isValid(core, value, schema = core.rootSchema, pointer = \"#\") {\n    return core.validate(value, schema, pointer).length === 0;\n};\n","const copy = require(\"./utils/copy\");\nconst merge = require(\"./utils/merge\");\nconst errors = require(\"./validation/errors\");\n\n\nmodule.exports = function resolveAllOf(core, data, schema = core.rootSchema, pointer = \"#\") {\n    let mergedSchema = copy(schema);\n    for (let i = 0; i < schema.allOf.length; i += 1) {\n        const allOfSchema = core.resolveRef(schema.allOf[i]);\n        if (core.isValid(data, allOfSchema, pointer) === false) {\n            return errors.allOfError({ value: data, pointer, allOf: JSON.stringify(schema.allOf) });\n        }\n        mergedSchema = merge(mergedSchema, allOfSchema);\n    }\n\n    delete mergedSchema.allOf;\n    return mergedSchema;\n};\n","const copy = require(\"./utils/copy\");\nconst merge = require(\"./utils/merge\");\nconst errors = require(\"./validation/errors\");\n\n\nmodule.exports = function resolveAnyOf(core, data, schema = core.rootSchema, pointer = \"#\") {\n    let found = false;\n    let mergedSchema = copy(schema);\n    for (let i = 0; i < schema.anyOf.length; i += 1) {\n        const anyOfSchema = core.resolveRef(schema.anyOf[i]);\n        if (core.isValid(data, schema.anyOf[i], pointer)) {\n            found = true;\n            mergedSchema = merge(mergedSchema, anyOfSchema);\n        }\n    }\n\n    if (found === false) {\n        return errors.anyOfError({ value: data, pointer, anyOf: JSON.stringify(schema.anyOf) });\n    }\n\n    delete mergedSchema.anyOf;\n    return mergedSchema;\n};\n","const filter = require(\"./utils/filter\");\nconst flattenArray = require(\"./utils/flattenArray\");\nconst getTypeOf = require(\"./getTypeOf\");\nconst { DECLARATOR_ONEOF } = require(\"./config/settings\");\n\n\n/**\n * Returns a ranking for the data and given schema\n *\n * @param  {CoreInterface} core\n * @param  {Object} one     - json schema type: object\n * @param  {Object} data\n * @param  {String} pointer\n * @return {Number} ranking value (higher is better)\n */\nfunction fuzzyObjectValue(core, one, data, pointer) {\n    if (data == null || one.properties == null) {\n        return -1;\n    }\n\n    let value = 0;\n    const keys = Object.keys(one.properties);\n    for (var i = 0; i < keys.length; i += 1) {\n        const key = keys[i];\n        if (data[key] != null && core.isValid(data[key], one.properties[key], pointer)) {\n            value += 1;\n        }\n    }\n\n    return value;\n}\n\n/**\n * Selects and returns a oneOf schema for the given data\n *\n * @param  {CoreInterface} core\n * @param  {Mixed} data\n * @param  {Object} schema      - current json schema containing property oneOf\n * @param  {String} pointer     - json pointer to data\n * @return {Object|Error} oneOf schema or an error\n */\nmodule.exports = function resolveOneOf(core, data, schema = core.rootSchema, pointer = \"#\") {\n    // !keyword: oneOfProperty\n    // an additional <DECLARATOR_ONEOF> (default `oneOfProperty`) on the schema will exactly determine the\n    // oneOf value (if set in data)\n\n    // @fixme\n    // abort if no data is given an DECLARATOR_ONEOF is set (used by getChildSchemaSelection)\n    // this case (data != null) should not be necessary\n    if (data != null && schema[DECLARATOR_ONEOF]) {\n\n        const errors = [];\n        const oneOfProperty = schema[DECLARATOR_ONEOF];\n        const oneOfValue = data[schema[DECLARATOR_ONEOF]];\n\n        if (oneOfValue === undefined) {\n            return core.errors.missingOneOfPropertyError({ property: oneOfProperty, pointer });\n        }\n\n        for (let i = 0; i < schema.oneOf.length; i += 1) {\n            const one = core.resolveRef(schema.oneOf[i]);\n            const oneOfPropertySchema = core.step(oneOfProperty, one, data, pointer);\n\n            if (oneOfPropertySchema && oneOfPropertySchema.type === \"error\") {\n                return oneOfPropertySchema;\n            }\n\n            let result = flattenArray(core.validate(oneOfValue, oneOfPropertySchema, pointer));\n            result = result.filter(filter.errorOrPromise);\n\n            if (result.length > 0) {\n                errors.push(...result);\n            } else {\n                return one; // return resolved schema\n            }\n        }\n\n        return core.errors.oneOfPropertyError({ property: oneOfProperty, value: oneOfValue, pointer, errors });\n    }\n\n    // keyword: oneOf\n    const matches = [];\n    for (let i = 0; i < schema.oneOf.length; i += 1) {\n        const one = core.resolveRef(schema.oneOf[i]);\n        if (core.isValid(data, one, pointer)) {\n            matches.push(one);\n        }\n    }\n\n    if (matches.length === 1) {\n        return matches[0];\n    }\n\n    // fuzzy match oneOf\n    if (getTypeOf(data) === \"object\") {\n        let schemaOfItem;\n        let fuzzyGreatest = 0;\n\n        for (let i = 0; i < schema.oneOf.length; i += 1) {\n            const one = core.resolveRef(schema.oneOf[i]);\n            const fuzzyValue = fuzzyObjectValue(core, one, data);\n\n            if (fuzzyGreatest < fuzzyValue) {\n                fuzzyGreatest = fuzzyValue;\n                schemaOfItem = schema.oneOf[i];\n            }\n        }\n\n        if (schemaOfItem === undefined) {\n            return core.errors.oneOfError({ value: JSON.stringify(data), pointer, oneOf: schema.oneOf });\n        }\n\n        return schemaOfItem;\n    }\n\n    if (matches.length > 1) {\n        return core.errors.multipleOneOfError({ matches, data, pointer });\n    }\n\n    return core.errors.oneOfError({ value: JSON.stringify(data), pointer, oneOf: schema.oneOf });\n};\n","const filter = require(\"./utils/filter\");\nconst flattenArray = require(\"./utils/flattenArray\");\n\n\n/**\n * Selects and returns a oneOf schema for the given data\n *\n * @param  {CoreInterface} core - validator\n * @param  {Mixed} data\n * @param  {Object} schema      - current json schema containing property oneOf\n * @param  {String} pointer     - json pointer to data\n * @return {Object|Error} oneOf schema or an error\n */\nmodule.exports = function resolveOneOf(core, data, schema = core.rootSchema, pointer = \"#\") {\n    const matches = [];\n    const errors = [];\n    for (let i = 0; i < schema.oneOf.length; i += 1) {\n        const one = core.resolveRef(schema.oneOf[i]);\n\n        let result = flattenArray(core.validate(data, one, pointer));\n        result = result.filter(filter.errorOrPromise);\n\n        if (result.length > 0) {\n            errors.push(...result);\n        } else {\n            matches.push(one);\n        }\n    }\n\n    if (matches.length === 1) {\n        return matches[0];\n    }\n    if (matches.length > 1) {\n        return core.errors.multipleOneOfError({ value: data, pointer, matches });\n    }\n\n    return core.errors.oneOfError({ value: JSON.stringify(data), pointer, oneOf: schema.oneOf, errors });\n};\n","module.exports = function resolveRef(schema, rootSchema) {\n    if (schema == null || schema.$ref == null) {\n        return schema;\n    }\n\n    const resolvedSchema = rootSchema.getRef(schema);\n    return resolvedSchema;\n};\n","module.exports = function resolveRefMerge(schema, rootSchema) {\n    if (schema == null || schema.$ref == null) {\n        return schema;\n    }\n\n    const resolvedSchema = rootSchema.getRef(schema);\n    const mergedSchema = Object.assign({}, resolvedSchema, schema);\n    delete mergedSchema.$ref;\n    // @todo the following might not be safe nor incomplete\n    Object.defineProperty(mergedSchema, \"__ref\", { enumerable: false, value: schema.__ref });\n    Object.defineProperty(mergedSchema, \"getRoot\", { enumerable: false, value: schema.getRoot });\n    return mergedSchema;\n};\n\n","const gp = require(\"gson-pointer\");\nconst gq = require(\"gson-query\");\nconst getTypeId = require(\"./getTypeId\");\nconst types = require(\"./types\");\nconst isObject = value => Object.prototype.toString.call(value) === \"[object Object]\";\n\n\n/**\n * Returns a list of all (direct) type definitions from the given schema\n * @param  {Object} schema\n * @return {Array} list of type definition, given as { pointer, def }\n */\nmodule.exports = function getTypeDefs(schema) {\n    const defs = [];\n    const id = getTypeId(schema);\n    if (id == null) {\n        return defs;\n    }\n    const type = types[id];\n    if (type.definitions == null) {\n        return defs;\n    }\n    type.definitions.forEach(query => {\n        gq.run(schema, query, (value, key, parent, pointer) => {\n            if (isObject(value) && getTypeId(value)) {\n                defs.push({ pointer: gp.join(gp.split(pointer), false), def: value });\n            }\n        });\n    });\n    return defs;\n};\n","const types = require(\"./types\");\nconst isObject = value => Object.prototype.toString.call(value) === \"[object Object]\";\nconst typeKeywords = Object.keys(types).filter(id => types[id].type === false);\n\n\n/**\n * @throws Error    on multiple matches (invalid schema)\n *\n * Returns the type id of a schema object\n * @param  {Object} schema\n * @return {undefined|string} type id, if found\n */\nmodule.exports = function getTypeId(schema) {\n    if (isObject(schema) === false) {\n        return undefined;\n    }\n\n    if (schema.enum) {\n        return \"enum\";\n    }\n\n    if (types[schema.type]) {\n        return schema.type;\n    }\n\n    const ids = typeKeywords.filter(type => schema[type]);\n\n    if (ids.length === 1) {\n        return ids[0];\n    }\n\n    if (ids.length === 0) {\n        // @expensive, guess type object\n        for (let i = 0, l = types.object.keywords.length; i < l; i += 1) {\n            const keyword = types.object.keywords[i];\n            if (schema.hasOwnProperty(keyword)) {\n                return \"object\";\n            }\n        }\n\n        // @expensive, guess type array\n        for (let i = 0, l = types.array.keywords.length; i < l; i += 1) {\n            const keyword = types.array.keywords[i];\n            if (schema.hasOwnProperty(keyword)) {\n                return \"array\";\n            }\n        }\n\n        return undefined;\n    }\n\n    throw new Error(`Mutiple typeIds [${ids.join(\", \")}] matched in ${JSON.stringify(schema)}`);\n};\n","module.exports = {\n    $ref: {\n        type: false\n    },\n    allOf: {\n        type: false,\n        definitions: [\"allOf/*\"]\n    },\n    anyOf: {\n        type: false,\n        definitions: [\"anyOf/*\"]\n    },\n    array: {\n        type: true,\n        // ignore additionalItems:TypeDef, when items:TypeDef\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\", \"items\", \"items/*\", \"additionalItems\"],\n        validationKeywords: [\"minItems\", \"maxItems\", \"uniqueItems\"],\n        keywords: [\"items\", \"additionalItems\", \"minItems\", \"maxItems\", \"uniqueItems\"]\n    },\n    \"boolean\": {\n        type: true\n    },\n    \"enum\": {\n        type: false\n    },\n    integer: {\n        type: true,\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\"],\n        validationKeywords: [\"minimum\", \"maximum\", \"multipleOf\"]\n    },\n    not: {\n        type: false,\n        definitions: [\"not\"]\n    },\n    number: {\n        type: true,\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\"],\n        validationKeywords: [\"minimum\", \"maximum\", \"multipleOf\"]\n    },\n    \"null\": {\n        type: true\n    },\n    object: {\n        type: true,\n        // patternProperties also validate properties\n        // dependencies:(string, TypeDef) extend current TypeDef\n        // additional Properties validate only remaining properties (after properties & pattern)\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\",\n            \"properties/*\", \"additionalProperties\", \"patternProperties/*\", \"dependencies/*\"],\n        validationKeywords: [\"minProperties\", \"maxProperties\", \"required\"],\n        keywords: [\"properties\", \"additionalProperties\", \"patternProperties\", \"dependencies\", \"minProperties\",\n            \"maxProperties\", \"required\"]\n    },\n    oneOf: {\n        type: false,\n        definitions: [\"oneOf/*\"]\n    },\n    string: {\n        type: true,\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\"],\n        validationKeywords: [\"minLength\", \"maxLength\", \"pattern\"]\n    }\n};\n","const getTypeOf = require(\"./getTypeOf\");\nconst createSchemaOf = require(\"./createSchemaOf\");\nconst errors = require(\"./validation/errors\");\nconst merge = require(\"./utils/merge\");\n\n\nconst stepType = {\n\n    array: (core, key, schema, data, pointer) => {\n        const itemsType = getTypeOf(schema.items);\n\n        if (itemsType === \"object\") {\n            // oneOf\n            if (Array.isArray(schema.items.oneOf)) {\n                return core.resolveOneOf(data[key], schema.items, pointer) || false;\n            }\n\n            // anyOf\n            if (Array.isArray(schema.items.anyOf)) {\n                // schema of current object\n                return core.resolveAnyOf(data[key], schema.items, pointer);\n            }\n\n            // allOf\n            if (Array.isArray(schema.items.allOf)) {\n                return core.resolveAllOf(data[key], schema.items, pointer);\n            }\n\n            // spec: ignore additionalItems, when items is schema-object\n            return core.resolveRef(schema.items);\n        }\n\n        if (itemsType === \"array\") {\n            if (schema.items[key]) {\n                return core.resolveRef(schema.items[key]);\n            }\n\n            if (schema.additionalItems === false) {\n                return errors.additionalItemsError({ key, value: data[key], pointer });\n            }\n\n            if (schema.additionalItems === true || schema.additionalItems === undefined) {\n                return createSchemaOf(data[key]);\n            }\n\n            if (getTypeOf(schema.additionalItems) === \"object\") {\n                return schema.additionalItems;\n            }\n\n            throw new Error(`Invalid schema ${JSON.stringify(schema, null, 4)} for ${JSON.stringify(data, null, 4)}`);\n        }\n\n        if (schema.additionalItems !== false && data[key]) {\n            // @todo reevaluate: incomplete schema is created here\n            // @todo support additionalItems: {schema}\n            return createSchemaOf(data[key]);\n        }\n\n        return new Error(`Invalid array schema for ${key} at ${pointer}`);\n    },\n\n    object: (core, key, schema, data, pointer) => {\n\n        if (Array.isArray(schema.oneOf)) {\n            // update current schema\n            const oneOfSchema = core.resolveOneOf(data, schema, pointer);\n            // resolveOneOf does currently not apply merge with base schema\n            schema = merge(schema, oneOfSchema);\n            if (schema && schema.type === \"error\") {\n                return schema;\n            }\n        }\n\n        if (Array.isArray(schema.anyOf)) {\n            // update current schema\n            schema = core.resolveAnyOf(data, schema, pointer);\n            if (schema && schema.type === \"error\") {\n                return schema;\n            }\n        }\n\n        if (Array.isArray(schema.allOf)) {\n            // update current schema\n            schema = core.resolveAllOf(data, schema, pointer);\n            if (schema && schema.type === \"error\") {\n                return schema;\n            }\n        }\n\n        let targetSchema;\n\n        // step into object-properties\n        if (schema.properties && schema.properties[key] !== undefined) {\n            // @todo patternProperties also validate properties\n\n            targetSchema = core.resolveRef(schema.properties[key]);\n            if (targetSchema && targetSchema.type === \"error\") {\n                return targetSchema;\n            }\n\n            // check if there is a oneOf selection, which must be resolved\n            if (targetSchema && Array.isArray(targetSchema.oneOf)) {\n                // @special case: this is a mix of a schema and optional definitions\n                // we resolve the schema here and add the original schema to `oneOfSchema`\n                let resolvedSchema = core.resolveOneOf(data[key], targetSchema, `${pointer}/${key}`);\n                resolvedSchema = JSON.parse(JSON.stringify(resolvedSchema));\n                resolvedSchema.variableSchema = true;\n                resolvedSchema.oneOfSchema = targetSchema;\n                return resolvedSchema;\n            }\n\n            // resolved schema or error\n            if (targetSchema) {\n                return targetSchema;\n            }\n        }\n\n        // find matching property key\n        if (getTypeOf(schema.patternProperties) === \"object\") {\n            let regex;\n            const patterns = Object.keys(schema.patternProperties);\n            for (let i = 0, l = patterns.length; i < l; i += 1) {\n                regex = new RegExp(patterns[i]);\n                if (regex.test(key)) {\n                    return schema.patternProperties[patterns[i]];\n                }\n            }\n        }\n\n        if (getTypeOf(schema.additionalProperties) === \"object\") {\n            return schema.additionalProperties;\n        }\n\n        if (schema.additionalProperties === true) {\n            return createSchemaOf(data);\n        }\n\n        return errors.unknownPropertyError({ property: key, value: data, pointer });\n    }\n};\n\n\n/**\n * Returns the json-schema of the given object property or array item.\n * e.g. it steps by one key into the data\n *\n *  This helper determines the location of the property within the schema (additional properties, oneOf, ...) and\n *  returns the correct schema.\n *\n * @param  {CoreInterface} core     - validator\n * @param  {String|Number} key      - property-name or array-index\n * @param  {Object} schema          - json schema of current data\n * @param  {Object|Array} data      - parent of key\n * @param  {String} pointer\n * @return {Object|Error} Schema or Error if failed resolving key\n */\nfunction step(core, key, schema, data, pointer = \"#\") {\n    const expectedType = schema.type || getTypeOf(data);\n    if (stepType[expectedType]) {\n        return stepType[expectedType](core, key, schema, data, pointer);\n    }\n    return new Error(`Unsupported schema type ${schema.type} for key ${key}`);\n}\n\n\nmodule.exports = step;\n","const strings = require(\"../config/strings\");\nconst render = require(\"./render\");\n\n/**\n * Renders the given string as defined in __@see config/strings.js__\n * @param  {String} keyword\n * @param  {Object} data        - template data\n * @param  {String} fallback    - fallback template\n * @return {String} resultugn string\n */\nmodule.exports = function __(keyword, data, fallback = keyword) {\n    const template = strings[keyword] || fallback;\n    return render(template, data);\n};\n","module.exports = value => JSON.parse(JSON.stringify(value));\n","const __ = require(\"./__\");\n\nfunction dashCase(str) {\n    return str.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n}\n\n\n/**\n * Creates a custom Error-Constructor which instances may be identified by `customError instanceof Error`. Its messages\n * are defined by strings-object __@see config/strings.js__sa\n * @param  {String} name    - id of error (camelcased)\n * @return {Function} Error-Contructor\n */\nmodule.exports = function createCustomError(name) {\n    return function (data) {\n        return {\n            type: \"error\",\n            name,\n            code: dashCase(name),\n            message: __(name, data),\n            data\n        };\n    };\n\n    // function CustomError(data) {\n    //     const message = __(name, data);\n    //     const error = Error.call(this, message);\n    //     this.name = name;\n    //     this.code = dashCase(name);\n    //     this.stack = error.stack;\n    //     this.message = message;\n    //     this.data = data;\n    // }\n    // CustomError.prototype = Object.create(Error.prototype);\n    // CustomError.prototype.name = name;\n    // return CustomError;\n};\n","function isPromise(obj) {\n    return obj instanceof Promise;\n}\n\nfunction isError(obj) {\n    return obj && obj.type === \"error\";\n}\n\nmodule.exports = {\n    isError,\n    isPromise,\n    errorOrPromise(error) {\n        return isError(error) || isPromise(error);\n    },\n    errorsOnly(error) {\n        return isError(error);\n    }\n};\n","function flattenArray(list, result = []) {\n    for (let i = 0; i < list.length; i += 1) {\n        if (Array.isArray(list[i])) {\n            flattenArray(list[i], result);\n        } else {\n            result.push(list[i]);\n        }\n    }\n    return result;\n}\n\nmodule.exports = flattenArray;\n","const deepmerge = require(\"deepmerge\");\nconst overwriteMerge = (destinationArray, sourceArray) => sourceArray;\nmodule.exports = (a, b) => deepmerge(a, b, { arrayMerge: overwriteMerge });\n","/* eslint no-bitwise: 0 */\n\n/**\n * taken from punycode@2.1.0\n *\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n    const output = [];\n    let counter = 0;\n    const length = string.length;\n    while (counter < length) {\n        const value = string.charCodeAt(counter++);\n        if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n            // It's a high surrogate, and there is a next character.\n            const extra = string.charCodeAt(counter++);\n            // eslint-disable-next-line eqeqeq\n            if ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n                output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n            } else {\n                // It's an unmatched surrogate; only append this code unit, in case the\n                // next code unit is the high surrogate of a surrogate pair.\n                output.push(value);\n                counter--;\n            }\n        } else {\n            output.push(value);\n        }\n    }\n    return output;\n}\n\nmodule.exports = ucs2decode;\n","/**\n * Renders data into a string by {{variables}}.\n * Given a template string, removes all {{property}} substrings and replaces them with the property in the given data\n *\n * @param {String} template     - template string containing variables in handelbars/mustache style\n * @param {Object} data         - flat object containing properties matching variables\n * @return {String} rendered string\n */\nmodule.exports = function render(template, data = {}) {\n    return template.replace(/\\{\\{\\w+\\}\\}/g, match => data[match.replace(/[{}]/g, \"\")]);\n};\n","const getTypeOf = require(\"./getTypeOf\");\nconst filter = require(\"./utils/filter\");\nconst flattenArray = require(\"./utils/flattenArray\");\n\n\nfunction getJsonSchemaType(value, expectedType) {\n    let jsType = getTypeOf(value);\n\n    if (\n        jsType === \"number\" && (expectedType === \"integer\" ||\n        (Array.isArray(expectedType) && expectedType.includes(\"integer\")))\n    ) {\n        jsType = Number.isInteger(value) ? \"integer\" : \"number\";\n    }\n    return jsType;\n}\n\n\n/**\n * Validate data by a json schema\n *\n * @param  {CoreInterface} core - validator\n * @param  {Mixed} value        - value to validate\n * @param  {Schema} [schema]     - json schema, defaults to rootSchema\n * @param  {String} [pointer]   - json pointer pointing to value (used for error-messages only)\n * @return {Array} list of errors or empty\n */\nmodule.exports = function validate(core, value, schema = core.rootSchema, pointer = \"#\") {\n    if (schema.type === \"error\") {\n        return [schema];\n    }\n\n    schema = core.resolveRef(schema);\n\n    const receivedType = getJsonSchemaType(value, schema.type);\n    const expectedType = schema.type || receivedType;\n\n    if (receivedType !== expectedType && (!Array.isArray(expectedType) || !expectedType.includes(receivedType))) {\n        return [core.errors.typeError({ received: receivedType, expected: expectedType, value, pointer })];\n    }\n\n    if (core.validateType[receivedType] == null) {\n        return [core.errors.invalidTypeError({ receivedType, pointer })];\n    }\n\n    const errors = flattenArray(core.validateType[receivedType](core, schema, value, pointer));\n    // also promises may be passed along (validateAsync)\n    return errors.filter(filter.errorOrPromise);\n};\n","const filter = require(\"./utils/filter\");\nconst flattenArray = require(\"./utils/flattenArray\");\n\n\nfunction createErrorNotification(onError) {\n    return function notifyError(error) {\n        if (Array.isArray(error)) {\n            error = flattenArray(error);\n            error.forEach(notifyError);\n            return error;\n        }\n        if (filter.isError(error)) {\n            onError(error);\n        }\n        return error;\n    };\n}\n\n\n/**\n * @async\n * Validate data by a json schema\n *\n * @param  {CoreInterface} core         - validator\n * @param  {Mixed} value                - value to validate\n * @param  {Object} options\n * @param  {Schema} options.schema      - json schema to use, defaults to core.rootSchema\n * @param  {String} options.pointer     - json pointer pointing to current value. Used in error reports\n * @param  {Function} options.onError   - will be called for each error as soon as it is resolved\n * @return {Promise<Array>} list of errors or empty\n */\nmodule.exports = function validateAsync(core, value, { schema = core.rootSchema, pointer = \"#\", onError }) {\n    let errors = core.validate(value, schema, pointer);\n\n    if (onError) {\n        errors = flattenArray(errors);\n        const notifyError = createErrorNotification(onError);\n        for (let i = 0; i < errors.length; i += 1) {\n            if (errors[i] instanceof Promise) {\n                errors[i].then(notifyError);\n            } else if (filter.isError(errors[i])) {\n                onError(errors[i]);\n            }\n        }\n    }\n\n    return Promise\n        .all(errors)\n        .then(flattenArray)\n        .then(resolvedErrors => resolvedErrors.filter(filter.errorsOnly))\n        .catch(e => {\n            console.log(\"Failed resolving promises\", e.message);\n            console.log(e.stack);\n            throw e;\n        });\n};\n","/* eslint no-invalid-this: 0 */\nconst createCustomError = require(\"../utils/createCustomError\");\n\n\nconst errors = {\n    additionalItemsError: createCustomError(\"AdditionalItemsError\"),\n    additionalPropertiesError: createCustomError(\"AdditionalPropertiesError\"),\n    anyOfError: createCustomError(\"AnyOfError\"),\n    allOfError: createCustomError(\"AllOfError\"),\n    enumError: createCustomError(\"EnumError\"),\n    formatUrlError: createCustomError(\"FormatUrlError\"),\n    formatUriError: createCustomError(\"FormatUriError\"),\n    formatDateTimeError: createCustomError(\"FormatDateTimeError\"),\n    formatEmailError: createCustomError(\"FormatEmailError\"),\n    formatHostnameError: createCustomError(\"FormatHostnameError\"),\n    formatIPV4Error: createCustomError(\"FormatIPV4Error\"),\n    formatIPV6Error: createCustomError(\"FormatIPV6Error\"),\n    formatRegExError: createCustomError(\"FormatRegExError\"),\n    invalidSchemaError: createCustomError(\"InvalidSchemaError\"),\n    invalidTypeError: createCustomError(\"InvalidTypeError\"),\n    maximumError: createCustomError(\"MaximumError\"),\n    maxItemsError: createCustomError(\"MaxItemsError\"),\n    maxLengthError: createCustomError(\"MaxLengthError\"),\n    maxPropertiesError: createCustomError(\"MaxPropertiesError\"),\n    minimumError: createCustomError(\"MinimumError\"),\n    minItemsError: createCustomError(\"MinItemsError\"),\n    minLengthError: createCustomError(\"MinLengthError\"),\n    minPropertiesError: createCustomError(\"MinPropertiesError\"),\n    missingDependencyError: createCustomError(\"MissingDependencyError\"),\n    missingOneOfPropertyError: createCustomError(\"MissingOneOfPropertyError\"),\n    multipleOfError: createCustomError(\"MultipleOfError\"),\n    multipleOneOfError: createCustomError(\"MultipleOneOfError\"),\n    noAdditionalPropertiesError: createCustomError(\"NoAdditionalPropertiesError\"),\n    notError: createCustomError(\"NotError\"),\n    oneOfError: createCustomError(\"OneOfError\"),\n    oneOfPropertyError: createCustomError(\"OneOfPropertyError\"),\n    patternError: createCustomError(\"PatternError\"),\n    patternPropertiesError: createCustomError(\"PatternPropertiesError\"),\n    requiredPropertyError: createCustomError(\"RequiredPropertyError\"),\n    typeError: createCustomError(\"TypeError\"),\n    undefinedValueError: createCustomError(\"UndefinedValueError\"),\n    uniqueItemsError: createCustomError(\"UniqueItemsError\"),\n    unknownPropertyError: createCustomError(\"UnknownPropertyError\"),\n    valueNotEmptyError: createCustomError(\"ValueNotEmptyError\")\n};\n\n\nmodule.exports = errors;\n","/* eslint-disable max-len */\nconst errors = require(\"./errors\");\nconst validUrl = require(\"valid-url\");\n\n// https://gist.github.com/marcelotmelo/b67f58a08bee6c2468f8\nconst isValidDateTime = new RegExp(\"^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\\\.[0-9]+)?(([Zz])|([\\\\+|\\\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$\");\n// https://stackoverflow.com/questions/23483855/javascript-regex-to-validate-ipv4-and-ipv6-address-no-hostnames\nconst isValidIPV4 = /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\\-]*[A-Za-z0-9])$|^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/;\nconst isValidIPV6 = /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\\-]*[A-Za-z0-9])$|^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/;\n\n\n// Default JSON-Schema formats: date-time, email, hostname, ipv4, ipv6, uri, uriref\nconst FormatValidation = {\n\n    \"date-time\": (core, schema, value, pointer) => {\n        if (value === \"\" || isValidDateTime.test(value)) {\n            if (new Date(value).toString() === \"Invalid Date\") {\n                return errors.formatDateTimeError({ value, pointer });\n            }\n            return undefined;\n        }\n        return errors.formatDateTimeError({ value, pointer });\n    },\n\n    email: (core, schema, value, pointer) => {\n        if (value === \"\" || value.includes(\"@\")) {\n            return undefined;\n        }\n        return errors.formatEmailError({ value, pointer });\n    },\n\n    hostname: (core, schema, value, pointer) => {\n        if (value === \"\" || /\\./.test(value)) {\n            return undefined;\n        }\n        return errors.formatHostnameError({ value, pointer });\n    },\n\n    ipv4: (core, schema, value, pointer) => {\n        if (value === \"\" || isValidIPV4.test(value)) {\n            return undefined;\n        }\n        return errors.formatIPV4Error({ value, pointer });\n    },\n\n    ipv6: (core, schema, value, pointer) => {\n        if (value === \"\" || isValidIPV6.test(value)) {\n            return undefined;\n        }\n        return errors.formatIPV6Error({ value, pointer });\n    },\n\n    regex: (core, schema, value, pointer) => {\n        if (typeof value === \"string\" && /\\\\Z$/.test(value) === false) {\n            return undefined;\n        }\n        return errors.formatRegExError({ value, pointer });\n    },\n    uri: (core, schema, value, pointer) => {\n        if (value === \"\" || validUrl.isUri(value)) {\n            return undefined;\n        }\n        return errors.formatUriError({ value, pointer });\n    },\n\n    url: (core, schema, value, pointer) => {\n        if (value === \"\" || validUrl.isWebUri(value)) {\n            return undefined;\n        }\n        return errors.formatUrlError({ value, pointer });\n    }\n};\n\n\nmodule.exports = FormatValidation;\n","const getTypeOf = require(\"../getTypeOf\");\nconst ucs2decode = require(\"../utils/punycode.ucs2decode\");\nconst settings = require(\"../config/settings\");\nconst FPP = settings.floatingPointPrecision;\n\n// list of validation keywords: http://json-schema.org/latest/json-schema-validation.html#rfc.section.5\nconst KeywordValidation = {\n\n    additionalProperties: (core, schema, value, pointer) => {\n        if (schema.additionalProperties === true || schema.additionalProperties == null) {\n            return undefined;\n        }\n\n        if (getTypeOf(schema.patternProperties) === \"object\" && schema.additionalProperties === false) {\n            // this is an arrangement with patternProperties. patternProperties validate before additionalProperties:\n            // https://spacetelescope.github.io/understanding-json-schema/reference/object.html#index-5\n            return undefined;\n        }\n\n        const errors = [];\n        let receivedProperties = Object.keys(value).filter(prop => settings.propertyBlacklist.includes(prop) === false);\n        const expectedProperties = Object.keys(schema.properties || {});\n\n        if (getTypeOf(schema.patternProperties) === \"object\") {\n            // filter received properties by matching patternProperties\n            const patterns = Object.keys(schema.patternProperties).map(pattern => new RegExp(pattern));\n            receivedProperties = receivedProperties.filter(prop => {\n                for (let i = 0; i < patterns.length; i += 1) {\n                    if (patterns[i].test(prop)) {\n                        return false; // remove\n                    }\n                }\n                return true;\n            });\n        }\n\n        // adds an error for each an unexpected property\n        for (let i = 0, l = receivedProperties.length; i < l; i += 1) {\n            const property = receivedProperties[i];\n            if (expectedProperties.indexOf(property) === -1) {\n                const isObject = typeof schema.additionalProperties === \"object\";\n\n                // additionalProperties { oneOf: [] }\n                if (isObject && Array.isArray(schema.additionalProperties.oneOf)) {\n                    const result = core.resolveOneOf(\n                        value[property], schema.additionalProperties, `${pointer}/${property}`\n                    );\n                    if (result.type === \"error\") {\n                        errors.push(core.errors.additionalPropertiesError({\n                            schema: schema.additionalProperties,\n                            property: receivedProperties[i],\n                            properties: expectedProperties,\n                            pointer,\n                            // pass all validation errors\n                            errors: result.data.errors\n                        }));\n\n                    } else {\n                        errors.push(core.validate(value[property], result, pointer));\n                    }\n\n                // additionalProperties {}\n                } else if (isObject) {\n                    if (core.validate(value[property], schema.additionalProperties, pointer).length !== 0) {\n                        errors.push(core.errors.additionalPropertiesError({\n                            schema: schema.additionalProperties,\n                            property: receivedProperties[i],\n                            properties: expectedProperties,\n                            pointer\n                        }));\n                    }\n\n                } else {\n                    errors.push(core.errors.noAdditionalPropertiesError(\n                        { property: receivedProperties[i], properties: expectedProperties, pointer }\n                    ));\n                }\n            }\n        }\n\n        return errors;\n    },\n\n    allOf: (core, schema, value, pointer) => {\n        if (Array.isArray(schema.allOf) === false) {\n            return undefined;\n        }\n\n        const errors = [];\n        schema.allOf.forEach(subSchema => {\n            errors.push(core.validate(value, subSchema, pointer));\n        });\n\n        return errors;\n    },\n\n    anyOf: (core, schema, value, pointer) => {\n        if (Array.isArray(schema.anyOf) === false) {\n            return undefined;\n        }\n\n        for (let i = 0; i < schema.anyOf.length; i += 1) {\n            if (core.isValid(value, schema.anyOf[i])) {\n                return undefined;\n            }\n        }\n\n        return core.errors.anyOfError({ anyOf: schema.anyOf, value, pointer });\n    },\n\n    dependencies: (core, schema, value, pointer) => {\n        if (getTypeOf(schema.dependencies) !== \"object\") {\n            return undefined;\n        }\n\n        const errors = [];\n        Object.keys(value)\n            .forEach(property => {\n                if (schema.dependencies[property] === undefined) {\n                    return;\n                }\n\n                let dependencyErrors;\n                const type = getTypeOf(schema.dependencies[property]);\n                if (type === \"array\") {\n                    dependencyErrors = schema.dependencies[property]\n                        .filter(dependency => value[dependency] === undefined)\n                        .map(missingProperty => core.errors.missingDependencyError({ missingProperty, pointer }));\n                } else if (type === \"object\") {\n                    dependencyErrors = core.validate(value, schema.dependencies[property]);\n\n                } else {\n                    throw new Error(`Invalid dependency definition for ${pointer}/${property}. Must be list or schema`);\n                }\n\n                errors.push(...dependencyErrors);\n            });\n\n        return errors.length > 0 ? errors : undefined;\n    },\n\n    \"enum\": (core, schema, value, pointer) => {\n        const type = getTypeOf(value);\n        if (type === \"object\" || type === \"array\") {\n            const valueStr = JSON.stringify(value);\n            for (let i = 0; i < schema.enum.length; i += 1) {\n                if (JSON.stringify(schema.enum[i]) === valueStr) {\n                    return undefined;\n                }\n            }\n        } else if (schema.enum.includes(value)) {\n            return undefined;\n        }\n        return core.errors.enumError({ values: schema.enum, value, pointer });\n    },\n    format: (core, schema, value, pointer) => {\n        if (core.validateFormat[schema.format]) {\n            const errors = core.validateFormat[schema.format](core, schema, value, pointer);\n            return errors;\n        }\n        // fail silently if given format is not defined\n        return undefined;\n    },\n    items: (core, schema, value, pointer) => {\n        const errors = [];\n        for (var i = 0; i < value.length; i += 1) {\n            const itemData = value[i];\n            // @todo reevaluate: incomplete schema is created here\n            const itemSchema = core.step(i, schema, value, pointer);\n\n            if (itemSchema && itemSchema.type === \"error\") {\n                return [itemSchema];\n            }\n\n            const itemErrors = core.validate(itemData, itemSchema, `${pointer}/${i}`);\n            errors.push(...itemErrors);\n        }\n\n        return errors;\n    },\n    maximum: (core, schema, value, pointer) => {\n        if (isNaN(schema.maximum)) {\n            return undefined;\n        }\n        if (schema.maximum && schema.maximum < value) {\n            return core.errors.maximumError({ maximum: schema.maximum, length: value, pointer });\n        }\n        if (schema.maximum && schema.exclusiveMaximum === true && schema.maximum === value) {\n            return core.errors.maximumError({ maximum: schema.maximum, length: value, pointer });\n        }\n        return undefined;\n    },\n    maxItems: (core, schema, value, pointer) => {\n        if (isNaN(schema.maxItems)) {\n            return undefined;\n        }\n        if (schema.maxItems < value.length) {\n            return core.errors.maxItemsError({ maximum: schema.maxItems, length: value.length, pointer });\n        }\n        return undefined;\n    },\n    maxLength: (core, schema, value, pointer) => {\n        if (isNaN(schema.maxLength)) {\n            return undefined;\n        }\n        const lengthOfString = ucs2decode(value).length;\n        if (schema.maxLength < lengthOfString) {\n            return core.errors.maxLengthError({ maxLength: schema.maxLength, length: lengthOfString, pointer });\n        }\n        return undefined;\n    },\n    maxProperties: (core, schema, value, pointer) => {\n        const propertyCount = Object.keys(value).length;\n        if (isNaN(schema.maxProperties) === false && schema.maxProperties < propertyCount) {\n            return core.errors.maxPropertiesError({\n                maxProperties: schema.maxProperties,\n                length: propertyCount,\n                pointer\n            });\n        }\n        return undefined;\n    },\n    minLength: (core, schema, value, pointer) => {\n        if (isNaN(schema.minLength)) {\n            return undefined;\n        }\n        const lengthOfString = ucs2decode(value).length;\n        if (schema.minLength > lengthOfString) {\n            return core.errors.minLengthError({ minLength: schema.minLength, length: lengthOfString, pointer });\n        }\n        return undefined;\n    },\n    minimum: (core, schema, value, pointer) => {\n        if (isNaN(schema.minimum)) {\n            return undefined;\n        }\n        if (schema.minimum > value) {\n            return core.errors.minimumError({ minimum: schema.minimum, length: value, pointer });\n        }\n        if (schema.exclusiveMinimum === true && schema.minimum === value) {\n            return core.errors.minimumError({ minimum: schema.minimum, length: value, pointer });\n        }\n        return undefined;\n    },\n    minItems: (core, schema, value, pointer) => {\n        if (isNaN(schema.minItems)) {\n            return undefined;\n        }\n        if (schema.minItems > value.length) {\n            return core.errors.minItemsError({ minItems: schema.minItems, length: value.length, pointer });\n        }\n        return undefined;\n    },\n    minProperties: (core, schema, value, pointer) => {\n        if (isNaN(schema.minProperties)) {\n            return undefined;\n        }\n        const propertyCount = Object.keys(value).length;\n        if (schema.minProperties > propertyCount) {\n            return core.errors.minPropertiesError({\n                minProperties: schema.minProperties,\n                length: propertyCount, pointer\n            });\n        }\n        return undefined;\n    },\n    multipleOf: (core, schema, value, pointer) => {\n        if (isNaN(schema.multipleOf)) {\n            return undefined;\n        }\n        if ((value * FPP) % (schema.multipleOf * FPP) / FPP !== 0) {\n            return core.errors.multipleOfError({ multipleOf: schema.multipleOf, value, pointer });\n        }\n        return undefined;\n    },\n    not: (core, schema, value, pointer) => {\n        const errors = [];\n        if (core.validate(value, schema.not, pointer).length === 0) {\n            errors.push(core.errors.notError({ value, not: schema.not, pointer }));\n        }\n        return errors;\n    },\n    oneOf: (core, schema, value, pointer) => {\n        if (Array.isArray(schema.oneOf) === false) {\n            return undefined;\n        }\n\n        schema = core.resolveOneOf(value, schema, pointer);\n        if (schema && schema.type === \"error\") {\n            return schema;\n        }\n\n        return undefined;\n    },\n    pattern: (core, schema, value, pointer) => {\n        if ((new RegExp(schema.pattern)).test(value) === false) {\n            return core.errors.patternError({\n                pattern: schema.pattern,\n                description: schema.patternExample || schema.pattern,\n                received: value, pointer\n            });\n        }\n        return undefined;\n    },\n    patternProperties: (core, schema, value, pointer) => {\n        const properties = schema.properties || {};\n        const pp = schema.patternProperties;\n        if (getTypeOf(pp) !== \"object\") {\n            return undefined;\n        }\n\n        const errors = [];\n        const keys = Object.keys(value);\n        const patterns = Object.keys(pp).map(expr => ({\n            regex: new RegExp(expr),\n            patternSchema: pp[expr]\n        }));\n\n        keys.forEach(key => {\n            let patternFound = false;\n\n            for (let i = 0, l = patterns.length; i < l; i += 1) {\n                if (patterns[i].regex.test(key)) {\n                    patternFound = true;\n                    const valErrors = core.validate(value[key], patterns[i].patternSchema, `${pointer}/${key}`);\n                    if (valErrors && valErrors.length > 0) {\n                        errors.push(...valErrors);\n                    }\n                }\n            }\n\n            if (properties[key]) {\n                return;\n            }\n\n            if (patternFound === false && schema.additionalProperties === false) {\n                // this is an arrangement with additionalProperties\n                errors.push(core.errors.patternPropertiesError({\n                    key, pointer, patterns: Object.keys(pp).join(\",\")\n                }));\n            }\n        });\n\n        return errors;\n    },\n    properties: (core, schema, value, pointer) => {\n        const errors = [];\n        const keys = Object.keys(schema.properties || {});\n        for (var i = 0; i < keys.length; i += 1) {\n            const key = keys[i];\n            if (value[key] !== undefined) {\n                const itemSchema = core.step(key, schema, value, pointer);\n                const keyErrors = core.validate(value[key], itemSchema, `${pointer}/${key}`);\n                errors.push(...keyErrors);\n            }\n        }\n        return errors;\n    },\n    // @todo move to separate file: this is custom keyword validation for JsonEditor.properties keyword\n    propertiesRequired: (core, schema, value, pointer) => {\n        const errors = [];\n        const keys = Object.keys(schema.properties || {});\n        for (var i = 0; i < keys.length; i += 1) {\n            const key = keys[i];\n            if (value[key] === undefined) {\n                errors.push(core.errors.requiredPropertyError({ key, pointer }));\n            } else {\n                const itemSchema = core.step(key, schema, value, pointer);\n                const keyErrors = core.validate(value[key], itemSchema, `${pointer}/${key}`);\n                errors.push(...keyErrors);\n            }\n        }\n        return errors;\n    },\n    required: (core, schema, value, pointer) => {\n        if (Array.isArray(schema.required) === false) {\n            return undefined;\n        }\n\n        return schema.required.map(property => {\n            if (value[property] === undefined) {\n                return core.errors.requiredPropertyError({ key: property, pointer });\n            }\n            return undefined;\n        });\n    },\n    // @todo move to separate file: this is custom keyword validation for JsonEditor.required keyword\n    requiredNotEmpty: (core, schema, value, pointer) => {\n        if (Array.isArray(schema.required) === false) {\n            return undefined;\n        }\n\n        return schema.required.map(property => {\n            if (value[property] == null || value[property] === \"\") {\n                return core.errors.valueNotEmptyError({ property, pointer: `${pointer}/${property}` });\n            }\n            return undefined;\n        });\n    },\n    uniqueItems: (core, schema, value, pointer) => {\n        if ((Array.isArray(value) && schema.uniqueItems) === false) {\n            return undefined;\n        }\n\n        const errors = [];\n        const map = {};\n        value.forEach((item, index) => {\n            const id = JSON.stringify(item);\n            const itemPointer = `${pointer}/${index}`;\n            if (map[id]) {\n                errors.push(core.errors.uniqueItemsError({\n                    pointer,\n                    itemPointer: map[id],\n                    duplicatePointer: itemPointer,\n                    value: id\n                }));\n            } else {\n                map[id] = itemPointer;\n            }\n        });\n\n        return errors;\n    }\n};\n\n\nmodule.exports = KeywordValidation;\n\n","/**\n * @todo: type is also a keyword, as is properties, items, etc\n *\n * An instance has one of six primitive types (http://json-schema.org/latest/json-schema-core.html#rfc.section.4.2)\n * or seven in case of ajv https://github.com/epoberezkin/ajv/blob/master/KEYWORDS.md#type\n * 1 null, 2 boolean, 3 object, 4 array, 5 number, 6 string (7 integer)\n */\nconst TypeValidation = {\n\n    array: (core, schema, value, pointer) =>\n        core.typeKeywords.array\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer)),\n\n    object: (core, schema, value, pointer) =>\n        core.typeKeywords.object\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer)),\n\n    string: (core, schema, value, pointer) =>\n        core.typeKeywords.string\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer)),\n\n    integer: (core, schema, value, pointer) =>\n        core.typeKeywords.number\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer)),\n\n    number: (core, schema, value, pointer) =>\n        core.typeKeywords.number\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer)),\n\n    \"boolean\": (core, schema, value, pointer) =>\n        core.typeKeywords.boolean\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer)),\n\n    \"null\": (core, schema, value, pointer) =>\n        core.typeKeywords.null\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer))\n};\n\n\nmodule.exports = TypeValidation;\n","/* eslint quote-props: 0 */\n\n\n/**\n * Mapping, used in type validation to iterate over type-specific keywords to validate\n *\n *  - overview https://epoberezkin.github.io/ajv/keywords.html\n *\n * @type {Object}\n */\nmodule.exports = {\n    array: [\"enum\", \"items\", \"minItems\", \"maxItems\", \"uniqueItems\", \"not\"],\n    boolean: [\"enum\", \"not\"],\n    object: [\n        \"additionalProperties\", \"dependencies\", \"enum\", \"format\", \"minProperties\", \"maxProperties\",\n        \"patternProperties\", \"properties\", \"required\", \"not\", \"oneOf\", \"allOf\", \"anyOf\"\n    ],\n    string: [\"enum\", \"format\", \"maxLength\", \"minLength\", \"pattern\", \"not\", \"oneOf\", \"allOf\", \"anyOf\"],\n    number: [\"enum\", \"format\", \"maximum\", \"minimum\", \"multipleOf\", \"not\", \"oneOf\", \"allOf\", \"anyOf\"],\n    null: [\"enum\", \"format\", \"not\", \"oneOf\", \"allOf\", \"anyOf\"]\n};\n","module.exports = {\n    \"http://json-schema.org/draft-04/schema\": require(\"./draft04.json\"),\n\n    reset() {\n        Object.keys(this).forEach(key => {\n            if (typeof this[key] !== \"function\" && key !== \"http://json-schema.org/draft-04/schema\") {\n                delete this[key];\n            }\n        });\n    }\n};\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('./empty')) :\n\ttypeof define === 'function' && define.amd ? define(['exports', './empty'], factory) :\n\t(factory((global.jsondiffpatch = {}),global.chalk));\n}(this, (function (exports,chalk) { 'use strict';\n\nchalk = chalk && chalk.hasOwnProperty('default') ? chalk['default'] : chalk;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n\n\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nvar Processor = function () {\n  function Processor(options) {\n    classCallCheck(this, Processor);\n\n    this.selfOptions = options || {};\n    this.pipes = {};\n  }\n\n  createClass(Processor, [{\n    key: 'options',\n    value: function options(_options) {\n      if (_options) {\n        this.selfOptions = _options;\n      }\n      return this.selfOptions;\n    }\n  }, {\n    key: 'pipe',\n    value: function pipe(name, pipeArg) {\n      var pipe = pipeArg;\n      if (typeof name === 'string') {\n        if (typeof pipe === 'undefined') {\n          return this.pipes[name];\n        } else {\n          this.pipes[name] = pipe;\n        }\n      }\n      if (name && name.name) {\n        pipe = name;\n        if (pipe.processor === this) {\n          return pipe;\n        }\n        this.pipes[pipe.name] = pipe;\n      }\n      pipe.processor = this;\n      return pipe;\n    }\n  }, {\n    key: 'process',\n    value: function process(input, pipe) {\n      var context = input;\n      context.options = this.options();\n      var nextPipe = pipe || input.pipe || 'default';\n      var lastPipe = void 0;\n      var lastContext = void 0;\n      while (nextPipe) {\n        if (typeof context.nextAfterChildren !== 'undefined') {\n          // children processed and coming back to parent\n          context.next = context.nextAfterChildren;\n          context.nextAfterChildren = null;\n        }\n\n        if (typeof nextPipe === 'string') {\n          nextPipe = this.pipe(nextPipe);\n        }\n        nextPipe.process(context);\n        lastContext = context;\n        lastPipe = nextPipe;\n        nextPipe = null;\n        if (context) {\n          if (context.next) {\n            context = context.next;\n            nextPipe = lastContext.nextPipe || context.pipe || lastPipe;\n          }\n        }\n      }\n      return context.hasResult ? context.result : undefined;\n    }\n  }]);\n  return Processor;\n}();\n\nvar Pipe = function () {\n  function Pipe(name) {\n    classCallCheck(this, Pipe);\n\n    this.name = name;\n    this.filters = [];\n  }\n\n  createClass(Pipe, [{\n    key: 'process',\n    value: function process(input) {\n      if (!this.processor) {\n        throw new Error('add this pipe to a processor before using it');\n      }\n      var debug = this.debug;\n      var length = this.filters.length;\n      var context = input;\n      for (var index = 0; index < length; index++) {\n        var filter = this.filters[index];\n        if (debug) {\n          this.log('filter: ' + filter.filterName);\n        }\n        filter(context);\n        if ((typeof context === 'undefined' ? 'undefined' : _typeof(context)) === 'object' && context.exiting) {\n          context.exiting = false;\n          break;\n        }\n      }\n      if (!context.next && this.resultCheck) {\n        this.resultCheck(context);\n      }\n    }\n  }, {\n    key: 'log',\n    value: function log(msg) {\n      console.log('[jsondiffpatch] ' + this.name + ' pipe, ' + msg);\n    }\n  }, {\n    key: 'append',\n    value: function append() {\n      var _filters;\n\n      (_filters = this.filters).push.apply(_filters, arguments);\n      return this;\n    }\n  }, {\n    key: 'prepend',\n    value: function prepend() {\n      var _filters2;\n\n      (_filters2 = this.filters).unshift.apply(_filters2, arguments);\n      return this;\n    }\n  }, {\n    key: 'indexOf',\n    value: function indexOf(filterName) {\n      if (!filterName) {\n        throw new Error('a filter name is required');\n      }\n      for (var index = 0; index < this.filters.length; index++) {\n        var filter = this.filters[index];\n        if (filter.filterName === filterName) {\n          return index;\n        }\n      }\n      throw new Error('filter not found: ' + filterName);\n    }\n  }, {\n    key: 'list',\n    value: function list() {\n      return this.filters.map(function (f) {\n        return f.filterName;\n      });\n    }\n  }, {\n    key: 'after',\n    value: function after(filterName) {\n      var index = this.indexOf(filterName);\n      var params = Array.prototype.slice.call(arguments, 1);\n      if (!params.length) {\n        throw new Error('a filter is required');\n      }\n      params.unshift(index + 1, 0);\n      Array.prototype.splice.apply(this.filters, params);\n      return this;\n    }\n  }, {\n    key: 'before',\n    value: function before(filterName) {\n      var index = this.indexOf(filterName);\n      var params = Array.prototype.slice.call(arguments, 1);\n      if (!params.length) {\n        throw new Error('a filter is required');\n      }\n      params.unshift(index, 0);\n      Array.prototype.splice.apply(this.filters, params);\n      return this;\n    }\n  }, {\n    key: 'replace',\n    value: function replace(filterName) {\n      var index = this.indexOf(filterName);\n      var params = Array.prototype.slice.call(arguments, 1);\n      if (!params.length) {\n        throw new Error('a filter is required');\n      }\n      params.unshift(index, 1);\n      Array.prototype.splice.apply(this.filters, params);\n      return this;\n    }\n  }, {\n    key: 'remove',\n    value: function remove(filterName) {\n      var index = this.indexOf(filterName);\n      this.filters.splice(index, 1);\n      return this;\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.filters.length = 0;\n      return this;\n    }\n  }, {\n    key: 'shouldHaveResult',\n    value: function shouldHaveResult(should) {\n      if (should === false) {\n        this.resultCheck = null;\n        return;\n      }\n      if (this.resultCheck) {\n        return;\n      }\n      var pipe = this;\n      this.resultCheck = function (context) {\n        if (!context.hasResult) {\n          console.log(context);\n          var error = new Error(pipe.name + ' failed');\n          error.noResult = true;\n          throw error;\n        }\n      };\n      return this;\n    }\n  }]);\n  return Pipe;\n}();\n\nvar Context = function () {\n  function Context() {\n    classCallCheck(this, Context);\n  }\n\n  createClass(Context, [{\n    key: 'setResult',\n    value: function setResult(result) {\n      this.result = result;\n      this.hasResult = true;\n      return this;\n    }\n  }, {\n    key: 'exit',\n    value: function exit() {\n      this.exiting = true;\n      return this;\n    }\n  }, {\n    key: 'switchTo',\n    value: function switchTo(next, pipe) {\n      if (typeof next === 'string' || next instanceof Pipe) {\n        this.nextPipe = next;\n      } else {\n        this.next = next;\n        if (pipe) {\n          this.nextPipe = pipe;\n        }\n      }\n      return this;\n    }\n  }, {\n    key: 'push',\n    value: function push(child, name) {\n      child.parent = this;\n      if (typeof name !== 'undefined') {\n        child.childName = name;\n      }\n      child.root = this.root || this;\n      child.options = child.options || this.options;\n      if (!this.children) {\n        this.children = [child];\n        this.nextAfterChildren = this.next || null;\n        this.next = child;\n      } else {\n        this.children[this.children.length - 1].next = child;\n        this.children.push(child);\n      }\n      child.next = this;\n      return this;\n    }\n  }]);\n  return Context;\n}();\n\nvar isArray = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nfunction cloneRegExp(re) {\n  var regexMatch = /^\\/(.*)\\/([gimyu]*)$/.exec(re.toString());\n  return new RegExp(regexMatch[1], regexMatch[2]);\n}\n\nfunction clone(arg) {\n  if ((typeof arg === 'undefined' ? 'undefined' : _typeof(arg)) !== 'object') {\n    return arg;\n  }\n  if (arg === null) {\n    return null;\n  }\n  if (isArray(arg)) {\n    return arg.map(clone);\n  }\n  if (arg instanceof Date) {\n    return new Date(arg.getTime());\n  }\n  if (arg instanceof RegExp) {\n    return cloneRegExp(arg);\n  }\n  var cloned = {};\n  for (var name in arg) {\n    if (Object.prototype.hasOwnProperty.call(arg, name)) {\n      cloned[name] = clone(arg[name]);\n    }\n  }\n  return cloned;\n}\n\nvar DiffContext = function (_Context) {\n  inherits(DiffContext, _Context);\n\n  function DiffContext(left, right) {\n    classCallCheck(this, DiffContext);\n\n    var _this = possibleConstructorReturn(this, (DiffContext.__proto__ || Object.getPrototypeOf(DiffContext)).call(this));\n\n    _this.left = left;\n    _this.right = right;\n    _this.pipe = 'diff';\n    return _this;\n  }\n\n  createClass(DiffContext, [{\n    key: 'setResult',\n    value: function setResult(result) {\n      if (this.options.cloneDiffValues && (typeof result === 'undefined' ? 'undefined' : _typeof(result)) === 'object') {\n        var clone$$1 = typeof this.options.cloneDiffValues === 'function' ? this.options.cloneDiffValues : clone;\n        if (_typeof(result[0]) === 'object') {\n          result[0] = clone$$1(result[0]);\n        }\n        if (_typeof(result[1]) === 'object') {\n          result[1] = clone$$1(result[1]);\n        }\n      }\n      return Context.prototype.setResult.apply(this, arguments);\n    }\n  }]);\n  return DiffContext;\n}(Context);\n\nvar PatchContext = function (_Context) {\n  inherits(PatchContext, _Context);\n\n  function PatchContext(left, delta) {\n    classCallCheck(this, PatchContext);\n\n    var _this = possibleConstructorReturn(this, (PatchContext.__proto__ || Object.getPrototypeOf(PatchContext)).call(this));\n\n    _this.left = left;\n    _this.delta = delta;\n    _this.pipe = 'patch';\n    return _this;\n  }\n\n  return PatchContext;\n}(Context);\n\nvar ReverseContext = function (_Context) {\n  inherits(ReverseContext, _Context);\n\n  function ReverseContext(delta) {\n    classCallCheck(this, ReverseContext);\n\n    var _this = possibleConstructorReturn(this, (ReverseContext.__proto__ || Object.getPrototypeOf(ReverseContext)).call(this));\n\n    _this.delta = delta;\n    _this.pipe = 'reverse';\n    return _this;\n  }\n\n  return ReverseContext;\n}(Context);\n\nvar isArray$1 = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nvar diffFilter = function trivialMatchesDiffFilter(context) {\n  if (context.left === context.right) {\n    context.setResult(undefined).exit();\n    return;\n  }\n  if (typeof context.left === 'undefined') {\n    if (typeof context.right === 'function') {\n      throw new Error('functions are not supported');\n    }\n    context.setResult([context.right]).exit();\n    return;\n  }\n  if (typeof context.right === 'undefined') {\n    context.setResult([context.left, 0, 0]).exit();\n    return;\n  }\n  if (typeof context.left === 'function' || typeof context.right === 'function') {\n    throw new Error('functions are not supported');\n  }\n  context.leftType = context.left === null ? 'null' : _typeof(context.left);\n  context.rightType = context.right === null ? 'null' : _typeof(context.right);\n  if (context.leftType !== context.rightType) {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  if (context.leftType === 'boolean' || context.leftType === 'number') {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  if (context.leftType === 'object') {\n    context.leftIsArray = isArray$1(context.left);\n  }\n  if (context.rightType === 'object') {\n    context.rightIsArray = isArray$1(context.right);\n  }\n  if (context.leftIsArray !== context.rightIsArray) {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n\n  if (context.left instanceof RegExp) {\n    if (context.right instanceof RegExp) {\n      context.setResult([context.left.toString(), context.right.toString()]).exit();\n    } else {\n      context.setResult([context.left, context.right]).exit();\n    }\n  }\n};\ndiffFilter.filterName = 'trivial';\n\nvar patchFilter = function trivialMatchesPatchFilter(context) {\n  if (typeof context.delta === 'undefined') {\n    context.setResult(context.left).exit();\n    return;\n  }\n  context.nested = !isArray$1(context.delta);\n  if (context.nested) {\n    return;\n  }\n  if (context.delta.length === 1) {\n    context.setResult(context.delta[0]).exit();\n    return;\n  }\n  if (context.delta.length === 2) {\n    if (context.left instanceof RegExp) {\n      var regexArgs = /^\\/(.*)\\/([gimyu]+)$/.exec(context.delta[1]);\n      if (regexArgs) {\n        context.setResult(new RegExp(regexArgs[1], regexArgs[2])).exit();\n        return;\n      }\n    }\n    context.setResult(context.delta[1]).exit();\n    return;\n  }\n  if (context.delta.length === 3 && context.delta[2] === 0) {\n    context.setResult(undefined).exit();\n  }\n};\npatchFilter.filterName = 'trivial';\n\nvar reverseFilter = function trivialReferseFilter(context) {\n  if (typeof context.delta === 'undefined') {\n    context.setResult(context.delta).exit();\n    return;\n  }\n  context.nested = !isArray$1(context.delta);\n  if (context.nested) {\n    return;\n  }\n  if (context.delta.length === 1) {\n    context.setResult([context.delta[0], 0, 0]).exit();\n    return;\n  }\n  if (context.delta.length === 2) {\n    context.setResult([context.delta[1], context.delta[0]]).exit();\n    return;\n  }\n  if (context.delta.length === 3 && context.delta[2] === 0) {\n    context.setResult([context.delta[0]]).exit();\n  }\n};\nreverseFilter.filterName = 'trivial';\n\nfunction collectChildrenDiffFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  var result = context.result;\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    if (typeof child.result === 'undefined') {\n      continue;\n    }\n    result = result || {};\n    result[child.childName] = child.result;\n  }\n  if (result && context.leftIsArray) {\n    result._t = 'a';\n  }\n  context.setResult(result).exit();\n}\ncollectChildrenDiffFilter.filterName = 'collectChildren';\n\nfunction objectsDiffFilter(context) {\n  if (context.leftIsArray || context.leftType !== 'object') {\n    return;\n  }\n\n  var name = void 0;\n  var child = void 0;\n  var propertyFilter = context.options.propertyFilter;\n  for (name in context.left) {\n    if (!Object.prototype.hasOwnProperty.call(context.left, name)) {\n      continue;\n    }\n    if (propertyFilter && !propertyFilter(name, context)) {\n      continue;\n    }\n    child = new DiffContext(context.left[name], context.right[name]);\n    context.push(child, name);\n  }\n  for (name in context.right) {\n    if (!Object.prototype.hasOwnProperty.call(context.right, name)) {\n      continue;\n    }\n    if (propertyFilter && !propertyFilter(name, context)) {\n      continue;\n    }\n    if (typeof context.left[name] === 'undefined') {\n      child = new DiffContext(undefined, context.right[name]);\n      context.push(child, name);\n    }\n  }\n\n  if (!context.children || context.children.length === 0) {\n    context.setResult(undefined).exit();\n    return;\n  }\n  context.exit();\n}\nobjectsDiffFilter.filterName = 'objects';\n\nvar patchFilter$1 = function nestedPatchFilter(context) {\n  if (!context.nested) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var name = void 0;\n  var child = void 0;\n  for (name in context.delta) {\n    child = new PatchContext(context.left[name], context.delta[name]);\n    context.push(child, name);\n  }\n  context.exit();\n};\npatchFilter$1.filterName = 'objects';\n\nvar collectChildrenPatchFilter = function collectChildrenPatchFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    if (Object.prototype.hasOwnProperty.call(context.left, child.childName) && child.result === undefined) {\n      delete context.left[child.childName];\n    } else if (context.left[child.childName] !== child.result) {\n      context.left[child.childName] = child.result;\n    }\n  }\n  context.setResult(context.left).exit();\n};\ncollectChildrenPatchFilter.filterName = 'collectChildren';\n\nvar reverseFilter$1 = function nestedReverseFilter(context) {\n  if (!context.nested) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var name = void 0;\n  var child = void 0;\n  for (name in context.delta) {\n    child = new ReverseContext(context.delta[name]);\n    context.push(child, name);\n  }\n  context.exit();\n};\nreverseFilter$1.filterName = 'objects';\n\nfunction collectChildrenReverseFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  var delta = {};\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    if (delta[child.childName] !== child.result) {\n      delta[child.childName] = child.result;\n    }\n  }\n  context.setResult(delta).exit();\n}\ncollectChildrenReverseFilter.filterName = 'collectChildren';\n\n/*\n\nLCS implementation that supports arrays or strings\n\nreference: http://en.wikipedia.org/wiki/Longest_common_subsequence_problem\n\n*/\n\nvar defaultMatch = function defaultMatch(array1, array2, index1, index2) {\n  return array1[index1] === array2[index2];\n};\n\nvar lengthMatrix = function lengthMatrix(array1, array2, match, context) {\n  var len1 = array1.length;\n  var len2 = array2.length;\n  var x = void 0,\n      y = void 0;\n\n  // initialize empty matrix of len1+1 x len2+1\n  var matrix = [len1 + 1];\n  for (x = 0; x < len1 + 1; x++) {\n    matrix[x] = [len2 + 1];\n    for (y = 0; y < len2 + 1; y++) {\n      matrix[x][y] = 0;\n    }\n  }\n  matrix.match = match;\n  // save sequence lengths for each coordinate\n  for (x = 1; x < len1 + 1; x++) {\n    for (y = 1; y < len2 + 1; y++) {\n      if (match(array1, array2, x - 1, y - 1, context)) {\n        matrix[x][y] = matrix[x - 1][y - 1] + 1;\n      } else {\n        matrix[x][y] = Math.max(matrix[x - 1][y], matrix[x][y - 1]);\n      }\n    }\n  }\n  return matrix;\n};\n\nvar backtrack = function backtrack(matrix, array1, array2, index1, index2, context) {\n  if (index1 === 0 || index2 === 0) {\n    return {\n      sequence: [],\n      indices1: [],\n      indices2: []\n    };\n  }\n\n  if (matrix.match(array1, array2, index1 - 1, index2 - 1, context)) {\n    var subsequence = backtrack(matrix, array1, array2, index1 - 1, index2 - 1, context);\n    subsequence.sequence.push(array1[index1 - 1]);\n    subsequence.indices1.push(index1 - 1);\n    subsequence.indices2.push(index2 - 1);\n    return subsequence;\n  }\n\n  if (matrix[index1][index2 - 1] > matrix[index1 - 1][index2]) {\n    return backtrack(matrix, array1, array2, index1, index2 - 1, context);\n  } else {\n    return backtrack(matrix, array1, array2, index1 - 1, index2, context);\n  }\n};\n\nvar get$1 = function get(array1, array2, match, context) {\n  var innerContext = context || {};\n  var matrix = lengthMatrix(array1, array2, match || defaultMatch, innerContext);\n  var result = backtrack(matrix, array1, array2, array1.length, array2.length, innerContext);\n  if (typeof array1 === 'string' && typeof array2 === 'string') {\n    result.sequence = result.sequence.join('');\n  }\n  return result;\n};\n\nvar lcs = {\n  get: get$1\n};\n\nvar ARRAY_MOVE = 3;\n\nvar isArray$2 = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nvar arrayIndexOf = typeof Array.prototype.indexOf === 'function' ? function (array, item) {\n  return array.indexOf(item);\n} : function (array, item) {\n  var length = array.length;\n  for (var i = 0; i < length; i++) {\n    if (array[i] === item) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nfunction arraysHaveMatchByRef(array1, array2, len1, len2) {\n  for (var index1 = 0; index1 < len1; index1++) {\n    var val1 = array1[index1];\n    for (var index2 = 0; index2 < len2; index2++) {\n      var val2 = array2[index2];\n      if (index1 !== index2 && val1 === val2) {\n        return true;\n      }\n    }\n  }\n}\n\nfunction matchItems(array1, array2, index1, index2, context) {\n  var value1 = array1[index1];\n  var value2 = array2[index2];\n  if (value1 === value2) {\n    return true;\n  }\n  if ((typeof value1 === 'undefined' ? 'undefined' : _typeof(value1)) !== 'object' || (typeof value2 === 'undefined' ? 'undefined' : _typeof(value2)) !== 'object') {\n    return false;\n  }\n  var objectHash = context.objectHash;\n  if (!objectHash) {\n    // no way to match objects was provided, try match by position\n    return context.matchByPosition && index1 === index2;\n  }\n  var hash1 = void 0;\n  var hash2 = void 0;\n  if (typeof index1 === 'number') {\n    context.hashCache1 = context.hashCache1 || [];\n    hash1 = context.hashCache1[index1];\n    if (typeof hash1 === 'undefined') {\n      context.hashCache1[index1] = hash1 = objectHash(value1, index1);\n    }\n  } else {\n    hash1 = objectHash(value1);\n  }\n  if (typeof hash1 === 'undefined') {\n    return false;\n  }\n  if (typeof index2 === 'number') {\n    context.hashCache2 = context.hashCache2 || [];\n    hash2 = context.hashCache2[index2];\n    if (typeof hash2 === 'undefined') {\n      context.hashCache2[index2] = hash2 = objectHash(value2, index2);\n    }\n  } else {\n    hash2 = objectHash(value2);\n  }\n  if (typeof hash2 === 'undefined') {\n    return false;\n  }\n  return hash1 === hash2;\n}\n\nvar diffFilter$1 = function arraysDiffFilter(context) {\n  if (!context.leftIsArray) {\n    return;\n  }\n\n  var matchContext = {\n    objectHash: context.options && context.options.objectHash,\n    matchByPosition: context.options && context.options.matchByPosition\n  };\n  var commonHead = 0;\n  var commonTail = 0;\n  var index = void 0;\n  var index1 = void 0;\n  var index2 = void 0;\n  var array1 = context.left;\n  var array2 = context.right;\n  var len1 = array1.length;\n  var len2 = array2.length;\n\n  var child = void 0;\n\n  if (len1 > 0 && len2 > 0 && !matchContext.objectHash && typeof matchContext.matchByPosition !== 'boolean') {\n    matchContext.matchByPosition = !arraysHaveMatchByRef(array1, array2, len1, len2);\n  }\n\n  // separate common head\n  while (commonHead < len1 && commonHead < len2 && matchItems(array1, array2, commonHead, commonHead, matchContext)) {\n    index = commonHead;\n    child = new DiffContext(context.left[index], context.right[index]);\n    context.push(child, index);\n    commonHead++;\n  }\n  // separate common tail\n  while (commonTail + commonHead < len1 && commonTail + commonHead < len2 && matchItems(array1, array2, len1 - 1 - commonTail, len2 - 1 - commonTail, matchContext)) {\n    index1 = len1 - 1 - commonTail;\n    index2 = len2 - 1 - commonTail;\n    child = new DiffContext(context.left[index1], context.right[index2]);\n    context.push(child, index2);\n    commonTail++;\n  }\n  var result = void 0;\n  if (commonHead + commonTail === len1) {\n    if (len1 === len2) {\n      // arrays are identical\n      context.setResult(undefined).exit();\n      return;\n    }\n    // trivial case, a block (1 or more consecutive items) was added\n    result = result || {\n      _t: 'a'\n    };\n    for (index = commonHead; index < len2 - commonTail; index++) {\n      result[index] = [array2[index]];\n    }\n    context.setResult(result).exit();\n    return;\n  }\n  if (commonHead + commonTail === len2) {\n    // trivial case, a block (1 or more consecutive items) was removed\n    result = result || {\n      _t: 'a'\n    };\n    for (index = commonHead; index < len1 - commonTail; index++) {\n      result['_' + index] = [array1[index], 0, 0];\n    }\n    context.setResult(result).exit();\n    return;\n  }\n  // reset hash cache\n  delete matchContext.hashCache1;\n  delete matchContext.hashCache2;\n\n  // diff is not trivial, find the LCS (Longest Common Subsequence)\n  var trimmed1 = array1.slice(commonHead, len1 - commonTail);\n  var trimmed2 = array2.slice(commonHead, len2 - commonTail);\n  var seq = lcs.get(trimmed1, trimmed2, matchItems, matchContext);\n  var removedItems = [];\n  result = result || {\n    _t: 'a'\n  };\n  for (index = commonHead; index < len1 - commonTail; index++) {\n    if (arrayIndexOf(seq.indices1, index - commonHead) < 0) {\n      // removed\n      result['_' + index] = [array1[index], 0, 0];\n      removedItems.push(index);\n    }\n  }\n\n  var detectMove = true;\n  if (context.options && context.options.arrays && context.options.arrays.detectMove === false) {\n    detectMove = false;\n  }\n  var includeValueOnMove = false;\n  if (context.options && context.options.arrays && context.options.arrays.includeValueOnMove) {\n    includeValueOnMove = true;\n  }\n\n  var removedItemsLength = removedItems.length;\n  for (index = commonHead; index < len2 - commonTail; index++) {\n    var indexOnArray2 = arrayIndexOf(seq.indices2, index - commonHead);\n    if (indexOnArray2 < 0) {\n      // added, try to match with a removed item and register as position move\n      var isMove = false;\n      if (detectMove && removedItemsLength > 0) {\n        for (var removeItemIndex1 = 0; removeItemIndex1 < removedItemsLength; removeItemIndex1++) {\n          index1 = removedItems[removeItemIndex1];\n          if (matchItems(trimmed1, trimmed2, index1 - commonHead, index - commonHead, matchContext)) {\n            // store position move as: [originalValue, newPosition, ARRAY_MOVE]\n            result['_' + index1].splice(1, 2, index, ARRAY_MOVE);\n            if (!includeValueOnMove) {\n              // don't include moved value on diff, to save bytes\n              result['_' + index1][0] = '';\n            }\n\n            index2 = index;\n            child = new DiffContext(context.left[index1], context.right[index2]);\n            context.push(child, index2);\n            removedItems.splice(removeItemIndex1, 1);\n            isMove = true;\n            break;\n          }\n        }\n      }\n      if (!isMove) {\n        // added\n        result[index] = [array2[index]];\n      }\n    } else {\n      // match, do inner diff\n      index1 = seq.indices1[indexOnArray2] + commonHead;\n      index2 = seq.indices2[indexOnArray2] + commonHead;\n      child = new DiffContext(context.left[index1], context.right[index2]);\n      context.push(child, index2);\n    }\n  }\n\n  context.setResult(result).exit();\n};\ndiffFilter$1.filterName = 'arrays';\n\nvar compare = {\n  numerically: function numerically(a, b) {\n    return a - b;\n  },\n  numericallyBy: function numericallyBy(name) {\n    return function (a, b) {\n      return a[name] - b[name];\n    };\n  }\n};\n\nvar patchFilter$2 = function nestedPatchFilter(context) {\n  if (!context.nested) {\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var index = void 0;\n  var index1 = void 0;\n\n  var delta = context.delta;\n  var array = context.left;\n\n  // first, separate removals, insertions and modifications\n  var toRemove = [];\n  var toInsert = [];\n  var toModify = [];\n  for (index in delta) {\n    if (index !== '_t') {\n      if (index[0] === '_') {\n        // removed item from original array\n        if (delta[index][2] === 0 || delta[index][2] === ARRAY_MOVE) {\n          toRemove.push(parseInt(index.slice(1), 10));\n        } else {\n          throw new Error('only removal or move can be applied at original array indices,' + (' invalid diff type: ' + delta[index][2]));\n        }\n      } else {\n        if (delta[index].length === 1) {\n          // added item at new array\n          toInsert.push({\n            index: parseInt(index, 10),\n            value: delta[index][0]\n          });\n        } else {\n          // modified item at new array\n          toModify.push({\n            index: parseInt(index, 10),\n            delta: delta[index]\n          });\n        }\n      }\n    }\n  }\n\n  // remove items, in reverse order to avoid sawing our own floor\n  toRemove = toRemove.sort(compare.numerically);\n  for (index = toRemove.length - 1; index >= 0; index--) {\n    index1 = toRemove[index];\n    var indexDiff = delta['_' + index1];\n    var removedValue = array.splice(index1, 1)[0];\n    if (indexDiff[2] === ARRAY_MOVE) {\n      // reinsert later\n      toInsert.push({\n        index: indexDiff[1],\n        value: removedValue\n      });\n    }\n  }\n\n  // insert items, in reverse order to avoid moving our own floor\n  toInsert = toInsert.sort(compare.numericallyBy('index'));\n  var toInsertLength = toInsert.length;\n  for (index = 0; index < toInsertLength; index++) {\n    var insertion = toInsert[index];\n    array.splice(insertion.index, 0, insertion.value);\n  }\n\n  // apply modifications\n  var toModifyLength = toModify.length;\n  var child = void 0;\n  if (toModifyLength > 0) {\n    for (index = 0; index < toModifyLength; index++) {\n      var modification = toModify[index];\n      child = new PatchContext(context.left[modification.index], modification.delta);\n      context.push(child, modification.index);\n    }\n  }\n\n  if (!context.children) {\n    context.setResult(context.left).exit();\n    return;\n  }\n  context.exit();\n};\npatchFilter$2.filterName = 'arrays';\n\nvar collectChildrenPatchFilter$1 = function collectChildrenPatchFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    context.left[child.childName] = child.result;\n  }\n  context.setResult(context.left).exit();\n};\ncollectChildrenPatchFilter$1.filterName = 'arraysCollectChildren';\n\nvar reverseFilter$2 = function arraysReverseFilter(context) {\n  if (!context.nested) {\n    if (context.delta[2] === ARRAY_MOVE) {\n      context.newName = '_' + context.delta[1];\n      context.setResult([context.delta[0], parseInt(context.childName.substr(1), 10), ARRAY_MOVE]).exit();\n    }\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var name = void 0;\n  var child = void 0;\n  for (name in context.delta) {\n    if (name === '_t') {\n      continue;\n    }\n    child = new ReverseContext(context.delta[name]);\n    context.push(child, name);\n  }\n  context.exit();\n};\nreverseFilter$2.filterName = 'arrays';\n\nvar reverseArrayDeltaIndex = function reverseArrayDeltaIndex(delta, index, itemDelta) {\n  if (typeof index === 'string' && index[0] === '_') {\n    return parseInt(index.substr(1), 10);\n  } else if (isArray$2(itemDelta) && itemDelta[2] === 0) {\n    return '_' + index;\n  }\n\n  var reverseIndex = +index;\n  for (var deltaIndex in delta) {\n    var deltaItem = delta[deltaIndex];\n    if (isArray$2(deltaItem)) {\n      if (deltaItem[2] === ARRAY_MOVE) {\n        var moveFromIndex = parseInt(deltaIndex.substr(1), 10);\n        var moveToIndex = deltaItem[1];\n        if (moveToIndex === +index) {\n          return moveFromIndex;\n        }\n        if (moveFromIndex <= reverseIndex && moveToIndex > reverseIndex) {\n          reverseIndex++;\n        } else if (moveFromIndex >= reverseIndex && moveToIndex < reverseIndex) {\n          reverseIndex--;\n        }\n      } else if (deltaItem[2] === 0) {\n        var deleteIndex = parseInt(deltaIndex.substr(1), 10);\n        if (deleteIndex <= reverseIndex) {\n          reverseIndex++;\n        }\n      } else if (deltaItem.length === 1 && deltaIndex <= reverseIndex) {\n        reverseIndex--;\n      }\n    }\n  }\n\n  return reverseIndex;\n};\n\nfunction collectChildrenReverseFilter$1(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  var delta = {\n    _t: 'a'\n  };\n\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    var name = child.newName;\n    if (typeof name === 'undefined') {\n      name = reverseArrayDeltaIndex(context.delta, child.childName, child.result);\n    }\n    if (delta[name] !== child.result) {\n      delta[name] = child.result;\n    }\n  }\n  context.setResult(delta).exit();\n}\ncollectChildrenReverseFilter$1.filterName = 'arraysCollectChildren';\n\nvar diffFilter$2 = function datesDiffFilter(context) {\n  if (context.left instanceof Date) {\n    if (context.right instanceof Date) {\n      if (context.left.getTime() !== context.right.getTime()) {\n        context.setResult([context.left, context.right]);\n      } else {\n        context.setResult(undefined);\n      }\n    } else {\n      context.setResult([context.left, context.right]);\n    }\n    context.exit();\n  } else if (context.right instanceof Date) {\n    context.setResult([context.left, context.right]).exit();\n  }\n};\ndiffFilter$2.filterName = 'dates';\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar diffMatchPatch = createCommonjsModule(function (module) {\nfunction diff_match_patch() {\r\n\r\n  // Defaults.\r\n  // Redefine these in your program to override the defaults.\r\n\r\n  // Number of seconds to map a diff before giving up (0 for infinity).\r\n  this.Diff_Timeout = 1.0;\r\n  // Cost of an empty edit operation in terms of edit characters.\r\n  this.Diff_EditCost = 4;\r\n  // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\r\n  this.Match_Threshold = 0.5;\r\n  // How far to search for a match (0 = exact location, 1000+ = broad match).\r\n  // A match this many characters away from the expected location will add\r\n  // 1.0 to the score (0.0 is a perfect match).\r\n  this.Match_Distance = 1000;\r\n  // When deleting a large block of text (over ~64 characters), how close do\r\n  // the contents have to be to match the expected contents. (0.0 = perfection,\r\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\r\n  // end points of a delete need to match.\r\n  this.Patch_DeleteThreshold = 0.5;\r\n  // Chunk size for context length.\r\n  this.Patch_Margin = 4;\r\n\r\n  // The number of bits in an int.\r\n  this.Match_MaxBits = 32;\r\n}\r\n\r\n\r\n//  DIFF FUNCTIONS\r\n\r\n\r\n/**\r\n * The data structure representing a diff is an array of tuples:\r\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\r\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\r\n */\r\nvar DIFF_DELETE = -1;\r\nvar DIFF_INSERT = 1;\r\nvar DIFF_EQUAL = 0;\r\n\r\n/** @typedef {{0: number, 1: string}} */\r\ndiff_match_patch.prototype.diff_main = function(text1, text2, opt_checklines,\r\n    opt_deadline) {\r\n  // Set a deadline by which time the diff must be complete.\r\n  if (typeof opt_deadline == 'undefined') {\r\n    if (this.Diff_Timeout <= 0) {\r\n      opt_deadline = Number.MAX_VALUE;\r\n    } else {\r\n      opt_deadline = (new Date).getTime() + this.Diff_Timeout * 1000;\r\n    }\r\n  }\r\n  var deadline = opt_deadline;\r\n\r\n  // Check for null inputs.\r\n  if (text1 == null || text2 == null) {\r\n    throw new Error('Null input. (diff_main)');\r\n  }\r\n\r\n  // Check for equality (speedup).\r\n  if (text1 == text2) {\r\n    if (text1) {\r\n      return [[DIFF_EQUAL, text1]];\r\n    }\r\n    return [];\r\n  }\r\n\r\n  if (typeof opt_checklines == 'undefined') {\r\n    opt_checklines = true;\r\n  }\r\n  var checklines = opt_checklines;\r\n\r\n  // Trim off common prefix (speedup).\r\n  var commonlength = this.diff_commonPrefix(text1, text2);\r\n  var commonprefix = text1.substring(0, commonlength);\r\n  text1 = text1.substring(commonlength);\r\n  text2 = text2.substring(commonlength);\r\n\r\n  // Trim off common suffix (speedup).\r\n  commonlength = this.diff_commonSuffix(text1, text2);\r\n  var commonsuffix = text1.substring(text1.length - commonlength);\r\n  text1 = text1.substring(0, text1.length - commonlength);\r\n  text2 = text2.substring(0, text2.length - commonlength);\r\n\r\n  // Compute the diff on the middle block.\r\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline);\r\n\r\n  // Restore the prefix and suffix.\r\n  if (commonprefix) {\r\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\r\n  }\r\n  if (commonsuffix) {\r\n    diffs.push([DIFF_EQUAL, commonsuffix]);\r\n  }\r\n  this.diff_cleanupMerge(diffs);\r\n  return diffs;\r\n};\r\n\r\n\r\n/**\r\n * Find the differences between two texts.  Assumes that the texts do not\r\n * have any common prefix or suffix.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\r\n *     line-level diff first to identify the changed areas.\r\n *     If true, then run a faster, slightly less optimal diff.\r\n * @param {number} deadline Time when the diff should be complete by.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_compute_ = function(text1, text2, checklines,\r\n    deadline) {\r\n  var diffs;\r\n\r\n  if (!text1) {\r\n    // Just add some text (speedup).\r\n    return [[DIFF_INSERT, text2]];\r\n  }\r\n\r\n  if (!text2) {\r\n    // Just delete some text (speedup).\r\n    return [[DIFF_DELETE, text1]];\r\n  }\r\n\r\n  var longtext = text1.length > text2.length ? text1 : text2;\r\n  var shorttext = text1.length > text2.length ? text2 : text1;\r\n  var i = longtext.indexOf(shorttext);\r\n  if (i != -1) {\r\n    // Shorter text is inside the longer text (speedup).\r\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\r\n             [DIFF_EQUAL, shorttext],\r\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\r\n    // Swap insertions for deletions if diff is reversed.\r\n    if (text1.length > text2.length) {\r\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\r\n    }\r\n    return diffs;\r\n  }\r\n\r\n  if (shorttext.length == 1) {\r\n    // Single character string.\r\n    // After the previous speedup, the character can't be an equality.\r\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\r\n  }\r\n\r\n  // Check to see if the problem can be split in two.\r\n  var hm = this.diff_halfMatch_(text1, text2);\r\n  if (hm) {\r\n    // A half-match was found, sort out the return data.\r\n    var text1_a = hm[0];\r\n    var text1_b = hm[1];\r\n    var text2_a = hm[2];\r\n    var text2_b = hm[3];\r\n    var mid_common = hm[4];\r\n    // Send both pairs off for separate processing.\r\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\r\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline);\r\n    // Merge the results.\r\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\r\n  }\r\n\r\n  if (checklines && text1.length > 100 && text2.length > 100) {\r\n    return this.diff_lineMode_(text1, text2, deadline);\r\n  }\r\n\r\n  return this.diff_bisect_(text1, text2, deadline);\r\n};\r\n\r\n\r\n/**\r\n * Do a quick line-level diff on both strings, then rediff the parts for\r\n * greater accuracy.\r\n * This speedup can produce non-minimal diffs.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {number} deadline Time when the diff should be complete by.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_lineMode_ = function(text1, text2, deadline) {\r\n  // Scan the text on a line-by-line basis first.\r\n  var a = this.diff_linesToChars_(text1, text2);\r\n  text1 = a.chars1;\r\n  text2 = a.chars2;\r\n  var linearray = a.lineArray;\r\n\r\n  var diffs = this.diff_main(text1, text2, false, deadline);\r\n\r\n  // Convert the diff back to original text.\r\n  this.diff_charsToLines_(diffs, linearray);\r\n  // Eliminate freak matches (e.g. blank lines)\r\n  this.diff_cleanupSemantic(diffs);\r\n\r\n  // Rediff any replacement blocks, this time character-by-character.\r\n  // Add a dummy entry at the end.\r\n  diffs.push([DIFF_EQUAL, '']);\r\n  var pointer = 0;\r\n  var count_delete = 0;\r\n  var count_insert = 0;\r\n  var text_delete = '';\r\n  var text_insert = '';\r\n  while (pointer < diffs.length) {\r\n    switch (diffs[pointer][0]) {\r\n      case DIFF_INSERT:\r\n        count_insert++;\r\n        text_insert += diffs[pointer][1];\r\n        break;\r\n      case DIFF_DELETE:\r\n        count_delete++;\r\n        text_delete += diffs[pointer][1];\r\n        break;\r\n      case DIFF_EQUAL:\r\n        // Upon reaching an equality, check for prior redundancies.\r\n        if (count_delete >= 1 && count_insert >= 1) {\r\n          // Delete the offending records and add the merged ones.\r\n          diffs.splice(pointer - count_delete - count_insert,\r\n                       count_delete + count_insert);\r\n          pointer = pointer - count_delete - count_insert;\r\n          var a = this.diff_main(text_delete, text_insert, false, deadline);\r\n          for (var j = a.length - 1; j >= 0; j--) {\r\n            diffs.splice(pointer, 0, a[j]);\r\n          }\r\n          pointer = pointer + a.length;\r\n        }\r\n        count_insert = 0;\r\n        count_delete = 0;\r\n        text_delete = '';\r\n        text_insert = '';\r\n        break;\r\n    }\r\n    pointer++;\r\n  }\r\n  diffs.pop();  // Remove the dummy entry at the end.\r\n\r\n  return diffs;\r\n};\r\n\r\n\r\n/**\r\n * Find the 'middle snake' of a diff, split the problem in two\r\n * and return the recursively constructed diff.\r\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {number} deadline Time at which to bail if not yet complete.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_bisect_ = function(text1, text2, deadline) {\r\n  // Cache the text lengths to prevent multiple calls.\r\n  var text1_length = text1.length;\r\n  var text2_length = text2.length;\r\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\r\n  var v_offset = max_d;\r\n  var v_length = 2 * max_d;\r\n  var v1 = new Array(v_length);\r\n  var v2 = new Array(v_length);\r\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\r\n  // integers and undefined.\r\n  for (var x = 0; x < v_length; x++) {\r\n    v1[x] = -1;\r\n    v2[x] = -1;\r\n  }\r\n  v1[v_offset + 1] = 0;\r\n  v2[v_offset + 1] = 0;\r\n  var delta = text1_length - text2_length;\r\n  // If the total number of characters is odd, then the front path will collide\r\n  // with the reverse path.\r\n  var front = (delta % 2 != 0);\r\n  // Offsets for start and end of k loop.\r\n  // Prevents mapping of space beyond the grid.\r\n  var k1start = 0;\r\n  var k1end = 0;\r\n  var k2start = 0;\r\n  var k2end = 0;\r\n  for (var d = 0; d < max_d; d++) {\r\n    // Bail out if deadline is reached.\r\n    if ((new Date()).getTime() > deadline) {\r\n      break;\r\n    }\r\n\r\n    // Walk the front path one step.\r\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\r\n      var k1_offset = v_offset + k1;\r\n      var x1;\r\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\r\n        x1 = v1[k1_offset + 1];\r\n      } else {\r\n        x1 = v1[k1_offset - 1] + 1;\r\n      }\r\n      var y1 = x1 - k1;\r\n      while (x1 < text1_length && y1 < text2_length &&\r\n             text1.charAt(x1) == text2.charAt(y1)) {\r\n        x1++;\r\n        y1++;\r\n      }\r\n      v1[k1_offset] = x1;\r\n      if (x1 > text1_length) {\r\n        // Ran off the right of the graph.\r\n        k1end += 2;\r\n      } else if (y1 > text2_length) {\r\n        // Ran off the bottom of the graph.\r\n        k1start += 2;\r\n      } else if (front) {\r\n        var k2_offset = v_offset + delta - k1;\r\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\r\n          // Mirror x2 onto top-left coordinate system.\r\n          var x2 = text1_length - v2[k2_offset];\r\n          if (x1 >= x2) {\r\n            // Overlap detected.\r\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Walk the reverse path one step.\r\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\r\n      var k2_offset = v_offset + k2;\r\n      var x2;\r\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\r\n        x2 = v2[k2_offset + 1];\r\n      } else {\r\n        x2 = v2[k2_offset - 1] + 1;\r\n      }\r\n      var y2 = x2 - k2;\r\n      while (x2 < text1_length && y2 < text2_length &&\r\n             text1.charAt(text1_length - x2 - 1) ==\r\n             text2.charAt(text2_length - y2 - 1)) {\r\n        x2++;\r\n        y2++;\r\n      }\r\n      v2[k2_offset] = x2;\r\n      if (x2 > text1_length) {\r\n        // Ran off the left of the graph.\r\n        k2end += 2;\r\n      } else if (y2 > text2_length) {\r\n        // Ran off the top of the graph.\r\n        k2start += 2;\r\n      } else if (!front) {\r\n        var k1_offset = v_offset + delta - k2;\r\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\r\n          var x1 = v1[k1_offset];\r\n          var y1 = v_offset + x1 - k1_offset;\r\n          // Mirror x2 onto top-left coordinate system.\r\n          x2 = text1_length - x2;\r\n          if (x1 >= x2) {\r\n            // Overlap detected.\r\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // Diff took too long and hit the deadline or\r\n  // number of diffs equals number of characters, no commonality at all.\r\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\r\n};\r\n\r\n\r\n/**\r\n * Given the location of the 'middle snake', split the diff in two parts\r\n * and recurse.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {number} x Index of split point in text1.\r\n * @param {number} y Index of split point in text2.\r\n * @param {number} deadline Time at which to bail if not yet complete.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_bisectSplit_ = function(text1, text2, x, y,\r\n    deadline) {\r\n  var text1a = text1.substring(0, x);\r\n  var text2a = text2.substring(0, y);\r\n  var text1b = text1.substring(x);\r\n  var text2b = text2.substring(y);\r\n\r\n  // Compute both diffs serially.\r\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\r\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\r\n\r\n  return diffs.concat(diffsb);\r\n};\r\n\r\n\r\n/**\r\n * Split two texts into an array of strings.  Reduce the texts to a string of\r\n * hashes where each Unicode character represents one line.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\r\n *     An object containing the encoded text1, the encoded text2 and\r\n *     the array of unique strings.\r\n *     The zeroth element of the array of unique strings is intentionally blank.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_linesToChars_ = function(text1, text2) {\r\n  var lineArray = [];  // e.g. lineArray[4] == 'Hello\\n'\r\n  var lineHash = {};   // e.g. lineHash['Hello\\n'] == 4\r\n\r\n  // '\\x00' is a valid character, but various debuggers don't like it.\r\n  // So we'll insert a junk entry to avoid generating a null character.\r\n  lineArray[0] = '';\r\n\r\n  /**\r\n   * Split a text into an array of strings.  Reduce the texts to a string of\r\n   * hashes where each Unicode character represents one line.\r\n   * Modifies linearray and linehash through being a closure.\r\n   * @param {string} text String to encode.\r\n   * @return {string} Encoded string.\r\n   * @private\r\n   */\r\n  function diff_linesToCharsMunge_(text) {\r\n    var chars = '';\r\n    // Walk the text, pulling out a substring for each line.\r\n    // text.split('\\n') would would temporarily double our memory footprint.\r\n    // Modifying text would create many large strings to garbage collect.\r\n    var lineStart = 0;\r\n    var lineEnd = -1;\r\n    // Keeping our own length variable is faster than looking it up.\r\n    var lineArrayLength = lineArray.length;\r\n    while (lineEnd < text.length - 1) {\r\n      lineEnd = text.indexOf('\\n', lineStart);\r\n      if (lineEnd == -1) {\r\n        lineEnd = text.length - 1;\r\n      }\r\n      var line = text.substring(lineStart, lineEnd + 1);\r\n      lineStart = lineEnd + 1;\r\n\r\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) :\r\n          (lineHash[line] !== undefined)) {\r\n        chars += String.fromCharCode(lineHash[line]);\r\n      } else {\r\n        chars += String.fromCharCode(lineArrayLength);\r\n        lineHash[line] = lineArrayLength;\r\n        lineArray[lineArrayLength++] = line;\r\n      }\r\n    }\r\n    return chars;\r\n  }\r\n\r\n  var chars1 = diff_linesToCharsMunge_(text1);\r\n  var chars2 = diff_linesToCharsMunge_(text2);\r\n  return {chars1: chars1, chars2: chars2, lineArray: lineArray};\r\n};\r\n\r\n\r\n/**\r\n * Rehydrate the text in a diff from a string of line hashes to real lines of\r\n * text.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @param {!Array.<string>} lineArray Array of unique strings.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_charsToLines_ = function(diffs, lineArray) {\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var chars = diffs[x][1];\r\n    var text = [];\r\n    for (var y = 0; y < chars.length; y++) {\r\n      text[y] = lineArray[chars.charCodeAt(y)];\r\n    }\r\n    diffs[x][1] = text.join('');\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Determine the common prefix of two strings.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {number} The number of characters common to the start of each\r\n *     string.\r\n */\r\ndiff_match_patch.prototype.diff_commonPrefix = function(text1, text2) {\r\n  // Quick check for common null cases.\r\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\r\n    return 0;\r\n  }\r\n  // Binary search.\r\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\r\n  var pointermin = 0;\r\n  var pointermax = Math.min(text1.length, text2.length);\r\n  var pointermid = pointermax;\r\n  var pointerstart = 0;\r\n  while (pointermin < pointermid) {\r\n    if (text1.substring(pointerstart, pointermid) ==\r\n        text2.substring(pointerstart, pointermid)) {\r\n      pointermin = pointermid;\r\n      pointerstart = pointermin;\r\n    } else {\r\n      pointermax = pointermid;\r\n    }\r\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\r\n  }\r\n  return pointermid;\r\n};\r\n\r\n\r\n/**\r\n * Determine the common suffix of two strings.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {number} The number of characters common to the end of each string.\r\n */\r\ndiff_match_patch.prototype.diff_commonSuffix = function(text1, text2) {\r\n  // Quick check for common null cases.\r\n  if (!text1 || !text2 ||\r\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\r\n    return 0;\r\n  }\r\n  // Binary search.\r\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\r\n  var pointermin = 0;\r\n  var pointermax = Math.min(text1.length, text2.length);\r\n  var pointermid = pointermax;\r\n  var pointerend = 0;\r\n  while (pointermin < pointermid) {\r\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\r\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\r\n      pointermin = pointermid;\r\n      pointerend = pointermin;\r\n    } else {\r\n      pointermax = pointermid;\r\n    }\r\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\r\n  }\r\n  return pointermid;\r\n};\r\n\r\n\r\n/**\r\n * Determine if the suffix of one string is the prefix of another.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {number} The number of characters common to the end of the first\r\n *     string and the start of the second string.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_commonOverlap_ = function(text1, text2) {\r\n  // Cache the text lengths to prevent multiple calls.\r\n  var text1_length = text1.length;\r\n  var text2_length = text2.length;\r\n  // Eliminate the null case.\r\n  if (text1_length == 0 || text2_length == 0) {\r\n    return 0;\r\n  }\r\n  // Truncate the longer string.\r\n  if (text1_length > text2_length) {\r\n    text1 = text1.substring(text1_length - text2_length);\r\n  } else if (text1_length < text2_length) {\r\n    text2 = text2.substring(0, text1_length);\r\n  }\r\n  var text_length = Math.min(text1_length, text2_length);\r\n  // Quick check for the worst case.\r\n  if (text1 == text2) {\r\n    return text_length;\r\n  }\r\n\r\n  // Start by looking for a single character match\r\n  // and increase length until no match is found.\r\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\r\n  var best = 0;\r\n  var length = 1;\r\n  while (true) {\r\n    var pattern = text1.substring(text_length - length);\r\n    var found = text2.indexOf(pattern);\r\n    if (found == -1) {\r\n      return best;\r\n    }\r\n    length += found;\r\n    if (found == 0 || text1.substring(text_length - length) ==\r\n        text2.substring(0, length)) {\r\n      best = length;\r\n      length++;\r\n    }\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Do the two texts share a substring which is at least half the length of the\r\n * longer text?\r\n * This speedup can produce non-minimal diffs.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {Array.<string>} Five element Array, containing the prefix of\r\n *     text1, the suffix of text1, the prefix of text2, the suffix of\r\n *     text2 and the common middle.  Or null if there was no match.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_halfMatch_ = function(text1, text2) {\r\n  if (this.Diff_Timeout <= 0) {\r\n    // Don't risk returning a non-optimal diff if we have unlimited time.\r\n    return null;\r\n  }\r\n  var longtext = text1.length > text2.length ? text1 : text2;\r\n  var shorttext = text1.length > text2.length ? text2 : text1;\r\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\r\n    return null;  // Pointless.\r\n  }\r\n  var dmp = this;  // 'this' becomes 'window' in a closure.\r\n\r\n  /**\r\n   * Does a substring of shorttext exist within longtext such that the substring\r\n   * is at least half the length of longtext?\r\n   * Closure, but does not reference any external variables.\r\n   * @param {string} longtext Longer string.\r\n   * @param {string} shorttext Shorter string.\r\n   * @param {number} i Start index of quarter length substring within longtext.\r\n   * @return {Array.<string>} Five element Array, containing the prefix of\r\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\r\n   *     of shorttext and the common middle.  Or null if there was no match.\r\n   * @private\r\n   */\r\n  function diff_halfMatchI_(longtext, shorttext, i) {\r\n    // Start with a 1/4 length substring at position i as a seed.\r\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\r\n    var j = -1;\r\n    var best_common = '';\r\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\r\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\r\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i),\r\n                                               shorttext.substring(j));\r\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i),\r\n                                               shorttext.substring(0, j));\r\n      if (best_common.length < suffixLength + prefixLength) {\r\n        best_common = shorttext.substring(j - suffixLength, j) +\r\n            shorttext.substring(j, j + prefixLength);\r\n        best_longtext_a = longtext.substring(0, i - suffixLength);\r\n        best_longtext_b = longtext.substring(i + prefixLength);\r\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\r\n        best_shorttext_b = shorttext.substring(j + prefixLength);\r\n      }\r\n    }\r\n    if (best_common.length * 2 >= longtext.length) {\r\n      return [best_longtext_a, best_longtext_b,\r\n              best_shorttext_a, best_shorttext_b, best_common];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // First check if the second quarter is the seed for a half-match.\r\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\r\n                             Math.ceil(longtext.length / 4));\r\n  // Check again based on the third quarter.\r\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\r\n                             Math.ceil(longtext.length / 2));\r\n  var hm;\r\n  if (!hm1 && !hm2) {\r\n    return null;\r\n  } else if (!hm2) {\r\n    hm = hm1;\r\n  } else if (!hm1) {\r\n    hm = hm2;\r\n  } else {\r\n    // Both matched.  Select the longest.\r\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\r\n  }\r\n\r\n  // A half-match was found, sort out the return data.\r\n  var text1_a, text1_b, text2_a, text2_b;\r\n  if (text1.length > text2.length) {\r\n    text1_a = hm[0];\r\n    text1_b = hm[1];\r\n    text2_a = hm[2];\r\n    text2_b = hm[3];\r\n  } else {\r\n    text2_a = hm[0];\r\n    text2_b = hm[1];\r\n    text1_a = hm[2];\r\n    text1_b = hm[3];\r\n  }\r\n  var mid_common = hm[4];\r\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\r\n};\r\n\r\n\r\n/**\r\n * Reduce the number of edits by eliminating semantically trivial equalities.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupSemantic = function(diffs) {\r\n  var changes = false;\r\n  var equalities = [];  // Stack of indices where equalities are found.\r\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\r\n  /** @type {?string} */\r\n  var lastequality = null;\r\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\r\n  var pointer = 0;  // Index of current position.\r\n  // Number of characters that changed prior to the equality.\r\n  var length_insertions1 = 0;\r\n  var length_deletions1 = 0;\r\n  // Number of characters that changed after the equality.\r\n  var length_insertions2 = 0;\r\n  var length_deletions2 = 0;\r\n  while (pointer < diffs.length) {\r\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\r\n      equalities[equalitiesLength++] = pointer;\r\n      length_insertions1 = length_insertions2;\r\n      length_deletions1 = length_deletions2;\r\n      length_insertions2 = 0;\r\n      length_deletions2 = 0;\r\n      lastequality = diffs[pointer][1];\r\n    } else {  // An insertion or deletion.\r\n      if (diffs[pointer][0] == DIFF_INSERT) {\r\n        length_insertions2 += diffs[pointer][1].length;\r\n      } else {\r\n        length_deletions2 += diffs[pointer][1].length;\r\n      }\r\n      // Eliminate an equality that is smaller or equal to the edits on both\r\n      // sides of it.\r\n      if (lastequality && (lastequality.length <=\r\n          Math.max(length_insertions1, length_deletions1)) &&\r\n          (lastequality.length <= Math.max(length_insertions2,\r\n                                           length_deletions2))) {\r\n        // Duplicate record.\r\n        diffs.splice(equalities[equalitiesLength - 1], 0,\r\n                     [DIFF_DELETE, lastequality]);\r\n        // Change second copy to insert.\r\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\r\n        // Throw away the equality we just deleted.\r\n        equalitiesLength--;\r\n        // Throw away the previous equality (it needs to be reevaluated).\r\n        equalitiesLength--;\r\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\r\n        length_insertions1 = 0;  // Reset the counters.\r\n        length_deletions1 = 0;\r\n        length_insertions2 = 0;\r\n        length_deletions2 = 0;\r\n        lastequality = null;\r\n        changes = true;\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n\r\n  // Normalize the diff.\r\n  if (changes) {\r\n    this.diff_cleanupMerge(diffs);\r\n  }\r\n  this.diff_cleanupSemanticLossless(diffs);\r\n\r\n  // Find any overlaps between deletions and insertions.\r\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\r\n  //   -> <del>abc</del>xxx<ins>def</ins>\r\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\r\n  //   -> <ins>def</ins>xxx<del>abc</del>\r\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\r\n  pointer = 1;\r\n  while (pointer < diffs.length) {\r\n    if (diffs[pointer - 1][0] == DIFF_DELETE &&\r\n        diffs[pointer][0] == DIFF_INSERT) {\r\n      var deletion = diffs[pointer - 1][1];\r\n      var insertion = diffs[pointer][1];\r\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\r\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\r\n      if (overlap_length1 >= overlap_length2) {\r\n        if (overlap_length1 >= deletion.length / 2 ||\r\n            overlap_length1 >= insertion.length / 2) {\r\n          // Overlap found.  Insert an equality and trim the surrounding edits.\r\n          diffs.splice(pointer, 0,\r\n              [DIFF_EQUAL, insertion.substring(0, overlap_length1)]);\r\n          diffs[pointer - 1][1] =\r\n              deletion.substring(0, deletion.length - overlap_length1);\r\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\r\n          pointer++;\r\n        }\r\n      } else {\r\n        if (overlap_length2 >= deletion.length / 2 ||\r\n            overlap_length2 >= insertion.length / 2) {\r\n          // Reverse overlap found.\r\n          // Insert an equality and swap and trim the surrounding edits.\r\n          diffs.splice(pointer, 0,\r\n              [DIFF_EQUAL, deletion.substring(0, overlap_length2)]);\r\n          diffs[pointer - 1][0] = DIFF_INSERT;\r\n          diffs[pointer - 1][1] =\r\n              insertion.substring(0, insertion.length - overlap_length2);\r\n          diffs[pointer + 1][0] = DIFF_DELETE;\r\n          diffs[pointer + 1][1] =\r\n              deletion.substring(overlap_length2);\r\n          pointer++;\r\n        }\r\n      }\r\n      pointer++;\r\n    }\r\n    pointer++;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Look for single edits surrounded on both sides by equalities\r\n * which can be shifted sideways to align the edit to a word boundary.\r\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function(diffs) {\r\n  /**\r\n   * Given two strings, compute a score representing whether the internal\r\n   * boundary falls on logical boundaries.\r\n   * Scores range from 6 (best) to 0 (worst).\r\n   * Closure, but does not reference any external variables.\r\n   * @param {string} one First string.\r\n   * @param {string} two Second string.\r\n   * @return {number} The score.\r\n   * @private\r\n   */\r\n  function diff_cleanupSemanticScore_(one, two) {\r\n    if (!one || !two) {\r\n      // Edges are the best.\r\n      return 6;\r\n    }\r\n\r\n    // Each port of this function behaves slightly differently due to\r\n    // subtle differences in each language's definition of things like\r\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\r\n    // the choice has been made to use each language's native features\r\n    // rather than force total conformity.\r\n    var char1 = one.charAt(one.length - 1);\r\n    var char2 = two.charAt(0);\r\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\r\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\r\n    var whitespace1 = nonAlphaNumeric1 &&\r\n        char1.match(diff_match_patch.whitespaceRegex_);\r\n    var whitespace2 = nonAlphaNumeric2 &&\r\n        char2.match(diff_match_patch.whitespaceRegex_);\r\n    var lineBreak1 = whitespace1 &&\r\n        char1.match(diff_match_patch.linebreakRegex_);\r\n    var lineBreak2 = whitespace2 &&\r\n        char2.match(diff_match_patch.linebreakRegex_);\r\n    var blankLine1 = lineBreak1 &&\r\n        one.match(diff_match_patch.blanklineEndRegex_);\r\n    var blankLine2 = lineBreak2 &&\r\n        two.match(diff_match_patch.blanklineStartRegex_);\r\n\r\n    if (blankLine1 || blankLine2) {\r\n      // Five points for blank lines.\r\n      return 5;\r\n    } else if (lineBreak1 || lineBreak2) {\r\n      // Four points for line breaks.\r\n      return 4;\r\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\r\n      // Three points for end of sentences.\r\n      return 3;\r\n    } else if (whitespace1 || whitespace2) {\r\n      // Two points for whitespace.\r\n      return 2;\r\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\r\n      // One point for non-alphanumeric.\r\n      return 1;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  var pointer = 1;\r\n  // Intentionally ignore the first and last element (don't need checking).\r\n  while (pointer < diffs.length - 1) {\r\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\r\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\r\n      // This is a single edit surrounded by equalities.\r\n      var equality1 = diffs[pointer - 1][1];\r\n      var edit = diffs[pointer][1];\r\n      var equality2 = diffs[pointer + 1][1];\r\n\r\n      // First, shift the edit as far left as possible.\r\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\r\n      if (commonOffset) {\r\n        var commonString = edit.substring(edit.length - commonOffset);\r\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\r\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\r\n        equality2 = commonString + equality2;\r\n      }\r\n\r\n      // Second, step character by character right, looking for the best fit.\r\n      var bestEquality1 = equality1;\r\n      var bestEdit = edit;\r\n      var bestEquality2 = equality2;\r\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) +\r\n          diff_cleanupSemanticScore_(edit, equality2);\r\n      while (edit.charAt(0) === equality2.charAt(0)) {\r\n        equality1 += edit.charAt(0);\r\n        edit = edit.substring(1) + equality2.charAt(0);\r\n        equality2 = equality2.substring(1);\r\n        var score = diff_cleanupSemanticScore_(equality1, edit) +\r\n            diff_cleanupSemanticScore_(edit, equality2);\r\n        // The >= encourages trailing rather than leading whitespace on edits.\r\n        if (score >= bestScore) {\r\n          bestScore = score;\r\n          bestEquality1 = equality1;\r\n          bestEdit = edit;\r\n          bestEquality2 = equality2;\r\n        }\r\n      }\r\n\r\n      if (diffs[pointer - 1][1] != bestEquality1) {\r\n        // We have an improvement, save it back to the diff.\r\n        if (bestEquality1) {\r\n          diffs[pointer - 1][1] = bestEquality1;\r\n        } else {\r\n          diffs.splice(pointer - 1, 1);\r\n          pointer--;\r\n        }\r\n        diffs[pointer][1] = bestEdit;\r\n        if (bestEquality2) {\r\n          diffs[pointer + 1][1] = bestEquality2;\r\n        } else {\r\n          diffs.splice(pointer + 1, 1);\r\n          pointer--;\r\n        }\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n};\r\n\r\n// Define some regex patterns for matching boundaries.\r\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\r\ndiff_match_patch.whitespaceRegex_ = /\\s/;\r\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\r\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\r\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\r\n\r\n/**\r\n * Reduce the number of edits by eliminating operationally trivial equalities.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupEfficiency = function(diffs) {\r\n  var changes = false;\r\n  var equalities = [];  // Stack of indices where equalities are found.\r\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\r\n  /** @type {?string} */\r\n  var lastequality = null;\r\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\r\n  var pointer = 0;  // Index of current position.\r\n  // Is there an insertion operation before the last equality.\r\n  var pre_ins = false;\r\n  // Is there a deletion operation before the last equality.\r\n  var pre_del = false;\r\n  // Is there an insertion operation after the last equality.\r\n  var post_ins = false;\r\n  // Is there a deletion operation after the last equality.\r\n  var post_del = false;\r\n  while (pointer < diffs.length) {\r\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\r\n      if (diffs[pointer][1].length < this.Diff_EditCost &&\r\n          (post_ins || post_del)) {\r\n        // Candidate found.\r\n        equalities[equalitiesLength++] = pointer;\r\n        pre_ins = post_ins;\r\n        pre_del = post_del;\r\n        lastequality = diffs[pointer][1];\r\n      } else {\r\n        // Not a candidate, and can never become one.\r\n        equalitiesLength = 0;\r\n        lastequality = null;\r\n      }\r\n      post_ins = post_del = false;\r\n    } else {  // An insertion or deletion.\r\n      if (diffs[pointer][0] == DIFF_DELETE) {\r\n        post_del = true;\r\n      } else {\r\n        post_ins = true;\r\n      }\r\n      /*\r\n       * Five types to be split:\r\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\r\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\r\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\r\n       * <ins>A</del>X<ins>C</ins><del>D</del>\r\n       * <ins>A</ins><del>B</del>X<del>C</del>\r\n       */\r\n      if (lastequality && ((pre_ins && pre_del && post_ins && post_del) ||\r\n                           ((lastequality.length < this.Diff_EditCost / 2) &&\r\n                            (pre_ins + pre_del + post_ins + post_del) == 3))) {\r\n        // Duplicate record.\r\n        diffs.splice(equalities[equalitiesLength - 1], 0,\r\n                     [DIFF_DELETE, lastequality]);\r\n        // Change second copy to insert.\r\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\r\n        equalitiesLength--;  // Throw away the equality we just deleted;\r\n        lastequality = null;\r\n        if (pre_ins && pre_del) {\r\n          // No changes made which could affect previous entry, keep going.\r\n          post_ins = post_del = true;\r\n          equalitiesLength = 0;\r\n        } else {\r\n          equalitiesLength--;  // Throw away the previous equality.\r\n          pointer = equalitiesLength > 0 ?\r\n              equalities[equalitiesLength - 1] : -1;\r\n          post_ins = post_del = false;\r\n        }\r\n        changes = true;\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n\r\n  if (changes) {\r\n    this.diff_cleanupMerge(diffs);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Reorder and merge like edit sections.  Merge equalities.\r\n * Any edit section can move as long as it doesn't cross an equality.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupMerge = function(diffs) {\r\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\r\n  var pointer = 0;\r\n  var count_delete = 0;\r\n  var count_insert = 0;\r\n  var text_delete = '';\r\n  var text_insert = '';\r\n  var commonlength;\r\n  while (pointer < diffs.length) {\r\n    switch (diffs[pointer][0]) {\r\n      case DIFF_INSERT:\r\n        count_insert++;\r\n        text_insert += diffs[pointer][1];\r\n        pointer++;\r\n        break;\r\n      case DIFF_DELETE:\r\n        count_delete++;\r\n        text_delete += diffs[pointer][1];\r\n        pointer++;\r\n        break;\r\n      case DIFF_EQUAL:\r\n        // Upon reaching an equality, check for prior redundancies.\r\n        if (count_delete + count_insert > 1) {\r\n          if (count_delete !== 0 && count_insert !== 0) {\r\n            // Factor out any common prefixies.\r\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\r\n            if (commonlength !== 0) {\r\n              if ((pointer - count_delete - count_insert) > 0 &&\r\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\r\n                  DIFF_EQUAL) {\r\n                diffs[pointer - count_delete - count_insert - 1][1] +=\r\n                    text_insert.substring(0, commonlength);\r\n              } else {\r\n                diffs.splice(0, 0, [DIFF_EQUAL,\r\n                                    text_insert.substring(0, commonlength)]);\r\n                pointer++;\r\n              }\r\n              text_insert = text_insert.substring(commonlength);\r\n              text_delete = text_delete.substring(commonlength);\r\n            }\r\n            // Factor out any common suffixies.\r\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\r\n            if (commonlength !== 0) {\r\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\r\n                  commonlength) + diffs[pointer][1];\r\n              text_insert = text_insert.substring(0, text_insert.length -\r\n                  commonlength);\r\n              text_delete = text_delete.substring(0, text_delete.length -\r\n                  commonlength);\r\n            }\r\n          }\r\n          // Delete the offending records and add the merged ones.\r\n          if (count_delete === 0) {\r\n            diffs.splice(pointer - count_insert,\r\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\r\n          } else if (count_insert === 0) {\r\n            diffs.splice(pointer - count_delete,\r\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\r\n          } else {\r\n            diffs.splice(pointer - count_delete - count_insert,\r\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\r\n                [DIFF_INSERT, text_insert]);\r\n          }\r\n          pointer = pointer - count_delete - count_insert +\r\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\r\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\r\n          // Merge this equality with the previous one.\r\n          diffs[pointer - 1][1] += diffs[pointer][1];\r\n          diffs.splice(pointer, 1);\r\n        } else {\r\n          pointer++;\r\n        }\r\n        count_insert = 0;\r\n        count_delete = 0;\r\n        text_delete = '';\r\n        text_insert = '';\r\n        break;\r\n    }\r\n  }\r\n  if (diffs[diffs.length - 1][1] === '') {\r\n    diffs.pop();  // Remove the dummy entry at the end.\r\n  }\r\n\r\n  // Second pass: look for single edits surrounded on both sides by equalities\r\n  // which can be shifted sideways to eliminate an equality.\r\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\r\n  var changes = false;\r\n  pointer = 1;\r\n  // Intentionally ignore the first and last element (don't need checking).\r\n  while (pointer < diffs.length - 1) {\r\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\r\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\r\n      // This is a single edit surrounded by equalities.\r\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\r\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\r\n        // Shift the edit over the previous equality.\r\n        diffs[pointer][1] = diffs[pointer - 1][1] +\r\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\r\n                                        diffs[pointer - 1][1].length);\r\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\r\n        diffs.splice(pointer - 1, 1);\r\n        changes = true;\r\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\r\n          diffs[pointer + 1][1]) {\r\n        // Shift the edit over the next equality.\r\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\r\n        diffs[pointer][1] =\r\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\r\n            diffs[pointer + 1][1];\r\n        diffs.splice(pointer + 1, 1);\r\n        changes = true;\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n  // If shifts were made, the diff needs reordering and another shift sweep.\r\n  if (changes) {\r\n    this.diff_cleanupMerge(diffs);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * loc is a location in text1, compute and return the equivalent location in\r\n * text2.\r\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @param {number} loc Location within text1.\r\n * @return {number} Location within text2.\r\n */\r\ndiff_match_patch.prototype.diff_xIndex = function(diffs, loc) {\r\n  var chars1 = 0;\r\n  var chars2 = 0;\r\n  var last_chars1 = 0;\r\n  var last_chars2 = 0;\r\n  var x;\r\n  for (x = 0; x < diffs.length; x++) {\r\n    if (diffs[x][0] !== DIFF_INSERT) {  // Equality or deletion.\r\n      chars1 += diffs[x][1].length;\r\n    }\r\n    if (diffs[x][0] !== DIFF_DELETE) {  // Equality or insertion.\r\n      chars2 += diffs[x][1].length;\r\n    }\r\n    if (chars1 > loc) {  // Overshot the location.\r\n      break;\r\n    }\r\n    last_chars1 = chars1;\r\n    last_chars2 = chars2;\r\n  }\r\n  // Was the location was deleted?\r\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\r\n    return last_chars2;\r\n  }\r\n  // Add the remaining character length.\r\n  return last_chars2 + (loc - last_chars1);\r\n};\r\n\r\n\r\n/**\r\n * Convert a diff array into a pretty HTML report.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} HTML representation.\r\n */\r\ndiff_match_patch.prototype.diff_prettyHtml = function(diffs) {\r\n  var html = [];\r\n  var pattern_amp = /&/g;\r\n  var pattern_lt = /</g;\r\n  var pattern_gt = />/g;\r\n  var pattern_para = /\\n/g;\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var op = diffs[x][0];    // Operation (insert, delete, equal)\r\n    var data = diffs[x][1];  // Text of change.\r\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;')\r\n        .replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\r\n    switch (op) {\r\n      case DIFF_INSERT:\r\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\r\n        break;\r\n      case DIFF_DELETE:\r\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\r\n        break;\r\n      case DIFF_EQUAL:\r\n        html[x] = '<span>' + text + '</span>';\r\n        break;\r\n    }\r\n  }\r\n  return html.join('');\r\n};\r\n\r\n\r\n/**\r\n * Compute and return the source text (all equalities and deletions).\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} Source text.\r\n */\r\ndiff_match_patch.prototype.diff_text1 = function(diffs) {\r\n  var text = [];\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    if (diffs[x][0] !== DIFF_INSERT) {\r\n      text[x] = diffs[x][1];\r\n    }\r\n  }\r\n  return text.join('');\r\n};\r\n\r\n\r\n/**\r\n * Compute and return the destination text (all equalities and insertions).\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} Destination text.\r\n */\r\ndiff_match_patch.prototype.diff_text2 = function(diffs) {\r\n  var text = [];\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    if (diffs[x][0] !== DIFF_DELETE) {\r\n      text[x] = diffs[x][1];\r\n    }\r\n  }\r\n  return text.join('');\r\n};\r\n\r\n\r\n/**\r\n * Compute the Levenshtein distance; the number of inserted, deleted or\r\n * substituted characters.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {number} Number of changes.\r\n */\r\ndiff_match_patch.prototype.diff_levenshtein = function(diffs) {\r\n  var levenshtein = 0;\r\n  var insertions = 0;\r\n  var deletions = 0;\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var op = diffs[x][0];\r\n    var data = diffs[x][1];\r\n    switch (op) {\r\n      case DIFF_INSERT:\r\n        insertions += data.length;\r\n        break;\r\n      case DIFF_DELETE:\r\n        deletions += data.length;\r\n        break;\r\n      case DIFF_EQUAL:\r\n        // A deletion and an insertion is one substitution.\r\n        levenshtein += Math.max(insertions, deletions);\r\n        insertions = 0;\r\n        deletions = 0;\r\n        break;\r\n    }\r\n  }\r\n  levenshtein += Math.max(insertions, deletions);\r\n  return levenshtein;\r\n};\r\n\r\n\r\n/**\r\n * Crush the diff into an encoded string which describes the operations\r\n * required to transform text1 into text2.\r\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\r\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} Delta text.\r\n */\r\ndiff_match_patch.prototype.diff_toDelta = function(diffs) {\r\n  var text = [];\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    switch (diffs[x][0]) {\r\n      case DIFF_INSERT:\r\n        text[x] = '+' + encodeURI(diffs[x][1]);\r\n        break;\r\n      case DIFF_DELETE:\r\n        text[x] = '-' + diffs[x][1].length;\r\n        break;\r\n      case DIFF_EQUAL:\r\n        text[x] = '=' + diffs[x][1].length;\r\n        break;\r\n    }\r\n  }\r\n  return text.join('\\t').replace(/%20/g, ' ');\r\n};\r\n\r\n\r\n/**\r\n * Given the original text1, and an encoded string which describes the\r\n * operations required to transform text1 into text2, compute the full diff.\r\n * @param {string} text1 Source string for the diff.\r\n * @param {string} delta Delta text.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @throws {!Error} If invalid input.\r\n */\r\ndiff_match_patch.prototype.diff_fromDelta = function(text1, delta) {\r\n  var diffs = [];\r\n  var diffsLength = 0;  // Keeping our own length var is faster in JS.\r\n  var pointer = 0;  // Cursor in text1\r\n  var tokens = delta.split(/\\t/g);\r\n  for (var x = 0; x < tokens.length; x++) {\r\n    // Each token begins with a one character parameter which specifies the\r\n    // operation of this token (delete, insert, equality).\r\n    var param = tokens[x].substring(1);\r\n    switch (tokens[x].charAt(0)) {\r\n      case '+':\r\n        try {\r\n          diffs[diffsLength++] = [DIFF_INSERT, decodeURI(param)];\r\n        } catch (ex) {\r\n          // Malformed URI sequence.\r\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\r\n        }\r\n        break;\r\n      case '-':\r\n        // Fall through.\r\n      case '=':\r\n        var n = parseInt(param, 10);\r\n        if (isNaN(n) || n < 0) {\r\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\r\n        }\r\n        var text = text1.substring(pointer, pointer += n);\r\n        if (tokens[x].charAt(0) == '=') {\r\n          diffs[diffsLength++] = [DIFF_EQUAL, text];\r\n        } else {\r\n          diffs[diffsLength++] = [DIFF_DELETE, text];\r\n        }\r\n        break;\r\n      default:\r\n        // Blank tokens are ok (from a trailing \\t).\r\n        // Anything else is an error.\r\n        if (tokens[x]) {\r\n          throw new Error('Invalid diff operation in diff_fromDelta: ' +\r\n                          tokens[x]);\r\n        }\r\n    }\r\n  }\r\n  if (pointer != text1.length) {\r\n    throw new Error('Delta length (' + pointer +\r\n        ') does not equal source text length (' + text1.length + ').');\r\n  }\r\n  return diffs;\r\n};\r\n\r\n\r\n//  MATCH FUNCTIONS\r\n\r\n\r\n/**\r\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\r\n * @param {string} text The text to search.\r\n * @param {string} pattern The pattern to search for.\r\n * @param {number} loc The location to search around.\r\n * @return {number} Best match index or -1.\r\n */\r\ndiff_match_patch.prototype.match_main = function(text, pattern, loc) {\r\n  // Check for null inputs.\r\n  if (text == null || pattern == null || loc == null) {\r\n    throw new Error('Null input. (match_main)');\r\n  }\r\n\r\n  loc = Math.max(0, Math.min(loc, text.length));\r\n  if (text == pattern) {\r\n    // Shortcut (potentially not guaranteed by the algorithm)\r\n    return 0;\r\n  } else if (!text.length) {\r\n    // Nothing to match.\r\n    return -1;\r\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\r\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\r\n    return loc;\r\n  } else {\r\n    // Do a fuzzy compare.\r\n    return this.match_bitap_(text, pattern, loc);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\r\n * Bitap algorithm.\r\n * @param {string} text The text to search.\r\n * @param {string} pattern The pattern to search for.\r\n * @param {number} loc The location to search around.\r\n * @return {number} Best match index or -1.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.match_bitap_ = function(text, pattern, loc) {\r\n  if (pattern.length > this.Match_MaxBits) {\r\n    throw new Error('Pattern too long for this browser.');\r\n  }\r\n\r\n  // Initialise the alphabet.\r\n  var s = this.match_alphabet_(pattern);\r\n\r\n  var dmp = this;  // 'this' becomes 'window' in a closure.\r\n\r\n  /**\r\n   * Compute and return the score for a match with e errors and x location.\r\n   * Accesses loc and pattern through being a closure.\r\n   * @param {number} e Number of errors in match.\r\n   * @param {number} x Location of match.\r\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\r\n   * @private\r\n   */\r\n  function match_bitapScore_(e, x) {\r\n    var accuracy = e / pattern.length;\r\n    var proximity = Math.abs(loc - x);\r\n    if (!dmp.Match_Distance) {\r\n      // Dodge divide by zero error.\r\n      return proximity ? 1.0 : accuracy;\r\n    }\r\n    return accuracy + (proximity / dmp.Match_Distance);\r\n  }\r\n\r\n  // Highest score beyond which we give up.\r\n  var score_threshold = this.Match_Threshold;\r\n  // Is there a nearby exact match? (speedup)\r\n  var best_loc = text.indexOf(pattern, loc);\r\n  if (best_loc != -1) {\r\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\r\n    // What about in the other direction? (speedup)\r\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\r\n    if (best_loc != -1) {\r\n      score_threshold =\r\n          Math.min(match_bitapScore_(0, best_loc), score_threshold);\r\n    }\r\n  }\r\n\r\n  // Initialise the bit arrays.\r\n  var matchmask = 1 << (pattern.length - 1);\r\n  best_loc = -1;\r\n\r\n  var bin_min, bin_mid;\r\n  var bin_max = pattern.length + text.length;\r\n  var last_rd;\r\n  for (var d = 0; d < pattern.length; d++) {\r\n    // Scan for the best match; each iteration allows for one more error.\r\n    // Run a binary search to determine how far from 'loc' we can stray at this\r\n    // error level.\r\n    bin_min = 0;\r\n    bin_mid = bin_max;\r\n    while (bin_min < bin_mid) {\r\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\r\n        bin_min = bin_mid;\r\n      } else {\r\n        bin_max = bin_mid;\r\n      }\r\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\r\n    }\r\n    // Use the result from this iteration as the maximum for the next.\r\n    bin_max = bin_mid;\r\n    var start = Math.max(1, loc - bin_mid + 1);\r\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\r\n\r\n    var rd = Array(finish + 2);\r\n    rd[finish + 1] = (1 << d) - 1;\r\n    for (var j = finish; j >= start; j--) {\r\n      // The alphabet (s) is a sparse hash, so the following line generates\r\n      // warnings.\r\n      var charMatch = s[text.charAt(j - 1)];\r\n      if (d === 0) {  // First pass: exact match.\r\n        rd[j] = ((rd[j + 1] << 1) | 1) & charMatch;\r\n      } else {  // Subsequent passes: fuzzy match.\r\n        rd[j] = (((rd[j + 1] << 1) | 1) & charMatch) |\r\n                (((last_rd[j + 1] | last_rd[j]) << 1) | 1) |\r\n                last_rd[j + 1];\r\n      }\r\n      if (rd[j] & matchmask) {\r\n        var score = match_bitapScore_(d, j - 1);\r\n        // This match will almost certainly be better than any existing match.\r\n        // But check anyway.\r\n        if (score <= score_threshold) {\r\n          // Told you so.\r\n          score_threshold = score;\r\n          best_loc = j - 1;\r\n          if (best_loc > loc) {\r\n            // When passing loc, don't exceed our current distance from loc.\r\n            start = Math.max(1, 2 * loc - best_loc);\r\n          } else {\r\n            // Already passed loc, downhill from here on in.\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // No hope for a (better) match at greater error levels.\r\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\r\n      break;\r\n    }\r\n    last_rd = rd;\r\n  }\r\n  return best_loc;\r\n};\r\n\r\n\r\n/**\r\n * Initialise the alphabet for the Bitap algorithm.\r\n * @param {string} pattern The text to encode.\r\n * @return {!Object} Hash of character locations.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.match_alphabet_ = function(pattern) {\r\n  var s = {};\r\n  for (var i = 0; i < pattern.length; i++) {\r\n    s[pattern.charAt(i)] = 0;\r\n  }\r\n  for (var i = 0; i < pattern.length; i++) {\r\n    s[pattern.charAt(i)] |= 1 << (pattern.length - i - 1);\r\n  }\r\n  return s;\r\n};\r\n\r\n\r\n//  PATCH FUNCTIONS\r\n\r\n\r\n/**\r\n * Increase the context until it is unique,\r\n * but don't let the pattern expand beyond Match_MaxBits.\r\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\r\n * @param {string} text Source text.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.patch_addContext_ = function(patch, text) {\r\n  if (text.length == 0) {\r\n    return;\r\n  }\r\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\r\n  var padding = 0;\r\n\r\n  // Look for the first and last matches of pattern in text.  If two different\r\n  // matches are found, increase the pattern length.\r\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) &&\r\n         pattern.length < this.Match_MaxBits - this.Patch_Margin -\r\n         this.Patch_Margin) {\r\n    padding += this.Patch_Margin;\r\n    pattern = text.substring(patch.start2 - padding,\r\n                             patch.start2 + patch.length1 + padding);\r\n  }\r\n  // Add one chunk for good luck.\r\n  padding += this.Patch_Margin;\r\n\r\n  // Add the prefix.\r\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\r\n  if (prefix) {\r\n    patch.diffs.unshift([DIFF_EQUAL, prefix]);\r\n  }\r\n  // Add the suffix.\r\n  var suffix = text.substring(patch.start2 + patch.length1,\r\n                              patch.start2 + patch.length1 + padding);\r\n  if (suffix) {\r\n    patch.diffs.push([DIFF_EQUAL, suffix]);\r\n  }\r\n\r\n  // Roll back the start points.\r\n  patch.start1 -= prefix.length;\r\n  patch.start2 -= prefix.length;\r\n  // Extend the lengths.\r\n  patch.length1 += prefix.length + suffix.length;\r\n  patch.length2 += prefix.length + suffix.length;\r\n};\r\n\r\n\r\n/**\r\n * Compute a list of patches to turn text1 into text2.\r\n * Use diffs if provided, otherwise compute it ourselves.\r\n * There are four ways to call this function, depending on what data is\r\n * available to the caller:\r\n * Method 1:\r\n * a = text1, b = text2\r\n * Method 2:\r\n * a = diffs\r\n * Method 3 (optimal):\r\n * a = text1, b = diffs\r\n * Method 4 (deprecated, use method 3):\r\n * a = text1, b = text2, c = diffs\r\n *\r\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\r\n * Array of diff tuples for text1 to text2 (method 2).\r\n * @param {string|!Array.<!diff_match_patch.Diff>} opt_b text2 (methods 1,4) or\r\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\r\n * @param {string|!Array.<!diff_match_patch.Diff>} opt_c Array of diff tuples\r\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\r\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\r\n */\r\ndiff_match_patch.prototype.patch_make = function(a, opt_b, opt_c) {\r\n  var text1, diffs;\r\n  if (typeof a == 'string' && typeof opt_b == 'string' &&\r\n      typeof opt_c == 'undefined') {\r\n    // Method 1: text1, text2\r\n    // Compute diffs from text1 and text2.\r\n    text1 = /** @type {string} */(a);\r\n    diffs = this.diff_main(text1, /** @type {string} */(opt_b), true);\r\n    if (diffs.length > 2) {\r\n      this.diff_cleanupSemantic(diffs);\r\n      this.diff_cleanupEfficiency(diffs);\r\n    }\r\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' &&\r\n      typeof opt_c == 'undefined') {\r\n    // Method 2: diffs\r\n    // Compute text1 from diffs.\r\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(a);\r\n    text1 = this.diff_text1(diffs);\r\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' &&\r\n      typeof opt_c == 'undefined') {\r\n    // Method 3: text1, diffs\r\n    text1 = /** @type {string} */(a);\r\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_b);\r\n  } else if (typeof a == 'string' && typeof opt_b == 'string' &&\r\n      opt_c && typeof opt_c == 'object') {\r\n    // Method 4: text1, text2, diffs\r\n    // text2 is not used.\r\n    text1 = /** @type {string} */(a);\r\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_c);\r\n  } else {\r\n    throw new Error('Unknown call format to patch_make.');\r\n  }\r\n\r\n  if (diffs.length === 0) {\r\n    return [];  // Get rid of the null case.\r\n  }\r\n  var patches = [];\r\n  var patch = new diff_match_patch.patch_obj();\r\n  var patchDiffLength = 0;  // Keeping our own length var is faster in JS.\r\n  var char_count1 = 0;  // Number of characters into the text1 string.\r\n  var char_count2 = 0;  // Number of characters into the text2 string.\r\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\r\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\r\n  // context info.\r\n  var prepatch_text = text1;\r\n  var postpatch_text = text1;\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var diff_type = diffs[x][0];\r\n    var diff_text = diffs[x][1];\r\n\r\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\r\n      // A new patch starts here.\r\n      patch.start1 = char_count1;\r\n      patch.start2 = char_count2;\r\n    }\r\n\r\n    switch (diff_type) {\r\n      case DIFF_INSERT:\r\n        patch.diffs[patchDiffLength++] = diffs[x];\r\n        patch.length2 += diff_text.length;\r\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text +\r\n                         postpatch_text.substring(char_count2);\r\n        break;\r\n      case DIFF_DELETE:\r\n        patch.length1 += diff_text.length;\r\n        patch.diffs[patchDiffLength++] = diffs[x];\r\n        postpatch_text = postpatch_text.substring(0, char_count2) +\r\n                         postpatch_text.substring(char_count2 +\r\n                             diff_text.length);\r\n        break;\r\n      case DIFF_EQUAL:\r\n        if (diff_text.length <= 2 * this.Patch_Margin &&\r\n            patchDiffLength && diffs.length != x + 1) {\r\n          // Small equality inside a patch.\r\n          patch.diffs[patchDiffLength++] = diffs[x];\r\n          patch.length1 += diff_text.length;\r\n          patch.length2 += diff_text.length;\r\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\r\n          // Time for a new patch.\r\n          if (patchDiffLength) {\r\n            this.patch_addContext_(patch, prepatch_text);\r\n            patches.push(patch);\r\n            patch = new diff_match_patch.patch_obj();\r\n            patchDiffLength = 0;\r\n            // Unlike Unidiff, our patch lists have a rolling context.\r\n            // http://code.google.com/p/google-diff-match-patch/wiki/Unidiff\r\n            // Update prepatch text & pos to reflect the application of the\r\n            // just completed patch.\r\n            prepatch_text = postpatch_text;\r\n            char_count1 = char_count2;\r\n          }\r\n        }\r\n        break;\r\n    }\r\n\r\n    // Update the current character count.\r\n    if (diff_type !== DIFF_INSERT) {\r\n      char_count1 += diff_text.length;\r\n    }\r\n    if (diff_type !== DIFF_DELETE) {\r\n      char_count2 += diff_text.length;\r\n    }\r\n  }\r\n  // Pick up the leftover patch if not empty.\r\n  if (patchDiffLength) {\r\n    this.patch_addContext_(patch, prepatch_text);\r\n    patches.push(patch);\r\n  }\r\n\r\n  return patches;\r\n};\r\n\r\n\r\n/**\r\n * Given an array of patches, return another array that is identical.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\r\n */\r\ndiff_match_patch.prototype.patch_deepCopy = function(patches) {\r\n  // Making deep copies is hard in JavaScript.\r\n  var patchesCopy = [];\r\n  for (var x = 0; x < patches.length; x++) {\r\n    var patch = patches[x];\r\n    var patchCopy = new diff_match_patch.patch_obj();\r\n    patchCopy.diffs = [];\r\n    for (var y = 0; y < patch.diffs.length; y++) {\r\n      patchCopy.diffs[y] = patch.diffs[y].slice();\r\n    }\r\n    patchCopy.start1 = patch.start1;\r\n    patchCopy.start2 = patch.start2;\r\n    patchCopy.length1 = patch.length1;\r\n    patchCopy.length2 = patch.length2;\r\n    patchesCopy[x] = patchCopy;\r\n  }\r\n  return patchesCopy;\r\n};\r\n\r\n\r\n/**\r\n * Merge a set of patches onto the text.  Return a patched text, as well\r\n * as a list of true/false values indicating which patches were applied.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @param {string} text Old text.\r\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\r\n *      new text and an array of boolean values.\r\n */\r\ndiff_match_patch.prototype.patch_apply = function(patches, text) {\r\n  if (patches.length == 0) {\r\n    return [text, []];\r\n  }\r\n\r\n  // Deep copy the patches so that no changes are made to originals.\r\n  patches = this.patch_deepCopy(patches);\r\n\r\n  var nullPadding = this.patch_addPadding(patches);\r\n  text = nullPadding + text + nullPadding;\r\n\r\n  this.patch_splitMax(patches);\r\n  // delta keeps track of the offset between the expected and actual location\r\n  // of the previous patch.  If there are patches expected at positions 10 and\r\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\r\n  // has an effective expected position of 22.\r\n  var delta = 0;\r\n  var results = [];\r\n  for (var x = 0; x < patches.length; x++) {\r\n    var expected_loc = patches[x].start2 + delta;\r\n    var text1 = this.diff_text1(patches[x].diffs);\r\n    var start_loc;\r\n    var end_loc = -1;\r\n    if (text1.length > this.Match_MaxBits) {\r\n      // patch_splitMax will only provide an oversized pattern in the case of\r\n      // a monster delete.\r\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits),\r\n                                  expected_loc);\r\n      if (start_loc != -1) {\r\n        end_loc = this.match_main(text,\r\n            text1.substring(text1.length - this.Match_MaxBits),\r\n            expected_loc + text1.length - this.Match_MaxBits);\r\n        if (end_loc == -1 || start_loc >= end_loc) {\r\n          // Can't find valid trailing context.  Drop this patch.\r\n          start_loc = -1;\r\n        }\r\n      }\r\n    } else {\r\n      start_loc = this.match_main(text, text1, expected_loc);\r\n    }\r\n    if (start_loc == -1) {\r\n      // No match found.  :(\r\n      results[x] = false;\r\n      // Subtract the delta for this failed patch from subsequent patches.\r\n      delta -= patches[x].length2 - patches[x].length1;\r\n    } else {\r\n      // Found a match.  :)\r\n      results[x] = true;\r\n      delta = start_loc - expected_loc;\r\n      var text2;\r\n      if (end_loc == -1) {\r\n        text2 = text.substring(start_loc, start_loc + text1.length);\r\n      } else {\r\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\r\n      }\r\n      if (text1 == text2) {\r\n        // Perfect match, just shove the replacement text in.\r\n        text = text.substring(0, start_loc) +\r\n               this.diff_text2(patches[x].diffs) +\r\n               text.substring(start_loc + text1.length);\r\n      } else {\r\n        // Imperfect match.  Run a diff to get a framework of equivalent\r\n        // indices.\r\n        var diffs = this.diff_main(text1, text2, false);\r\n        if (text1.length > this.Match_MaxBits &&\r\n            this.diff_levenshtein(diffs) / text1.length >\r\n            this.Patch_DeleteThreshold) {\r\n          // The end points match, but the content is unacceptably bad.\r\n          results[x] = false;\r\n        } else {\r\n          this.diff_cleanupSemanticLossless(diffs);\r\n          var index1 = 0;\r\n          var index2;\r\n          for (var y = 0; y < patches[x].diffs.length; y++) {\r\n            var mod = patches[x].diffs[y];\r\n            if (mod[0] !== DIFF_EQUAL) {\r\n              index2 = this.diff_xIndex(diffs, index1);\r\n            }\r\n            if (mod[0] === DIFF_INSERT) {  // Insertion\r\n              text = text.substring(0, start_loc + index2) + mod[1] +\r\n                     text.substring(start_loc + index2);\r\n            } else if (mod[0] === DIFF_DELETE) {  // Deletion\r\n              text = text.substring(0, start_loc + index2) +\r\n                     text.substring(start_loc + this.diff_xIndex(diffs,\r\n                         index1 + mod[1].length));\r\n            }\r\n            if (mod[0] !== DIFF_DELETE) {\r\n              index1 += mod[1].length;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // Strip the padding off.\r\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\r\n  return [text, results];\r\n};\r\n\r\n\r\n/**\r\n * Add some padding on text start and end so that edges can match something.\r\n * Intended to be called only from within patch_apply.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @return {string} The padding string added to each side.\r\n */\r\ndiff_match_patch.prototype.patch_addPadding = function(patches) {\r\n  var paddingLength = this.Patch_Margin;\r\n  var nullPadding = '';\r\n  for (var x = 1; x <= paddingLength; x++) {\r\n    nullPadding += String.fromCharCode(x);\r\n  }\r\n\r\n  // Bump all the patches forward.\r\n  for (var x = 0; x < patches.length; x++) {\r\n    patches[x].start1 += paddingLength;\r\n    patches[x].start2 += paddingLength;\r\n  }\r\n\r\n  // Add some padding on start of first diff.\r\n  var patch = patches[0];\r\n  var diffs = patch.diffs;\r\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\r\n    // Add nullPadding equality.\r\n    diffs.unshift([DIFF_EQUAL, nullPadding]);\r\n    patch.start1 -= paddingLength;  // Should be 0.\r\n    patch.start2 -= paddingLength;  // Should be 0.\r\n    patch.length1 += paddingLength;\r\n    patch.length2 += paddingLength;\r\n  } else if (paddingLength > diffs[0][1].length) {\r\n    // Grow first equality.\r\n    var extraLength = paddingLength - diffs[0][1].length;\r\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\r\n    patch.start1 -= extraLength;\r\n    patch.start2 -= extraLength;\r\n    patch.length1 += extraLength;\r\n    patch.length2 += extraLength;\r\n  }\r\n\r\n  // Add some padding on end of last diff.\r\n  patch = patches[patches.length - 1];\r\n  diffs = patch.diffs;\r\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\r\n    // Add nullPadding equality.\r\n    diffs.push([DIFF_EQUAL, nullPadding]);\r\n    patch.length1 += paddingLength;\r\n    patch.length2 += paddingLength;\r\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\r\n    // Grow last equality.\r\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\r\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\r\n    patch.length1 += extraLength;\r\n    patch.length2 += extraLength;\r\n  }\r\n\r\n  return nullPadding;\r\n};\r\n\r\n\r\n/**\r\n * Look through the patches and break up any which are longer than the maximum\r\n * limit of the match algorithm.\r\n * Intended to be called only from within patch_apply.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n */\r\ndiff_match_patch.prototype.patch_splitMax = function(patches) {\r\n  var patch_size = this.Match_MaxBits;\r\n  for (var x = 0; x < patches.length; x++) {\r\n    if (patches[x].length1 <= patch_size) {\r\n      continue;\r\n    }\r\n    var bigpatch = patches[x];\r\n    // Remove the big old patch.\r\n    patches.splice(x--, 1);\r\n    var start1 = bigpatch.start1;\r\n    var start2 = bigpatch.start2;\r\n    var precontext = '';\r\n    while (bigpatch.diffs.length !== 0) {\r\n      // Create one of several smaller patches.\r\n      var patch = new diff_match_patch.patch_obj();\r\n      var empty = true;\r\n      patch.start1 = start1 - precontext.length;\r\n      patch.start2 = start2 - precontext.length;\r\n      if (precontext !== '') {\r\n        patch.length1 = patch.length2 = precontext.length;\r\n        patch.diffs.push([DIFF_EQUAL, precontext]);\r\n      }\r\n      while (bigpatch.diffs.length !== 0 &&\r\n             patch.length1 < patch_size - this.Patch_Margin) {\r\n        var diff_type = bigpatch.diffs[0][0];\r\n        var diff_text = bigpatch.diffs[0][1];\r\n        if (diff_type === DIFF_INSERT) {\r\n          // Insertions are harmless.\r\n          patch.length2 += diff_text.length;\r\n          start2 += diff_text.length;\r\n          patch.diffs.push(bigpatch.diffs.shift());\r\n          empty = false;\r\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 &&\r\n                   patch.diffs[0][0] == DIFF_EQUAL &&\r\n                   diff_text.length > 2 * patch_size) {\r\n          // This is a large deletion.  Let it pass in one chunk.\r\n          patch.length1 += diff_text.length;\r\n          start1 += diff_text.length;\r\n          empty = false;\r\n          patch.diffs.push([diff_type, diff_text]);\r\n          bigpatch.diffs.shift();\r\n        } else {\r\n          // Deletion or equality.  Only take as much as we can stomach.\r\n          diff_text = diff_text.substring(0,\r\n              patch_size - patch.length1 - this.Patch_Margin);\r\n          patch.length1 += diff_text.length;\r\n          start1 += diff_text.length;\r\n          if (diff_type === DIFF_EQUAL) {\r\n            patch.length2 += diff_text.length;\r\n            start2 += diff_text.length;\r\n          } else {\r\n            empty = false;\r\n          }\r\n          patch.diffs.push([diff_type, diff_text]);\r\n          if (diff_text == bigpatch.diffs[0][1]) {\r\n            bigpatch.diffs.shift();\r\n          } else {\r\n            bigpatch.diffs[0][1] =\r\n                bigpatch.diffs[0][1].substring(diff_text.length);\r\n          }\r\n        }\r\n      }\r\n      // Compute the head context for the next patch.\r\n      precontext = this.diff_text2(patch.diffs);\r\n      precontext =\r\n          precontext.substring(precontext.length - this.Patch_Margin);\r\n      // Append the end context for this patch.\r\n      var postcontext = this.diff_text1(bigpatch.diffs)\r\n                            .substring(0, this.Patch_Margin);\r\n      if (postcontext !== '') {\r\n        patch.length1 += postcontext.length;\r\n        patch.length2 += postcontext.length;\r\n        if (patch.diffs.length !== 0 &&\r\n            patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\r\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\r\n        } else {\r\n          patch.diffs.push([DIFF_EQUAL, postcontext]);\r\n        }\r\n      }\r\n      if (!empty) {\r\n        patches.splice(++x, 0, patch);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Take a list of patches and return a textual representation.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @return {string} Text representation of patches.\r\n */\r\ndiff_match_patch.prototype.patch_toText = function(patches) {\r\n  var text = [];\r\n  for (var x = 0; x < patches.length; x++) {\r\n    text[x] = patches[x];\r\n  }\r\n  return text.join('');\r\n};\r\n\r\n\r\n/**\r\n * Parse a textual representation of patches and return a list of Patch objects.\r\n * @param {string} textline Text representation of patches.\r\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\r\n * @throws {!Error} If invalid input.\r\n */\r\ndiff_match_patch.prototype.patch_fromText = function(textline) {\r\n  var patches = [];\r\n  if (!textline) {\r\n    return patches;\r\n  }\r\n  var text = textline.split('\\n');\r\n  var textPointer = 0;\r\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\r\n  while (textPointer < text.length) {\r\n    var m = text[textPointer].match(patchHeader);\r\n    if (!m) {\r\n      throw new Error('Invalid patch string: ' + text[textPointer]);\r\n    }\r\n    var patch = new diff_match_patch.patch_obj();\r\n    patches.push(patch);\r\n    patch.start1 = parseInt(m[1], 10);\r\n    if (m[2] === '') {\r\n      patch.start1--;\r\n      patch.length1 = 1;\r\n    } else if (m[2] == '0') {\r\n      patch.length1 = 0;\r\n    } else {\r\n      patch.start1--;\r\n      patch.length1 = parseInt(m[2], 10);\r\n    }\r\n\r\n    patch.start2 = parseInt(m[3], 10);\r\n    if (m[4] === '') {\r\n      patch.start2--;\r\n      patch.length2 = 1;\r\n    } else if (m[4] == '0') {\r\n      patch.length2 = 0;\r\n    } else {\r\n      patch.start2--;\r\n      patch.length2 = parseInt(m[4], 10);\r\n    }\r\n    textPointer++;\r\n\r\n    while (textPointer < text.length) {\r\n      var sign = text[textPointer].charAt(0);\r\n      try {\r\n        var line = decodeURI(text[textPointer].substring(1));\r\n      } catch (ex) {\r\n        // Malformed URI sequence.\r\n        throw new Error('Illegal escape in patch_fromText: ' + line);\r\n      }\r\n      if (sign == '-') {\r\n        // Deletion.\r\n        patch.diffs.push([DIFF_DELETE, line]);\r\n      } else if (sign == '+') {\r\n        // Insertion.\r\n        patch.diffs.push([DIFF_INSERT, line]);\r\n      } else if (sign == ' ') {\r\n        // Minor equality.\r\n        patch.diffs.push([DIFF_EQUAL, line]);\r\n      } else if (sign == '@') {\r\n        // Start of next patch.\r\n        break;\r\n      } else if (sign === '') {\r\n        // Blank line?  Whatever.\r\n      } else {\r\n        // WTF?\r\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\r\n      }\r\n      textPointer++;\r\n    }\r\n  }\r\n  return patches;\r\n};\r\n\r\n\r\n/**\r\n * Class representing one patch operation.\r\n * @constructor\r\n */\r\ndiff_match_patch.patch_obj = function() {\r\n  /** @type {!Array.<!diff_match_patch.Diff>} */\r\n  this.diffs = [];\r\n  /** @type {?number} */\r\n  this.start1 = null;\r\n  /** @type {?number} */\r\n  this.start2 = null;\r\n  /** @type {number} */\r\n  this.length1 = 0;\r\n  /** @type {number} */\r\n  this.length2 = 0;\r\n};\r\n\r\n\r\n/**\r\n * Emmulate GNU diff's format.\r\n * Header: @@ -382,8 +481,9 @@\r\n * Indicies are printed as 1-based, not 0-based.\r\n * @return {string} The GNU diff string.\r\n */\r\ndiff_match_patch.patch_obj.prototype.toString = function() {\r\n  var coords1, coords2;\r\n  if (this.length1 === 0) {\r\n    coords1 = this.start1 + ',0';\r\n  } else if (this.length1 == 1) {\r\n    coords1 = this.start1 + 1;\r\n  } else {\r\n    coords1 = (this.start1 + 1) + ',' + this.length1;\r\n  }\r\n  if (this.length2 === 0) {\r\n    coords2 = this.start2 + ',0';\r\n  } else if (this.length2 == 1) {\r\n    coords2 = this.start2 + 1;\r\n  } else {\r\n    coords2 = (this.start2 + 1) + ',' + this.length2;\r\n  }\r\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\r\n  var op;\r\n  // Escape the body of the patch with %xx notation.\r\n  for (var x = 0; x < this.diffs.length; x++) {\r\n    switch (this.diffs[x][0]) {\r\n      case DIFF_INSERT:\r\n        op = '+';\r\n        break;\r\n      case DIFF_DELETE:\r\n        op = '-';\r\n        break;\r\n      case DIFF_EQUAL:\r\n        op = ' ';\r\n        break;\r\n    }\r\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\r\n  }\r\n  return text.join('').replace(/%20/g, ' ');\r\n};\r\n\r\n\r\n// The following export code was added by @ForbesLindesay\r\nmodule.exports = diff_match_patch;\r\nmodule.exports['diff_match_patch'] = diff_match_patch;\r\nmodule.exports['DIFF_DELETE'] = DIFF_DELETE;\r\nmodule.exports['DIFF_INSERT'] = DIFF_INSERT;\r\nmodule.exports['DIFF_EQUAL'] = DIFF_EQUAL;\n});\n\n/* global diff_match_patch */\nvar TEXT_DIFF = 2;\nvar DEFAULT_MIN_LENGTH = 60;\nvar cachedDiffPatch = null;\n\nvar getDiffMatchPatch = function getDiffMatchPatch(required) {\n  /* jshint camelcase: false */\n\n  if (!cachedDiffPatch) {\n    var instance = void 0;\n    /* eslint-disable camelcase, new-cap */\n    if (typeof diff_match_patch !== 'undefined') {\n      // already loaded, probably a browser\n      instance = typeof diff_match_patch === 'function' ? new diff_match_patch() : new diff_match_patch.diff_match_patch();\n    } else if (diffMatchPatch) {\n      try {\n        instance = diffMatchPatch && new diffMatchPatch();\n      } catch (err) {\n        instance = null;\n      }\n    }\n    /* eslint-enable camelcase, new-cap */\n    if (!instance) {\n      if (!required) {\n        return null;\n      }\n      var error = new Error('text diff_match_patch library not found');\n      // eslint-disable-next-line camelcase\n      error.diff_match_patch_not_found = true;\n      throw error;\n    }\n    cachedDiffPatch = {\n      diff: function diff(txt1, txt2) {\n        return instance.patch_toText(instance.patch_make(txt1, txt2));\n      },\n      patch: function patch(txt1, _patch) {\n        var results = instance.patch_apply(instance.patch_fromText(_patch), txt1);\n        for (var i = 0; i < results[1].length; i++) {\n          if (!results[1][i]) {\n            var _error = new Error('text patch failed');\n            _error.textPatchFailed = true;\n          }\n        }\n        return results[0];\n      }\n    };\n  }\n  return cachedDiffPatch;\n};\n\nvar diffFilter$3 = function textsDiffFilter(context) {\n  if (context.leftType !== 'string') {\n    return;\n  }\n  var minLength = context.options && context.options.textDiff && context.options.textDiff.minLength || DEFAULT_MIN_LENGTH;\n  if (context.left.length < minLength || context.right.length < minLength) {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  // large text, try to use a text-diff algorithm\n  var diffMatchPatch$$1 = getDiffMatchPatch();\n  if (!diffMatchPatch$$1) {\n    // diff-match-patch library not available,\n    // fallback to regular string replace\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  var diff = diffMatchPatch$$1.diff;\n  context.setResult([diff(context.left, context.right), 0, TEXT_DIFF]).exit();\n};\ndiffFilter$3.filterName = 'texts';\n\nvar patchFilter$3 = function textsPatchFilter(context) {\n  if (context.nested) {\n    return;\n  }\n  if (context.delta[2] !== TEXT_DIFF) {\n    return;\n  }\n\n  // text-diff, use a text-patch algorithm\n  var patch = getDiffMatchPatch(true).patch;\n  context.setResult(patch(context.left, context.delta[0])).exit();\n};\npatchFilter$3.filterName = 'texts';\n\nvar textDeltaReverse = function textDeltaReverse(delta) {\n  var i = void 0;\n  var l = void 0;\n  var lines = void 0;\n  var line = void 0;\n  var lineTmp = void 0;\n  var header = null;\n  var headerRegex = /^@@ +-(\\d+),(\\d+) +\\+(\\d+),(\\d+) +@@$/;\n  var lineHeader = void 0;\n  lines = delta.split('\\n');\n  for (i = 0, l = lines.length; i < l; i++) {\n    line = lines[i];\n    var lineStart = line.slice(0, 1);\n    if (lineStart === '@') {\n      header = headerRegex.exec(line);\n      lineHeader = i;\n\n      // fix header\n      lines[lineHeader] = '@@ -' + header[3] + ',' + header[4] + ' +' + header[1] + ',' + header[2] + ' @@';\n    } else if (lineStart === '+') {\n      lines[i] = '-' + lines[i].slice(1);\n      if (lines[i - 1].slice(0, 1) === '+') {\n        // swap lines to keep default order (-+)\n        lineTmp = lines[i];\n        lines[i] = lines[i - 1];\n        lines[i - 1] = lineTmp;\n      }\n    } else if (lineStart === '-') {\n      lines[i] = '+' + lines[i].slice(1);\n    }\n  }\n  return lines.join('\\n');\n};\n\nvar reverseFilter$3 = function textsReverseFilter(context) {\n  if (context.nested) {\n    return;\n  }\n  if (context.delta[2] !== TEXT_DIFF) {\n    return;\n  }\n\n  // text-diff, use a text-diff algorithm\n  context.setResult([textDeltaReverse(context.delta[0]), 0, TEXT_DIFF]).exit();\n};\nreverseFilter$3.filterName = 'texts';\n\nvar DiffPatcher = function () {\n  function DiffPatcher(options) {\n    classCallCheck(this, DiffPatcher);\n\n    this.processor = new Processor(options);\n    this.processor.pipe(new Pipe('diff').append(collectChildrenDiffFilter, diffFilter, diffFilter$2, diffFilter$3, objectsDiffFilter, diffFilter$1).shouldHaveResult());\n    this.processor.pipe(new Pipe('patch').append(collectChildrenPatchFilter, collectChildrenPatchFilter$1, patchFilter, patchFilter$3, patchFilter$1, patchFilter$2).shouldHaveResult());\n    this.processor.pipe(new Pipe('reverse').append(collectChildrenReverseFilter, collectChildrenReverseFilter$1, reverseFilter, reverseFilter$3, reverseFilter$1, reverseFilter$2).shouldHaveResult());\n  }\n\n  createClass(DiffPatcher, [{\n    key: 'options',\n    value: function options() {\n      var _processor;\n\n      return (_processor = this.processor).options.apply(_processor, arguments);\n    }\n  }, {\n    key: 'diff',\n    value: function diff(left, right) {\n      return this.processor.process(new DiffContext(left, right));\n    }\n  }, {\n    key: 'patch',\n    value: function patch(left, delta) {\n      return this.processor.process(new PatchContext(left, delta));\n    }\n  }, {\n    key: 'reverse',\n    value: function reverse(delta) {\n      return this.processor.process(new ReverseContext(delta));\n    }\n  }, {\n    key: 'unpatch',\n    value: function unpatch(right, delta) {\n      return this.patch(right, this.reverse(delta));\n    }\n  }, {\n    key: 'clone',\n    value: function clone$$1(value) {\n      return clone(value);\n    }\n  }]);\n  return DiffPatcher;\n}();\n\nvar isArray$3 = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nvar getObjectKeys = typeof Object.keys === 'function' ? function (obj) {\n  return Object.keys(obj);\n} : function (obj) {\n  var names = [];\n  for (var property in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, property)) {\n      names.push(property);\n    }\n  }\n  return names;\n};\n\nvar trimUnderscore = function trimUnderscore(str) {\n  if (str.substr(0, 1) === '_') {\n    return str.slice(1);\n  }\n  return str;\n};\n\nvar arrayKeyToSortNumber = function arrayKeyToSortNumber(key) {\n  if (key === '_t') {\n    return -1;\n  } else {\n    if (key.substr(0, 1) === '_') {\n      return parseInt(key.slice(1), 10);\n    } else {\n      return parseInt(key, 10) + 0.1;\n    }\n  }\n};\n\nvar arrayKeyComparer = function arrayKeyComparer(key1, key2) {\n  return arrayKeyToSortNumber(key1) - arrayKeyToSortNumber(key2);\n};\n\nvar BaseFormatter = function () {\n  function BaseFormatter() {\n    classCallCheck(this, BaseFormatter);\n  }\n\n  createClass(BaseFormatter, [{\n    key: 'format',\n    value: function format(delta, left) {\n      var context = {};\n      this.prepareContext(context);\n      this.recurse(context, delta, left);\n      return this.finalize(context);\n    }\n  }, {\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      context.buffer = [];\n      context.out = function () {\n        var _buffer;\n\n        (_buffer = this.buffer).push.apply(_buffer, arguments);\n      };\n    }\n  }, {\n    key: 'typeFormattterNotFound',\n    value: function typeFormattterNotFound(context, deltaType) {\n      throw new Error('cannot format delta type: ' + deltaType);\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      return err.toString();\n    }\n  }, {\n    key: 'finalize',\n    value: function finalize(_ref) {\n      var buffer = _ref.buffer;\n\n      if (isArray$3(buffer)) {\n        return buffer.join('');\n      }\n    }\n  }, {\n    key: 'recurse',\n    value: function recurse(context, delta, left, key, leftKey, movedFrom, isLast) {\n      var useMoveOriginHere = delta && movedFrom;\n      var leftValue = useMoveOriginHere ? movedFrom.value : left;\n\n      if (typeof delta === 'undefined' && typeof key === 'undefined') {\n        return undefined;\n      }\n\n      var type = this.getDeltaType(delta, movedFrom);\n      var nodeType = type === 'node' ? delta._t === 'a' ? 'array' : 'object' : '';\n\n      if (typeof key !== 'undefined') {\n        this.nodeBegin(context, key, leftKey, type, nodeType, isLast);\n      } else {\n        this.rootBegin(context, type, nodeType);\n      }\n\n      var typeFormattter = void 0;\n      try {\n        typeFormattter = this['format_' + type] || this.typeFormattterNotFound(context, type);\n        typeFormattter.call(this, context, delta, leftValue, key, leftKey, movedFrom);\n      } catch (err) {\n        this.typeFormattterErrorFormatter(context, err, delta, leftValue, key, leftKey, movedFrom);\n        if (typeof console !== 'undefined' && console.error) {\n          console.error(err.stack);\n        }\n      }\n\n      if (typeof key !== 'undefined') {\n        this.nodeEnd(context, key, leftKey, type, nodeType, isLast);\n      } else {\n        this.rootEnd(context, type, nodeType);\n      }\n    }\n  }, {\n    key: 'formatDeltaChildren',\n    value: function formatDeltaChildren(context, delta, left) {\n      var self = this;\n      this.forEachDeltaKey(delta, left, function (key, leftKey, movedFrom, isLast) {\n        self.recurse(context, delta[key], left ? left[leftKey] : undefined, key, leftKey, movedFrom, isLast);\n      });\n    }\n  }, {\n    key: 'forEachDeltaKey',\n    value: function forEachDeltaKey(delta, left, fn) {\n      var keys = getObjectKeys(delta);\n      var arrayKeys = delta._t === 'a';\n      var moveDestinations = {};\n      var name = void 0;\n      if (typeof left !== 'undefined') {\n        for (name in left) {\n          if (Object.prototype.hasOwnProperty.call(left, name)) {\n            if (typeof delta[name] === 'undefined' && (!arrayKeys || typeof delta['_' + name] === 'undefined')) {\n              keys.push(name);\n            }\n          }\n        }\n      }\n      // look for move destinations\n      for (name in delta) {\n        if (Object.prototype.hasOwnProperty.call(delta, name)) {\n          var value = delta[name];\n          if (isArray$3(value) && value[2] === 3) {\n            moveDestinations[value[1].toString()] = {\n              key: name,\n              value: left && left[parseInt(name.substr(1))]\n            };\n            if (this.includeMoveDestinations !== false) {\n              if (typeof left === 'undefined' && typeof delta[value[1]] === 'undefined') {\n                keys.push(value[1].toString());\n              }\n            }\n          }\n        }\n      }\n      if (arrayKeys) {\n        keys.sort(arrayKeyComparer);\n      } else {\n        keys.sort();\n      }\n      for (var index = 0, length = keys.length; index < length; index++) {\n        var key = keys[index];\n        if (arrayKeys && key === '_t') {\n          continue;\n        }\n        var leftKey = arrayKeys ? typeof key === 'number' ? key : parseInt(trimUnderscore(key), 10) : key;\n        var isLast = index === length - 1;\n        fn(key, leftKey, moveDestinations[leftKey], isLast);\n      }\n    }\n  }, {\n    key: 'getDeltaType',\n    value: function getDeltaType(delta, movedFrom) {\n      if (typeof delta === 'undefined') {\n        if (typeof movedFrom !== 'undefined') {\n          return 'movedestination';\n        }\n        return 'unchanged';\n      }\n      if (isArray$3(delta)) {\n        if (delta.length === 1) {\n          return 'added';\n        }\n        if (delta.length === 2) {\n          return 'modified';\n        }\n        if (delta.length === 3 && delta[2] === 0) {\n          return 'deleted';\n        }\n        if (delta.length === 3 && delta[2] === 2) {\n          return 'textdiff';\n        }\n        if (delta.length === 3 && delta[2] === 3) {\n          return 'moved';\n        }\n      } else if ((typeof delta === 'undefined' ? 'undefined' : _typeof(delta)) === 'object') {\n        return 'node';\n      }\n      return 'unknown';\n    }\n  }, {\n    key: 'parseTextDiff',\n    value: function parseTextDiff(value) {\n      var output = [];\n      var lines = value.split('\\n@@ ');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        var lineOutput = {\n          pieces: []\n        };\n        var location = /^(?:@@ )?[-+]?(\\d+),(\\d+)/.exec(line).slice(1);\n        lineOutput.location = {\n          line: location[0],\n          chr: location[1]\n        };\n        var pieces = line.split('\\n').slice(1);\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          var piece = pieces[pieceIndex];\n          if (!piece.length) {\n            continue;\n          }\n          var pieceOutput = {\n            type: 'context'\n          };\n          if (piece.substr(0, 1) === '+') {\n            pieceOutput.type = 'added';\n          } else if (piece.substr(0, 1) === '-') {\n            pieceOutput.type = 'deleted';\n          }\n          pieceOutput.text = piece.slice(1);\n          lineOutput.pieces.push(pieceOutput);\n        }\n        output.push(lineOutput);\n      }\n      return output;\n    }\n  }]);\n  return BaseFormatter;\n}();\n\n\n\nvar base = Object.freeze({\n\tdefault: BaseFormatter\n});\n\nvar HtmlFormatter = function (_BaseFormatter) {\n  inherits(HtmlFormatter, _BaseFormatter);\n\n  function HtmlFormatter() {\n    classCallCheck(this, HtmlFormatter);\n    return possibleConstructorReturn(this, (HtmlFormatter.__proto__ || Object.getPrototypeOf(HtmlFormatter)).apply(this, arguments));\n  }\n\n  createClass(HtmlFormatter, [{\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.out('<pre class=\"jsondiffpatch-error\">' + err + '</pre>');\n    }\n  }, {\n    key: 'formatValue',\n    value: function formatValue(context, value) {\n      context.out('<pre>' + htmlEscape(JSON.stringify(value, null, 2)) + '</pre>');\n    }\n  }, {\n    key: 'formatTextDiffString',\n    value: function formatTextDiffString(context, value) {\n      var lines = this.parseTextDiff(value);\n      context.out('<ul class=\"jsondiffpatch-textdiff\">');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.out('<li><div class=\"jsondiffpatch-textdiff-location\">' + ('<span class=\"jsondiffpatch-textdiff-line-number\">' + line.location.line + '</span><span class=\"jsondiffpatch-textdiff-char\">' + line.location.chr + '</span></div><div class=\"jsondiffpatch-textdiff-line\">'));\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          /* global decodeURI */\n          var piece = pieces[pieceIndex];\n          context.out('<span class=\"jsondiffpatch-textdiff-' + piece.type + '\">' + htmlEscape(decodeURI(piece.text)) + '</span>');\n        }\n        context.out('</div></li>');\n      }\n      context.out('</ul>');\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin(context, type, nodeType) {\n      var nodeClass = 'jsondiffpatch-' + type + (nodeType ? ' jsondiffpatch-child-node-type-' + nodeType : '');\n      context.out('<div class=\"jsondiffpatch-delta ' + nodeClass + '\">');\n    }\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd(context) {\n      context.out('</div>' + (context.hasArrows ? '<script type=\"text/javascript\">setTimeout(' + (adjustArrows.toString() + ',10);</script>') : ''));\n    }\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(context, key, leftKey, type, nodeType) {\n      var nodeClass = 'jsondiffpatch-' + type + (nodeType ? ' jsondiffpatch-child-node-type-' + nodeType : '');\n      context.out('<li class=\"' + nodeClass + '\" data-key=\"' + leftKey + '\">' + ('<div class=\"jsondiffpatch-property-name\">' + leftKey + '</div>'));\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(context) {\n      context.out('</li>');\n    }\n\n    /* jshint camelcase: false */\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, left);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, left);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      // recurse\n      var nodeType = delta._t === 'a' ? 'array' : 'object';\n      context.out('<ul class=\"jsondiffpatch-node jsondiffpatch-node-type-' + nodeType + '\">');\n      this.formatDeltaChildren(context, delta, left);\n      context.out('</ul>');\n    }\n  }, {\n    key: 'format_added',\n    value: function format_added(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_modified',\n    value: function format_modified(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value jsondiffpatch-left-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div>' + '<div class=\"jsondiffpatch-value jsondiffpatch-right-value\">');\n      this.formatValue(context, delta[1]);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_deleted',\n    value: function format_deleted(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_moved',\n    value: function format_moved(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div><div class=\"jsondiffpatch-moved-destination\">' + delta[1] + '</div>');\n\n      // draw an SVG arrow from here to move destination\n      context.out(\n      /* jshint multistr: true */\n      '<div class=\"jsondiffpatch-arrow\" ' + 'style=\"position: relative; left: -34px;\">\\n          <svg width=\"30\" height=\"60\" ' + 'style=\"position: absolute; display: none;\">\\n          <defs>\\n              <marker id=\"markerArrow\" markerWidth=\"8\" markerHeight=\"8\"\\n                 refx=\"2\" refy=\"4\"\\n                     orient=\"auto\" markerUnits=\"userSpaceOnUse\">\\n                  <path d=\"M1,1 L1,7 L7,4 L1,1\" style=\"fill: #339;\" />\\n              </marker>\\n          </defs>\\n          <path d=\"M30,0 Q-10,25 26,50\"\\n            style=\"stroke: #88f; stroke-width: 2px; fill: none; ' + 'stroke-opacity: 0.5; marker-end: url(#markerArrow);\"\\n          ></path>\\n          </svg>\\n      </div>');\n      context.hasArrows = true;\n    }\n  }, {\n    key: 'format_textdiff',\n    value: function format_textdiff(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatTextDiffString(context, delta[0]);\n      context.out('</div>');\n    }\n  }]);\n  return HtmlFormatter;\n}(BaseFormatter);\n\nfunction htmlEscape(text) {\n  var html = text;\n  var replacements = [[/&/g, '&amp;'], [/</g, '&lt;'], [/>/g, '&gt;'], [/'/g, '&apos;'], [/\"/g, '&quot;']];\n  for (var i = 0; i < replacements.length; i++) {\n    html = html.replace(replacements[i][0], replacements[i][1]);\n  }\n  return html;\n}\n\nvar adjustArrows = function jsondiffpatchHtmlFormatterAdjustArrows(nodeArg) {\n  var node = nodeArg || document;\n  var getElementText = function getElementText(_ref) {\n    var textContent = _ref.textContent,\n        innerText = _ref.innerText;\n    return textContent || innerText;\n  };\n  var eachByQuery = function eachByQuery(el, query, fn) {\n    var elems = el.querySelectorAll(query);\n    for (var i = 0, l = elems.length; i < l; i++) {\n      fn(elems[i]);\n    }\n  };\n  var eachChildren = function eachChildren(_ref2, fn) {\n    var children = _ref2.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      fn(children[i], i);\n    }\n  };\n  eachByQuery(node, '.jsondiffpatch-arrow', function (_ref3) {\n    var parentNode = _ref3.parentNode,\n        children = _ref3.children,\n        style = _ref3.style;\n\n    var arrowParent = parentNode;\n    var svg = children[0];\n    var path = svg.children[1];\n    svg.style.display = 'none';\n    var destination = getElementText(arrowParent.querySelector('.jsondiffpatch-moved-destination'));\n    var container = arrowParent.parentNode;\n    var destinationElem = void 0;\n    eachChildren(container, function (child) {\n      if (child.getAttribute('data-key') === destination) {\n        destinationElem = child;\n      }\n    });\n    if (!destinationElem) {\n      return;\n    }\n    try {\n      var distance = destinationElem.offsetTop - arrowParent.offsetTop;\n      svg.setAttribute('height', Math.abs(distance) + 6);\n      style.top = -8 + (distance > 0 ? 0 : distance) + 'px';\n      var curve = distance > 0 ? 'M30,0 Q-10,' + Math.round(distance / 2) + ' 26,' + (distance - 4) : 'M30,' + -distance + ' Q-10,' + Math.round(-distance / 2) + ' 26,4';\n      path.setAttribute('d', curve);\n      svg.style.display = '';\n    } catch (err) {}\n  });\n};\n\n/* jshint camelcase: true */\n/* eslint-enable camelcase */\n\nvar showUnchanged = function showUnchanged(show, node, delay) {\n  var el = node || document.body;\n  var prefix = 'jsondiffpatch-unchanged-';\n  var classes = {\n    showing: prefix + 'showing',\n    hiding: prefix + 'hiding',\n    visible: prefix + 'visible',\n    hidden: prefix + 'hidden'\n  };\n  var list = el.classList;\n  if (!list) {\n    return;\n  }\n  if (!delay) {\n    list.remove(classes.showing);\n    list.remove(classes.hiding);\n    list.remove(classes.visible);\n    list.remove(classes.hidden);\n    if (show === false) {\n      list.add(classes.hidden);\n    }\n    return;\n  }\n  if (show === false) {\n    list.remove(classes.showing);\n    list.add(classes.visible);\n    setTimeout(function () {\n      list.add(classes.hiding);\n    }, 10);\n  } else {\n    list.remove(classes.hiding);\n    list.add(classes.showing);\n    list.remove(classes.hidden);\n  }\n  var intervalId = setInterval(function () {\n    adjustArrows(el);\n  }, 100);\n  setTimeout(function () {\n    list.remove(classes.showing);\n    list.remove(classes.hiding);\n    if (show === false) {\n      list.add(classes.hidden);\n      list.remove(classes.visible);\n    } else {\n      list.add(classes.visible);\n      list.remove(classes.hidden);\n    }\n    setTimeout(function () {\n      list.remove(classes.visible);\n      clearInterval(intervalId);\n    }, delay + 400);\n  }, delay);\n};\n\nvar hideUnchanged = function hideUnchanged(node, delay) {\n  return showUnchanged(false, node, delay);\n};\n\nvar defaultInstance = void 0;\n\nfunction format(delta, left) {\n  if (!defaultInstance) {\n    defaultInstance = new HtmlFormatter();\n  }\n  return defaultInstance.format(delta, left);\n}\n\n\n\nvar html = Object.freeze({\n\tshowUnchanged: showUnchanged,\n\thideUnchanged: hideUnchanged,\n\tdefault: HtmlFormatter,\n\tformat: format\n});\n\nvar AnnotatedFormatter = function (_BaseFormatter) {\n  inherits(AnnotatedFormatter, _BaseFormatter);\n\n  function AnnotatedFormatter() {\n    classCallCheck(this, AnnotatedFormatter);\n\n    var _this = possibleConstructorReturn(this, (AnnotatedFormatter.__proto__ || Object.getPrototypeOf(AnnotatedFormatter)).call(this));\n\n    _this.includeMoveDestinations = false;\n    return _this;\n  }\n\n  createClass(AnnotatedFormatter, [{\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      get(AnnotatedFormatter.prototype.__proto__ || Object.getPrototypeOf(AnnotatedFormatter.prototype), 'prepareContext', this).call(this, context);\n      context.indent = function (levels) {\n        this.indentLevel = (this.indentLevel || 0) + (typeof levels === 'undefined' ? 1 : levels);\n        this.indentPad = new Array(this.indentLevel + 1).join('&nbsp;&nbsp;');\n      };\n      context.row = function (json, htmlNote) {\n        context.out('<tr><td style=\"white-space: nowrap;\">' + '<pre class=\"jsondiffpatch-annotated-indent\"' + ' style=\"display: inline-block\">');\n        context.out(context.indentPad);\n        context.out('</pre><pre style=\"display: inline-block\">');\n        context.out(json);\n        context.out('</pre></td><td class=\"jsondiffpatch-delta-note\"><div>');\n        context.out(htmlNote);\n        context.out('</div></td></tr>');\n      };\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.row('', '<pre class=\"jsondiffpatch-error\">' + err + '</pre>');\n    }\n  }, {\n    key: 'formatTextDiffString',\n    value: function formatTextDiffString(context, value) {\n      var lines = this.parseTextDiff(value);\n      context.out('<ul class=\"jsondiffpatch-textdiff\">');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.out('<li><div class=\"jsondiffpatch-textdiff-location\">' + ('<span class=\"jsondiffpatch-textdiff-line-number\">' + line.location.line + '</span><span class=\"jsondiffpatch-textdiff-char\">' + line.location.chr + '</span></div><div class=\"jsondiffpatch-textdiff-line\">'));\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          var piece = pieces[pieceIndex];\n          context.out('<span class=\"jsondiffpatch-textdiff-' + piece.type + '\">' + piece.text + '</span>');\n        }\n        context.out('</div></li>');\n      }\n      context.out('</ul>');\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin(context, type, nodeType) {\n      context.out('<table class=\"jsondiffpatch-annotated-delta\">');\n      if (type === 'node') {\n        context.row('{');\n        context.indent();\n      }\n      if (nodeType === 'array') {\n        context.row('\"_t\": \"a\",', 'Array delta (member names indicate array indices)');\n      }\n    }\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd(context, type) {\n      if (type === 'node') {\n        context.indent(-1);\n        context.row('}');\n      }\n      context.out('</table>');\n    }\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(context, key, leftKey, type, nodeType) {\n      context.row('&quot;' + key + '&quot;: {');\n      if (type === 'node') {\n        context.indent();\n      }\n      if (nodeType === 'array') {\n        context.row('\"_t\": \"a\",', 'Array delta (member names indicate array indices)');\n      }\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(context, key, leftKey, type, nodeType, isLast) {\n      if (type === 'node') {\n        context.indent(-1);\n      }\n      context.row('}' + (isLast ? '' : ','));\n    }\n\n    /* jshint camelcase: false */\n\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged() {}\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination() {}\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      // recurse\n      this.formatDeltaChildren(context, delta, left);\n    }\n  }]);\n  return AnnotatedFormatter;\n}(BaseFormatter);\n\n/* eslint-enable camelcase */\n\nvar wrapPropertyName = function wrapPropertyName(name) {\n  return '<pre style=\"display:inline-block\">&quot;' + name + '&quot;</pre>';\n};\n\nvar deltaAnnotations = {\n  added: function added(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([newValue])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'new value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'insert at index ' + leftKey + formatLegend;\n    }\n    return 'add property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  modified: function modified(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([previousValue, newValue])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'modify value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'modify at index ' + leftKey + formatLegend;\n    }\n    return 'modify property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  deleted: function deleted(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([previousValue, 0, 0])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'delete value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'remove index ' + leftKey + formatLegend;\n    }\n    return 'delete property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  moved: function moved(delta, left, key, leftKey) {\n    return 'move from <span title=\"(position to remove at original state)\">' + ('index ' + leftKey + '</span> to <span title=\"(position to insert at final') + (' state)\">index ' + delta[1] + '</span>');\n  },\n  textdiff: function textdiff(delta, left, key, leftKey) {\n    var location = typeof leftKey === 'undefined' ? '' : typeof leftKey === 'number' ? ' at index ' + leftKey : ' at property ' + wrapPropertyName(leftKey);\n    return 'text diff' + location + ', format is <a href=\"https://code.google.com/' + 'p/google-diff-match-patch/wiki/Unidiff\">a variation of Unidiff</a>';\n  }\n};\n\nvar formatAnyChange = function formatAnyChange(context, delta) {\n  var deltaType = this.getDeltaType(delta);\n  var annotator = deltaAnnotations[deltaType];\n  var htmlNote = annotator && annotator.apply(annotator, Array.prototype.slice.call(arguments, 1));\n  var json = JSON.stringify(delta, null, 2);\n  if (deltaType === 'textdiff') {\n    // split text diffs lines\n    json = json.split('\\\\n').join('\\\\n\"+\\n   \"');\n  }\n  context.indent();\n  context.row(json, htmlNote);\n  context.indent(-1);\n};\n\n/* eslint-disable camelcase */\nAnnotatedFormatter.prototype.format_added = formatAnyChange;\nAnnotatedFormatter.prototype.format_modified = formatAnyChange;\nAnnotatedFormatter.prototype.format_deleted = formatAnyChange;\nAnnotatedFormatter.prototype.format_moved = formatAnyChange;\nAnnotatedFormatter.prototype.format_textdiff = formatAnyChange;\nvar defaultInstance$1 = void 0;\n\nfunction format$1(delta, left) {\n  if (!defaultInstance$1) {\n    defaultInstance$1 = new AnnotatedFormatter();\n  }\n  return defaultInstance$1.format(delta, left);\n}\n\n\n\nvar annotated = Object.freeze({\n\tdefault: AnnotatedFormatter,\n\tformat: format$1\n});\n\nvar OPERATIONS = {\n  add: 'add',\n  remove: 'remove',\n  replace: 'replace',\n  move: 'move'\n};\n\nvar JSONFormatter = function (_BaseFormatter) {\n  inherits(JSONFormatter, _BaseFormatter);\n\n  function JSONFormatter() {\n    classCallCheck(this, JSONFormatter);\n\n    var _this = possibleConstructorReturn(this, (JSONFormatter.__proto__ || Object.getPrototypeOf(JSONFormatter)).call(this));\n\n    _this.includeMoveDestinations = true;\n    return _this;\n  }\n\n  createClass(JSONFormatter, [{\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      get(JSONFormatter.prototype.__proto__ || Object.getPrototypeOf(JSONFormatter.prototype), 'prepareContext', this).call(this, context);\n      context.result = [];\n      context.path = [];\n      context.pushCurrentOp = function (obj) {\n        var op = obj.op,\n            value = obj.value;\n\n        var val = {\n          op: op,\n          path: this.currentPath()\n        };\n        if (typeof value !== 'undefined') {\n          val.value = value;\n        }\n        this.result.push(val);\n      };\n\n      context.pushMoveOp = function (to) {\n        var from = this.currentPath();\n        this.result.push({\n          op: OPERATIONS.move,\n          from: from,\n          path: this.toPath(to)\n        });\n      };\n\n      context.currentPath = function () {\n        return '/' + this.path.join('/');\n      };\n\n      context.toPath = function (toPath) {\n        var to = this.path.slice();\n        to[to.length - 1] = toPath;\n        return '/' + to.join('/');\n      };\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.out('[ERROR] ' + err);\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin() {}\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd() {}\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(_ref, key, leftKey) {\n      var path = _ref.path;\n\n      path.push(leftKey);\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(_ref2) {\n      var path = _ref2.path;\n\n      path.pop();\n    }\n\n    /* jshint camelcase: false */\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged() {}\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination() {}\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      this.formatDeltaChildren(context, delta, left);\n    }\n  }, {\n    key: 'format_added',\n    value: function format_added(context, delta) {\n      context.pushCurrentOp({ op: OPERATIONS.add, value: delta[0] });\n    }\n  }, {\n    key: 'format_modified',\n    value: function format_modified(context, delta) {\n      context.pushCurrentOp({ op: OPERATIONS.replace, value: delta[1] });\n    }\n  }, {\n    key: 'format_deleted',\n    value: function format_deleted(context) {\n      context.pushCurrentOp({ op: OPERATIONS.remove });\n    }\n  }, {\n    key: 'format_moved',\n    value: function format_moved(context, delta) {\n      var to = delta[1];\n      context.pushMoveOp(to);\n    }\n  }, {\n    key: 'format_textdiff',\n    value: function format_textdiff() {\n      throw new Error('Not implemented');\n    }\n  }, {\n    key: 'format',\n    value: function format(delta, left) {\n      var context = {};\n      this.prepareContext(context);\n      this.recurse(context, delta, left);\n      return context.result;\n    }\n  }]);\n  return JSONFormatter;\n}(BaseFormatter);\n\nvar last = function last(arr) {\n  return arr[arr.length - 1];\n};\n\nvar sortBy = function sortBy(arr, pred) {\n  arr.sort(pred);\n  return arr;\n};\n\nvar compareByIndexDesc = function compareByIndexDesc(indexA, indexB) {\n  var lastA = parseInt(indexA, 10);\n  var lastB = parseInt(indexB, 10);\n  if (!(isNaN(lastA) || isNaN(lastB))) {\n    return lastB - lastA;\n  } else {\n    return 0;\n  }\n};\n\nvar opsByDescendingOrder = function opsByDescendingOrder(removeOps) {\n  return sortBy(removeOps, function (a, b) {\n    var splitA = a.path.split('/');\n    var splitB = b.path.split('/');\n    if (splitA.length !== splitB.length) {\n      return splitA.length - splitB.length;\n    } else {\n      return compareByIndexDesc(last(splitA), last(splitB));\n    }\n  });\n};\n\nvar partitionOps = function partitionOps(arr, fns) {\n  var initArr = Array(fns.length + 1).fill().map(function () {\n    return [];\n  });\n  return arr.map(function (item) {\n    var position = fns.map(function (fn) {\n      return fn(item);\n    }).indexOf(true);\n    if (position < 0) {\n      position = fns.length;\n    }\n    return { item: item, position: position };\n  }).reduce(function (acc, item) {\n    acc[item.position].push(item.item);\n    return acc;\n  }, initArr);\n};\nvar isMoveOp = function isMoveOp(_ref3) {\n  var op = _ref3.op;\n  return op === 'move';\n};\nvar isRemoveOp = function isRemoveOp(_ref4) {\n  var op = _ref4.op;\n  return op === 'remove';\n};\n\nvar reorderOps = function reorderOps(diff) {\n  var _partitionOps = partitionOps(diff, [isMoveOp, isRemoveOp]),\n      _partitionOps2 = slicedToArray(_partitionOps, 3),\n      moveOps = _partitionOps2[0],\n      removedOps = _partitionOps2[1],\n      restOps = _partitionOps2[2];\n\n  var removeOpsReverse = opsByDescendingOrder(removedOps);\n  return [].concat(toConsumableArray(removeOpsReverse), toConsumableArray(moveOps), toConsumableArray(restOps));\n};\n\nvar defaultInstance$2 = void 0;\n\nvar format$2 = function format(delta, left) {\n  if (!defaultInstance$2) {\n    defaultInstance$2 = new JSONFormatter();\n  }\n  return reorderOps(defaultInstance$2.format(delta, left));\n};\n\nvar log = function log(delta, left) {\n  console.log(format$2(delta, left));\n};\n\n\n\nvar jsonpatch = Object.freeze({\n\tdefault: JSONFormatter,\n\tpartitionOps: partitionOps,\n\tformat: format$2,\n\tlog: log\n});\n\nfunction chalkColor(name) {\n  return chalk && chalk[name] || function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return args;\n  };\n}\n\nvar colors = {\n  added: chalkColor('green'),\n  deleted: chalkColor('red'),\n  movedestination: chalkColor('gray'),\n  moved: chalkColor('yellow'),\n  unchanged: chalkColor('gray'),\n  error: chalkColor('white.bgRed'),\n  textDiffLine: chalkColor('gray')\n};\n\nvar ConsoleFormatter = function (_BaseFormatter) {\n  inherits(ConsoleFormatter, _BaseFormatter);\n\n  function ConsoleFormatter() {\n    classCallCheck(this, ConsoleFormatter);\n\n    var _this = possibleConstructorReturn(this, (ConsoleFormatter.__proto__ || Object.getPrototypeOf(ConsoleFormatter)).call(this));\n\n    _this.includeMoveDestinations = false;\n    return _this;\n  }\n\n  createClass(ConsoleFormatter, [{\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      get(ConsoleFormatter.prototype.__proto__ || Object.getPrototypeOf(ConsoleFormatter.prototype), 'prepareContext', this).call(this, context);\n      context.indent = function (levels) {\n        this.indentLevel = (this.indentLevel || 0) + (typeof levels === 'undefined' ? 1 : levels);\n        this.indentPad = new Array(this.indentLevel + 1).join('  ');\n        this.outLine();\n      };\n      context.outLine = function () {\n        this.buffer.push('\\n' + (this.indentPad || ''));\n      };\n      context.out = function () {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        for (var i = 0, l = args.length; i < l; i++) {\n          var lines = args[i].split('\\n');\n          var text = lines.join('\\n' + (this.indentPad || ''));\n          if (this.color && this.color[0]) {\n            text = this.color[0](text);\n          }\n          this.buffer.push(text);\n        }\n      };\n      context.pushColor = function (color) {\n        this.color = this.color || [];\n        this.color.unshift(color);\n      };\n      context.popColor = function () {\n        this.color = this.color || [];\n        this.color.shift();\n      };\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.pushColor(colors.error);\n      context.out('[ERROR]' + err);\n      context.popColor();\n    }\n  }, {\n    key: 'formatValue',\n    value: function formatValue(context, value) {\n      context.out(JSON.stringify(value, null, 2));\n    }\n  }, {\n    key: 'formatTextDiffString',\n    value: function formatTextDiffString(context, value) {\n      var lines = this.parseTextDiff(value);\n      context.indent();\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.pushColor(colors.textDiffLine);\n        context.out(line.location.line + ',' + line.location.chr + ' ');\n        context.popColor();\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          var piece = pieces[pieceIndex];\n          context.pushColor(colors[piece.type]);\n          context.out(piece.text);\n          context.popColor();\n        }\n        if (i < l - 1) {\n          context.outLine();\n        }\n      }\n      context.indent(-1);\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin(context, type, nodeType) {\n      context.pushColor(colors[type]);\n      if (type === 'node') {\n        context.out(nodeType === 'array' ? '[' : '{');\n        context.indent();\n      }\n    }\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd(context, type, nodeType) {\n      if (type === 'node') {\n        context.indent(-1);\n        context.out(nodeType === 'array' ? ']' : '}');\n      }\n      context.popColor();\n    }\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(context, key, leftKey, type, nodeType) {\n      context.pushColor(colors[type]);\n      context.out(leftKey + ': ');\n      if (type === 'node') {\n        context.out(nodeType === 'array' ? '[' : '{');\n        context.indent();\n      }\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(context, key, leftKey, type, nodeType, isLast) {\n      if (type === 'node') {\n        context.indent(-1);\n        context.out(nodeType === 'array' ? ']' : '}' + (isLast ? '' : ','));\n      }\n      if (!isLast) {\n        context.outLine();\n      }\n      context.popColor();\n    }\n\n    /* jshint camelcase: false */\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      this.formatValue(context, left);\n    }\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      this.formatValue(context, left);\n    }\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      // recurse\n      this.formatDeltaChildren(context, delta, left);\n    }\n  }, {\n    key: 'format_added',\n    value: function format_added(context, delta) {\n      this.formatValue(context, delta[0]);\n    }\n  }, {\n    key: 'format_modified',\n    value: function format_modified(context, delta) {\n      context.pushColor(colors.deleted);\n      this.formatValue(context, delta[0]);\n      context.popColor();\n      context.out(' => ');\n      context.pushColor(colors.added);\n      this.formatValue(context, delta[1]);\n      context.popColor();\n    }\n  }, {\n    key: 'format_deleted',\n    value: function format_deleted(context, delta) {\n      this.formatValue(context, delta[0]);\n    }\n  }, {\n    key: 'format_moved',\n    value: function format_moved(context, delta) {\n      context.out('==> ' + delta[1]);\n    }\n  }, {\n    key: 'format_textdiff',\n    value: function format_textdiff(context, delta) {\n      this.formatTextDiffString(context, delta[0]);\n    }\n  }]);\n  return ConsoleFormatter;\n}(BaseFormatter);\n\nvar defaultInstance$3 = void 0;\n\nvar format$3 = function format(delta, left) {\n  if (!defaultInstance$3) {\n    defaultInstance$3 = new ConsoleFormatter();\n  }\n  return defaultInstance$3.format(delta, left);\n};\n\nfunction log$1(delta, left) {\n  console.log(format$3(delta, left));\n}\n\n\n\nvar console$1 = Object.freeze({\n\tdefault: ConsoleFormatter,\n\tformat: format$3,\n\tlog: log$1\n});\n\n\n\nvar index = Object.freeze({\n\tbase: base,\n\thtml: html,\n\tannotated: annotated,\n\tjsonpatch: jsonpatch,\n\tconsole: console$1\n});\n\n// use as 2nd parameter for JSON.parse to revive Date instances\nfunction dateReviver(key, value) {\n  var parts = void 0;\n  if (typeof value === 'string') {\n    // eslint-disable-next-line max-len\n    parts = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d*))?(Z|([+-])(\\d{2}):(\\d{2}))$/.exec(value);\n    if (parts) {\n      return new Date(Date.UTC(+parts[1], +parts[2] - 1, +parts[3], +parts[4], +parts[5], +parts[6], +(parts[7] || 0)));\n    }\n  }\n  return value;\n}\n\nfunction create(options) {\n  return new DiffPatcher(options);\n}\n\nvar defaultInstance$4 = void 0;\n\nfunction diff() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.diff.apply(defaultInstance$4, arguments);\n}\n\nfunction patch() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.patch.apply(defaultInstance$4, arguments);\n}\n\nfunction unpatch() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.unpatch.apply(defaultInstance$4, arguments);\n}\n\nfunction reverse() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.reverse.apply(defaultInstance$4, arguments);\n}\n\nfunction clone$1() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.clone.apply(defaultInstance$4, arguments);\n}\n\nexports.DiffPatcher = DiffPatcher;\nexports.formatters = index;\nexports.console = console$1;\nexports.create = create;\nexports.dateReviver = dateReviver;\nexports.diff = diff;\nexports.patch = patch;\nexports.unpatch = unpatch;\nexports.reverse = reverse;\nexports.clone = clone$1;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","import m from \"mithril\";\nimport { THEME_DEFAULT } from \"../types\";\nexport default {\n    getClassNames(attrs) {\n        var _a;\n        const classNames = [\n            \"mmf-button\",\n            (_a = attrs.theme) !== null && _a !== void 0 ? _a : THEME_DEFAULT,\n            attrs.raised ? \"mmf-button--raised\" : \"mmf-button--flat\",\n            attrs.disabled ? \"is-disabled\" : \"is-enabled\"\n        ];\n        if (attrs.class) {\n            classNames.push(attrs.class);\n        }\n        return classNames.join(\" \");\n    },\n    view(vnode) {\n        const attrs = {\n            // onclick is assigned via mithril\n            ...vnode.attrs,\n            theme: undefined,\n            class: this.getClassNames(vnode.attrs)\n        };\n        return m(\"button\", attrs, vnode.children);\n    }\n};\n","import { THEME_DEFAULT } from \"../types\";\nimport Button from '../button';\nimport Errors, { getErrorClass } from \"../errors\";\nimport Label from \"../label\";\nimport m from \"mithril\";\nexport const defaultFormOptions = {\n    theme: THEME_DEFAULT,\n    errors: [],\n    description: \"\",\n};\nexport default {\n    view(vnode) {\n        const attrs = { ...defaultFormOptions, ...vnode.attrs };\n        return m(`.mmf-form.mmf-form--button.is-${attrs.disabled ? \"disabled\" : \"enabled\"}`, {\n            \"class\": `${getErrorClass(attrs.errors)} ${attrs.theme}`\n        }, m(Label, { ...attrs }), m(Button, { ...attrs }, vnode.children), m(Errors, attrs), attrs.description && m(\".mmf-meta\", attrs.description));\n    }\n};\n","import m from \"mithril\";\nimport { THEME_DEFAULT } from \"../types\";\nexport default {\n    view({ attrs }) {\n        return m(\"input.mmf-checkbox\", {\n            \"data-id\": attrs.id,\n            type: \"checkbox\",\n            class: attrs.theme || THEME_DEFAULT,\n            disabled: attrs.disabled === true,\n            checked: attrs.value,\n            onchange: e => attrs.onchange(e.target.checked),\n            onfocus: attrs.onfocus,\n            onblur: attrs.onblur\n        });\n    }\n};\n","import m from \"mithril\";\nimport Checkbox from \"../checkbox\";\nimport Label from \"../label\";\nimport Errors, { getErrorClass } from \"../errors\";\nexport const defaultOptions = {\n    id: null,\n    title: \"\",\n    disabled: false,\n    theme: \"the-default\",\n    value: \"\",\n    errors: [],\n    description: \"\",\n    placeholder: \"\",\n    onchange: Function.prototype\n};\nexport default {\n    view(vnode) {\n        const attrs = { ...defaultOptions, ...vnode.attrs };\n        return m(`.mmf-form.mmf-form--checkbox.is-${attrs.disabled ? \"disabled\" : \"enabled\"}`, {\n            \"class\": `${getErrorClass(attrs.errors)} ${attrs.theme}`\n        }, m(Label, {\n            ...attrs,\n            invertOrder: attrs.invertOrder !== true\n        }, m(Checkbox, {\n            id: vnode.attrs.id,\n            disabled: attrs.disabled,\n            theme: attrs.theme,\n            value: vnode.attrs.value,\n            onchange: vnode.attrs.onchange,\n            onfocus: vnode.attrs.onfocus,\n            onblur: vnode.attrs.onblur\n        })), m(Errors, attrs), attrs.description && m(\".mmf-meta\", attrs.description), vnode.children);\n    }\n};\n","function isVNode(object) {\n    return typeof object.tag === \"string\" && object.attrs != null && typeof object.attrs === \"object\";\n}\n/**\n * returns class for existing errors, warnings or no-error\n */\nexport default function getErrorClass(errors) {\n    if (errors == null || errors.length === 0) {\n        return \"no-error\";\n    }\n    for (let i = 0, l = errors.length; i < l; i += 1) {\n        const error = errors[i];\n        if (isVNode(error) || typeof error === \"string\") {\n            return \"has-error\";\n        }\n        else if (error && error.severity !== \"warning\") {\n            return \"has-error\";\n        }\n    }\n    return \"has-warning\";\n}\n","import m from \"mithril\";\nimport getErrorClass from \"./getErrorClass\";\nfunction isVNode(object) {\n    return typeof object.tag === \"string\" && object.attrs != null && typeof object.attrs === \"object\";\n}\nfunction isError(object) {\n    return object && object.message;\n}\nexport { getErrorClass };\nexport default {\n    view(vnode) {\n        const { errors } = vnode.attrs;\n        if (errors == null || errors.length === 0) {\n            return \"\";\n        }\n        return m(\"ul.mmf-form__errors\", errors.map(error => {\n            if (isVNode(error)) {\n                return m(`li.mmf-form__error.mmf-form__error--${error.attrs.severity}`, error);\n            }\n            if (isError(error)) {\n                if (error.severity === \"warning\") {\n                    return m(\"li.mmf-form__error.mmf-form__error--warning\", m.trust(error.message));\n                }\n                return m(\"li.mmf-form__error.mmf-form__error--error\", m.trust(error.message));\n            }\n            return m(\"li.mmf-form__error.mmf-form__error--error\", m.trust(error));\n        }));\n    }\n};\n","import m from \"mithril\";\nimport isEmpty from \"../isEmpty\";\nconst RATIO_DEFAULT = [16, 9];\n/** returns ratio as css-property */\nconst getRatioStyleProperty = (ratio) => `padding-bottom: ${getRatio(ratio).toFixed(2)}%;`;\nfunction getRatio(ratio) {\n    let dim = ratio.split(\":\").map(parseFloat);\n    dim = dim.length === 2 ? dim : RATIO_DEFAULT;\n    return (100 * dim[1] / dim[0]);\n}\nconst MetaDescription = {\n    view(vnode) {\n        const { attrs } = vnode;\n        return [\n            isEmpty(attrs.url) ?\n                m(\".mmf-preview__placeholder\", attrs.placeholder) : [\n                attrs.description && m(\".mmf-preview__description\", m.trust(attrs.description)),\n                m(\".mmf-preview__overflow-indicator\")\n            ],\n            vnode.children\n        ];\n    }\n};\nconst InlineImage = {\n    view(vnode) {\n        const { attrs } = vnode;\n        return m(\".mmf-preview__content\", {\n            style: !isEmpty(attrs.url) && getRatioStyleProperty(attrs.maxRatio),\n            oncreate: attrs.oncreate\n        }, isEmpty(attrs.url) ?\n            m(\".mmf-preview__placeholder\", attrs.placeholder) : [\n            m(\"img\", {\n                src: attrs.url,\n                onload: attrs.onload\n            }),\n            attrs.description && m(\".mmf-preview__description\", m.trust(attrs.description)),\n            m(\".mmf-preview__overflow-indicator\")\n        ], vnode.children);\n    }\n};\nconst ImagePreview = {\n    updateRatio(maxRatio, image) {\n        if (this.overflowContainer != null && image.naturalWidth) {\n            const ratioMax = getRatio(maxRatio);\n            const ratioImg = getRatio(`${image.naturalWidth}:${image.naturalHeight}`);\n            if (ratioMax >= ratioImg) {\n                this.overflowContainer.style.paddingBottom = `${ratioImg.toFixed(2)}%`;\n                this.overflowContainer.classList.remove(\"with-overflow\");\n                this.hasOverflow = false;\n            }\n            else {\n                this.overflowContainer.style.paddingBottom = `${ratioMax.toFixed(2)}%`;\n                this.overflowContainer.classList.add(\"with-overflow\");\n                this.hasOverflow = true;\n            }\n        }\n    },\n    view(vnode) {\n        const attrs = {\n            url: null,\n            \"class\": \"\",\n            asBackgroundImage: false,\n            description: null,\n            placeholder: null,\n            onclick: null,\n            maxRatio: \"16:9\",\n            // \"private\"\n            onload: event => this.updateRatio(vnode.attrs.maxRatio, event.currentTarget),\n            oncreate: content => { this.overflowContainer = content.dom; },\n            ...vnode.attrs\n        };\n        return m(\".mmf-preview.mmf-preview--image\", {\n            \"class\": attrs.class + (isEmpty(attrs.url) ? \"\" : \" with-image\"),\n            style: (attrs.asBackgroundImage && !isEmpty(attrs.url)) &&\n                `background-image: url(${attrs.url});`\n        }, attrs.asBackgroundImage ? m(MetaDescription, attrs, vnode.children) : m(InlineImage, attrs, vnode.children));\n    }\n};\nexport default ImagePreview;\n","import m from \"mithril\";\nimport { THEME_DEFAULT } from \"../types\";\nexport default {\n    value: null,\n    hasFocus: false,\n    view({ attrs }) {\n        var _a, _b, _c;\n        let { value } = attrs;\n        if (this.hasFocus && this.value != null) {\n            // this will remove any changes applied to this data from \"outside\"\n            value = this.value;\n        }\n        this.value = value;\n        const inputAttributes = {\n            // id: if the element is pointer sensitive it will be rebuild on pointer updates, loosing focus\n            \"data-id\": attrs.id,\n            class: `${(_a = attrs.theme) !== null && _a !== void 0 ? _a : THEME_DEFAULT} ${(_b = attrs.class) !== null && _b !== void 0 ? _b : \"\"}`,\n            disabled: attrs.disabled,\n            placeholder: attrs.placeholder,\n            type: (_c = attrs.type) !== null && _c !== void 0 ? _c : \"text\",\n            value,\n            oninput: e => (this.value = e.target.value),\n            onfocus: event => {\n                this.hasFocus = true;\n                attrs.onfocus && attrs.onfocus(event);\n            },\n            onblur: event => {\n                this.hasFocus = false;\n                attrs.onblur && attrs.onblur(event);\n            }\n        };\n        const updateEvent = attrs.instantUpdate === true ? \"onkeyup\" : \"onchange\";\n        inputAttributes[updateEvent] = () => attrs.onchange(this.value);\n        return m(`input.mmf-input`, inputAttributes);\n    }\n};\n","import m from \"mithril\";\nimport Input from \"../input\";\nimport Label from \"../label\";\nimport sanitizeValue from \"./sanitizeValue\";\nimport Errors, { getErrorClass } from \"../errors\";\nimport { THEME_DEFAULT } from \"../types\";\nconst TYPES = {\n    string: \"text\",\n    integer: \"number\",\n    number: \"number\"\n};\nconst InputForm = {\n    oncreate(vnode) {\n        this.$form = vnode.dom;\n    },\n    updateClasses(value) {\n        const hasValue = value !== \"\";\n        this.$form.classList.remove(hasValue ? \"is-empty\" : \"not-empty\");\n        this.$form.classList.add(hasValue === false ? \"is-empty\" : \"not-empty\");\n    },\n    onfocus() {\n        this.$form.classList.add(\"has-focus\");\n        this.$form.classList.remove(\"no-focus\");\n    },\n    onblur(value) {\n        this.$form.classList.add(\"no-focus\");\n        this.$form.classList.remove(\"has-focus\");\n        this.updateClasses(value);\n    },\n    hasFocus() {\n        return this.$form && this.$form.classList.contains(\"has-focus\");\n    },\n    view(vnode) {\n        var _a;\n        const inputType = TYPES[vnode.attrs.type] || vnode.attrs.type || \"text\";\n        const attrs = {\n            id: null,\n            title: \"\",\n            value: \"\",\n            errors: [],\n            description: \"\",\n            placeholder: \"\",\n            instantUpdate: false,\n            onblur: Function.prototype,\n            onfocus: Function.prototype,\n            onchange: Function.prototype,\n            ...vnode.attrs\n        };\n        const focusClass = this.hasFocus() ? \"has-focus\" : \"no-focus\";\n        const errorClass = getErrorClass(attrs.errors);\n        const emptyClass = attrs.value === \"\" ? \"is-empty\" : \"not-empty\";\n        const view = m(`.mmf-form.mmf-form--input.is-${attrs.disabled ? \"disabled\" : \"enabled\"}`, {\n            \"class\": `${focusClass} ${errorClass} ${emptyClass} ${(_a = attrs.theme) !== null && _a !== void 0 ? _a : THEME_DEFAULT}`\n        }, m(Label, attrs, m(Input, {\n            type: inputType,\n            id: attrs.id,\n            disabled: attrs.disabled,\n            theme: attrs.theme,\n            instantUpdate: attrs.instantUpdate,\n            placeholder: attrs.placeholder,\n            onchange: value => attrs.onchange(sanitizeValue(inputType, value)),\n            value: attrs.value,\n            onfocus: e => {\n                this.onfocus();\n                attrs.onfocus && attrs.onfocus(e);\n            },\n            onblur: e => {\n                this.onblur(e.target.value);\n                attrs.onblur && attrs.onblur(e);\n            }\n        })), m(Errors, attrs), attrs.description && m(\".mmf-meta\", attrs.description), vnode.children);\n        return view;\n    }\n};\nexport default InputForm;\n","export default function sanitizeValue(type, value) {\n    if (type === \"number\") {\n        const intValue = parseInt(value);\n        const floatValue = parseFloat(value);\n        if (floatValue == value) { // eslint-disable-line\n            return floatValue;\n        }\n        else if (isNaN(intValue)) {\n            return value;\n        }\n        return intValue;\n    }\n    return value;\n}\n","/** returns true, if value is undefined or an empty string */\nexport default function isEmpty(value) {\n    return value == null || value === \"\";\n}\n","import m from \"mithril\";\nexport default {\n    view(vnode) {\n        const { invertOrder, title, class: classNames } = vnode.attrs;\n        if (invertOrder === true) {\n            return m(\"label.order--label-last\", {\n                \"class\": classNames\n            }, vnode.children, title && m(\"span.mmf-label\", title));\n        }\n        return m(\"label.order--label-first\", {\n            \"class\": classNames\n        }, title && m(\"span.mmf-label\", title), vnode.children);\n    }\n};\n","/** helper to retrieve correct (targetClass) target-element of an event.target */\nfunction getParentByClassname(current, targetClass, parent = document.body) {\n    if (current === parent) {\n        return undefined;\n    }\n    else if (current.classList.contains(targetClass)) {\n        return current;\n    }\n    return getParentByClassname(current.parentNode, targetClass, parent);\n}\nexport default getParentByClassname;\n","import m from \"mithril\";\nimport getParentByClassname from \"./getParentByClassname\";\nimport { THEME_DEFAULT } from \"../types\";\n/** default render function for item content rendering */\nexport function displayRenderer(item, attrs) {\n    return m(\"span\", item[attrs.valueProp]);\n}\n/**\n * standard list component with additional item hover-, highlight- and selection-support\n */\nexport default {\n    view({ attrs }) {\n        var _a;\n        const { items, valueProp = \"value\", selectedIndex, onSelect, onHover, displayRenderer } = attrs;\n        if (items.length === 0 || (items.length === 1 && items[0][valueProp] === \"\")) {\n            return m.fragment({}, \"\");\n        }\n        return m(\"ul.mmf-list\", {\n            class: (_a = attrs.theme) !== null && _a !== void 0 ? _a : THEME_DEFAULT,\n            onmousedown: onSelect ? event => {\n                const target = getParentByClassname(event.target, \"mmf-list__item\");\n                if (!target) {\n                    return;\n                }\n                const index = items.findIndex(item => item[valueProp] === target.dataset.value);\n                if (index >= 0) {\n                    onSelect(index);\n                }\n            } : null\n        }, items.map((item, index) => m(\"li.mmf-list__item\", {\n            \"data-value\": item[valueProp],\n            class: `${item.class ? item.class : \"\"} ${index === selectedIndex ? \"is-selected\" : \"\"}`,\n            onmouseenter: onHover ? event => {\n                const target = event.target;\n                const index = items.findIndex(item => item[valueProp] === target.dataset.value);\n                if (index >= 0) {\n                    onHover(index);\n                }\n            } : null\n        }, displayRenderer(item, attrs))));\n    }\n};\n","import m from \"mithril\";\nimport { THEME_DEFAULT } from \"../types\";\n/**\n * places a panel to the specified dom-element\n *\n * **usage**\n *\n * ```js\n *    // render popover with contents and store popover-instance for controls\n *    m.render(dom, m(Popover, {\n *       onmount: popover => (this.popover = popover)\n *     },\n *     // and render contents\n *     m(Contents))\n *   );\n *   // later, update contents in popover\n *   this.popover.render(m(Contents, {}))\n *   // place and show popover at target dom element\n *   this.popover.show(targetElement)\n *   // hide popover\n *   this.popover.hide()\n * ```\n */\nconst Popover = {\n    oncreate(vnode) {\n        vnode.attrs.onmount(vnode.state);\n    },\n    onremove() {\n        const container = document.body;\n        if (container.contains(this.dom)) {\n            m.render(this.dom, null);\n            container.removeChild(this.dom);\n        }\n    },\n    hide() {\n        this.dom.classList.add(\"is-hidden\");\n        this.dom.classList.remove(\"is-visible\");\n    },\n    render(content) {\n        m.render(this.dom, content);\n    },\n    show(targetElement) {\n        this.dom.classList.add(\"is-visible\");\n        this.dom.classList.remove(\"is-hidden\");\n        const bound = targetElement.getBoundingClientRect();\n        this.dom.style.setProperty(\"--target-width\", `${bound.width}px`);\n        this.placeBelow(targetElement, bound);\n    },\n    placeAbove(targetElement, bound = targetElement.getBoundingClientRect()) {\n        if (targetElement.offsetParent === document.body) {\n            const scrollY = document.documentElement.scrollTop || document.body.scrollTop;\n            const scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;\n            this.dom.style.top = \"unset\";\n            this.dom.style.left = `${bound.left + scrollX}px`;\n            this.dom.style.bottom = `${document.body.scrollHeight - scrollY - bound.bottom + bound.height}px`;\n            return;\n        }\n        const offset = targetElement.offsetParent.getBoundingClientRect();\n        this.dom.style.top = \"unset\";\n        this.dom.style.left = `${bound.left - offset.left}px`;\n        this.dom.style.bottom = `${offset.bottom - bound.bottom + bound.height}px`;\n    },\n    placeBelow(targetElement, bound = targetElement.getBoundingClientRect()) {\n        if (targetElement.offsetParent === document.body) {\n            const scrollY = document.documentElement.scrollTop || document.body.scrollTop;\n            const scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;\n            this.dom.style.left = `${bound.left + scrollX}px`;\n            this.dom.style.top = `${bound.top + scrollY + bound.height}px`;\n            return;\n        }\n        const offset = targetElement.offsetParent.getBoundingClientRect();\n        this.dom.style.left = `${bound.left - offset.left}px`;\n        this.dom.style.top = `${bound.top - offset.top + bound.height}px`;\n    },\n    view(vnode) {\n        var _a, _b;\n        return m(\".mmf-popover.is-hidden\", {\n            ...vnode.attrs,\n            \"class\": `${(_a = vnode.attrs.theme) !== null && _a !== void 0 ? _a : THEME_DEFAULT} ${(_b = vnode.attrs.class) !== null && _b !== void 0 ? _b : \"\"}`.trim(),\n            oncreate: ({ dom }) => (this.dom = dom)\n        }, vnode.children);\n    }\n};\nexport default Popover;\n","import List, { displayRenderer } from \"../list\";\nimport m from \"mithril\";\nimport Popover from \"../popover\";\nimport search from \"./search\";\nimport { THEME_DEFAULT } from \"../types\";\nconst raf = window.requestAnimationFrame;\nconst isListOfItems = (suggestions) => Array.isArray(suggestions);\nconst isGetFunction = (suggestions) => typeof suggestions === \"function\";\nexport default {\n    hasFocus: false,\n    currentIndex: 0,\n    showCurrentInput: false,\n    valueProp: \"name\",\n    displayRenderer,\n    resizeTimer: null,\n    async updateFilter() {\n        this.list = await this.getSuggestions(this.value);\n        if (this.showCurrentInput) {\n            this.list.unshift({ [this.valueProp]: this.value, class: \"is-value\" });\n        }\n        this.updateCompletions();\n    },\n    oncreate({ attrs }) {\n        const { suggestions } = attrs;\n        if (isListOfItems(suggestions)) {\n            this.getSuggestions = value => search(suggestions, value, 10, attrs.searchProp || this.valueProp);\n        }\n        else if (isGetFunction(suggestions)) {\n            this.getSuggestions = suggestions;\n        }\n        else {\n            this.getSuggestions = () => Promise.resolve([]);\n        }\n    },\n    updateCompletions() {\n        this.currentIndex = this.currentIndex < 0 ? 0 : Math.min(this.list.length - 1, this.currentIndex);\n        this.popover.render(m(List, {\n            items: this.list,\n            theme: this.theme,\n            valueProp: this.valueProp,\n            selectedIndex: this.currentIndex,\n            displayRenderer: this.displayRenderer,\n            onSelect: index => {\n                const value = this.list[index][this.valueProp];\n                this.value = value;\n                this.input.value = value;\n            },\n            onHover: index => {\n                this.currentIndex = index;\n                this.updateCompletions();\n            }\n        }));\n    },\n    updateSelection(e) {\n        const { key } = e;\n        // goto previous suggestion in list\n        if (key === \"ArrowUp\") {\n            e.stopPropagation();\n            e.preventDefault();\n            if (this.currentIndex > 0) {\n                this.currentIndex -= 1;\n                this.updateCompletions();\n            }\n            // goto next suggestion in list\n        }\n        else if (key === \"ArrowDown\") {\n            e.stopPropagation();\n            e.preventDefault();\n            if (this.currentIndex < this.list.length - 1) {\n                this.currentIndex += 1;\n                this.updateCompletions();\n            }\n            // get selected suggestion, insert it into input and leave input field\n        }\n        else if (key === \"Enter\") {\n            const value = this.list[this.currentIndex][this.valueProp];\n            this.value = value;\n            this.input.value = value;\n            this.input.blur(); // blur input, close panel (consistent with mouse selection)\n        }\n    },\n    view({ attrs }) {\n        var _a;\n        let { value } = attrs;\n        if (this.hasFocus && this.value != null) {\n            // this will remove any changes applied to this data from \"outside\"\n            value = this.value;\n        }\n        this.value = value;\n        const { valueProp, displayRenderer, showCurrentInput, theme } = attrs;\n        this.valueProp = valueProp !== null && valueProp !== void 0 ? valueProp : this.valueProp;\n        this.displayRenderer = displayRenderer !== null && displayRenderer !== void 0 ? displayRenderer : this.displayRenderer;\n        this.showCurrentInput = showCurrentInput === true;\n        this.theme = theme !== null && theme !== void 0 ? theme : THEME_DEFAULT;\n        const inputAttributes = {\n            \"data-id\": attrs.id,\n            class: `${this.theme} ${(_a = attrs.class) !== null && _a !== void 0 ? _a : \"\"}`,\n            disabled: attrs.disabled,\n            placeholder: attrs.placeholder,\n            type: \"text\",\n            value,\n            oncreate: ({ dom }) => (this.input = dom),\n            oninput: e => (this.value = e.target.value),\n            onfocus: async (event) => {\n                var _a;\n                this.hasFocus = true;\n                attrs.onfocus && attrs.onfocus(event);\n                await this.updateFilter();\n                (_a = this.popover) === null || _a === void 0 ? void 0 : _a.show(this.input);\n            },\n            onblur: event => {\n                this.hasFocus = false;\n                attrs.onblur && attrs.onblur(event);\n                raf(() => { var _a; return (_a = this.popover) === null || _a === void 0 ? void 0 : _a.hide(); }); // delay closing of popover to prevent race conditions\n            },\n            onkeydown: event => this.updateSelection(event),\n            onchange: () => attrs.onchange(this.value),\n            onkeyup: async (event) => {\n                await this.updateFilter();\n                const ignoreKeys = [\"ArrowUp\", \"ArrowRight\", \"ArrowDown\", \"ArrowLeft\", \"Enter\"];\n                if (attrs.instantUpdate && !ignoreKeys.includes(event.key)) {\n                    attrs.onchange(this.value);\n                }\n            }\n        };\n        return [\n            m(`input.mmf-input`, inputAttributes),\n            m(Popover, {\n                onmount: panel => (this.popover = panel),\n                theme: attrs.theme\n            })\n        ];\n    }\n};\n","const DEFAULT_LIMIT = 12;\n/**\n * @todo Consider using an word based search approach. Possibly using an\n * existing implementation, e.g. https://github.com/mattyork/fuzzy/tree/master/lib\n * and using `fuzzy.match` only\n *\n * @param  haystack\n * @param  needle\n * @param  limit    - result-limit\n * @return results\n */\nexport default function search(haystack, needle, limit = DEFAULT_LIMIT, prop = \"value\") {\n    const matches = [];\n    const lowerCaseNeedle = needle.toLowerCase();\n    if (needle === \"\") {\n        return Promise.resolve(matches);\n    }\n    function byPosition(a, b) {\n        const aIndex = a[prop].toLowerCase().indexOf(lowerCaseNeedle);\n        const bIndex = b[prop].toLowerCase().indexOf(lowerCaseNeedle);\n        if (aIndex === bIndex) {\n            return a[prop].length - b[prop].length; // shortest string\n        }\n        return aIndex - bIndex;\n    }\n    const regStartsWith = new RegExp(`^${needle.replace(\" \", \".*\")}`, \"i\");\n    for (let i = 0, l = haystack.length; i < l; i += 1) {\n        if (regStartsWith.test(haystack[i][prop])) {\n            matches.push(haystack[i]);\n            if (matches.length >= limit) {\n                break;\n            }\n        }\n    }\n    const regContains = new RegExp(needle.replace(\" \", \".*\"), \"i\");\n    if (matches.length >= limit) {\n        return Promise.resolve(matches.sort(byPosition));\n    }\n    for (let i = 0, l = haystack.length; i < l; i += 1) {\n        if (regContains.test(haystack[i][prop]) && matches.indexOf(haystack[i]) === -1) {\n            matches.push(haystack[i]);\n            if (matches.length >= limit) {\n                break;\n            }\n        }\n    }\n    return Promise.resolve(matches.sort(byPosition));\n}\n","import m from \"mithril\";\nimport QueryList from \"../querylist\";\nimport Label from \"../label\";\nimport Errors, { getErrorClass } from \"../errors\";\nimport { THEME_DEFAULT } from \"../types\";\nexport default {\n    oncreate(vnode) {\n        this.$form = vnode.dom;\n    },\n    updateClasses(value) {\n        const hasValue = value !== \"\";\n        this.$form.classList.remove(hasValue ? \"is-empty\" : \"not-empty\");\n        this.$form.classList.add(hasValue === false ? \"is-empty\" : \"not-empty\");\n    },\n    onfocus() {\n        this.$form.classList.add(\"has-focus\");\n        this.$form.classList.remove(\"no-focus\");\n    },\n    onblur(value) {\n        this.$form.classList.add(\"no-focus\");\n        this.$form.classList.remove(\"has-focus\");\n        this.updateClasses(value);\n    },\n    hasFocus() {\n        return this.$form && this.$form.classList.contains(\"has-focus\");\n    },\n    view(vnode) {\n        var _a;\n        const attrs = {\n            id: null,\n            value: \"\",\n            errors: [],\n            invertOrder: false,\n            description: \"\",\n            onblur: Function.prototype,\n            onfocus: Function.prototype,\n            onchange: Function.prototype,\n            ...vnode.attrs\n        };\n        const focusClass = this.hasFocus() ? \"has-focus\" : \"no-focus\";\n        const errorClass = getErrorClass(attrs.errors);\n        const emptyClass = attrs.value === \"\" ? \"is-empty\" : \"not-empty\";\n        return m(`.mmf-form.mmf-form--query-list.is-${attrs.disabled ? \"disabled\" : \"enabled\"}`, {\n            \"class\": `${focusClass} ${errorClass} ${emptyClass} ${(_a = attrs.theme) !== null && _a !== void 0 ? _a : THEME_DEFAULT}`\n        }, m(Label, {\n            ...attrs,\n            invertOrder: attrs.invertOrder\n        }, m(QueryList, {\n            ...attrs,\n            onfocus: e => {\n                this.onfocus();\n                attrs.onfocus && attrs.onfocus(e);\n            },\n            onblur: e => {\n                this.onblur(e.target.value);\n                attrs.onblur && attrs.onblur(e);\n            }\n        })), m(Errors, attrs), attrs.description && m(\".mmf-meta\", attrs.description), vnode.children);\n    }\n};\n","import m from \"mithril\";\nimport Button from \"../button\";\nexport default {\n    oncreate(vnode) {\n        this.buttons = Array.from(vnode.dom.querySelectorAll(\"button\"))\n            .map(dom => ({ value: dom.value, dom: dom }));\n    },\n    view(vnode) {\n        const { value, options, disabled, theme } = vnode.attrs;\n        return m(\".mmf-radio-btn-container\", {\n            disabled,\n            class: theme || \"\",\n            oncreate: _vnode => (this.$container = _vnode.dom),\n        }, options.map((option) => {\n            const icon = option.icon ?\n                m(\"span.mmf-icon\", {\n                    value: option.value,\n                }, option.icon)\n                : undefined;\n            const label = m(\"span\", { class: \"mmf-radio-label\" }, option.title || option.value);\n            const attrs = {\n                theme,\n                disabled: disabled ? disabled : option.disabled || false,\n                title: option.title || option.value,\n                class: `${option.value === value ? \"selected\" : \"\"} mmf-radio-btn`,\n                value: option.value,\n                // track button element and value\n                onclick: () => {\n                    if (disabled || option.disabled)\n                        return;\n                    this.buttons.forEach(button => button.dom.classList.toggle(\"selected\", button.value === option.value));\n                    vnode.attrs.onchange(option.value);\n                }\n            };\n            return m(Button, attrs, icon, label);\n        }));\n    }\n};\n","import m from \"mithril\";\nimport RadioButtons from \"../radiobuttons\";\nimport Label from \"../label\";\nimport Errors, { getErrorClass } from \"../errors\";\nimport { THEME_DEFAULT } from \"../types\";\nexport const defaultFormOptions = {\n    theme: THEME_DEFAULT,\n    errors: [],\n    description: \"\",\n};\nexport default {\n    view(vnode) {\n        const attrs = { ...defaultFormOptions, ...vnode.attrs };\n        return m(`.mmf-form.mmf-form--radio-buttons.is-${attrs.disabled ? \"disabled\" : \"enabled\"}`, {\n            \"class\": `${getErrorClass(attrs.errors)} ${attrs.theme}`\n        }, m(Label, { ...attrs }), m(RadioButtons, { ...attrs }), m(Errors, attrs), attrs.description && m(\".mmf-meta\", attrs.description), vnode.children);\n    }\n};\n","import m from \"mithril\";\nconst isOptionValue = (option) => option && option.value !== undefined;\nconst transformOptions = (options) => {\n    return options.map(option => typeof option === \"string\" ? { value: option } : option);\n};\nexport default {\n    view(vnode) {\n        const { attrs } = vnode;\n        const { theme = \"the-default\" } = vnode.attrs;\n        const options = transformOptions(attrs.options);\n        const option = options.find(o => o.value === attrs.value);\n        const activeClass = attrs.disabled === true ? \"is-disabled\" : \"is-enabled\";\n        return m(\".mmf-select__wrapper\", {\n            \"class\": `${theme} ${activeClass} ${(option === null || option === void 0 ? void 0 : option.color) ? \"with-color\" : \"\"}`,\n            oncreate: _vnode => (this.$wrapper = _vnode.dom)\n        }, m(\"span.select-icon\", {\n            style: `background-color: ${option === null || option === void 0 ? void 0 : option.color}`,\n            oncreate: _vnode => (this.$icon = _vnode.dom)\n        }), m(\"select.mmf-select\", {\n            \"data-id\": attrs.id,\n            value: attrs.value,\n            disabled: attrs.disabled,\n            \"class\": attrs.class,\n            onfocus: () => {\n                this.$wrapper && this.$wrapper.classList.add(\"has-focus\");\n                attrs.onfocus && attrs.onfocus(vnode);\n            },\n            onblur: () => {\n                this.$wrapper && this.$wrapper.classList.remove(\"has-focus\");\n                attrs.onblur && attrs.onblur(vnode);\n            },\n            onchange: (e) => {\n                const option = options === null || options === void 0 ? void 0 : options.find(o => o.value === e.target.value);\n                this.$wrapper.classList.toggle(\"with-color\", (option === null || option === void 0 ? void 0 : option.color) != null);\n                this.$icon.style.setProperty(\"background-color\", option === null || option === void 0 ? void 0 : option.color);\n                if (attrs.onchange)\n                    attrs.onchange(e.target.value);\n            }\n        }, attrs.options.map(value => {\n            if (isOptionValue(value)) {\n                // value must be a string or else is discarded\n                return m(\"option\", { value: `${value.value}` }, value.title || value.value);\n            }\n            return m(\"option\", { value: `${value}` }, value);\n        })));\n    }\n};\n","import m from \"mithril\";\nimport Select from \"../select\";\nimport Label from \"../label\";\nimport Errors, { getErrorClass } from \"../errors\";\nimport { THEME_DEFAULT } from \"../types\";\nexport default {\n    view(vnode) {\n        var _a;\n        const attrs = {\n            id: null,\n            value: \"\",\n            options: [{ title: \"-\", value: false }],\n            errors: [],\n            invertOrder: false,\n            description: \"\",\n            ...vnode.attrs\n        };\n        return m(`.mmf-form.mmf-form--select.is-${attrs.disabled ? \"disabled\" : \"enabled\"}`, {\n            \"class\": `${(_a = attrs.theme) !== null && _a !== void 0 ? _a : THEME_DEFAULT} ${getErrorClass(attrs.errors)}`\n        }, m(Label, {\n            \"class\": \"mmf-grow-2\",\n            ...attrs,\n            invertOrder: attrs.invertOrder\n        }, m(Select, attrs)), m(Errors, attrs), attrs.description && m(\".mmf-meta\", attrs.description), vnode.children);\n    }\n};\n","import m from \"mithril\";\nimport { THEME_DEFAULT } from \"../types\";\nexport default {\n    view({ attrs }) {\n        return m(\"input.mmf-switch\", {\n            \"data-id\": attrs.id,\n            type: \"checkbox\",\n            class: attrs.theme || THEME_DEFAULT,\n            disabled: attrs.disabled === true,\n            checked: attrs.value,\n            onchange: e => attrs.onchange(e.target.checked),\n            onfocus: attrs.onfocus,\n            onblur: attrs.onblur\n        });\n    }\n};\n","import m from \"mithril\";\nimport Switch from \"../switch\";\nimport Label from \"../label\";\nimport Errors, { getErrorClass } from \"../errors\";\nexport const defaultOptions = {\n    id: null,\n    title: \"\",\n    disabled: false,\n    theme: \"the-default\",\n    value: \"\",\n    errors: [],\n    description: \"\",\n    onchange: Function.prototype\n};\nexport default {\n    view(vnode) {\n        const attrs = { ...defaultOptions, ...vnode.attrs };\n        return m(`.mmf-form.mmf-form--switch.is-${attrs.disabled ? \"disabled\" : \"enabled\"}`, {\n            \"class\": `${getErrorClass(attrs.errors)} ${attrs.theme}`\n        }, m(Label, {\n            ...attrs,\n            invertOrder: attrs.invertOrder !== true\n        }, m(Switch, {\n            id: vnode.attrs.id,\n            disabled: attrs.disabled,\n            theme: attrs.theme,\n            value: vnode.attrs.value,\n            onchange: vnode.attrs.onchange,\n            onfocus: vnode.attrs.onfocus,\n            onblur: vnode.attrs.onblur\n        })), m(Errors, attrs), attrs.description && m(\".mmf-meta\", attrs.description), vnode.children);\n    }\n};\n","import m from \"mithril\";\nimport autosize from \"autosize\";\nimport { THEME_DEFAULT } from \"../types\";\nconst raf = window.requestAnimationFrame;\nconst emptyFunction = Function.prototype;\nexport default {\n    boolean: false,\n    onupdate(vnode) {\n        raf(() => autosize.update(vnode.dom));\n    },\n    view(vnode) {\n        var _a, _b;\n        const attrs = {\n            value: \"\",\n            rows: 1,\n            placeholder: \"\",\n            disabled: false,\n            instantUpdate: false,\n            onblur: emptyFunction,\n            onfocus: emptyFunction,\n            onchange: emptyFunction,\n            oncreate: emptyFunction,\n            onbeforeremove: emptyFunction,\n            ...vnode.attrs\n        };\n        const disabled = attrs.disabled === true;\n        if (this.focus) {\n            // keep current value, while input is being active this prevents\n            // jumps in cursor, caused by race conditions\n            // @attention - this may produce other problems\n            attrs.value = this.textarea.value;\n        }\n        const textareaAttributes = {\n            \"data-id\": attrs.id,\n            value: attrs.value,\n            class: `${(_a = attrs.theme) !== null && _a !== void 0 ? _a : THEME_DEFAULT} ${(_b = attrs.class) !== null && _b !== void 0 ? _b : \"\"}`,\n            rows: attrs.rows,\n            disabled,\n            placeholder: attrs.placeholder,\n            onblur: e => {\n                this.focus = false;\n                attrs.onblur && attrs.onblur(e);\n            },\n            onfocus: e => {\n                this.focus = true;\n                attrs.onfocus && attrs.onfocus(e);\n            },\n            onupdate: node => autosize.update(node.dom),\n            oncreate: node => {\n                this.textarea = node.dom;\n                attrs.oncreate(node);\n                autosize(node.dom);\n                autosize.update(node.dom);\n            },\n            onbeforeremove: node => {\n                attrs.onbeforeremove(node);\n                autosize.destroy(node.dom);\n            }\n        };\n        const updateEvent = attrs.instantUpdate === true ? \"onkeyup\" : \"onchange\";\n        textareaAttributes[updateEvent] = e => attrs.onchange(e.target.value);\n        return m(\"textarea.mmf-textarea\", textareaAttributes);\n    }\n};\n","import Errors, { getErrorClass } from \"../errors\";\nimport isEmpty from \"../isEmpty\";\nimport Label from \"../label\";\nimport m from \"mithril\";\nimport Textarea from \"../textarea\";\nexport default {\n    oncreate(vnode) {\n        this.$form = vnode.dom;\n        this.onblur(vnode.attrs.value);\n    },\n    onfocus() {\n        this.$form.classList.remove(\"no-focus\");\n        this.$form.classList.add(\"has-focus\");\n    },\n    onblur(value) {\n        this.$form.classList.remove(\"has-focus\");\n        this.$form.classList.add(\"no-focus\");\n        this.updateClasses(value);\n    },\n    updateClasses(value) {\n        const hasValue = isEmpty(value) === false;\n        this.$form.classList.remove(hasValue ? \"is-empty\" : \"not-empty\");\n        this.$form.classList.add(hasValue === false ? \"is-empty\" : \"not-empty\");\n    },\n    onupdate(vnode) {\n        this.updateClasses(vnode.attrs.value);\n    },\n    view(vnode) {\n        const attrs = Object.assign({\n            id: null,\n            title: \"\",\n            value: \"\",\n            errors: [],\n            disabled: false,\n            description: \"\",\n            placeholder: \"\",\n            rows: 1,\n            theme: \"the-default\",\n            instantUpdate: false,\n            onblur: Function.prototype,\n            onfocus: Function.prototype,\n            onchange: Function.prototype\n        }, vnode.attrs);\n        const disabled = attrs.disabled === true;\n        return m(`.mmf-form.mmf-form--textarea.is-${disabled ? \"disabled\" : \"enabled\"}`, {\n            \"class\": `${attrs.theme} ${getErrorClass(attrs.errors)}`\n        }, m(Label, attrs, m(Textarea, {\n            id: attrs.id,\n            value: attrs.value,\n            disabled,\n            theme: attrs.theme,\n            instantUpdate: attrs.instantUpdate,\n            placeholder: attrs.placeholder,\n            rows: attrs.rows,\n            onchange: attrs.onchange,\n            onblur: e => {\n                this.onblur(e.target.value);\n                attrs.onblur(e);\n            },\n            onfocus: e => {\n                this.onfocus();\n                attrs.onfocus(e);\n            }\n        })), m(Errors, attrs), attrs.description && m(\".mmf-meta\", attrs.description), vnode.children);\n    }\n};\n","export const THEME_DEFAULT = \"the-default\";\n","export { default as Button } from \"./components/button\";\nexport { default as ButtonForm } from \"./components/buttonform\";\nexport { default as Checkbox } from \"./components/checkbox\";\nexport { default as CheckboxForm } from \"./components/checkboxform\";\nexport { default as Errors, getErrorClass } from \"./components/errors\";\nexport { default as ImagePreview } from \"./components/imagepreview\";\nexport { default as Input } from \"./components/input\";\nexport { default as InputForm } from \"./components/inputform\";\nexport { default as Label } from \"./components/label\";\nexport { default as QueryList } from \"./components/querylist\";\nexport { default as QueryListForm } from \"./components/querylistform\";\nexport { default as RadioButtons } from \"./components/radiobuttons\";\nexport { default as RadioButtonsForm } from \"./components/radiobuttonsform\";\nexport { default as Select } from \"./components/select\";\nexport { default as SelectForm } from \"./components/selectform\";\nexport { default as Switch } from \"./components/switch\";\nexport { default as SwitchForm } from \"./components/switchform\";\nexport { default as Textarea } from \"./components/textarea\";\nexport { default as TextareaForm } from \"./components/textareaform\";\n","/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, mod.exports);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (module, exports) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function createEvent(name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = null;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\t\t\tta.style.height = ta.scrollHeight + heightOffset + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that \n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight < styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap.delete(ta);\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function autosize(el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function autosize(el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\texports.default = autosize;\n\tmodule.exports = exports['default'];\n});","let createNanoEvents = () => ({\n  events: {},\n  emit (event, ...args) {\n    for (let i of this.events[event] || []) {\n      i(...args)\n    }\n  },\n  on (event, cb) {\n    ;(this.events[event] = this.events[event] || []).push(cb)\n    return () => (this.events[event] = this.events[event].filter(i => i !== cb))\n  }\n})\n\nexport { createNanoEvents }\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**!\n * Sortable 1.10.2\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar version = \"1.10.2\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !!\n    /*@__PURE__*/\n    navigator.userAgent.match(pattern);\n  }\n}\n\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\n\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction matches(\n/**HTMLElement*/\nel,\n/**String*/\nselector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n\n  return false;\n}\n\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\n\nfunction closest(\n/**HTMLElement*/\nel,\n/**String*/\nselector,\n/**HTMLElement*/\nctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n\n  return null;\n}\n\nvar R_SPACE = /\\s+/g;\n\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\n\nfunction css(el, prop, val) {\n  var style = el && el.style;\n\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\n\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n\n    } while (!selfOnly && (el = el.parentNode));\n  }\n\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n\n  return matrixFn && new matrixFn(appliedTransforms);\n}\n\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n        i = 0,\n        n = list.length;\n\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n\n    return list;\n  }\n\n  return [];\n}\n\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n/**\r\n * Returns the \"bounding client rect\" of given element\r\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\r\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\r\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\r\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\r\n * @param  {[HTMLElement]} container              The parent the element will be placed in\r\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\r\n */\n\n\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n\n  if (el !== window && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode; // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect(); // Set relative to edges of padding box of container\n\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n\n      } while (container = container.parentNode);\n    }\n  }\n\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n        scaleX = elMatrix && elMatrix.a,\n        scaleY = elMatrix && elMatrix.d;\n\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n/**\r\n * Checks if a side of an element is scrolled past a side of its parents\r\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\r\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\r\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\r\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n */\n\n\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n      elSideVal = getRect(el)[elSide];\n  /* jshint boss:true */\n\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n        visible = void 0;\n\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n\n  return false;\n}\n/**\r\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\r\n * and non-draggable elements\r\n * @param  {HTMLElement} el       The parent element\r\n * @param  {Number} childNum      The index of the child\r\n * @param  {Object} options       Parent Sortable's options\r\n * @return {HTMLElement}          The child at index childNum, or null if not found\r\n */\n\n\nfunction getChild(el, childNum, options) {\n  var currentChild = 0,\n      i = 0,\n      children = el.children;\n\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && children[i] !== Sortable.dragged && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n\n      currentChild++;\n    }\n\n    i++;\n  }\n\n  return null;\n}\n/**\r\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\r\n * @param  {HTMLElement} el       Parent element\r\n * @param  {selector} selector    Any other elements that should be ignored\r\n * @return {HTMLElement}          The last child, ignoring ghostEl\r\n */\n\n\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n\n  return last || null;\n}\n/**\r\n * Returns the index of an element within its parent for a selected set of\r\n * elements\r\n * @param  {HTMLElement} el\r\n * @param  {selector} selector\r\n * @return {number}\r\n */\n\n\nfunction index(el, selector) {\n  var index = 0;\n\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n  /* jshint boss:true */\n\n\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n\n  return index;\n}\n/**\r\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n * The value is returned in real pixels.\r\n * @param  {HTMLElement} el\r\n * @return {Array}             Offsets in the format of [left, top]\r\n */\n\n\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n      offsetTop = 0,\n      winScroller = getWindowScrollingElement();\n\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n          scaleX = elMatrix.a,\n          scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n\n  return [offsetLeft, offsetTop];\n}\n/**\r\n * Returns the index of the object within the given array\r\n * @param  {Array} arr   Array that may or may not hold the object\r\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\r\n * @return {Number}      The index of the object in the array, or -1\r\n */\n\n\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n\n  return -1;\n}\n\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n\n  } while (elem = elem.parentNode);\n\n  return getWindowScrollingElement();\n}\n\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\n\nvar _throttleTimeout;\n\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n          _this = this;\n\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\n\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\n\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\n\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\n\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\n\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\n\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n      animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n\n        var fromRect = _objectSpread({}, animationStates[animationStates.length - 1].rect); // If animating: compensate for current animation\n\n\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n\n      var animating = false,\n          animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n            target = state.target,\n            fromRect = target.fromRect,\n            toRect = getRect(target),\n            prevFromRect = target.prevFromRect,\n            prevToRect = target.prevToRect,\n            animatingRect = state.rect,\n            targetMatrix = matrix(target, true);\n\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n\n        target.toRect = toRect;\n\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) && // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        } // if fromRect != toRect: animate\n\n\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n\n          if (!time) {\n            time = _this.options.animation;\n          }\n\n          _this.animate(target, animatingRect, toRect, time);\n        }\n\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n            scaleX = elMatrix && elMatrix.a,\n            scaleY = elMatrix && elMatrix.d,\n            translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n            translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\n\nfunction repaint(target) {\n  return target.offsetWidth;\n}\n\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n\n    this.eventCanceled = false;\n\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return; // Fire global events if it exists in this sortable\n\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread({\n          sortable: sortable\n        }, evt));\n      } // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n\n\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized; // Add default options from plugin\n\n      _extends(defaults, initialized.defaults);\n    });\n\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return; // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n      rootEl = _ref.rootEl,\n      name = _ref.name,\n      targetEl = _ref.targetEl,\n      cloneEl = _ref.cloneEl,\n      toEl = _ref.toEl,\n      fromEl = _ref.fromEl,\n      oldIndex = _ref.oldIndex,\n      newIndex = _ref.newIndex,\n      oldDraggableIndex = _ref.oldDraggableIndex,\n      newDraggableIndex = _ref.newDraggableIndex,\n      originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n      options = sortable.options,\n      onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1); // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n\n  var allEventProperties = _objectSpread({}, extraEventProperties, PluginManager.getEventProperties(name, sortable));\n\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      originalEvent = _ref.evt,\n      data = _objectWithoutProperties(_ref, [\"evt\"]);\n\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\n\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\n\nvar dragEl,\n    parentEl,\n    ghostEl,\n    rootEl,\n    nextEl,\n    lastDownEl,\n    cloneEl,\n    cloneHidden,\n    oldIndex,\n    newIndex,\n    oldDraggableIndex,\n    newDraggableIndex,\n    activeGroup,\n    putSortable,\n    awaitingDragStarted = false,\n    ignoreNextClick = false,\n    sortables = [],\n    tapEvt,\n    touchEvt,\n    lastDx,\n    lastDy,\n    tapDistanceLeft,\n    tapDistanceTop,\n    moved,\n    lastTarget,\n    lastDirection,\n    pastFirstInvertThresh = false,\n    isCircumstantialInvert = false,\n    targetMoveDistance,\n    // For positioning ghost absolutely\nghostRelativeParent,\n    ghostRelativeParentInitialScroll = [],\n    // (left, top)\n_silent = false,\n    savedInputChecked = [];\n/** @const */\n\nvar documentExists = typeof document !== 'undefined',\n    PositionGhostAbsolutely = IOS,\n    CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n    // This will not pass for IE9, because IE9 DnD only works on anchors\nsupportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n    supportCssPointerEvents = function () {\n  if (!documentExists) return; // false when <= IE11\n\n  if (IE11OrLess) {\n    return false;\n  }\n\n  var el = document.createElement('x');\n  el.style.cssText = 'pointer-events:auto';\n  return el.style.pointerEvents === 'auto';\n}(),\n    _detectDirection = function _detectDirection(el, options) {\n  var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n\n  if (elCSS.display === 'flex') {\n    return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n  }\n\n  if (elCSS.display === 'grid') {\n    return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n  }\n\n  if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n    var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n    return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n  }\n\n  return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n},\n    _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n  var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n  return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n},\n\n/**\n * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\n * @param  {Number} x      X position\n * @param  {Number} y      Y position\n * @return {HTMLElement}   Element of the first found nearest Sortable\n */\n_detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n  var ret;\n  sortables.some(function (sortable) {\n    if (lastChild(sortable)) return;\n    var rect = getRect(sortable),\n        threshold = sortable[expando].options.emptyInsertThreshold,\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n\n    if (threshold && insideHorizontally && insideVertically) {\n      return ret = sortable;\n    }\n  });\n  return ret;\n},\n    _prepareGroup = function _prepareGroup(options) {\n  function toFn(value, pull) {\n    return function (to, from, dragEl, evt) {\n      var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n\n      if (value == null && (pull || sameGroup)) {\n        // Default pull value\n        // Default pull and put value if same group\n        return true;\n      } else if (value == null || value === false) {\n        return false;\n      } else if (pull && value === 'clone') {\n        return value;\n      } else if (typeof value === 'function') {\n        return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n      } else {\n        var otherGroup = (pull ? to : from).options.group.name;\n        return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n      }\n    };\n  }\n\n  var group = {};\n  var originalGroup = options.group;\n\n  if (!originalGroup || _typeof(originalGroup) != 'object') {\n    originalGroup = {\n      name: originalGroup\n    };\n  }\n\n  group.name = originalGroup.name;\n  group.checkPull = toFn(originalGroup.pull, true);\n  group.checkPut = toFn(originalGroup.put);\n  group.revertClone = originalGroup.revertClone;\n  options.group = group;\n},\n    _hideGhostForTarget = function _hideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', 'none');\n  }\n},\n    _unhideGhostForTarget = function _unhideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', '');\n  }\n}; // #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\n\nif (documentExists) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\n\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\n\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n/**\n * @class  Sortable\n * @param  {HTMLElement}  el\n * @param  {Object}       [options]\n */\n\n\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n\n  this.el = el; // root element\n\n  this.options = options = _extends({}, options); // Export instance\n\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults); // Set default options\n\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n\n  _prepareGroup(options); // Bind all private methods\n\n\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  } // Setup drag mode\n\n\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  } // Bind events\n\n\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n\n  sortables.push(this.el); // Restore sorting\n\n  options.store && options.store.get && this.sort(options.store.get(this) || []); // Add animation state manager\n\n  _extends(this, AnimationStateManager());\n}\n\nSortable.prototype =\n/** @lends Sortable.prototype */\n{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart(\n  /** Event|TouchEvent */\n  evt) {\n    if (!evt.cancelable) return;\n\n    var _this = this,\n        el = this.el,\n        options = this.options,\n        preventOnFilter = options.preventOnFilter,\n        type = evt.type,\n        touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n        target = (touch || evt).target,\n        originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n        filter = options.filter;\n\n    _saveInputCheckedState(el); // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\n\n    if (dragEl) {\n      return;\n    }\n\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    } // cancel dnd if original target is content editable\n\n\n    if (originalTarget.isContentEditable) {\n      return;\n    }\n\n    target = closest(target, options.draggable, el, false);\n\n    if (target && target.animated) {\n      return;\n    }\n\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    } // Get the index of the dragged element within its parent\n\n\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable); // Check filter\n\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n\n      if (filter) {\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    } // Prepare `dragstart`\n\n\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch,\n  /** HTMLElement */\n  target) {\n    var _this = this,\n        el = _this.el,\n        options = _this.options,\n        ownerDocument = el.ownerDocument,\n        dragStartFn;\n\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n\n          return;\n        } // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n\n\n        _this._disableDelayedDragEvents();\n\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        } // Bind the events: dragstart/dragend\n\n\n        _this._triggerDragStart(evt, touch); // Drag start event\n\n\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        }); // Chosen item\n\n\n        toggleClass(dragEl, options.chosenClass, true);\n      }; // Disable \"draggable\"\n\n\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mouseup', _this._onDrop);\n      on(ownerDocument, 'touchend', _this._onDrop);\n      on(ownerDocument, 'touchcancel', _this._onDrop); // Make dragEl draggable (must be before delay for FireFox)\n\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n\n      pluginEvent('delayStart', this, {\n        evt: evt\n      }); // Delay is impossible for native DnD in Edge or IE\n\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n\n          return;\n        } // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n\n\n        on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler(\n  /** TouchEvent|PointerEvent **/\n  e) {\n    var touch = e.touches ? e.touches[0] : e;\n\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n\n    awaitingDragStarted = false;\n\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n\n      var options = this.options; // Apply effect\n\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost(); // Drag start event\n\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n\n      _hideGhostForTarget();\n\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n\n          target = parent; // store last element\n        }\n        /* jshint boss:true */\n        while (parent = parent.parentNode);\n      }\n\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove(\n  /**TouchEvent*/\n  evt) {\n    if (tapEvt) {\n      var options = this.options,\n          fallbackTolerance = options.fallbackTolerance,\n          fallbackOffset = options.fallbackOffset,\n          touch = evt.touches ? evt.touches[0] : evt,\n          ghostMatrix = ghostEl && matrix(ghostEl, true),\n          scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n          scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n          relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n          dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n          dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1); // only set the status to dragging, when we are actually dragging\n\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n\n        this._onDragStart(evt, true);\n      }\n\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n          rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n          options = this.options; // Position absolutely\n\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl); // Set transform-origin\n\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart(\n  /**Event*/\n  evt,\n  /**boolean*/\n  fallback) {\n    var _this = this;\n\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n\n      return;\n    }\n\n    pluginEvent('setupClone', this);\n\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n\n      this._hideClone();\n\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    } // #1143: IFrame support workaround\n\n\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n\n      _this._hideClone();\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true); // Set proper drop events\n\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n\n      on(document, 'drop', _this); // #1276 fix:\n\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        target = evt.target,\n        dragRect,\n        targetRect,\n        revert,\n        options = this.options,\n        group = options.group,\n        activeSortable = Sortable.active,\n        isOwner = activeGroup === group,\n        canSort = options.sort,\n        fromSortable = putSortable || activeSortable,\n        vertical,\n        _this = this,\n        completedFired = false;\n\n    if (_silent) return;\n\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    } // Capture animation state\n\n\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n\n      _this.captureAnimationState();\n\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    } // Return invocation when dragEl is inserted (or completed)\n\n\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        } // Animation\n\n\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      } // Null lastTarget if it is not inside a previously swapped element\n\n\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      } // no bubbling and not fallback\n\n\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target); // Do not detect for empty insert if already inserted\n\n\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    } // Call when dragEl has been inserted\n\n\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n\n    ignoreNextClick = false;\n\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n\n      if (revert) {\n        parentEl = rootEl; // actualization\n\n        capture();\n\n        this._hideClone();\n\n        dragOverEvent('revert');\n\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n\n        return completed(true);\n      }\n\n      var elLastChild = lastChild(el, options.draggable);\n\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        } // assign target only if condition is true\n\n\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n\n        if (target) {\n          targetRect = getRect(target);\n        }\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          el.appendChild(dragEl);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n            targetBeforeFirstSwap,\n            differentLevel = dragEl.parentNode !== el,\n            differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n            side1 = vertical ? 'top' : 'left',\n            scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n            scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        } // If dragEl is already beside target: Do not insert\n\n\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n            after = false;\n        after = direction === 1;\n\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          } // Undo chrome's scroll adjustment (has no effect on other browsers)\n\n\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n\n          parentEl = dragEl.parentNode; // actualization\n          // must be done before animation\n\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n\n          changed();\n          return completed(true);\n        }\n      }\n\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        options = this.options; // Get the index of the dragged element within its parent\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode; // Get again after plugin event\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n\n    if (Sortable.eventCanceled) {\n      this._nulling();\n\n      return;\n    }\n\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n\n    _cancelNextTick(this.cloneId);\n\n    _cancelNextTick(this._dragStartId); // Unbind events\n\n\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n\n    this._offMoveEvents();\n\n    this._offUpEvents();\n\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n\n    css(dragEl, 'transform', '');\n\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n\n        _disableDraggable(dragEl);\n\n        dragEl.style['will-change'] = ''; // Remove classes\n        // ghostClass is added in dragStarted\n\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n\n        toggleClass(dragEl, this.options.chosenClass, false); // Drag stop event\n\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            }); // Remove event\n\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            }); // drag from one list and drop into another\n\n\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          }); // Save sorting\n\n\n          this.save();\n        }\n      }\n    }\n\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent(\n  /**Event*/\n  evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n\n        break;\n\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n\n          _globalDragOver(evt);\n        }\n\n        break;\n\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n\n  /**\n   * Serializes the item into an array of string.\n   * @returns {String[]}\n   */\n  toArray: function toArray() {\n    var order = [],\n        el,\n        children = this.el.children,\n        i = 0,\n        n = children.length,\n        options = this.options;\n\n    for (; i < n; i++) {\n      el = children[i];\n\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n\n    return order;\n  },\n\n  /**\n   * Sorts the elements according to the array.\n   * @param  {String[]}  order  order of the items\n   */\n  sort: function sort(order) {\n    var items = {},\n        rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n  },\n\n  /**\n   * Save the current sorting\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n\n  /**\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n   * @param   {HTMLElement}  el\n   * @param   {String}       [selector]  default: `options.draggable`\n   * @returns {HTMLElement|null}\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n\n  /**\n   * Set/get option\n   * @param   {string} name\n   * @param   {*}      [value]\n   * @returns {*}\n   */\n  option: function option(name, value) {\n    var options = this.options;\n\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n\n  /**\n   * Destroy\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    } // Remove draggable attributes\n\n\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n\n    this._onDrop();\n\n    this._disableDelayedDragEvents();\n\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n\n      return;\n    }\n\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return; // show clone at dragEl or original position\n\n      if (rootEl.contains(dragEl) && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\n\nfunction _globalDragOver(\n/**Event*/\nevt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n\n  evt.cancelable && evt.preventDefault();\n}\n\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n      sortable = fromEl[expando],\n      onMoveFn = sortable.options.onMove,\n      retVal; // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n\n  return retVal;\n}\n\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\n\nfunction _unsilent() {\n  _silent = false;\n}\n\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var rect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var spacer = 10;\n  return vertical ? evt.clientX > rect.right + spacer || evt.clientX <= rect.right && evt.clientY > rect.bottom && evt.clientX >= rect.left : evt.clientX > rect.right && evt.clientY > rect.top || evt.clientX <= rect.right && evt.clientY > rect.bottom + spacer;\n}\n\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n      targetLength = vertical ? targetRect.height : targetRect.width,\n      targetS1 = vertical ? targetRect.top : targetRect.left,\n      targetS2 = vertical ? targetRect.bottom : targetRect.right,\n      invert = false;\n\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n\n  invert = invert || invertSwap;\n\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n\n  return 0;\n}\n/**\n * Gets the direction dragEl must be swapped relative to target in order to make it\n * seem that dragEl has been \"inserted\" into that element's position\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\n * @return {Number}                   Direction dragEl must be swapped\n */\n\n\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n/**\n * Generate id\n * @param   {HTMLElement} el\n * @returns {String}\n * @private\n */\n\n\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n      i = str.length,\n      sum = 0;\n\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n\n  return sum.toString(36);\n}\n\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\n\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\n\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n} // Fixed #973:\n\n\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n} // Export utils\n\n\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild\n};\n/**\n * Get the Sortable instance of an element\n * @param  {HTMLElement} element The element\n * @return {Sortable|undefined}         The instance of Sortable\n */\n\nSortable.get = function (element) {\n  return element[expando];\n};\n/**\n * Mount a plugin to Sortable\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\n */\n\n\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n\n    if (plugin.utils) Sortable.utils = _objectSpread({}, Sortable.utils, plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n/**\n * Create sortable instance\n * @param {HTMLElement}  el\n * @param {Object}      [options]\n */\n\n\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n}; // Export\n\n\nSortable.version = version;\n\nvar autoScrolls = [],\n    scrollEl,\n    scrollRootEl,\n    scrolling = false,\n    lastAutoScrollX,\n    lastAutoScrollY,\n    touchEvt$1,\n    pointerElemChangedInterval;\n\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    }; // Bind all private methods\n\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n          y = (evt.touches ? evt.touches[0] : evt).clientY,\n          elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt; // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n\n      if (fallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback); // Listener for pointer element change\n\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval(); // Detect for pointer elem change, emulating native DnD behaviour\n\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\n\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\n\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\n\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n      y = (evt.touches ? evt.touches[0] : evt).clientY,\n      sens = options.scrollSensitivity,\n      speed = options.scrollSpeed,\n      winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n      scrollCustomFn; // New scroll root, set scrollEl\n\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n\n  var layersOut = 0;\n  var currentParent = scrollEl;\n\n  do {\n    var el = currentParent,\n        rect = getRect(el),\n        top = rect.top,\n        bottom = rect.bottom,\n        left = rect.left,\n        right = rect.right,\n        width = rect.width,\n        height = rect.height,\n        canScrollX = void 0,\n        canScrollY = void 0,\n        scrollWidth = el.scrollWidth,\n        scrollHeight = el.scrollHeight,\n        elCSS = css(el),\n        scrollPosX = el.scrollLeft,\n        scrollPosY = el.scrollTop;\n\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n\n          }\n\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      dragEl = _ref.dragEl,\n      activeSortable = _ref.activeSortable,\n      dispatchSortableEvent = _ref.dispatchSortableEvent,\n      hideGhostForTarget = _ref.hideGhostForTarget,\n      unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\n\nfunction Revert() {}\n\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n        putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n\n    this.sortable.animateAll();\n\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\n\nfunction Remove() {}\n\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n        putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\n\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n          target = _ref2.target,\n          onMove = _ref2.onMove,\n          activeSortable = _ref2.activeSortable,\n          changed = _ref2.changed,\n          cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n          options = this.options;\n\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n          putSortable = _ref3.putSortable,\n          dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\n\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n      p2 = n2.parentNode,\n      i1,\n      i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n    multiDragClones = [],\n    lastMultiDragSelect,\n    // for selection with modifier key down (SHIFT)\nmultiDragSortable,\n    initialFolding = false,\n    // Initial multi-drag fold when drag started\nfolding = false,\n    // Folding any other time\ndragStarted = false,\n    dragEl$1,\n    clonesFromRect,\n    clonesHidden;\n\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n\n    if (sortable.options.supportPointer) {\n      on(document, 'pointerup', this._deselectMultiDrag);\n    } else {\n      on(document, 'mouseup', this._deselectMultiDrag);\n      on(document, 'touchend', this._deselectMultiDrag);\n    }\n\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n          cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n\n      sortable._hideClone();\n\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n          rootEl = _ref3.rootEl,\n          dispatchSortableEvent = _ref3.dispatchSortableEvent,\n          cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n          rootEl = _ref4.rootEl,\n          cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n\n      var sortable = _ref5.sortable,\n          cloneNowHidden = _ref5.cloneNowHidden,\n          cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      }); // Sort multi-drag elements\n\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n        sortable.captureAnimationState();\n\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        } // Remove all auxiliary multidrag items from el, if sorting enabled\n\n\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n          completed = _ref8.completed,\n          cancel = _ref8.cancel;\n\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n          rootEl = _ref9.rootEl,\n          sortable = _ref9.sortable,\n          dragRect = _ref9.dragRect;\n\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n          isOwner = _ref10.isOwner,\n          insertion = _ref10.insertion,\n          activeSortable = _ref10.activeSortable,\n          parentEl = _ref10.parentEl,\n          putSortable = _ref10.putSortable;\n      var options = this.options;\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n\n        initialFolding = false; // If leaving sort:false root, or already folding - Fold to new location\n\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute); // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        } // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n\n\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n\n            activeSortable._showClone(sortable); // Unfold animation for clones if showing from hidden\n\n\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n          isOwner = _ref11.isOwner,\n          activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n          rootEl = _ref12.rootEl,\n          parentEl = _ref12.parentEl,\n          sortable = _ref12.sortable,\n          dispatchSortableEvent = _ref12.dispatchSortableEvent,\n          oldIndex = _ref12.oldIndex,\n          putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n          children = parentEl.children; // Multi-drag selection\n\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvt: evt\n          }); // Modifier activated, select from last to dragEl\n\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n                currentIndex = index(dragEl$1);\n\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n              // (but previous selection existed)\n              var n, i;\n\n              if (currentIndex > lastIndex) {\n                i = lastIndex;\n                n = currentIndex;\n              } else {\n                i = currentIndex;\n                n = lastIndex + 1;\n              }\n\n              for (; i < n; i++) {\n                if (~multiDragElements.indexOf(children[i])) continue;\n                toggleClass(children[i], options.selectedClass, true);\n                multiDragElements.push(children[i]);\n                dispatchEvent({\n                  sortable: sortable,\n                  rootEl: rootEl,\n                  name: 'select',\n                  targetEl: children[i],\n                  originalEvt: evt\n                });\n              }\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvt: evt\n          });\n        }\n      } // Multi-drag drop\n\n\n      if (dragStarted && this.isMultiDrag) {\n        // Do not \"unfold\" after around dragEl if reverted\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n              multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect; // Prepare unfold animation\n\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            } // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n\n\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n\n              multiDragIndex++;\n            }); // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n\n              if (update) {\n                dispatchSortableEvent('update');\n              }\n            }\n          } // Must be done after capturing individual rects (scroll bar)\n\n\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n\n        multiDragSortable = toSortable;\n      } // Remove clones if necessary\n\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return; // Only deselect if selection is in this sortable\n\n      if (multiDragSortable !== this.sortable) return; // Only deselect if target is not item in this sortable\n\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return; // Only deselect if left click\n\n      if (evt && evt.button !== 0) return;\n\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvt: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n\n          multiDragSortable = sortable;\n        }\n\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n            index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n\n      var oldIndicies = [],\n          newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        }); // multiDragElements will already be sorted if folding\n\n        var newIndex;\n\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n\n        return key;\n      }\n    }\n  });\n}\n\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\n\n\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\n\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n","(function(module) {\n    'use strict';\n\n    module.exports.is_uri = is_iri;\n    module.exports.is_http_uri = is_http_iri;\n    module.exports.is_https_uri = is_https_iri;\n    module.exports.is_web_uri = is_web_iri;\n    // Create aliases\n    module.exports.isUri = is_iri;\n    module.exports.isHttpUri = is_http_iri;\n    module.exports.isHttpsUri = is_https_iri;\n    module.exports.isWebUri = is_web_iri;\n\n\n    // private function\n    // internal URI spitter method - direct from RFC 3986\n    var splitUri = function(uri) {\n        var splitted = uri.match(/(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?/);\n        return splitted;\n    };\n\n    function is_iri(value) {\n        if (!value) {\n            return;\n        }\n\n        // check for illegal characters\n        if (/[^a-z0-9\\:\\/\\?\\#\\[\\]\\@\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=\\.\\-\\_\\~\\%]/i.test(value)) return;\n\n        // check for hex escapes that aren't complete\n        if (/%[^0-9a-f]/i.test(value)) return;\n        if (/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)) return;\n\n        var splitted = [];\n        var scheme = '';\n        var authority = '';\n        var path = '';\n        var query = '';\n        var fragment = '';\n        var out = '';\n\n        // from RFC 3986\n        splitted = splitUri(value);\n        scheme = splitted[1]; \n        authority = splitted[2];\n        path = splitted[3];\n        query = splitted[4];\n        fragment = splitted[5];\n\n        // scheme and path are required, though the path can be empty\n        if (!(scheme && scheme.length && path.length >= 0)) return;\n\n        // if authority is present, the path must be empty or begin with a /\n        if (authority && authority.length) {\n            if (!(path.length === 0 || /^\\//.test(path))) return;\n        } else {\n            // if authority is not present, the path must not start with //\n            if (/^\\/\\//.test(path)) return;\n        }\n\n        // scheme must begin with a letter, then consist of letters, digits, +, ., or -\n        if (!/^[a-z][a-z0-9\\+\\-\\.]*$/.test(scheme.toLowerCase()))  return;\n\n        // re-assemble the URL per section 5.3 in RFC 3986\n        out += scheme + ':';\n        if (authority && authority.length) {\n            out += '//' + authority;\n        }\n\n        out += path;\n\n        if (query && query.length) {\n            out += '?' + query;\n        }\n\n        if (fragment && fragment.length) {\n            out += '#' + fragment;\n        }\n\n        return out;\n    }\n\n    function is_http_iri(value, allowHttps) {\n        if (!is_iri(value)) {\n            return;\n        }\n\n        var splitted = [];\n        var scheme = '';\n        var authority = '';\n        var path = '';\n        var port = '';\n        var query = '';\n        var fragment = '';\n        var out = '';\n\n        // from RFC 3986\n        splitted = splitUri(value);\n        scheme = splitted[1]; \n        authority = splitted[2];\n        path = splitted[3];\n        query = splitted[4];\n        fragment = splitted[5];\n\n        if (!scheme)  return;\n\n        if(allowHttps) {\n            if (scheme.toLowerCase() != 'https') return;\n        } else {\n            if (scheme.toLowerCase() != 'http') return;\n        }\n\n        // fully-qualified URIs must have an authority section that is\n        // a valid host\n        if (!authority) {\n            return;\n        }\n\n        // enable port component\n        if (/:(\\d+)$/.test(authority)) {\n            port = authority.match(/:(\\d+)$/)[0];\n            authority = authority.replace(/:\\d+$/, '');\n        }\n\n        out += scheme + ':';\n        out += '//' + authority;\n        \n        if (port) {\n            out += port;\n        }\n        \n        out += path;\n        \n        if(query && query.length){\n            out += '?' + query;\n        }\n\n        if(fragment && fragment.length){\n            out += '#' + fragment;\n        }\n        \n        return out;\n    }\n\n    function is_https_iri(value) {\n        return is_http_iri(value, true);\n    }\n\n    function is_web_iri(value) {\n        return (is_http_iri(value) || is_https_iri(value));\n    }\n\n})(module);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import _createElement from \"./utils/createElement\";\nimport addItem from \"./utils/addItem\";\nimport addValidator from \"json-schema-library/lib/addValidator\";\nimport createProxy from \"./utils/createProxy\";\nimport DataService from \"./services/dataservice\";\nimport gp from \"gson-pointer\";\nimport { translate, translateError } from \"./utils/i18n\";\nimport InstanceService from \"./services/InstanceService\";\nimport jsonSchemaLibrary from \"json-schema-library\";\nimport LocationService, { Options as LocationServiceOptions } from \"./services/LocationService\";\nimport plugin, { Plugin } from \"./plugin\";\nimport SchemaService from \"./services/SchemaService\";\nimport selectEditor from \"./utils/selectEditor\";\nimport { getState as getGlobalState } from \"./store/global\";\nimport Store from \"./store\";\nimport UISchema from \"./utils/UISchema\";\nimport ValidationService from \"./services/ValidationService\";\nimport { Editor, EditorPlugin, SetEnabledEvent } from \"./editors/Editor\";\nimport { Foxy, Options as ProxyOptions } from \"@technik-sde/foxy\";\nimport { JSONPointer, JSONSchema, JSONData, FormatValidator, KeywordValidator, ValidationError } from \"./types\";\n\nimport oneOfEditor from \"./editors/oneofeditor\";\nimport arrayEditor from \"./editors/arrayeditor\";\nimport objectEditor from \"./editors/objecteditor\";\nimport valueEditor from \"./editors/valueeditor\";\n\n\nconst { JsonEditor: Core } = jsonSchemaLibrary.cores;\n\nexport type i18nFunction = (object?) => string;\nexport type i18nErrorFunction = (controller: Controller, error: ValidationError) => string;\n\n\nexport type Options = {\n    /** print debug messages */\n    log?: boolean;\n    /** list of editors to use, replaces plugin and default editors */\n    editors?: Array<EditorPlugin>;\n    /** set to false, to exclude default base-editors (object, array, values). Defaults to true */\n    addDefaultEditors?: boolean;\n    /** proxy configuration for data and image retrieval */\n    proxy?: ProxyOptions|Foxy;\n    /** list of plugins to use */\n    plugins?: Array<Plugin>;\n    /** configuration of location service */\n    locationService?: LocationServiceOptions;\n    /** string mapping values */\n    i18n?: {\n        strings?: { [p: string]: string | i18nFunction };\n        errors?: { [p: string]: string | i18nErrorFunction };\n    }\n};\n\n\nexport type Services = {\n    instances: InstanceService;\n    data: DataService;\n    validation: ValidationService;\n    schema: SchemaService;\n    location: LocationService;\n}\n\n\n/**\n * Main component to build editors. Each editor should receive the controller, which carries all required services\n * for editor initialization\n *\n * # Usage\n *\n * Instantiate the controller\n *\n * ```js\n * import Controller from \"editron\";\n * // jsonSchema = { type: \"object\", required: [\"title\"], properties: { title: { type: \"string\" } } }\n * const editron = new Controller(jsonSchema);\n * ```\n *\n * or, using all parameters\n *\n * ```js\n *  import Controller from \"editron\";\n *  // jsonSchema = { type: \"object\", required: [\"title\"], properties: { title: { type: \"string\" } } }\n *  // data = { title: \"Hello\" } - or simply use {}\n *  // options = { editors: [ complete list of custom editors ] }\n *  const editron = new Controller(jsonSchema, data, options);\n * ```\n *\n * and start rendering editors\n *\n * ```js\n *  const editor = editron.createEditor(\"#\", document.querySelector(\"#editor\"));\n *  // render from title only: editron.createEditor(\"#/title\", document.querySelector(\"#title\"));\n * ```\n *\n * to fetch the generated data use\n *\n * ```js\n *  const data = editron.getData();\n * ```\n */\nexport default class Controller {\n    core;\n    /** internal helper. Set to `true`, if editron has been destroyed */\n    destroyed = false;\n    /** active state of editor */\n    disabled = false;\n    /** list of editor-widgets to generate form for this instance */\n    editors: Array<EditorPlugin> = [];\n    /** set to true,  */\n    addDefaultEditors: boolean;\n    /** final options used by this editron instance */\n    options: Options;\n    /** list of active plugins for this instance */\n    plugins: Array<Plugin> = [];\n    /** list instantiated services */\n    services: Services;\n    /** current state of errors, ui and data */\n    store: Store;\n    /** editron proxy instance */\n    #proxy: Foxy;\n\n\n    /**\n     * Create a new editron instance, which will be used to create ui-forms for specific\n     * data-points via `controller.createEditor(pointer, dom);`\n     *\n     * @param [schema] - json schema describing required data/form template\n     * @param [data] - initial data for given json-schema\n     * @param [options] - configuration options\n     * @param [options.editors] - list of editron-editors/widgets to use. Order defines editor to use\n     *      (based on editorOf-method)\n     * @param [options.plugins] - list of editron-plugins to use\n     */\n    constructor(schema: JSONSchema = { type: \"object\" }, data: JSONData = {}, options: Options = {}) {\n        schema = UISchema.extendSchema(schema);\n\n        this.options = {\n            editors: [],\n            addDefaultEditors: true,\n            ...options\n        };\n\n        if (this.options.addDefaultEditors) {\n            this.registerEditor(oneOfEditor, arrayEditor, objectEditor, valueEditor);\n        }\n        this.registerEditor(...plugin.getEditors());\n        if (Array.isArray(this.options.editors)) {\n            this.registerEditor(...this.options.editors);\n        }\n\n        this.store = new Store();\n        this.core = new Core();\n        this.#proxy = createProxy(this.options.proxy);\n\n        // add strings and functions for translation\n        if (this.options.i18n?.strings) {\n            Object.assign(translate.strings, this.options.i18n.strings);\n        }\n        if (this.options.i18n?.errors) {\n            Object.assign(translateError.strings, this.options.i18n.errors);\n        }\n\n        plugin.getValidators().forEach(([validationType, ...validator]) => {\n            try {\n                if (validationType === \"format\") {\n                    // @ts-ignore\n                    return this.addFormatValidator(...validator);\n                } else if (validationType === \"keyword\") {\n                    // @ts-ignore\n                    return this.addKeywordValidator(...validator);\n                }\n                throw new Error(`Unknown validation type '${validationType}'`);\n\n            } catch (e) {\n                console.log(\"Error:\", e.message);\n            }\n\n            return false;\n        });\n\n        this.services = {\n           instances: new InstanceService(this),\n           location: new LocationService(this.options.locationService),\n           data: new DataService(this.store),\n           schema: new SchemaService(schema, data, this.core),\n           validation: new ValidationService(this.store, schema, this.core)\n        };\n\n        this.service(\"data\").watch(event => {\n            switch (event.type) {\n                // update container will be called before any editor change-notification this gives us time,\n                // to manage update-pointer and destory events of known editors\n                case \"data:update:container\":\n                    this.services.instances.updateContainer(event.value.pointer, this, event.value.changes);\n                    break;\n\n                // sync latest data and start validation\n                case \"data:update:after\": {\n                    let { pointer } = event.value;\n                    this.service(\"schema\").setData(this.service(\"data\").get());\n                    // @feature selective-validation\n                    if (pointer.includes(\"/\")) {\n                        // @attention validate parent-object or array, in order to support parent-validators.\n                        // any higher validators will still be ignore\n                        pointer = pointer.replace(/\\/[^/]+$/, \"\");\n                    }\n                    setTimeout(() => {\n                        const data = this.service(\"data\").getDataByReference();\n                        this.destroyed !== true && this.service(\"validation\").validate(data, pointer);\n                    });\n                    break;\n                }\n\n                case \"data:update:done\":\n                    setTimeout(() => this.notifyPlugins(\"onModifiedData\", event.value));\n                    break;\n            }\n        });\n\n        // merge given data with template data and set initial data\n        this.setData(data);\n        this.resetUndoRedo();\n\n        // enable i18n error-translations\n        this.service(\"validation\").setErrorHandler(error => translateError(this, error));\n        // run initial validation\n        this.validateAll();\n\n        // @lifecycle hook initialize on controller ready\n        if (Array.isArray(options.plugins)) {\n            this.plugins = options.plugins.map(plugin => plugin.initialize(this));\n        }\n    }\n\n    service<T extends keyof Services>(serviceName: T): Services[T] {\n        return this.services[serviceName];\n    }\n\n    getPlugin(pluginId: string): Plugin {\n        return this.plugins.find(plugin => plugin.id === pluginId);\n    }\n\n    notifyPlugins(method: string, ...args) {\n        this.plugins.forEach(plugin => {\n            if (plugin[method]) {\n                plugin[method](...args);\n            }\n        });\n    }\n\n    /**\n     * @param format - value of _format_\n     * @param validator  - validator function receiving (core, schema, value, pointer). Return `undefined`\n     *      for a valid _value_ and an object `{type: \"error\", message: \"err-msg\", data: { pointer }}` as error. May\n     *      als return a promise\n     */\n    addFormatValidator(format: string, validator: FormatValidator): void {\n        addValidator.format(this.core, format, validator);\n    }\n\n    /**\n     * @param datatype - JSON-Schema datatype to register attribute, e.g. \"string\" or \"object\"\n     * @param keyword - custom keyword\n     * @param validator - validator function receiving (core, schema, value, pointer). Return `undefined`\n     *      for a valid _value_ and an object `{type: \"error\", message: \"err-msg\", data: { pointer }}` as error. May\n     *      als return a promise\n     */\n    addKeywordValidator(datatype: string, keyword: string, validator: KeywordValidator): void {\n        addValidator.keyword(this.core, datatype, keyword, validator);\n    }\n\n    /** reset undo history */\n    resetUndoRedo(): void {\n        this.service(\"data\").resetUndoRedo();\n    }\n\n    /**\n     * enable or disable the editor input-interaction\n     * @param active if false, deactivates editor\n     */\n    setActive(active = true) : void{\n        const disabled = active === false;\n        if (this.disabled === disabled) {\n            return;\n        }\n        this.disabled = disabled;\n        this.service(\"instances\").setActive(!this.disabled);\n    }\n\n    /** returns the editors active state */\n    isActive(): boolean {\n        return !this.disabled;\n    }\n\n    /**\n     * Helper to create dom elements via mithril syntax\n     * @param selector - a css selector describing the desired element\n     * @param attributes - a map of dom attribute:value of the element (reminder className = class)\n     * @returns the resulting dom-element (not attached)\n     */\n    createElement(selector: string, attributes?): HTMLElement { // eslint-disable-line class-methods-use-this\n        return _createElement(selector, attributes);\n    }\n\n    /**\n     * Add additional editors to available editors for json-schema rendering.\n     * Note, that order is important. First editor to register, will be\n     * selected first. Registered editors will be added to start of list.\n     * @param editors one or many editors to add to start of editor-list\n     */\n    registerEditor(...editors: Array<EditorPlugin>) {\n        this.editors = [...editors, ...this.editors];\n    }\n\n    /**\n     * @throws\n     * The only entry point to create editors.\n     * Use in application and from editors to create (delegate) child editors\n     *\n     * @param pointer - data pointer to editor in current state\n     * @param element - parent element of create editor. Will be appended automatically\n     * @param [options] - individual editor options\n     * @returns created editor-instance or undefined;\n     */\n    createEditor(pointer: JSONPointer, element: HTMLElement, options?): Editor|undefined {\n        assertValidPointer(pointer);\n        if (element == null) {\n            throw new Error(`Missing ${pointer == null ? \"pointer\" : \"element\"} in createEditor`);\n        }\n\n        // merge schema[\"editron:ui\"] object with options. options precede\n        const instanceOptions = {\n            pointer,\n            disabled: this.disabled,\n            ...UISchema.copyOptions(pointer, this),\n            ...options\n        };\n\n        instanceOptions.attrs = {\n            // \"data-title\": instanceOptions.title,\n            ...instanceOptions.attrs\n        };\n\n        // find a matching editor\n        const EditorConstructor = selectEditor(this.editors, pointer, this, instanceOptions);\n        if (EditorConstructor === false) {\n            return undefined;\n        }\n\n        if (EditorConstructor === undefined) {\n            this.options.log && console.warn(`Could not resolve an editor for ${pointer}`, this.service(\"schema\").get(pointer));\n            return undefined;\n        }\n\n        // @lifecycle hook to modify options\n        this.plugins.filter(plugin => plugin.onEditorOptions)\n            .forEach(plugin => plugin.onEditorOptions(pointer, instanceOptions));\n\n        // iniitialize editor and notify instance manager\n        const editor = new EditorConstructor(pointer, this, instanceOptions);\n        const dom = editor.getElement();\n        element.appendChild(dom);\n        this.services.instances.add(editor);\n        editor.update(<SetEnabledEvent>{ type: \"active\", value: !instanceOptions.disabled });\n\n        // @lifecycle hook create widget\n        this.plugins.filter(plugin => plugin.onCreateEditor)\n            .forEach(plugin => plugin.onCreateEditor(pointer, editor, instanceOptions));\n\n        return editor;\n    }\n\n    /**\n     * Call this method, to destroy your editors, deregistering its instance on editron\n     * @param editor - editor instance to remove\n     */\n    destroyEditor(editor: Editor): void {\n        if (!editor) {\n            return;\n        }\n\n        // @lifecycle hook destroy widget\n        this.plugins.filter(plugin => plugin.onDestroyEditor)\n            .forEach(plugin => plugin.onDestroyEditor(editor.getPointer(), editor));\n\n        this.services.instances.remove(editor);\n\n        // controller inserted child and removes it here again\n        const $element = editor.getElement();\n        $element?.parentNode?.removeChild($element);\n        editor.destroy();\n    }\n\n    /**\n     * Request to insert a child item (within the data) at the given pointer. If multiple options are present, a\n     * dialogue is opened to let the user select the appropriate type of child (oneof).\n     * @param pointer - to array on which to insert the child\n     * @param index - index within array, where the child should be inserted (does not replace). Default: 0\n     */\n    addItemTo(pointer: JSONPointer, index = 0): void {\n        addItem(this.service(\"data\"), this.service(\"schema\"), this.services.location, pointer, index);\n        // @todo this might be a wrong falsy check within gson-pointer\n        this.services.location.focusInputElement(gp.join(pointer, `${index}`, true));\n    }\n\n    /**\n     * @returns proxy instance\n     */\n    proxy(): Foxy { return this.#proxy; }\n\n    /**\n     * Set the application data\n     * @param data - json data matching registered json-schema\n     */\n    setData(data: JSONData, options?): void {\n        data = this.service(\"schema\").addDefaultData(data);\n        this.service(\"data\").set(\"#\", data, options);\n    }\n\n    /**\n     * @param [pointer=\"#\"] - location of data to fetch. Defaults to root (all) data\n     * @returns data at the given location\n     */\n    getData(pointer: JSONPointer = \"#\"): JSONData {\n        return this.service(\"data\").get(pointer);\n    }\n\n    /**\n     * Change the new schema for the current data\n     * @param schema   - a valid json-schema\n     */\n    setSchema(schema: JSONSchema): void {\n        schema = UISchema.extendSchema(schema);\n        this.service(\"validation\").set(schema);\n        this.service(\"schema\").setSchema(schema);\n    }\n\n    getSchema(pointer?: JSONPointer): JSONSchema {\n        return this.service(\"schema\").get(pointer);\n    }\n\n    /** @debug return editron and global-state */\n    getStates() {\n        return [this.store.getState(), getGlobalState()];\n    }\n\n    /** returns the parent editor */\n    getParentEditor(editor: Editor): Editor|undefined {\n        let node = editor.getElement();\n        while (node.parentNode !== null && node.parentNode !== document.body) {\n            node = <HTMLElement>node.parentNode;\n            if (node.dataset.point) {\n                return this.service(\"instances\").editorFromElement(node);\n            }\n        }\n    }\n\n    /** returns the root editor of the editor tree */\n    getRootEditor(editor: Editor): Editor|undefined {\n        let node = editor.getElement();\n        let root = node;\n        while (node.parentNode !== null && node.parentNode !== document.body) {\n            node = <HTMLElement>node.parentNode;\n            if (node.dataset.point) {\n                root = node;\n            }\n        }\n        return this.service(\"instances\").editorFromElement(root);\n    }\n\n    /** start validation of current data */\n    validateAll(): void {\n        setTimeout(() =>\n            this.destroyed !== true && this.service(\"validation\").validate(this.service(\"data\").getDataByReference())\n        );\n    }\n\n    /** Destroy the editor, its widgets and services */\n    destroy(): void {\n        if (this.destroyed === true) {\n            return;\n        }\n        this.destroyed = true;\n        Object.keys(this.services).forEach(id => this.services[id].destroy());\n    }\n}\n\n\n/** throws an error, when given pointer is not a valid jons-pointer */\nfunction assertValidPointer(pointer: JSONPointer): void {\n    if (pointer == null || pointer[0] !== \"#\") {\n        throw new Error(`Invalid json(schema)-pointer: ${pointer}`);\n    }\n}\n","import m from \"mithril\";\nimport { Button } from \"mithril-material-forms\";\n\n\nexport type ActionItem = string|number;\n\n\nexport type Action = {\n    /** material icon */\n    icon: string;\n    /** title */\n    title?: string;\n    /** additional css-classes separated by whitespace */\n    classNames?: string;\n    /** action */\n    action: () => void;\n    /** return true, to disable action */\n    disabled: () => boolean;\n}\n\n\nexport function renderAction(action: Action): m.Vnode {\n    return m(Button,\n        {\n            class: action.classNames,\n            disabled: action.disabled(),\n            onclick: () => action.action()\n        },\n        m(\"i.mmf-icon\", action.icon),\n        action.title && m(\"span\", action.title)\n    );\n}\n\n","import m from\"mithril\";\nimport Header, { Attrs as HeaderAttrs } from\"../header\";\nimport Errors, { Attrs as ErrorAttrs } from\"../errors\";\nimport Description, { Attrs as DescriptionAttrs } from\"../description\";\nimport { Action, renderAction } from \"../actions\";\n\n\nexport const CHILD_CONTAINER_SELECTOR = \".ed-children\";\n\n\nexport type Attrs = HeaderAttrs & DescriptionAttrs & ErrorAttrs & {\n    /** Add an insert action, after child-list. Mainly used for arrays */\n    insertAction?: Action\n};\n\n\n/**\n * @view ContainerView\n * A Container Component is used for any non-value like object or arrays. They hold other values. This group may expose\n * a group-title and errors. Any childnodes must go to the container '.jed-container__children'.\n */\nexport default {\n\n    getChildContainer($element: HTMLElement) {\n        const $childContainer = $element.querySelector(CHILD_CONTAINER_SELECTOR);\n        if ($childContainer == null) {\n            throw new Error(\"Container-Component hast not yet been rendered\");\n        }\n        return $childContainer;\n    },\n\n    view(vnode) {\n        const { hideTitle, insertAction } = vnode.attrs;\n\n        return [\n            hideTitle === true ? null : m(Header, vnode.attrs),\n            m(Description, vnode.attrs),\n            vnode.children,\n            m(Errors, vnode.attrs),\n            m(CHILD_CONTAINER_SELECTOR),\n            insertAction && m(\".ed-separator.mmf-row\", renderAction(insertAction)),\n        ];\n    }\n\n} as m.Component<Attrs>;\n","import m from \"mithril\";\nimport populated from \"../../utils/populated\";\n\n\nexport type Attrs = {\n    description?: string;\n}\n\n\nexport default {\n    view(vnode) {\n        return populated(vnode.attrs.description,\n            m(\".ed-description.mmf-meta\", m.trust(vnode.attrs.description))\n        );\n    }\n\n} as m.Component<Attrs>;\n","import m from \"mithril\";\nimport { ValidationError } from \"../../types\";\n\n\nexport type Attrs = {\n    errors?: Array<ValidationError>;\n}\n\n\nexport default {\n    view(vnode) {\n        if (Array.isArray(vnode.attrs.errors) === false || vnode.attrs.errors.length === 0) {\n            return null;\n        }\n        return m(\"ul.ed-errors\", vnode.attrs.errors.map(error =>\n            m(\"li\", { \"class\": `is-${error.severity || \"error\"}` }, error.message)\n        ));\n    }\n\n} as m.Component<Attrs>;\n","import m from \"mithril\";\nimport populated from \"../../utils/populated\";\nimport { Action, renderAction } from \"../actions\";\n\n\nexport const CHILD_CONTAINER_SELECTOR = \".ed-header__children\";\n\n\nexport type Attrs = {\n    /** header title */\n    title?: string;\n    /** if true, adds a disabled header */\n    disabled?: boolean;\n    /** hide title */\n    hideTitle?: boolean;\n    /** completely hide header */\n    hideHeader?: boolean;\n    /** if true, creates an additional child-container */\n    headerContent?: boolean|string;\n    /** optional icon for title */\n    icon?: string;\n    /** list of actions to be displayed in header */\n    actions?: Array<Action>\n}\n\n\nfunction getClass(hasAction: boolean, { title, icon, disabled }): string {\n    let classname = `${title !== \"\" ? \"with-title\" : \"no-title\"}`;\n    classname += ` ${hasAction ? \"with-actions\" : \"no-actions\"}`;\n    classname += ` ${icon !== \"\" ? \"with-icon\" : \"no-icon\"}`;\n    classname += disabled ? \" is-disabled\" : \"\";\n    return classname;\n}\n\n\nexport default {\n    getChildContainer($element: HTMLElement) {\n        const $childContainer = $element.querySelector(CHILD_CONTAINER_SELECTOR);\n        if ($childContainer == null) {\n            throw new Error(\"Container-Component hast not yet been rendered\");\n        }\n        return $childContainer;\n    },\n\n    view(vnode) {\n        if (vnode.attrs.hideHeader) {\n            return;\n        }\n\n        const attrs = {\n            icon: \"\",\n            title: \"\",\n            disabled: false,\n            ...vnode.attrs\n        };\n\n        const { actions } = attrs;\n        const hasAction = actions?.length > 0;\n        const withTitle = hasAction || attrs.title !== \"\" || attrs.icon !== \"\";\n\n        return m(\".ed-header\",\n            {\n                \"class\": getClass(hasAction, attrs)\n            },\n\n            withTitle && m(\".ed-header__title\",\n                populated(vnode.attrs.icon, m(\"i.mmf-icon\", attrs.icon)),\n                (!attrs.hideTitle) && m(\"h2\", attrs.title),\n                vnode.children\n            ),\n\n            vnode.attrs.headerContent && m(CHILD_CONTAINER_SELECTOR),\n\n            actions?.length > 0 && m(\".ed-header__actions\",\n                actions.map(action => renderAction(action))\n            )\n        );\n    }\n\n} as m.Component<Attrs>;\n","export { default as Container } from \"./container\";\nexport { default as ContainerDescription } from \"./description\";\nexport { default as ContainerErrors } from \"./errors\";\nexport { default as ContainerHeader } from \"./header\";\nexport { default as Overlay } from \"./overlay\";\nexport { default as OverlaySelectTiles } from \"./overlayselecttiles\";\n","import m from \"mithril\";\nimport { Button } from \"mithril-material-forms\";\nimport { translate } from \"../../utils/i18n\";\nimport isEmpty from \"../../utils/isEmpty\";\n\n\nexport type Attrs = {\n    container?: HTMLElement;\n    header?: string;\n    abortButton?: string|false;\n    confirmButton?: string|false;\n    onAbort?: () => void;\n    onSave?: () => void;\n    fullscreen?: boolean;\n}\n\n\n/**\n * Content overlay\n */\nexport default {\n\n    view(vnode) {\n        const { header, container, fullscreen, abortButton, onAbort, onSave, confirmButton } = vnode.attrs;\n\n        return m(\"section.ed-overlay__card\",\n            {\n                \"class\": fullscreen ? \"ed-overlay__card--fullscreen\" : null\n            },\n            !isEmpty(header) && m(\".ed-card__header\",\n                m(\"h1\", header)\n            ),\n            m(\".ed-card__content\",\n                {\n                    oncreate: contentNode => contentNode.dom.appendChild(container)\n                }\n            ),\n            m(\".ed-card__footer\",\n                abortButton && m(Button, { onclick: onAbort }, translate(abortButton)),\n                confirmButton && m(Button, { onclick: onSave, raised: true }, translate(confirmButton))\n            )\n        );\n    }\n\n} as m.Component<Attrs>;\n","import m from \"mithril\";\n\n\nexport type Attrs = {\n    active: boolean;\n    value?: number;\n    title?: string;\n    icon?: string;\n    description?: string|m.Vnode;\n};\n\n\nexport default {\n    view(vnode) {\n        return m(\".ed-form-box\",\n            {\n                \"data-value\": vnode.attrs.value,\n                \"data-type\": vnode.attrs.title.toLowerCase() // @uitest\n            },\n            m(\".ed-form-box__content\",\n                m(\".ed-form-box__title\",\n                    [\n                        vnode.attrs.icon ? m(\".mmf-icon\", vnode.attrs.icon) : \"\",\n                        vnode.attrs.title\n                    ]\n                ),\n                m(\".ed-form-box__description\", vnode.attrs.description)\n            )\n        );\n    }\n\n} as m.Component<Attrs>;\n","import m from \"mithril\";\nimport Tile from \"./Tile\";\n\n\nconst CLASSNAME = \"ed-overlay-tiles\";\nconst noop = (value: string) => {}; // eslint-disable-line\n\n\nexport type Attrs = {\n    value?: number;\n    onchange?: (value: string) => void;\n    options?: Array<{\n        value?: number;\n        title?: string;\n        icon?: string;\n        description?: string;\n    }>;\n};\n\n\nfunction getDataValue(node) {\n    while (\n        node.parentNode &&\n        node.getAttribute(\"data-value\") == null &&\n        node.className.includes(CLASSNAME) === false\n    ) {\n        node = node.parentNode;\n    }\n    return node.getAttribute(\"data-value\");\n}\n\n\n/**\n * Overlay content to pick options. Displayed as tiles\n */\nexport default {\n    view(vnode) {\n        const attrs: Attrs = {\n            value: 0,\n            options: [{ title: \"Keine Optionen angegeben\", value: -1 }],\n            onchange: noop,\n            ...vnode.attrs\n        };\n\n        return m(`.${CLASSNAME}`,\n            {\n                onclick: (e) => {\n                    const value = getDataValue(e.target);\n                    if (value != null) {\n                        // @todo event-target being may be unexpected\n                        attrs.onchange(value);\n                    }\n                }\n            },\n            attrs.options.map(tile =>\n                m(Tile, {\n                    active: attrs.value === tile.value,\n                    title: tile.title,\n                    icon: tile.icon,\n                    description: m.trust(tile.description), // allow html\n                    value: tile.value\n                })\n            )\n        );\n    }\n\n} as m.Component<Attrs>;\n","import { JSONData, JSONPointer, JSONSchema } from \"../types\";\nimport Controller from \"../Controller\";\nimport { Editor, EditorUpdateEvent } from \"./Editor\";\n\n\nexport function getTypeClass(schema: JSONSchema): string {\n    return schema.type === \"array\" || schema.type === \"object\" ? schema.type : \"value\";\n}\n\n\nexport type Options = {\n    /** set to true, to receive errors from current location and all erorrs of child properties/items */\n    notifyNestedChanges?: boolean;\n    /** set to true, to receive update from current location and all child properties/items changes */\n    notifyNestedErrors?: boolean;\n    /** HTMLDom attributes of root element (e.g. className, data-content, etc) */\n    attrs?: { [p:string]: any };\n}\n\n\n/**\n * This is an optional base class for a custom editor. Inheriting from AbstractEditor will setup most required\n * editor-methods to work by default, while still allowing custom implementations. Most of all, it removes\n * the tedious and redundant controller/serivce/pointer bootstraping.\n *\n * Still required is\n *\n *      1. a custom `static editorOf(p, c, o)`-method, to register on a schema\n *      2. an `update(event)`-method to respond to changes\n *\n * Convenience methods are\n *\n *      - `getData()` to fetch the associated data of the current _pointer_\n *      - `setData(newValue)` to update the associated data of the current _pointer_\n *      - `getSchema()` returning the json-schema of the current _pointer_\n *      - `getErrors()` returning a list of current errors\n *      - `getElement()` gives you the root dom-node for this editor (aka render target)\n *      - `focus()` and `blur()` to manage the selection state of the current input (requires correct placement of _id_)\n *\n * @param pointer - pointer referencing the current data and schema\n * @param controller - editron controller instance\n * @param options - resolved options object\n */\nexport default class AbstractEditor implements Editor {\n    pointer: JSONPointer;\n    controller: Controller;\n    options: Options;\n    dom: HTMLElement;\n\n    static editorOf(pointer: JSONPointer, controller: Controller, options?) { // eslint-disable-line\n        throw new Error(\"Missing editorOf-method in custom editor\");\n    }\n\n    constructor(pointer: JSONPointer, controller: Controller, options) {\n        this.pointer = pointer;\n        this.controller = controller;\n        this.options = options;\n        const schema = this.getSchema();\n        this.dom = this.controller\n            .createElement(`.ed-${getTypeClass(schema)}`, options.attrs);\n        if (schema.format) {\n            this.dom.classList.add(`ed-${getTypeClass(schema)}--${schema.format}`);\n        }\n    }\n\n    update(event: EditorUpdateEvent) { // eslint-disable-line @typescript-eslint/no-unused-vars\n        throw new Error(\"Missing implementation of method 'update' in custom editor\");\n    }\n\n    getData(): any {\n        return this.controller.service(\"data\").get(this.pointer);\n    }\n\n    setData(data: JSONData) {\n        return this.controller.service(\"data\").set(this.pointer, data);\n    }\n\n    getErrors() {\n        return this.controller.service(\"validation\").getErrorsAndWarnings(this.pointer);\n    }\n\n    getSchema(): JSONSchema {\n        return this.controller.service(\"schema\").get(this.pointer);\n    }\n\n    getPointer(): JSONPointer {\n        return this.pointer;\n    }\n\n    getElement(): HTMLElement {\n        return this.dom;\n    }\n\n    focus(): void {\n        this.controller.service(\"location\").setCurrent(this.pointer);\n    }\n\n    blur(): void {\n        this.controller.service(\"location\").blur(this.pointer);\n    }\n\n    destroy(): void {\n        throw new Error(\"Missing implementation of method 'destroy' in custom editor\");\n    }\n}\n","import m from \"mithril\";\nimport { JSONPointer, JSONSchema, ValidationError } from \"../types\";\nimport Controller from \"../Controller\";\nimport { Editor, EditorUpdateEvent } from \"./Editor\";\n\n\nconst convert = {\n\n    boolean(value: any): boolean {\n        if (value === \"true\") {\n            return true;\n        } else if (value === \"false\") {\n            return false;\n        }\n        return value;\n    },\n\n    integer(value: any): number {\n        const converted = parseInt(value);\n        if (isNaN(converted) === false) {\n            return converted;\n        }\n        return value;\n    },\n\n    number(value: any): number {\n        const converted = parseFloat(value);\n        if (isNaN(converted) === false) {\n            return converted;\n        }\n        return value;\n    }\n};\n\n\nexport type ViewModel = {\n    pointer: JSONPointer;\n    title?: string;\n    description?: string;\n    disabled?: boolean;\n    value?;\n    instantUpdate?: boolean;\n    invertOrder?: boolean;\n    schema: JSONSchema;\n    options;\n    errors: Array<string|ValidationError>;\n    theme?: string;\n    onfocus: () => void;\n    onblur: () => void;\n    onchange: (value) => void;\n}\n\n\n/**\n * Convenience class, which registers required events and base methods for value-editors (not object, array)\n */\nexport default class AbstractValueEditor implements Editor {\n    dom: HTMLElement;\n    controller: Controller;\n    notifyNestedChanges = false;\n    options;\n    pointer: JSONPointer;\n    viewModel: ViewModel;\n\n\n    static editorOf(pointer: JSONPointer, controller: Controller) {\n        const schema = controller.service(\"schema\").get(pointer);\n        return schema.type !== \"object\" && schema.type !== \"array\";\n    }\n\n    /**\n     * options\n     *    - editorValueType:String - custom type of editor value (added as classname)\n     *    - editorElementProperties:Object - add custom properties to main DOM-element\n     *    - viewModel:Object - viewModel which extends base viewmodel\n     *\n     * @param pointer - json pointer to value\n     * @param controller - json editor controller\n     * @param options\n     */\n    constructor(pointer: JSONPointer, controller: Controller, options) {\n        this.controller = controller;\n        this.options = options;\n        this.pointer = pointer;\n        this.notifyNestedChanges = options.notifyNestedChanges || this.notifyNestedChanges;\n\n        const schema = controller.service(\"schema\").get(pointer);\n\n        options = {\n            viewModel: null,\n            title: null,\n            description: null,\n            editorValueType: schema.enum ? schema.format === \"radio\" ? schema.format : \"select\" : schema.type,\n            editorElementProperties: null,\n            ...options\n        };\n\n        // create main DOM-element for view-generation\n        this.dom = controller.createElement(\n            `.ed-value.ed-value--${options.editorValueType}`,\n            { ...options.attrs }\n        );\n\n        if (schema.format) {\n            this.dom.classList.add(`.ed-${options.editorValueType}--${schema.type}`);\n        }\n\n        // use this model to generate the view. may be customized with `options.viewModel`\n        this.viewModel = {\n            pointer,\n            title: options.title,\n            description: options.description,\n            value: controller.service(\"data\").get(pointer),\n            instantUpdate: options.instantUpdate,\n            schema,\n            options,\n            errors: controller.service(\"validation\").getErrorsAndWarnings(pointer),\n            theme: schema.theme,\n            onfocus: () => controller.service(\"location\").setCurrent(pointer),\n            onblur: () => controller.service(\"location\").blur(pointer),\n            onchange: value => this.setValue(convert[schema.type] ? convert[schema.type](value) : value),\n            ...options.viewModel\n        };\n    }\n\n    update(event: EditorUpdateEvent) {\n        if (this.viewModel == null) {\n            console.log(\"%c abort update VALUE\", \"background: yellow;\", event);\n            return;\n        }\n\n        switch (event.type) {\n            case \"pointer\": {\n                const pointer = event.value;\n                // this.dom.setAttribute(\"name\", `editor-${pointer}`);\n                this.viewModel.pointer = pointer;\n                this.viewModel.onfocus = () => this.controller.service(\"location\").setCurrent(pointer);\n                break;\n            }\n\n            case \"data:update\":\n                this.viewModel.value = this.controller.service(\"data\").get(this.getPointer());\n                this.viewModel.disabled = !this.controller.isActive();\n                break;\n\n            case \"validation:errors\":\n                this.viewModel.errors = event.value;\n                break;\n\n            case \"active\":\n                this.viewModel.disabled = event.value === false;\n                if (this.viewModel.options) {\n                    this.viewModel.options.disabled = this.viewModel.disabled;\n                }\n                break;\n\n            default:\n                console.log(\"unknown event type\", event);\n        }\n\n        this.render();\n    }\n\n    focus(): void {\n        this.controller.service(\"location\").setCurrent(this.pointer);\n    }\n\n    blur(): void {\n        this.controller.service(\"location\").blur(this.pointer);\n    }\n\n    // do not trigger rendering here. data-observer will notify change event\n    setValue(value) {\n        this.controller.service(\"data\").set(this.pointer, value);\n    }\n\n    getValue() {\n        return this.controller.service(\"data\").get(this.pointer);\n    }\n\n    // update view\n    render() {\n        m.render(this.dom, m(\"b\", \"Overwrite AbstractValueEditor.render() to generate view\"));\n    }\n\n    getPointer() {\n        return this.pointer;\n    }\n\n    // return main dom element\n    getElement() {\n        return this.dom;\n    }\n\n    // destroy this editor\n    destroy() {\n        if (this.viewModel == null) {\n            return;\n        }\n        // destroy this editor only once\n        m.render(this.dom, m(\"i\"));\n        this.viewModel = null;\n        this.dom = null;\n    }\n}\n","import { Action, renderAction } from \"../../components/actions\";\nimport arrayUtils from \"../../utils/array\";\nimport Controller from \"../../Controller\";\nimport gp from \"gson-pointer\";\nimport Header from \"../../components/header\";\nimport m from \"mithril\";\nimport { Editor } from \"../Editor\";\nimport { JSONPointer, EditronConfigAttrs } from \"../../types\";\n\n\nexport type ActionsAttrs = {\n    className?: string;\n    disabled: boolean;\n    actions: Array<Action>;\n}\n\nconst ActionsView = {\n    view(vnode) {\n        const { disabled, actions } = vnode.attrs;\n\n        return m(\".ed-actions\",\n            {\n                class: disabled ? \"is-disabled\" : \"is-enabled\"\n            },\n            m(\"i.mmf-icon.interactive\", \"more_vert\"),\n            m(\"ul\",\n                actions?.map(action => m(\"li\", renderAction(action)))\n            )\n        );\n    }\n} as m.Component<ActionsAttrs>;\n\n\nexport const EditorTarget = \".ed-item\";\n\n\nexport type ViewModel = {\n    actions?: Array<Action>;\n    attrs?: EditronConfigAttrs;\n    disabled: boolean;\n    header: boolean;\n    index: number;\n    insert?: Action;\n    insertTitle: string;\n    length: number;\n    pointer: JSONPointer;\n    showIndex: boolean;\n    title?: string;\n}\n\n\nexport type Options = {\n    add: boolean;\n    addTitle: string;\n    attrs?: EditronConfigAttrs;\n    clone: boolean;\n    cloneTitle: string;\n    disabled: boolean;\n    header: boolean;\n    insert: boolean;\n    insertTitle: string;\n    length: number;\n    maxItems: number;\n    minItems: number;\n    move: boolean;\n    moveUpTitle: string;\n    moveDownTitle: string;\n    passActions: boolean;\n    remove: boolean;\n    removeTitle: string;\n    showIndex: boolean;\n    title?: string;\n}\n\n\nexport type ChildEditorOptions = {\n    hideTitle: boolean;\n    actions?: Array<Action>;\n}\n\n\nexport default class ArrayItemEditor {\n    $element: HTMLElement;\n    controller: Controller;\n    editor: Editor;\n    viewModel: ViewModel;\n    /** pass actions to child editor */\n    passActions: boolean;\n    /** this items array index */\n    index: number;\n    /** json-pointer to array */\n    parentPointer: JSONPointer;\n\n\n    constructor(pointer: JSONPointer, controller: Controller, options: Options) {\n        // eslint-disable-next-line max-len\n        this.$element = controller.createElement(\".ed-child\", options.attrs);\n        this.controller = controller;\n        this.passActions = options?.passActions === true;\n\n        this.viewModel = {\n            ...options,\n            insert: undefined,\n            pointer,\n            length: options.length,\n            index: ArrayItemEditor.getIndex(pointer),\n            actions: this.createActions(options)\n        };\n\n        if (options?.insert) {\n            this.viewModel.insert = {\n                icon: \"add\",\n                title: options.insertTitle,\n                disabled: () => options.disabled,\n                action: this.add.bind(this)\n            };\n        }\n\n        this.updatePointer(pointer);\n        this.render();\n\n        const editorOptions: ChildEditorOptions = {\n            hideTitle: options.header === true\n        };\n        if (this.passActions) {\n            editorOptions.actions = this.viewModel.actions;\n        }\n\n        const $target = this.$element.querySelector(EditorTarget) as HTMLElement;\n        this.editor = controller.createEditor(pointer, $target, editorOptions);\n    }\n\n    createActions(controls): Array<Action> {\n        const actions = [];\n        const {\n            move, remove, clone, add, minItems, maxItems,\n            moveUpTitle, moveDownTitle, removeTitle, cloneTitle, addTitle\n        } = controls;\n\n        if (move) {\n            actions.push({\n                icon: \"arrow_upward\",\n                title: moveUpTitle,\n                disabled: () => this.index === 0,\n                action: () => this.move(this.index - 1)\n            });\n\n            actions.push({\n                icon: \"arrow_downward\",\n                title: moveDownTitle,\n                disabled: () => this.index >= this.getLength() - 1,\n                action: () => this.move(this.index + 1)\n            });\n        }\n\n        if (remove) {\n            actions.push({\n                icon: \"delete\",\n                title: removeTitle,\n                disabled: () => this.getLength() <= minItems,\n                action: () => this.remove()\n            });\n        }\n\n        if (clone) {\n            actions.push({\n                icon: \"content_copy\",\n                title: cloneTitle,\n                disabled: () => this.getLength() >= maxItems,\n                action: () => this.clone()\n            });\n        }\n\n        if (add) {\n            actions.push({\n                icon: \"add\",\n                title: addTitle,\n                disabled: () => this.getLength() >= maxItems,\n                action: () => this.add()\n            });\n        }\n\n        return actions;\n    }\n\n    add(): void {\n        arrayUtils.addItem(this.parentPointer, this.controller, this.index);\n    }\n\n    clone(): void {\n        arrayUtils.cloneItem(this.parentPointer, this.controller, this.index);\n    }\n\n    remove(): void {\n        arrayUtils.removeItem(this.parentPointer, this.controller, this.index);\n    }\n\n    move(to: number): void {\n        arrayUtils.moveItem(this.parentPointer, this.controller, this.index, to);\n    }\n\n    getLength(): number {\n        const list = this.controller.service(\"data\").get(this.parentPointer);\n        if (Array.isArray(list)) {\n            return list.length;\n        }\n        console.warn(`Invalid array at ${this.parentPointer} for element ${this.index}`);\n        return 0;\n    }\n\n    disable(isDisabled = false) {\n        if (this.viewModel.disabled !== isDisabled) {\n            this.viewModel.disabled = isDisabled;\n            this.render();\n        }\n    }\n\n    updatePointer(newPointer): void {\n        this.index = ArrayItemEditor.getIndex(newPointer);\n        this.parentPointer = gp.join(newPointer, \"..\", true);\n        this.viewModel.index = ArrayItemEditor.getIndex(newPointer);\n        this.viewModel.pointer = newPointer;\n        this.viewModel.length = this.getLength();\n        this.render();\n\n        // @todo improve missing update of passed header actions\n        // @ts-ignore\n        this.passActions && this.editor?.render && this.editor.render();\n    }\n\n    getElement(): HTMLElement {\n        return this.$element;\n    }\n\n    getPointer(): JSONPointer {\n        return this.viewModel.pointer;\n    }\n\n    destroy(): void {\n        if (this.viewModel == null) {\n            return;\n        }\n        this.viewModel = null;\n        this.controller.destroyEditor(this.editor);\n        this.$element.parentNode && this.$element.parentNode.removeChild(this.$element);\n    }\n\n    render(): void {\n        const { showIndex, title, length, disabled, insert, header, actions } = this.viewModel;\n\n        m.render(this.$element, [\n            m(\".ed-separator.mmf-row\", insert && renderAction(insert)),\n            // @todo consider to remove this option\n            // optional array-item header (replacing child-header)\n            header && m(Header, { title: title, actions }),\n            // actions besides child-editor\n            m(ActionsView, { disabled, actions }),\n            // TARGET CONTAINER FOR EDITOR\n            m(EditorTarget, {\n                \"data-index\": `${this.index + 1} / ${length}`,\n                \"class\": [\n                    disabled ? \"is-disabled\" : \"\",\n                    showIndex ? \"with-index\" : \"\"\n                ].join(\" \").trim()\n            })\n        ]);\n    }\n\n    static getIndex(pointer: JSONPointer): number {\n        const parentPointer = gp.join(pointer, \"..\");\n        return parseInt(pointer.replace(`${parentPointer}/`, \"\"));\n    }\n}\n","import ArrayItem, { Options as ArrayItemOptions } from \"./ArrayItem\";\nimport { Action } from \"../../components/actions\";\nimport Controller from \"../../Controller\";\nimport diffpatch from \"../../services/utils/diffpatch\";\nimport m from \"mithril\";\nimport View, { CHILD_CONTAINER_SELECTOR } from \"../../components/container\";\nimport { JSONPointer } from \"../../types\";\nimport { EditorUpdateEvent, Options as EditorOptions } from \"../Editor\";\nimport AbstractEditor from \"../AbstractEditor\";\nimport { ValidationError } from \"../../types\";\nimport { Patch } from \"../../services/utils/createDiff\";\nimport arrayUtils from \"../../utils/array\";\nimport { translate as _ } from \"../../utils/i18n\";\n\n\n/** type definitions for json-schema array-options (editron:ui) */\nexport type EditronSchemaOptions = {\n    array?: {\n        /** show action to insert item another item */\n        add?: boolean;\n        /** button text of add-action */\n        addTitle?: string;\n        /** clone an item */\n        clone?: boolean;\n        /** if set, will ad a collapse option with its initial collpased state set to given value */\n        collapsed?: boolean;\n        /** show item-header in array item */\n        header?: boolean;\n        /** add an insert button between items */\n        insert?: boolean;\n        /** button text of add-action */\n        insertTitle?: string;\n        /** show move up and down actions */\n        move?: boolean;\n        /** pass actions to child-editor (must be treated and rendered in child-editor) */\n        passActions?: boolean;\n        /** show a remove item action */\n        remove?: boolean;\n        /** show the index of the element */\n        showIndex?: boolean;\n    }\n}\n\nexport const defaultOptions = {\n    add: true,\n    addTitle: \"add\",\n    clone: true,\n    insert: false,\n    insertTitle: \"insert\",\n    move: true,\n    remove: true,\n    showIndex: false,\n    header: false,\n    passActions: false,\n};\n\n\nexport type Options = EditorOptions & EditronSchemaOptions;\n\n\nexport type ViewModel = {\n    attrs: any;\n    disabled: boolean;\n    errors: Array<ValidationError>;\n    pointer: string;\n    title?: string;\n    description?: string;\n    icon?: string;\n    actions: Array<Action>;\n    insertAction: Action;\n}\n\n\nexport default class ArrayEditor extends AbstractEditor {\n    /** parent container for array children */\n    $items: HTMLElement;\n    children: Array<ArrayItem> = [];\n    controller: Controller;\n    pointer: JSONPointer;\n    viewModel: ViewModel;\n    /** options template for array child creation */\n    childOptions: ArrayItemOptions;\n\n    static editorOf(pointer: JSONPointer, controller: Controller) {\n        const schema = controller.service(\"schema\").get(pointer);\n        return schema.type === \"array\";\n    }\n\n    constructor(pointer: JSONPointer, controller: Controller, options: Options) {\n        super(pointer, controller, options);\n        this.dom.classList.add(\"with-insert-button\");\n\n        const schema = this.getSchema();\n\n        this.childOptions = {\n            ...defaultOptions,\n            moveUpTitle: _(\"array:button:moveup\"),\n            moveDownTitle: _(\"array:button:movedown\"),\n            removeTitle: _(\"array:button:remove\"),\n            cloneTitle: _(\"array:button:clone\"),\n            ...options,\n            attrs: undefined,\n            ...options?.array,\n            length: this.getLength(),\n            disabled: false,\n            maxItems: schema.maxItems || Infinity,\n            minItems: schema.minItems || 0\n        };\n\n        this.viewModel = {\n            attrs: {},\n            disabled: options.disabled === true,\n            errors: controller.service(\"validation\").getErrorsAndWarnings(pointer),\n            pointer,\n            actions: options.actions ?? [],\n            insertAction: {\n                icon: \"add\",\n                title: this.childOptions.addTitle,\n                disabled: () => this.getLength() < schema.maxItems,\n                action: () => arrayUtils.addItem(this.pointer, this.controller, this.getLength())\n            },\n            ...options\n        };\n\n        if (options.array?.collapsed != null) {\n            let collapsed = options.array.collapsed === true;\n            this.dom.classList.add(\"is-collapsible\");\n            this.dom.classList.toggle(\"is-collapsed\", collapsed);\n\n            const collapsedIcon = \"visibility_off\"; // \"keyboard_arrow_right\";\n            const collapseIcon = \"visibility\"; // \"keyboard_arrow_down\"\n\n            const collapseAction: Action = {\n                icon: collapsed ? collapsedIcon : collapseIcon,\n                classNames: \"ed-action--collapse\",\n                disabled: () => this.viewModel.disabled,\n                action: () => {\n                    collapsed = !collapsed;\n                    collapseAction.icon = collapsed ? collapsedIcon : collapseIcon,\n                    this.dom.classList.toggle(\"is-collapsed\", collapsed);\n                    this.render(); // redraw container, to update header collapse-icon\n                }\n            };\n\n            this.viewModel.actions.push(collapseAction);\n        }\n\n        this.render();\n        this.$items = this.dom.querySelector(CHILD_CONTAINER_SELECTOR);\n        this.rebuildChildren();\n    }\n\n    createArrayItem(index: number): ArrayItem {\n        return new ArrayItem(`${this.pointer}/${index}`, this.controller, {\n            title: `${index}`,\n            ...this.childOptions\n        });\n    }\n\n    getLength(): number {\n        return this.getData().length;\n    }\n\n    update(event: EditorUpdateEvent) {\n        if (this.viewModel == null) {\n            console.log(\"%c abort update ARRAY\", \"background: yellow;\", event);\n            return;\n        }\n\n        switch (event.type) {\n            case \"data:update\":\n                this.applyPatches(event.value.patch);\n                this.childOptions.length = this.getLength();\n                break;\n\n            case \"validation:errors\":\n                this.viewModel.errors = event.value as Array<ValidationError>;\n                break;\n\n            case \"pointer\":\n                this.viewModel.pointer = event.value;\n                this.children.forEach((child, index) => child.updatePointer(`${event.value}/${index}`));\n                break;\n\n            case \"active\": {\n                const disabled = event.value === false;\n                this.childOptions.disabled = disabled;\n                this.children.forEach(child => child.disable(disabled));\n                break;\n            }\n        }\n\n        this.render();\n    }\n\n    applyPatches(patch: Patch): void {\n        const { pointer, controller, children, $items } = this;\n\n        // fetch a copy of the original list\n        const originalChildren = Array.from(children);\n        // and patch the current list\n        diffpatch.patch(children, patch);\n\n        // search for inserted children\n        children.forEach((child, index) => {\n            if (child instanceof ArrayItem === false) {\n                const newChild = this.createArrayItem(index);\n                children[index] = newChild;\n            }\n        });\n\n        // search for removed children (item wrappers)\n        originalChildren.forEach(child => {\n            if (children.indexOf(child) === -1) {\n                child.destroy();\n            }\n        });\n\n        // update view: move and inserts nodes\n        const currentLocation = controller.service(\"location\").getCurrent();\n        const changePointer = {};\n\n        for (let i = 0, l = children.length; i < l; i += 1) {\n            const previousPointer = children[i].getPointer();\n            const currentPointer = `${pointer}/${i}`;\n\n            // update current location\n            if (currentLocation.indexOf(previousPointer) === 0) {\n                const editorLocation = currentLocation.replace(previousPointer, currentPointer);\n                controller.service(\"location\").setCurrent(editorLocation);\n            }\n\n            // update child views to match patched list\n            if (previousPointer !== currentPointer) {\n                changePointer[previousPointer] = currentPointer;\n            }\n\n            // this updates the array-item wrapper\n            children[i].updatePointer(currentPointer);\n\n            if ($items.children[i] === children[i].getElement()) {\n                // skip moving node, already in place\n                continue;\n            } else if (i + 1 < $items.children.length) {\n                // move node to correct position\n                $items.insertBefore(children[i].getElement(), $items.children[i + 1]);\n            } else {\n                // remaining nodes may be simply appended\n                $items.appendChild(children[i].getElement());\n            }\n        }\n    }\n\n    rebuildChildren(): void {\n        const { children, $items } = this;\n        const data = this.getData();\n        children.forEach((editor: ArrayItem) => editor.destroy());\n        children.length = 0;\n        $items.innerHTML = \"\";\n        // recreate child editors\n        data.forEach((item, index) => {\n            const childEditor = this.createArrayItem(index);\n            $items.appendChild(childEditor.getElement());\n            children.push(childEditor);\n        });\n    }\n\n    render(): void {\n        m.render(this.dom, m(View, this.viewModel));\n    }\n\n    destroy(): void {\n        if (this.viewModel == null) {\n            return;\n        }\n        this.children.forEach((editor: ArrayItem) => editor.destroy());\n        this.viewModel = null;\n        m.render(this.dom, m(\"i\"));\n    }\n}\n","import m from \"mithril\";\nimport { QueryListForm, QueryListFormAttrs } from \"mithril-material-forms\";\nimport { JSONPointer } from \"../../types\";\nimport Controller from \"../../Controller\";\nimport { Editor, Options as EditorOptions } from \"../Editor\";\nimport AbstractEditor from \"../AbstractEditor\";\n\nexport type EditronSchemaOptions = {\n    /** theme option, passed to value-editors */\n    theme?: string;\n}\n\nexport type Options = EditorOptions & EditronSchemaOptions;\n\nexport default class AutocompleteEditor extends AbstractEditor {\n    options: Options;\n    childEditors: Array<Editor> = [];\n    $children: HTMLElement;\n    $headerChildren: HTMLElement;\n    childOptions: { theme?: string };\n\n    static editorOf(pointer: JSONPointer, controller: Controller) {\n        const schema = controller.service(\"schema\").get(pointer);\n        return schema.format === \"autocomplete\" && schema.type === \"string\";\n    }\n\n    constructor(pointer: JSONPointer, controller: Controller, options: Options) {\n        super(pointer, controller, options);\n\n\n        this.render();\n    }\n\n    update() {\n        console.log(\"Update was executed\");\n    }\n\n    render() {\n        m.render(this.dom, m(QueryListForm));\n    }\n\n    destroy() {\n        console.log('DESTROY WAS EXECTUED');\n    }\n}\n","import m from \"mithril\";\nimport { TextareaForm } from \"mithril-material-forms\";\nimport OverlayService from \"../../services/OverlayService\";\nimport Container, { CHILD_CONTAINER_SELECTOR } from \"../../components/container\";\nimport { CHILD_CONTAINER_SELECTOR as HEADER_CONTAINER_SELECTOR } from \"../../components/header\";\nimport { JSONPointer, JSONData } from \"../../types\";\nimport Controller from \"../../Controller\";\nimport { Editor, Options as EditorOptions, EditorUpdateEvent } from \"../Editor\";\nimport AbstractEditor from \"../AbstractEditor\";\nimport { Action } from \"../../components/actions\";\n\n\nfunction showJSON(controller: Controller, data: JSONData, title: string) {\n    const element = controller.createElement(\".overlay__item.overlay__item--json\");\n    OverlayService.open(element, { confirmButton: \"ok\" });\n    // render textarea after it is injected into dom, to correctly update textarea size\n    m.render(element, m(TextareaForm, { title, value: JSON.stringify(data, null, 4) }));\n}\n\n\nexport type EditronSchemaOptions = {\n    /** theme option, passed to value-editors */\n    theme?: string;\n\n    object?: {\n        /** adds an user-action to delete this object */\n        delete?: boolean;\n        /** if set, will ad a collapse option with its initial collpased state set to given value */\n        collapsed?: boolean;\n        // collapseIcon?: string; // \"keyboard_arrow_down\"\n        // collapsedIcon?: string; // \"keyboard_arrow_right\"\n        headerContent?: string;\n    }\n}\n\n\n// export const defaultOptions = {\n//     collapseIcon: \"visibility_off\",\n//     collapsedIcon: \"visibility\"\n// };\n\n\nexport type Options = EditorOptions & EditronSchemaOptions;\n\n\nexport type ViewModel = {\n    attrs: {\n        [p: string]: any\n    };\n    collapsed?: boolean;\n    description?: string;\n    disabled?: boolean;\n    errors: Array<any>;\n    hideTitle?: boolean;\n    icon?: string;\n    headerContent?: string;\n    oncollapse?: () => void;\n    ondelete?: () => void;\n    pointer: JSONPointer;\n    title?: string;\n    actions: Array<Action>;\n}\n\n\nexport default class ObjectEditor extends AbstractEditor {\n    viewModel: ViewModel;\n    options: Options;\n    childEditors: Array<Editor> = [];\n    $children: HTMLElement;\n    $headerChildren: HTMLElement;\n    childOptions: { theme?: string };\n\n\n    static editorOf(pointer: JSONPointer, controller: Controller) {\n        const schema = controller.service(\"schema\").get(pointer);\n        return schema.type === \"object\";\n    }\n\n    constructor(pointer: JSONPointer, controller: Controller, options: Options) {\n        super(pointer, controller, options);\n\n        this.viewModel = {\n            pointer,\n            errors: [],\n            ...options,\n            attrs: options.attrs || {},\n            actions: [...options.actions || []]\n        };\n\n        if (options.object?.delete) {\n            this.viewModel.actions.push({\n                icon: \"delete\",\n                classNames: \"ed-action--delete\",\n                disabled: () => this.viewModel.disabled,\n                action: this.deleteObject.bind(this)\n            });\n        }\n\n        this.childOptions = {};\n        if (options.theme) {\n            this.childOptions.theme = options.theme;\n        }\n\n        if (options.object?.collapsed != null) {\n            this.dom.classList.add(\"is-collapsible\");\n            this.dom.classList.toggle(\"is-collapsed\", this.viewModel.collapsed === true);\n\n            const collapsedIcon = \"visibility_off\"; // \"keyboard_arrow_right\";\n            const collapseIcon = \"visibility\"; // \"keyboard_arrow_down\"\n\n            const action: Action = {\n                icon: this.viewModel.collapsed ? collapsedIcon : collapseIcon,\n                classNames: \"ed-action--collapse\",\n                disabled: () => this.viewModel.disabled,\n                action: () => {\n                    this.viewModel.collapsed = !this.viewModel.collapsed;\n                    action.icon = this.viewModel.collapsed ? collapsedIcon : collapseIcon,\n                    this.dom.classList.toggle(\"is-collapsed\", this.viewModel.collapsed === true);\n                    this.render(); // redraw container, to update header collapse-icon\n                }\n            };\n\n            this.viewModel.actions.push(action);\n        }\n\n        this.render();\n        this.$children = this.dom.querySelector(CHILD_CONTAINER_SELECTOR);\n        this.$headerChildren = this.dom.querySelector(HEADER_CONTAINER_SELECTOR);\n        this.update({ type: \"data:update\", value: null });\n    }\n\n    update(event: EditorUpdateEvent) {\n        if (this.viewModel == null) {\n            console.log(\"%c abort update OBJECT\", \"background: yellow;\", event);\n            return;\n        }\n\n        switch (event.type) {\n            case \"data:update\": {\n                const { pointer, controller, childEditors, $headerChildren, $children } = this;\n                const { headerContent } = this.viewModel;\n                const data = this.getData();\n                childEditors.forEach(editor => controller.destroyEditor(editor));\n                childEditors.length = 0;\n                $children.innerHTML = \"\";\n                if (data == null) {\n                    break;\n                }\n                // rebuild children\n                Object.keys(data)\n                    .forEach(property => {\n                        const childPointer = `${pointer}/${property}`;\n                        const targetContainer = property === headerContent ? $headerChildren : $children;\n                        childEditors.push(controller.createEditor(childPointer, targetContainer, this.childOptions));\n                    });\n                break;\n            }\n\n            // if we receive errors here, a property may be missing (which should go to schema.getTemplate)\n            // or additional, but prohibited properties exist. For the latter, add an option to show and/or\n            // delete the property\n            case \"validation:errors\": {\n                this.viewModel.errors = event.value.map(error => {\n                    if (error.code !== \"no-additional-properties-error\") {\n                        return error;\n                    }\n                    const message = error.message;\n                    const property = error.data.property;\n                    return {\n                        severity: error.type || \"error\",\n                        message: m(\".ed-error.ed-error--object-property\",\n                            m(\"span\", m.trust(message)),\n                            m(\"a.mmf-icon.interactive\", { onclick: () => this.showProperty(property) }, \"visibility\"),\n                            m(\"a.mmf-icon.interactive\", { onclick: () => this.deleteProperty(property) }, \"clear\")\n                        )\n                    };\n                });\n                break;\n            }\n\n            case \"pointer\":\n                this.viewModel.pointer = event.value;\n                break;\n\n            case \"active\":\n                /** de/activate this editors user-interaction */\n                this.viewModel.disabled = !event.value;\n                break;\n        }\n\n        this.render();\n    }\n\n    /** deletes this object from data */\n    deleteObject() {\n        this.controller.service(\"data\").delete(this.pointer);\n    }\n\n    /** deletes a property from this object */\n    deleteProperty(property: string): void {\n        this.controller.service(\"data\").delete(`${this.pointer}/${property}`);\n    }\n\n    /** displays the properties json-value */\n    showProperty(property: string): void {\n        const propertyData = this.controller.service(\"data\").get(`${this.pointer}/${property}`);\n        showJSON(this.controller, propertyData, property);\n    }\n\n    render(): void {\n        m.render(this.dom, m(Container, this.viewModel));\n    }\n\n    /** destroy editor, view and event-listeners */\n    destroy(): void {\n        if (this.viewModel == null) {\n            return;\n        }\n\n        m.render(this.dom, m(\"i\"));\n        this.childEditors.forEach(ed => this.controller.destroyEditor(ed));\n        this.childEditors.length = 0;\n        this.$children.innerHTML = \"\";\n        this.viewModel = null;\n    }\n}\n","import Controller from \"../../Controller\";\nimport m from \"mithril\";\nimport { SelectForm, SelectFormAttrs } from \"mithril-material-forms\";\nimport View, { CHILD_CONTAINER_SELECTOR } from \"../../components/container\";\nimport { Editor, EditorUpdateEvent, Options as EditorOptions } from \"../Editor\";\nimport { JSONSchema, JSONPointer } from \"../../types\";\nimport AbstractEditor, { getTypeClass } from \"../AbstractEditor\";\nimport { getEditronOptions } from \"../../utils/UISchema\";\n\n\n\nexport type EditronSchemaOptions = {\n    /** invert order of oneOf selection */\n    invertOrder?: boolean;\n    /** title of oneOf selection */\n    title?: string;\n    /** theme of oneOf selection */\n    theme?: string;\n}\n\nexport type ViewModel = {\n    description?: string;\n    disabled?: boolean;\n    pointer: JSONPointer;\n    title?: string;\n};\n\nexport type Options = EditorOptions & {\n    renderOneOf?: boolean;\n    invertOrder?: boolean;\n    title?: string;\n};\n\n\nexport default class OneOfEditor extends AbstractEditor {\n    $childContainer: HTMLElement;\n    childEditor: Editor;\n    childSchema: JSONSchema;\n    controller: Controller;\n    dom: HTMLElement;\n    /** catch inner changes (changes are compared by a diff which may not notify parent pointer) */\n    notifyNestedChanges = true;\n    pointer: JSONPointer;\n    schema: JSONSchema;\n    viewModel: ViewModel;\n    selectModel: SelectFormAttrs;\n\n\n    static editorOf(pointer: JSONPointer, controller: Controller, options: Options) {\n        const schema = controller.service(\"schema\").get(pointer);\n        return schema.oneOfSchema && !schema.items && !options.renderOneOf;\n    }\n\n    constructor(pointer: JSONPointer, controller: Controller, options: Options) {\n        super(pointer, controller, options);\n        this.dom.classList.add(`ed-${getTypeClass(this.getSchema())}--oneof`);\n\n        const childSchema = this.getSchema();\n        // @special case. Our options lie in `schema.oneOfSchema`\n        const schema = childSchema.oneOfSchema;\n        // ensure requried titles are set\n        schema.oneOf.forEach((oneOfSchema, index) => (oneOfSchema.title = oneOfSchema.title || `${index}.`));\n\n        const oneOfOptions = getEditronOptions(schema) || {};\n        console.log(\"options\", oneOfOptions);\n\n        this.schema = schema;\n        this.childSchema = childSchema;\n        this.viewModel = {\n            pointer,\n            title: schema.title,\n            description: schema.description\n        };\n\n        this.selectModel = {\n            ...oneOfOptions,\n            id: pointer,\n            description: undefined,\n            options: schema.oneOf.map((oneOf, index) => ({ title: oneOf.title, value: index })),\n            onchange: (oneOfIndex: string) => this.changeChild(schema.oneOf[oneOfIndex]),\n            value: this.getIndexOf(childSchema),\n        };\n\n        this.render();\n        this.$childContainer = this.dom.querySelector(CHILD_CONTAINER_SELECTOR);\n        this.rebuild();\n        this.render();\n    }\n\n    changeChild(schema): void {\n        this.controller.destroyEditor(this.childEditor);\n        const data = this.controller.service(\"schema\").getTemplate(schema);\n        this.controller.service(\"data\").set(this.pointer, data);\n    }\n\n    getIndexOf(currentSchema): number {\n        for (let i = 0, l = this.schema.oneOf.length; i < l; i += 1) {\n            if (this.schema.oneOf[i].title === currentSchema.title) {\n                return i;\n            }\n        }\n        return 0;\n    }\n\n    update(event: EditorUpdateEvent): void {\n        switch(event.type) {\n            case \"data:update\": {\n                const currentSchema = this.getSchema();\n                delete currentSchema.oneOfSchema; // is recreated each time\n                if (currentSchema.title === this.childSchema.title) {\n                    return;\n                }\n                this.selectModel.value = this.getIndexOf(currentSchema);\n                this.childSchema = currentSchema;\n                this.rebuild();\n                break;\n            }\n\n            case \"pointer\":\n                this.viewModel.pointer = event.value;\n                this.selectModel.id = event.value;\n                break;\n\n            case \"active\":\n                this.viewModel.disabled = event.value === false;\n                this.selectModel.disabled = event.value === false;\n                break;\n        }\n\n        this.render();\n    }\n\n    rebuild(): void {\n        this.controller.destroyEditor(this.childEditor);\n        this.$childContainer.innerHTML = \"\";\n        this.childEditor = this.controller.createEditor(this.pointer, this.$childContainer, {\n            // @attention this is very important or else we create an infinite loop through selectEditor\n            renderOneOf: true\n        });\n    }\n\n    render(): void {\n        m.render(this.dom, m(View, this.viewModel,\n            m(\".ed-value.ed-value--oneof\",\n                m(SelectForm, this.selectModel)\n            )\n        ));\n    }\n\n    destroy(): void {\n        if (this.viewModel == null) {\n            return;\n        }\n        this.viewModel = null;\n        m.render(this.dom, \"i\");\n        this.controller.destroyEditor(this.childEditor);\n        this.controller.service(\"data\").removeObserver(this.pointer, this.update);\n    }\n}\n","import m from \"mithril\";\nimport {\n    CheckboxForm,\n    CheckboxFormAttrs,\n    InputForm,\n    InputFormAttrs,\n    InputType,\n    RadioButtonsForm,\n    RadioButtonsFormAttrs,\n    SwitchForm,\n    SwitchFormAttrs,\n    SelectForm,\n    SelectFormAttrs,\n    TextareaForm,\n    TextareaFormAttrs\n} from \"mithril-material-forms\";\nimport UISchema from \"../../utils/UISchema\";\nimport { ViewModel } from \"../AbstractValueEditor\";\n\n\nexport type Attrs = ViewModel;\n\n\nconst TYPES = {\n    string: \"text\",\n    integer: \"number\",\n    number: \"number\"\n};\n\nfunction getInputType(schema): InputType {\n    return TYPES[schema.type] || \"text\";\n}\n\n\nconst Component: m.Component<Attrs> = {\n\n    view(vnode) {\n        const { schema, options = {}, onblur, onfocus, onchange, errors, value, pointer } = vnode.attrs;\n\n        if (schema.enum && schema.enum.length > 0 && schema.format === \"radio\") {\n\n            const radioBtnsModel: RadioButtonsFormAttrs = {\n                value,\n                title: options.title,\n                errors,\n                description: options.description,\n                disabled: options.disabled,\n                theme: options.theme,\n                options: UISchema.enumOptions(schema), \n                onchange\n            };\n\n            return m(RadioButtonsForm, radioBtnsModel);\n        }\n\n        if (schema.enum && schema.enum.length > 0) {\n\n            const selectFormModel: SelectFormAttrs = {\n                id: pointer,\n                title: options.title,\n                description: options.description,\n                disabled: options.disabled,\n                theme: options.theme,\n                errors,\n                invertOrder: options.invertOrder,\n\n                value,\n                options: UISchema.enumOptions(schema),\n                onchange,\n                onblur,\n                onfocus\n            };\n\n            return m(SelectForm, selectFormModel, vnode.children);\n        }\n\n        if (schema.type === \"boolean\" && schema.format === \"switch\") {\n            const switchModel: SwitchFormAttrs = {\n                id: pointer,\n                title: options.title,\n                description: options.description,\n                disabled: options.disabled,\n                theme: options.theme,\n                errors,\n\n                value,\n                onchange,\n                onblur,\n                onfocus\n            };\n\n            return m(SwitchForm, switchModel, vnode.children);\n        }\n\n        if (schema.type === \"boolean\") {\n            const checkBoxModel: CheckboxFormAttrs = {\n                id: pointer,\n                title: options.title,\n                description: options.description,\n                disabled: options.disabled,\n                theme: options.theme,\n                errors,\n\n                value,\n                onchange,\n                onblur,\n                onfocus\n            };\n\n            return m(CheckboxForm, checkBoxModel, vnode.children);\n        }\n\n        if (schema.type === \"string\" && schema.format === \"html\") {\n            const textareaModel: TextareaFormAttrs = {\n                id: pointer,\n                title: options.title,\n                description: options.description,\n                placeholder: options.placeholder,\n                disabled: options.disabled,\n                theme: options.theme,\n                errors,\n\n                value,\n                onchange,\n                onblur,\n                onfocus\n            };\n            return m(TextareaForm, textareaModel, vnode.children);\n        }\n\n        if (schema.type === \"string\" && schema.format === \"textarea\") {\n            const textareaModel: TextareaFormAttrs = {\n                id: pointer,\n                title: options.title,\n                description: options.description,\n                placeholder: options.placeholder,\n                disabled: options.disabled,\n                theme: options.theme,\n                errors,\n\n                rows: options[\"textarea:rows\"] || 1,\n\n                value,\n                onchange,\n                onblur,\n                onfocus\n            };\n            return m(TextareaForm, textareaModel, vnode.children);\n        }\n\n        const inputModel: InputFormAttrs = {\n            id: pointer,\n            title: options.title,\n            description: options.description,\n            placeholder: options.placeholder,\n            disabled: options.disabled,\n            theme: options.theme,\n            errors,\n\n            instantUpdate: options.instantUpdate,\n\n            type: getInputType(schema),\n            value,\n            onchange,\n            onblur,\n            onfocus\n        };\n\n        return m(InputForm, inputModel, vnode.children);\n    }\n};\n\n\nexport default Component;\n","import m from \"mithril\";\nimport View from \"./View\";\nimport AbstractValueEditor from \"../AbstractValueEditor\";\nimport Controller from \"../../Controller\";\nimport { JSONPointer } from \"../../types\";\nimport { Options } from \"../Editor\";\n\n\nexport type EditronSchemaOptions = {\n    /** invert label, input order for checkbox- or select-inputs */\n    invertOrder?: boolean;\n    /** set to true, if each keystroke should trigger a change event */\n    instantUpdate?: boolean;\n    /** theme of form-styles. Depending on the mithril-material-forms styles imported. e.g. \"the-material\" */\n    theme?: string;\n}\n\n\nexport default class ValueEditor extends AbstractValueEditor {\n\n    static editorOf(pointer: JSONPointer, controller: Controller) {\n        const schema = controller.service(\"schema\").get(pointer);\n        return schema.type !== \"object\" && schema.type !== \"array\";\n    }\n\n    constructor(pointer: JSONPointer, controller: Controller, options: Options) {\n        super(pointer, controller, options);\n        this.render();\n    }\n\n    render() {\n        m.render(this.dom, m(View, this.viewModel));\n    }\n}\n","import m from \"mithril\";\nimport Controller from \"../../Controller\";\nimport AbstractEditor, { Options as EditorOptions } from \"../../editors/AbstractEditor\";\nimport { JSONPointer } from \"../../types\";\nimport { Editor } from \"../../editors/Editor\";\nimport { Button } from \"mithril-material-forms\";\nimport { Plugin } from \"../index\";\nimport OverlayService from \"../../services/OverlayService\";\nimport { translate } from \"../../utils/i18n\";\n\n\nclass AbstractDelegationEditor extends AbstractEditor {\n\n    options: EditronSchemaOptions & EditorOptions;\n\n    static editorOf(pointer: JSONPointer, controller: Controller, options) {\n        return options.delegate != null && options.isDelegated !== true;\n    }\n\n\n    constructor(pointer: JSONPointer, controller: Controller, options) {\n        options.isDelegated = true;\n        super(pointer, controller, options);\n        this.render();\n    }\n\n    update(event) {\n        console.log(\"update delegation pliugin\", event);\n    }\n\n    delegate(pointer: JSONPointer, options) { // eslint-disable-line @typescript-eslint/no-unused-vars\n        throw new Error(\"notify has not been implemented in 'DelegationEditor'\");\n    }\n\n    render() {\n        m.render(this.dom, m(`.editron-delegate.editron-delegate--${this.getSchema().type}`,\n            m(Button,\n                { onclick: () => this.delegate(this.pointer, this.options) },\n                translate(this.options.delegate?.buttonText || \"open\")\n            )\n        ));\n    }\n\n    destroy() {\n        m.render(this.dom, m(\"o\"));\n    }\n}\n\n\nexport type DelegationEvent = {\n    pointer: JSONPointer;\n    controller: Controller;\n    editor: Editor;\n}\n\nexport enum DelegationTarget {\n    Overlay = \"overlay\"\n}\n\n\n/** settings in editron:ui config */\nexport type EditronSchemaOptions = {\n    delegate?: {\n        /** set to \"overlay\", to open editor in overlay-panel */\n        delegateTo?: DelegationTarget;\n        /** button text for inline delegation. Defaults to \"open\" */\n        buttonText?: string;\n    }\n}\n\n\nexport type Options = {\n    onDelegation?: (event: DelegationEvent) => void;\n}\n\n\nexport default class DelegationPlugin {\n    id = \"delegation-plugin\";\n\n    dom: HTMLElement;\n    current: Editor;\n    controller: Controller;\n    onDelegation?: (event: DelegationEvent) => void;\n\n\n    constructor(options: Options = {}) {\n        this.onDelegation = options.onDelegation || this.onDelegation;\n        this.dom = document.createElement(\"div\");\n    }\n\n    initialize(controller: Controller): Plugin {\n        this.controller = controller;\n\n        class DelegationEditor extends AbstractDelegationEditor {}\n        DelegationEditor.prototype.delegate = this.delegate.bind(this);\n\n        this.controller.editors.unshift(DelegationEditor);\n        return this;\n    }\n\n    delegateToOverlay(editor: Editor): Promise<void> {\n        return OverlayService\n            .open(editor.getElement(), { abortButton: false })\n            .then(() => this.controller.destroyEditor(editor));\n    }\n\n    delegate(pointer: JSONPointer, options: EditronSchemaOptions) {\n        if (this.current) {\n            this.controller.destroyEditor(this.current);\n        }\n\n        this.current = this.controller.createEditor(pointer, this.dom, { isDelegated: true });\n\n        if (options?.delegate?.delegateTo === DelegationTarget.Overlay) {\n            this.delegateToOverlay(this.current);\n            return;\n        }\n\n        if (this.onDelegation) {\n            this.onDelegation({\n                controller: this.controller,\n                pointer,\n                editor: this.current\n            });\n        }\n    }\n}\n","import { EditorPlugin, Editor } from \"../editors/Editor\";\nimport { JSONPointer, FormatValidator, KeywordValidator, JSONSchemaTypes } from \"../types\";\nimport Controller from \"../Controller\";\nimport { SimpleChange } from \"../services/dataservice/change\";\n\nconst editors: Array<EditorPlugin> = [];\nconst validators = [];\n\n\ntype EditorOptions = { [p: string]: any; }\n\nexport interface Plugin {\n    id: string;\n    initialize(controller: Controller): Plugin;\n    onModifiedData?: (changes: Array<SimpleChange>) => void;\n    onEditorOptions?: (pointer: JSONPointer, options: EditorOptions) => void;\n    onCreateEditor?: (pointer: JSONPointer, editor: Editor, options: EditorOptions) => void;\n    onChangePointer?: (oldPointer: JSONPointer, newPointer: JSONPointer, editor: Editor) => void;\n    onDestroyEditor?: (pointer: JSONPointer, editor: Editor) => void;\n}\n\n\nexport default {\n\n    /** register an editor (widget) to use in editron-controller */\n    editor(constructor: EditorPlugin): void {\n        console.log(`register editor ${constructor.name}`);\n        editors.push(constructor);\n    },\n\n    /**\n     * add a custom json-schema format-validator for a specific format value\n     * @param _ - unused...\n     * @param value - value of property format for this validator (must be unique formatType)\n     * @param validator - (format) validation function\n     */\n    validator(_: string, value: string, validator: FormatValidator): void {\n        validators.push([\"format\", value, validator]);\n    },\n\n    /**\n     * add a custom keyword-validator for a new keyword\n     * @param datatype - datatype, to register keyword\n     * @param keywordName - name of the keyword (like oneOf, format, etc)\n     * @param validator - (keyword) validation function\n     */\n    keywordValidator(datatype: JSONSchemaTypes, keywordName: string, validator: KeywordValidator): void {\n        validators.push([\"keyword\", datatype, keywordName, validator]);\n    },\n\n    /** returns all registered plugin-editors */\n    getEditors(): Array<any> {\n        return editors;\n    },\n\n    /** returns all validation function */\n    getValidators(): Array<any> {\n        return validators;\n    }\n};\n","import Controller from \"../../Controller\";\nimport { JSONPointer } from \"../../types\";\nimport { Plugin } from \"../index\";\nimport gp from \"gson-pointer\";\nimport render from \"json-schema-library/lib/utils/render\";\nimport isEmpty from \"../../utils/isEmpty\";\nimport { SimpleChange } from \"../../services/dataservice/change\";\nimport { getEditronOptions } from \"../../utils/UISchema\";\n\n\n/** required settings in editron:ui config */\nexport type EditronSchemaOptions = {\n    remoteData?: {\n        /** proxy function to call for remote data. Default to \"json\" */\n        proxyMethod?: string;\n        /** url to call. You can use {{property}}-syntax to render values of target `source` */\n        requestParam: string;\n        /** relative json-pointer (from data-location) to data, which should be used to create remote-url.\n         currently aborts if no data is retrieved from this pointer */\n        requestParamValues: JSONPointer;\n        /** map of json-pointer from source to target */\n        responseMapping: { [fromPointer: string]: JSONPointer };\n        /** if true, will add updates to undo history. Defaults to `false` */\n        addToHistory?: boolean;\n        /** set to true, to overwrite values */\n        overwrite?: boolean;\n    }\n}\n\n\nexport const defaultOptions = {\n    overwrite: false,\n    proxyMethod: \"json\",\n    addToHistory: false\n};\n\n\nexport default class RemoteDataPlugin implements Plugin {\n\n    id = \"remote-data-plugin\";\n    controller: Controller;\n    remotes: { [pointer: string]: {\n        options: EditronSchemaOptions[\"remoteData\"];\n        removeObserver: () => void;\n    }} = {};\n\n    initialize(controller: Controller): Plugin {\n        this.controller = controller;\n        // root pointer is not tracked, run initially to grab config on root\n        this.onModifiedData([{ type: \"add\", pointer: \"#\" }]);\n        return this;\n    }\n\n    onModifiedData(changes: Array<SimpleChange>) {\n\n        changes.forEach(change => {\n            if (change.type === \"add\") {\n                const schema = this.controller.service(\"schema\").get(change.pointer);\n                const options = getEditronOptions(schema);\n                if (options?.remoteData) {\n                    this.createLink(change.pointer, options?.remoteData);\n                }\n\n            } else if (change.type === \"delete\" && this.remotes[change.pointer]) {\n                this.destroyLink(change.pointer);\n            }\n        });\n    }\n\n    createLink(pointer: JSONPointer, options: EditronSchemaOptions[\"remoteData\"]) {\n        // validate options\n        const remote = { ...defaultOptions, ...options };\n        if (remote.requestParam == null || typeof remote.requestParam !== \"string\") {\n            console.warn(`editron remote-data-plugin: Expected option 'requestParam' to be a string. Given: ${remote.requestParam}`);\n            return;\n        }\n        if (remote.requestParamValues == null || typeof remote.requestParamValues !== \"string\") {\n            console.warn(`editron remote-data-plugin: Expected option 'requestParamValues' to be a string. Given: ${remote.requestParamValues}`);\n            return;\n        }\n        if (remote.responseMapping == null || typeof remote.responseMapping !== \"object\") {\n            console.warn(`editron remote-data-plugin: Expected option 'responseMapping' to be an object. Given: ${remote.responseMapping}`);\n            return;\n        }\n\n        const { controller } = this;\n        const sourcePointer = gp.join(pointer, remote.requestParamValues);\n\n        const observer = async () => this.setRemoteData(pointer, remote);\n        controller.service(\"data\").observe(sourcePointer, observer, true);\n        // @todo sometimes the pointer does not exist (timing issues?)\n        this.setRemoteData(pointer, remote);\n\n        this.remotes[pointer] = {\n            options: remote,\n            removeObserver: () => {\n                controller.service(\"data\").removeObserver(sourcePointer, observer);\n            }\n        };\n    }\n\n    destroyLink(pointer: JSONPointer) {\n        if (this.remotes[pointer]) {\n            this.remotes[pointer].removeObserver();\n            this.remotes[pointer] = null;\n        }\n    }\n\n    async setRemoteData(pointer: JSONPointer, remote: EditronSchemaOptions[\"remoteData\"]) {\n        const { controller } = this;\n        const currentData = controller.service(\"data\").getDataByReference();\n\n        // source of data for url values\n        const sourcePointer = gp.join(pointer, remote.requestParamValues);\n        let sourceData = controller.service(\"data\").get(sourcePointer);\n        if (sourceData == null || sourceData === \"\") {\n            return;\n        }\n\n        if (typeof sourceData !== \"object\") {\n            sourceData = { [sourcePointer.split(\"/\").pop()]: sourceData };\n        }\n\n        // build request-url from 'url' and sourceData-properties and fetch data\n        const remoteUrl = render(remote.requestParam, sourceData);\n        const json = await controller.proxy().get(remote.proxyMethod, ({ source: remoteUrl }));\n\n        Object.keys(remote.responseMapping)\n            .forEach(key => {\n                const targetPointer = gp.join(pointer, remote.responseMapping[key]);\n                const currentValue = gp.get(currentData, targetPointer);\n                if (remote.overwrite !== true && !isEmpty(currentValue)) {\n                    return;\n                }\n\n                const targetValue = gp.get(json, key);\n                try {\n                    controller.service(\"data\").set(targetPointer, targetValue, { addToHistory: remote.addToHistory });\n                } catch (error) {\n                    console.warn(`@todo`, error);\n                }\n            });\n    }\n}\n","import Controller from \"../../Controller\";\nimport { Editor } from \"../../editors/Editor\";\nimport { Plugin } from \"../index\";\n\n\nexport type Options = {\n    onSelect({ pointer, editor, options }): void;\n    onDeselect({ pointer, editor, options }): void;\n}\n\ninterface ModifiedEditor extends Editor {\n    __selectionPlugin?: {\n        select: (editor) => void;\n        options: any;\n    }\n}\n\n\nexport default class SelectionPlugin implements Plugin {\n    id = \"selection-plugin\";\n\n    dom: HTMLElement;\n    current: Editor;\n    controller: Controller;\n    // onDelegation: Options[\"onDelegation\"];\n\n    currentSelection: ModifiedEditor;\n    onSelect: Options[\"onSelect\"];\n    onDeselect: Options[\"onDeselect\"];\n\n    constructor(options: Options) {\n        // this.onDelegation = options.onDelegation;\n        this.dom = document.createElement(\"div\");\n        this.onSelect = options.onSelect;\n        this.onDeselect = options.onDeselect;\n    }\n\n    initialize(controller: Controller): Plugin {\n        this.controller = controller;\n        document.body.addEventListener(\"click\", () => this.deselect());\n        return this;\n    }\n\n    deselect() {\n        if (this.currentSelection) {\n            const editor = this.currentSelection;\n            editor.getElement().classList.remove(\"selected\");\n            this.onDeselect({ pointer: editor.getPointer(), editor, options: editor.__selectionPlugin.options });\n            this.currentSelection = null;\n        }\n    }\n\n    select(event, editor: ModifiedEditor) {\n        event.stopPropagation();\n        if (this.currentSelection === editor) {\n            return;\n        }\n        this.deselect();\n        this.currentSelection = editor;\n        this.currentSelection.getElement().classList.add(\"selected\");\n        // console.log(\"add class to \", this.currentSelection.getElement());\n        this.onSelect({ pointer: editor.getPointer(), editor, options: editor.__selectionPlugin.options });\n    }\n\n    onCreateEditor(pointer, editor: ModifiedEditor, options?) {\n        if (options && options.selectable) {\n            editor.__selectionPlugin = {\n                options,\n                select: event => this.select(event, editor)\n            };\n            editor.getElement().addEventListener(\"click\", editor.__selectionPlugin.select);\n        }\n    }\n\n    onDestroyEditor(pointer, editor: ModifiedEditor) {\n        if (editor.__selectionPlugin) {\n            editor.getElement().removeEventListener(\"click\", editor.__selectionPlugin.select);\n            editor.__selectionPlugin = undefined;\n\n            if (this.currentSelection === editor) {\n                this.currentSelection = null;\n            }\n        }\n    }\n}\n","import Controller from \"../../Controller\";\nimport { CHILD_CONTAINER_SELECTOR } from \"../../components/container\";\nimport { JSONPointer } from \"../../types\";\nimport { Editor } from \"../../editors/Editor\";\nimport { Plugin } from \"../index\";\nimport Sortable, { SortableEvent } from \"sortablejs\";\nimport arrayUtils from \"../../utils/array\";\nimport gp from \"gson-pointer\";\n\n\nexport { Sortable };\n\nexport type Options = {\n    onAdd?: ({ pointer: string, controller: Controller, event: SortableEvent }) => void;\n}\n\n\nexport function onAddSortable(pointer: JSONPointer, controller: Controller, event: SortableEvent) {\n    let action = \"moved\";\n    const { from, newIndex, item } = event;\n    const schema = controller.service(\"schema\").get(pointer);\n\n    // always remove node - we create it from data\n    item.parentNode.removeChild(item);\n\n    if (from.dataset.parent == null) {\n        console.log(\"Add -- create new child from data-property\");\n        let data;\n        try {\n            data = JSON.parse(item.dataset.content);\n            // for convinience, add missing data\n            data = controller.service(\"schema\").core.getTemplate([data], schema)[0];\n            action = \"created\";\n\n        } catch (e) {\n            console.log(\"abort - drag element requires attribute 'data-content' with a valid json-string\");\n            return;\n        }\n\n        const toList = controller.service(\"data\").get(pointer);\n        toList.splice(newIndex, 0, data);\n        controller.service(\"data\").set(pointer, toList);\n    }\n\n    return action;\n}\n\n\nexport function onEndSortable(pointer: JSONPointer, controller: Controller, event: SortableEvent) {\n    // const element = event.item;  // dragged HTMLElement\n    const { to, from, oldIndex, newIndex } = event;\n\n    if (to === from && oldIndex === newIndex) {\n        console.log(\"drag had no effect\");\n        return;\n    }\n\n    const toPointer = to.dataset.parent;\n    const fromPointer = from.dataset.parent;\n\n    // if container or pointer (different editors) are the same, its a move within a list\n    if (to === from || (toPointer != null && toPointer === fromPointer)) {\n        if (oldIndex === newIndex && to !== from) {\n            // item is dragged to the same position, but to another editor. now, the dragged element is removeChild\n            // from original list. We readd it here, to fix this\n            from.insertBefore(event.item, from.childNodes[oldIndex]);\n            return;\n        }\n        arrayUtils.moveItem(pointer, controller, oldIndex, newIndex);\n        return;\n    }\n\n    if (to !== from) {\n        if (toPointer == null) {\n            console.log(\"undefined `toPointer` on\", to);\n            return;\n        }\n        if (fromPointer == null) {\n            console.log(\"undefined `fromPointer` on\", from);\n            return;\n        }\n\n        const toList = controller.service(\"data\").get(toPointer);\n        const fromList = controller.service(\"data\").get(fromPointer);\n        toList.splice(newIndex, 0, fromList[oldIndex]);\n        fromList.splice(oldIndex, 1);\n\n        // join data to make one change request (for undo)\n        const rootData = controller.service(\"data\").get();\n        gp.set(rootData, fromPointer, fromList);\n        gp.set(rootData, toPointer, toList);\n        controller.service(\"data\").set(\"#\", rootData);\n    }\n}\n\n\n/** required settings in editron:ui config */\nexport type EditronSchemaOptions = {\n    sortable?: {\n        /** defines a group name for this array. If group names match, array items are interchangable.\n         Defaults to json-pointer of array */\n        group?: string;\n        /** optional css selector to choose a drag-handle on array items */\n        handle?: string;\n    }\n}\n\n\ninterface SortableEditor extends Editor {\n    __sortablePlugin?: {\n        options: EditronSchemaOptions[\"sortable\"];\n        sortable: Sortable;\n        $children: HTMLElement;\n    }\n}\n\n\nexport default class SortablePlugin implements Plugin {\n\n    id = \"sortable-plugin\";\n    controller: Controller;\n    options: Options;\n\n\n    constructor(options: Options = {}) {\n        this.options = options;\n    }\n\n    initialize(controller: Controller): Plugin {\n        this.controller = controller;\n        return this;\n    }\n\n    onCreateEditor(pointer, editor: SortableEditor, options?: EditronSchemaOptions) {\n        const sortableOptions = options?.sortable;\n        if (sortableOptions == null) {\n            return;\n        }\n\n        const { controller } = this;\n        if (controller.getSchema(pointer)?.type !== \"array\") {\n            return;\n        }\n\n        const $children = <HTMLElement>editor.getElement().querySelector(CHILD_CONTAINER_SELECTOR);\n        if ($children == null) {\n            console.log(`sortable plugin - children-container with '${CHILD_CONTAINER_SELECTOR}' not found`);\n            return;\n        }\n\n        // track pointer of child-parent for later retrieval in SortableEvents\n        $children.dataset.parent = pointer;\n\n        let hasMoved;\n        const sortable = new Sortable($children, {\n            group: sortableOptions.group ?? pointer,\n            handle: sortableOptions.handle,\n            // onChoose: () => { console.log(\"choose\"); },\n            onStart: () => (hasMoved = true),\n            onUnchoose: event => {\n                const { to, from, oldIndex, newIndex } = event;\n                if (hasMoved === false && to === from && newIndex == null) {\n                    controller.service(\"location\").setCurrent(`${pointer}/${oldIndex}`);\n                }\n                hasMoved = false;\n            },\n            onAdd: (event: SortableEvent) => {\n                const action = onAddSortable(pointer, controller, event);\n                if (action === \"created\" && this.options?.onAdd) {\n                    requestAnimationFrame(() => this.options.onAdd({ pointer, controller, event }));\n                }\n            },\n            onEnd: (event: SortableEvent) => onEndSortable(pointer, controller, event)\n        });\n\n        editor.__sortablePlugin = {\n            options: sortableOptions,\n            $children,\n            sortable\n        };\n    }\n\n    onChangePointer(oldPointer: JSONPointer, newPointer: JSONPointer, editor: SortableEditor) {\n        if (editor.__sortablePlugin) {\n            const options = editor.__sortablePlugin.options;\n            this.onDestroyEditor(oldPointer, editor);\n            this.onCreateEditor(newPointer, editor, { sortable: options });\n        }\n    }\n\n    onDestroyEditor(pointer, editor: SortableEditor) {\n        if (editor.__sortablePlugin) {\n            editor.__sortablePlugin.sortable.destroy();\n            editor.__sortablePlugin.$children.dataset.parent = null;\n            editor.__sortablePlugin = undefined;\n        }\n    }\n}\n","import Controller from \"../../Controller\";\nimport { JSONPointer } from \"../../types\";\nimport { Plugin } from \"../index\";\nimport gp from \"gson-pointer\";\nimport isEmpty from \"../../utils/isEmpty\";\nimport { SimpleChange } from \"../../services/dataservice/change\";\nimport { getEditronOptions } from \"../../utils/UISchema\";\n\n\n/** required settings in editron:ui-config */\nexport type EditronSchemaOptions = {\n    sync?: {\n        /** map of relative json-pointer from source to target */\n        mappingFromTo: { [fromPointer: string]: JSONPointer },\n        /** if true, will add updates to undo history. Defaults to `false` */\n        addToHistory?: boolean;\n    }\n}\n\n\nexport default class SyncPlugin implements Plugin {\n\n    id = \"sync-plugin\";\n    controller: Controller;\n    hooks = {};\n\n\n    initialize(controller: Controller): Plugin {\n        this.controller = controller;\n        // root pointer is not tracked, run initially to grab config on root\n        this.onModifiedData([{ type: \"add\", pointer: \"#\" }]);\n        return this;\n    }\n\n    copyData(pointer: JSONPointer, syncOptions: EditronSchemaOptions[\"sync\"], previous) {\n        const { mappingFromTo: mapping, addToHistory } = syncOptions;\n        const { controller } = this;\n        const from = Object.keys(mapping);\n        const data = controller.getData();\n\n        from\n            .forEach(key => {\n                // select data\n                const fromPointer = gp.join(pointer, key);\n                const fromValue = gp.get(data, fromPointer);\n                // update data\n                const toPointer = gp.join(pointer, mapping[key]);\n                const toValue = gp.get(data, toPointer);\n                if (previous[fromPointer] !== toValue && !isEmpty(toValue)) {\n                    // console.log(\"abort sync -- previous\", fromPointer, previous, \"value:\", previous[fromPointer], \"current:\", toValue);\n                    return;\n                }\n                // @todo write test. currently untested - but required. Combination of sync-plugin?\n                previous[fromPointer] = fromValue;\n                gp.set(data, toPointer, fromValue);\n            });\n\n        // write data\n        controller.setData(data, { addToHistory });\n    }\n\n    onModifiedData(changes: Array<SimpleChange>) {\n        changes.forEach(change => {\n            if (change.type === \"add\") {\n                const schema = this.controller.service(\"schema\").get(change.pointer);\n                const options = getEditronOptions(schema);\n                if (options?.sync) {\n                    this.startSync(change.pointer, options.sync);\n                }\n\n            } else if (change.type === \"delete\" && this.hooks[change.pointer]) {\n                this.stopSync(change.pointer);\n            }\n        });\n    }\n\n    startSync(pointer, options: EditronSchemaOptions[\"sync\"]) {\n        if (options == null) {\n            return;\n        }\n\n        // validate options\n        if (options.mappingFromTo == null || typeof options.mappingFromTo !== \"object\") {\n            console.warn(`editron sync-plugin: expected property 'mappingFromTo' in sync-plugin options. Given: ${options.mappingFromTo}`);\n            return;\n        }\n\n        // @todo listen to change pointer updates\n        const { controller } = this;\n        const sourcePointers = Object.keys(options.mappingFromTo).map(source => gp.join(pointer, source));\n\n        // initialize\n        const previousData = {};\n        const data = controller.getData();\n        const observers = [];\n        sourcePointers\n            .forEach(sourcePointer => {\n                // store current data-value\n                previousData[sourcePointer] = gp.get(data, sourcePointer);\n                // listen to changes for sync\n                const observer = () => this.copyData(pointer, options, previousData);\n                controller.service(\"data\").observe(sourcePointer, observer, true);\n                observers.push([sourcePointer, observer]);\n            });\n\n        // initial sync\n        this.copyData(pointer, options, previousData);\n\n        this.hooks[pointer] = {\n            removeObservers: () => observers.forEach(([pointer, observer]) =>\n                controller.service(\"data\").removeObserver(pointer, observer)\n            ),\n            options\n        };\n    }\n\n    stopSync(pointer) {\n        this.hooks[pointer]?.removeObservers();\n        this.hooks[pointer] = undefined;\n    }\n}\n","import { Editor, ChangePointerEvent, SetEnabledEvent } from \"../editors/Editor\";\nimport { JSONPointer } from \"../types\";\nimport { Change, isMoveChange, isDeleteChange } from \"./dataservice/change\";\nimport Controller from \"../Controller\";\n\n\n/**\n * manages editor instance events -\n * tracks and notifies instances over their lifetime on changes\n */\nexport default class InstanceService {\n    controller: Controller;\n    /** active editor instances */\n    instances: Array<Editor> = [];\n\n\n    constructor(controller) {\n        this.controller = controller;\n    }\n\n    add(editor: Editor) {\n        const pointer = editor.getPointer();\n        editor.getElement().setAttribute(\"data-point\", pointer);\n        editor.update = editor.update.bind(editor);\n\n        editor.pointer = pointer;\n        this.controller.service(\"data\").observe(pointer, editor.update, editor.notifyNestedChanges);\n        this.controller.service(\"validation\").observe(pointer, editor.update, editor.notifyNestedErrors);\n\n        this.instances.push(editor);\n    }\n\n    findFrom(parentPointer: JSONPointer) {\n        return this.instances.filter(editor => editor.getPointer().startsWith(parentPointer));\n    }\n\n    editorFromElement(dom: HTMLElement) {\n        return this.instances.find(editor => editor.dom === dom);\n    }\n\n    find<T extends Editor>(test: (editor: T) => boolean): Array<T> {\n        return this.instances.filter(test) as Array<T>;\n    }\n\n    remove(editor: Editor) {\n        this.controller.service(\"data\").removeObserver(editor.pointer, editor.update);\n        this.controller.service(\"validation\").removeObserver(editor.pointer, editor.update);\n        this.instances = this.instances.filter(ed => ed !== editor);\n    }\n\n    /**\n     *  move or delete properties/items before upcoming editor updates\n     *  - changes pointers and observers and\n     *  - notifies editors\n     */\n    updateContainer(pointer: JSONPointer, controller, changes: Array<Change>) {\n        const changePointers = [];\n\n        for (let i = 0, l = changes.length; i < l; i += 1) {\n            const change = changes[i];\n\n            // we have to collect editors up front or patch-sequences get mangled\n            // between update and not yet udpated editor\n            if (isMoveChange(change)) {\n                changePointers.push({\n                    ...change,\n                    editors: this.findFrom(change.pointer)\n                });\n\n            // destroy editor instances\n            } else if (isDeleteChange(change)) {\n                this.findFrom(change.pointer).forEach(ed => controller.destroyEditor(ed));\n            }\n        }\n\n        // change pointer of instances\n        changePointers.forEach(change => {\n            const { pointer: prevPtr, to: nextPtr, editors } = change;\n            editors.forEach((instance: Editor) => {\n                const oldPointer = instance.pointer;\n                const newPointer: JSONPointer = instance.getPointer().replace(prevPtr, nextPtr);\n\n                this.controller.service(\"data\")\n                    .removeObserver(instance.pointer, instance.update)\n                    .observe(newPointer, instance.update, instance.notifyNestedChanges);\n\n                this.controller.service(\"validation\")\n                    .removeObserver(instance.pointer, instance.update)\n                    .observe(newPointer, instance.update, instance.notifyNestedChanges);\n\n                instance.pointer = newPointer;\n                instance.update(<ChangePointerEvent>{ type: \"pointer\", value: newPointer });\n                instance.pointer = newPointer;\n                instance.getElement().setAttribute(\"data-point\", newPointer);\n\n                controller.plugins.forEach(plugin => {\n                    if (plugin.onChangePointer) {\n                        plugin.onChangePointer(oldPointer, newPointer, instance);\n                    }\n                });\n            });\n        });\n    }\n\n    /** change all editors active-state */\n    setActive(active: boolean) {\n        this.instances.forEach(ed => ed.update(<SetEnabledEvent>{ type: \"active\", value: active }));\n    }\n\n    destroy() {\n        this.instances.forEach(instance => instance.destroy());\n        this.instances.length = 0;\n    }\n\n    /**\n     * @debug\n     * @returns currently active editor/widget instances sorted by pointer\n     */\n    getInstancesPerPointer() {\n        const map = {};\n        this.instances.forEach(editor => {\n            const pointer = editor.getPointer();\n            map[pointer] = map[pointer] || [];\n            if (map[pointer].includes(editor) === false) {\n                map[pointer].push(editor);\n            } else {\n                console.log(\"multiple instances on\", editor.getPointer(), editor);\n            }\n\n        });\n        return map;\n    }\n}\n","import gp from \"gson-pointer\";\nimport { JSONPointer } from \"../types\";\nconst DELAY = 25;\nimport { getState, dispatch, watch as watchState } from \"../store/global\";\nimport getScrollParent from \"./utils/getScrollParent\";\n\n\nfunction getViewportHeight() {\n    return Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n}\n\n/** called for a focused editor */\nexport type FocusEvent = {\n    type: \"focus\";\n    value: JSONPointer;\n}\n\n/** called for a blurred editor */\nexport type BlurEvent = {\n    type: \"blur\";\n    value: JSONPointer;\n}\n\n/** called, when a new page is focused (page = first property on root data) */\nexport type PageEvent = {\n    type: \"location:page\";\n    value: JSONPointer;\n}\n\n/** called, when the current selected json-pointer has changed */\nexport type TargetEvent = {\n    type: \"location:target\";\n    value: JSONPointer;\n}\n\nexport type Event = FocusEvent|BlurEvent|PageEvent|TargetEvent;\n\nexport type Watcher = (event: Event) => void;\n\n\nexport type Options = {\n    /** default root element, where any json-pointers (editron widgets) are\n    searched for. Defaults to `document.body` */\n    rootElement?: HTMLElement;\n    /** additional offset in px, to scroll into view. In case you want to\n    adjust scroll-position on focus (e.g. skip a header). Defaults to 0 */\n    scrollTopOffset?: number;\n    /** regular expression to identify page-target within a json-pointer */\n    pagePattern?: string;\n}\n\nexport const defaultOptions: Options = {\n    rootElement: document.body,\n    scrollTopOffset: 0,\n    pagePattern: \"(^#?/[^/]+)\"\n};\n\n\nfunction isWindow(dom): dom is Window {\n    return dom === window;\n}\n\nfunction scrollIntoView(targetElement: HTMLElement, scrollTopOffset = 0): void {\n    const scrollContainer = getScrollParent(targetElement);\n    const bound = targetElement.getBoundingClientRect();\n\n    if (isWindow(scrollContainer)) {\n        const viewportHeight = getViewportHeight();\n        if (bound.top < scrollTopOffset || bound.bottom > viewportHeight) {\n            window.scrollTo(0, bound.top + scrollTopOffset);\n        }\n        // else { console.log(\"skip scrolling - already in viewport\", viewportHeight, bound.top); }\n        return;\n    }\n\n    // scroll target element to top of scroll container\n    const parentBound = scrollContainer.getBoundingClientRect();\n    // distance from parent-container -> element, aka scroll distance\n    const offsetInParent = bound.y - parentBound.y;\n    const scrollDistance = scrollContainer.scrollTop;\n    // we want to scroll element to top of parent-bound\n    const scrollPosition = scrollDistance + offsetInParent - scrollTopOffset;\n    scrollContainer.scrollTo(0, scrollPosition);\n}\n\n\nexport default class LocationService {\n\n    PAGE_EVENT = \"page\";\n    TARGET_EVENT = \"target\";\n    timeout: ReturnType<typeof setTimeout>;\n    options: Options;\n\n    watcher: Array<Watcher> = [];\n\n\n    /**\n     * Register to page changes, target-pointer changes or to (re)scroll to the current pointer in view.\n     *\n     * The LocationService manages global pointer states and scroll position:\n     *  - the \"current pointer\" tracks the currently focused editor and\n     *  - the \"page pointer\" corresponds to the first property of \"current pointer\", which may be used for main page loading\n     *\n     * ### Motivation\n     *\n     * Jumping to specific editors via the navigation requires a targeting system. A page reload may occur for a called\n     * anchor, and thus is scrolled into view async. In other cases the current view may be completely rebuilt which\n     * resets the scroll position to top. A stored pointer (current) may be used to retrieve the scroll position.\n     * named anchors fail when hash routes are present. Thus anchors are processed via javascript.\n     */\n    constructor(options: Options = {}) {\n        this.options = { ...defaultOptions, ...options };\n        this.setCurrent(\"\");\n\n        watchState(event => {\n            if (event.type === \"global\" && event.value.modelId === \"ui\") {\n                const { changes } = event.value;\n                if (changes.currentPage) {\n                    this.notifyWatcher(<PageEvent>{ type: \"location:page\", value: changes.currentPage });\n                }\n                if (changes.currentPointer) {\n                    this.notifyWatcher(<TargetEvent>{ type: \"location:target\", value: changes.currentPointer });\n                }\n            }\n        });\n    }\n\n    // update page and target pointer\n    goto(targetPointer: JSONPointer, rootElement = this.options.rootElement) {\n        const matches = targetPointer.match(new RegExp(this.options.pagePattern));\n        if (!matches) {\n            return;\n        }\n\n        const nextPage = matches.pop();\n        const { currentPage } = getState().ui;\n        if (currentPage !== nextPage) {\n            dispatch.ui.setCurrentPage(gp.join(nextPage, true));\n        }\n        dispatch.ui.setCurrentPointer(gp.join(targetPointer, true));\n        this.focus(rootElement);\n    }\n\n    /** set target pointer */\n    setCurrent(pointer: JSONPointer) {\n        if (pointer !== this.getCurrent()) {\n            dispatch.ui.setCurrentPointer(pointer);\n            this.notifyWatcher(<FocusEvent>{ type: \"focus\", value: pointer });\n        }\n    }\n\n    getCurrent() {\n        return getState().ui.currentPointer;\n    }\n\n    /** trigger focus in input element. Will be ignored, if this is no input element */\n    focusInputElement(pointer: JSONPointer, rootElement = this.options.rootElement) {\n        const targetInput = <HTMLElement>rootElement.querySelector(`[data-id=\"${pointer}\"]`);\n        if (targetInput) {\n            targetInput.dispatchEvent(new Event(\"focus\"));\n            targetInput.focus && targetInput.focus();\n        }\n    }\n\n    /** focus target pointer */\n    focus(rootElement = this.options.rootElement) {\n        clearTimeout(this.timeout);\n\n        const pointer = getState().ui.currentPointer;\n        const targetElement = <HTMLElement>rootElement.querySelector(`[data-point=\"${pointer}\"]`);\n        if (targetElement == null) {\n            console.log(`Location:focus - target ${pointer} not found`);\n            return;\n        }\n\n        this.timeout = setTimeout(() => {\n            const { scrollTopOffset } = this.options;\n            scrollIntoView(targetElement, scrollTopOffset);\n            this.focusInputElement(pointer, rootElement);\n            this.timeout = null;\n        }, DELAY);\n    }\n\n    blur(pointer: JSONPointer) {\n        if (getState().ui.currentPointer !== pointer) {\n            return;\n        }\n        dispatch.ui.setCurrentPage(\"\");\n        this.notifyWatcher(<BlurEvent>{ type: \"blur\", value: pointer });\n    }\n\n    watch(watcher: Watcher): LocationService {\n        if (this.watcher.includes(watcher) === false) {\n            this.watcher.push(watcher);\n        }\n        return this;\n    }\n\n    notifyWatcher(event: Event): LocationService {\n        this.watcher.forEach(w => w(event));\n        return this;\n    }\n\n    removeWatcher(watcher: Watcher): LocationService {\n        this.watcher = this.watcher.filter(w => w !== watcher);\n        return this;\n    }\n\n    destroy() {\n        clearTimeout(this.timeout);\n        this.watcher.length = 0;\n    }\n}\n","/* eslint no-use-before-define: 0 */\nimport m from \"mithril\";\nimport Overlay from \"../components/overlay\";\nimport createElement from \"../utils/createElement\";\nimport { watch, dispatch } from \"../store/global\";\n\n\nexport const defaultOptions = {\n    abortButton: \"cancel\",\n    confirmButton: \"ok\",\n    fullscreen: false,\n    onSave: () => OverlayService.close(OverlayAction.Confirm),\n    onAbort: () => OverlayService.close(OverlayAction.Abort)\n};\n\n\nexport enum OverlayAction {\n    Abort,\n    Close,\n    Confirm\n}\n\nexport type Options = {\n    /** optional overlay title */\n    header?: string;\n    abortButton?: string|false;\n    confirmButton?: string|false;\n    /** fullscreen size of overlay, regardless of content */\n    fullscreen?: boolean;\n    // /** called when Overlay is closed via ok/abort */\n    // onAbort?: () => void;\n    // /** called when Overlay is closed via save */\n    // onSave?: () => void;\n}\n\n\n/**\n * Opens an overlay with a DOM-Node as contents\n */\nconst OverlayService = {\n    /** root overlay container */\n    $element: undefined,\n    /** Promise.resolve of current overlay */\n    resolve: undefined,\n\n    /** Opens the overlay, showing the given `container` as content */\n    open(dialog: HTMLElement, options: Options): Promise<OverlayAction> {\n        OverlayService.removePanel();\n\n        const $el = OverlayService.getElement();\n        dialog.classList.add(\"ed-overlay__item\");\n        OverlayService.render(dialog, { ...defaultOptions, ...options });\n        document.body.appendChild($el);\n        dispatch.ui.showOverlay(true);\n\n        return new Promise(resolve => (OverlayService.resolve = resolve));\n    },\n\n    /** close current dialog and overlay */\n    close(action: OverlayAction = OverlayAction.Close) {\n        OverlayService.removePanel(action);\n        OverlayService.removeOverlay();\n    },\n\n    /** helper: close current active dialog but keep overlay visible */\n    removePanel(action: OverlayAction = OverlayAction.Close) {\n        if (OverlayService.resolve) {\n            OverlayService.resolve(action);\n            OverlayService.resolve = undefined;\n            // must destroy component for reuse\n            m.render(OverlayService.getElement(), m(\"i\"));\n        }\n    },\n\n    /** remove overlay container from dom */\n    removeOverlay() {\n        dispatch.ui.showOverlay(false);\n        const $el = OverlayService.getElement();\n        $el.parentNode && $el.parentNode.removeChild($el);\n    },\n\n    getElement() {\n        if (OverlayService.$element == null) {\n            OverlayService.$element = createElement(\".ed-overlay\");\n            // close popup if clicked on \"background\"\n            OverlayService.$element.addEventListener(\"click\", (e) => {\n                if (e.target === OverlayService.$element) {\n                    OverlayService.close();\n                }\n            });\n        }\n        return OverlayService.$element;\n    },\n\n    render($dialog: HTMLElement, options: Options) {\n        m.render(OverlayService.getElement(),\n            m(Overlay, {\n                container: $dialog,\n                onremove: () => OverlayService.close(),\n                ...options\n            })\n        );\n    }\n};\n\n\nwatch(event => {\n    if (event.value?.changes?.overlayIsVisible === false) {\n        OverlayService.close();\n    }\n});\n\n\nexport default OverlayService;\n","import copy from \"./utils/copy\";\nimport jlib from \"json-schema-library\";\nimport jsl from \"json-schema-library\";\nimport { JSONSchema, JSONData, JSONPointer } from \"../types\";\nconst { getChildSchemaSelection } = jlib;\nconst { JsonEditor: Core } = jlib.cores;\n\n\nexport default class SchemaService {\n    core;\n    data: JSONData;\n    schema: JSONSchema;\n    /** cache for resolved json-pointer */\n    cache: { [p: string]: JSONSchema } = {};\n\n    /**\n     * Manages json-schema interactions and adds caching of reoccuring json-schema requests\n     * @param schema - json-schema\n     * @param [data] - data corresponding to json-schema\n     * @param [core] - instance of json-schema-library Core\n     */\n    constructor(schema: JSONSchema = { type: \"object\" }, data: JSONData = {}, core = new Core()) {\n        this.core = core;\n        this.setSchema(schema);\n        this.setData(data);\n    }\n\n    /**\n     * Update data by any missing (default) values specified in the json-schema\n     * @param [data=currentData]   - update given data or use the internal stored data (via `setData(data)`)\n     * @param [schema]             - specific json schema, or the internal store schema (via `setSchema(root)`)\n     * @return json data with valid default data values\n     */\n    addDefaultData(data: JSONData = this.data, schema: JSONSchema = this.schema): JSONData {\n        return this.core.getTemplate(data, schema);\n    }\n\n    /**\n     * Create the template data object based on the json-schema, which fullfills the schemas structure as much as\n     * possible\n     * @return data corresponding to json-schema\n     */\n    getTemplate(schema: JSONSchema): JSONData {\n        return this.core.getTemplate(undefined, schema);\n    }\n\n    /**\n     * @return list of valid items to insert at the given position\n     */\n    getChildSchemaSelection(pointer: JSONPointer, property: number|string): Array<JSONSchema> {\n        const parentSchema = this.get(pointer);\n        return getChildSchemaSelection(this.core, property, parentSchema);\n    }\n\n    /**\n     * Sets the root data. This is optional and used within internal functions to support optional _data_-parameters.\n     * On every change in data, call this method with that latest state `schemaService.setData(latestData)`;\n     * @param data - latest root data corresponding to stored json-schema\n     */\n    setData(data: JSONData): void {\n        this.data = this.addDefaultData(data);\n        this.resetCache();\n    }\n\n    /** Set or change the application schema */\n    setSchema(schema: JSONSchema): void {\n        this.core.setSchema(schema);\n        this.schema = this.core.getSchema();\n        this.resetCache();\n    }\n\n    resetCache(): void {\n        this.cache = {};\n    }\n\n    /**\n     * Return the json-schema for the requested pointer. Resolved the pointer on the stored schema by the accompanied\n     * json-data, which is required to resolve optional json-schema values.\n     *\n     * @param pointer - pointer in data\n     * @param [data] - root data, corresponding to json-schema.\n     *     This is optional, when the root-data is up-to-date (via setData)\n     * @return json-schema for the requested pointer\n     */\n    get(pointer: JSONPointer, data?: JSONData): JSONData {\n        if (data) {\n            const result = jsl.getSchema(this.core, pointer, data, this.schema);\n            return copy(result);\n        }\n\n        if (this.cache[pointer] === undefined) {\n            const result = jsl.getSchema(this.core, pointer, this.data, this.schema);\n            if (result.variableSchema === true) {\n                // @special case: do not cache dynamic schema object (oneOf)\n                return result;\n            }\n            this.cache[pointer] = copy(result);\n        }\n\n        return this.cache[pointer];\n    }\n\n    destroy(): void {\n        this.setData(null);\n        this.setSchema(null);\n    }\n}\n","import { JSONData } from \"../types\";\n\n\n/** Simple session service to store and retrieve user-specific data */\nexport default {\n\n    get(key: string, defaultValue?: any): JSONData {\n        if (window.localStorage == null) {\n            return defaultValue;\n        }\n        if (localStorage.getItem(key) == null) {\n            this.set(key, defaultValue);\n        }\n        try {\n            return JSON.parse(localStorage.getItem(key));\n        } catch (error) {\n            return defaultValue;\n        }\n    },\n\n    set(key: string, value: any): void {\n        if (window.localStorage) {\n            localStorage.setItem(key, JSON.stringify(value));\n        }\n    },\n\n    toggle(key: string): JSONData {\n        const value = !this.get(key, false);\n        this.set(key, value);\n        return value;\n    }\n};\n","import BubblingCollectionObservable, { Observer } from \"./utils/BubblingCollectionObservable\";\nimport jlib from \"json-schema-library\";\nimport Store from \"../store\";\nimport Validation, { ValidationErrorMapper } from \"./utils/Validation\";\nimport { JSONSchema, JSONData, JSONPointer, ValidationError } from \"../types\";\n\n\nconst ID = \"errors\";\n\nconst { JsonEditor: Core } = jlib.cores;\n\n\nexport { Observer };\n\n\ntype ValidationDoneEvent = {\n    type: \"validation:done\";\n    value: Array<ValidationError>;\n}\n\nexport type Event = ValidationDoneEvent;\n\nexport type Watcher = (event: Event) => void;\n\n\nexport default class ValidationService {\n    core;\n    currentValidation: Validation;\n    errorHandler: ValidationErrorMapper;\n    observer = new BubblingCollectionObservable();\n    schema: JSONSchema;\n    store: Store;\n    /** list of active watchers on update-lifecycle events */\n    watcher = [];\n\n    constructor(store: Store, schema: JSONSchema = { type: \"object\" }, core = new Core()) {\n        if (!(store instanceof Store)) {\n            throw new Error(\"Given state in ValidationService must be of instance 'State'\");\n        }\n\n        this.core = core;\n        this.set(schema);\n        this.store = store;\n        this.setErrorHandler(error => error);\n    }\n\n    /** sets a custom error handler to map errors */\n    setErrorHandler(callback: ValidationErrorMapper): void {\n        this.errorHandler = callback;\n    }\n\n    /**\n     * Starts the validation, executing callback handlers and emitters on the go\n     * @param data               - data to validate\n     * @param [pointer]  - optional location. Per default all data is validated\n     * @return promise, resolving with list of errors when all async validations are performed\n     */\n    validate(data: JSONData, pointer: JSONPointer = \"#\"): Promise<Array<ValidationError>> {\n        if (this.currentValidation) {\n            this.currentValidation.cancel();\n        }\n\n        // @feature selective-validation\n        this.observer.clearEvents(pointer);\n        // reset stored list of events\n        let remainingErrors = [];\n        if (pointer !== \"#\") {\n            // the following filtering is a duplicate from BubblingCollectionObservable.clearEvents\n            remainingErrors = this.store.get(ID)\n                .filter(e => e.data.pointer == null || e.data.pointer.startsWith(pointer) === false);\n        }\n\n        this.store.dispatch.errors.set(remainingErrors);\n\n        // this.store.dispatch(ActionCreators.setErrors(remainingErrors));\n        this.currentValidation = new Validation(data, pointer, this.errorHandler);\n        return this.currentValidation.start(\n            this.core,\n            (newError, currentErrors) => {\n                // @feature selective-validation\n                const completeListOfErrors = remainingErrors.concat(currentErrors);\n                this.store.dispatch.errors.set(completeListOfErrors);\n                this.observer.notify(newError.data.pointer, newError);\n            },\n            validationErrors => {\n                // @feature selective-validation\n                const completeListOfErrors: Array<ValidationError> = remainingErrors.concat(validationErrors);\n                this.store.dispatch.errors.set(completeListOfErrors);\n                this.currentValidation = null;\n                this.notifyWatcher({ type: \"validation:done\", value: completeListOfErrors });\n            }\n        );\n    }\n\n    /** set or change the json-schema for data validation */\n    set(schema: JSONSchema): void {\n        this.core.setSchema(schema);\n        this.schema = this.core.getSchema();\n    }\n\n    /** returns the current json-schema */\n    get(): JSONSchema {\n        return this.schema;\n    }\n\n    observe(pointer: JSONPointer, observer: Observer, bubbledEvents = false): Observer {\n        this.observer.observe(pointer, observer, bubbledEvents);\n        return observer;\n    }\n\n    removeObserver(pointer: JSONPointer, observer: Observer) {\n        this.observer.removeObserver(pointer, observer);\n        return this;\n    }\n\n    notify(pointer: JSONPointer, event: ValidationError) {\n        this.observer.notify(pointer, event);\n    }\n\n    notifyWatcher(event: Event) {\n        this.watcher.forEach(watcher => watcher(event));\n    }\n\n    /** watch DataService lifecycle events */\n    watch(callback: Watcher) {\n        if (this.watcher.includes(callback) === false) {\n            this.watcher.push(callback);\n        }\n        return callback;\n    }\n\n    unwatch(callback: Watcher) {\n        this.watcher = this.watcher.filter(w => w !== callback);\n        return callback;\n    }\n\n    /** returns all validation errors and warnings */\n    getErrorsAndWarnings(pointer?: JSONPointer, withChildErrors = false): Array<ValidationError> {\n        const errors = this.store.get(ID);\n        if (pointer == null) {\n            return errors;\n        }\n        // filter by pointer\n        const selectError = new RegExp(`^${pointer}${withChildErrors ? \"\" : \"$\"}`);\n        return errors.filter(error => selectError.test(error.data.pointer));\n    }\n\n    /** returns all validation errors only */\n    getErrors(pointer?: JSONPointer, withChildErrors = false): Array<ValidationError> {\n        return this.getErrorsAndWarnings(pointer, withChildErrors).filter(error => error.severity !== \"warning\");\n    }\n\n    /** returns all validation warnings only */\n    getWarnings(pointer?: JSONPointer, withChildWarnings = false): Array<ValidationError> {\n        return this.getErrorsAndWarnings(pointer, withChildWarnings).filter(error => error.severity === \"warning\");\n    }\n\n    destroy() {\n        this.set(null);\n        this.observer = null;\n    }\n}\n","import diffpatch from \"../utils/diffpatch\";\nimport gp from \"gson-pointer\";\nimport { isPointer } from \"../../utils/UISchema\";\nimport { JSONPointer } from \"../../types\";\nimport { PatchResult } from \"../utils/createDiff\";\nimport pointersOf from \"./pointersOf\";\n\n\nexport type AddChange = {\n    type: \"add\";\n    pointer: JSONPointer;\n}\n\nexport type DeleteChange = {\n    type: \"delete\";\n    pointer: JSONPointer;\n}\n\nexport type MoveChange = {\n    type: \"move\";\n    pointer: JSONPointer;\n    to: JSONPointer;\n}\n\nexport type ValueChange = {\n    type: \"update\";\n    pointer: JSONPointer;\n}\n\n\nexport const isAddChange = (change): change is AddChange => change?.type === \"add\";\nexport const isDeleteChange = (change): change is DeleteChange => change?.type === \"delete\";\nexport const isMoveChange = (change): change is MoveChange => change?.type === \"move\";\nexport const isValueChange = (change): change is ValueChange => change?.type === \"update\";\n\n\nexport type Change = AddChange|DeleteChange|MoveChange|ValueChange;\n\n\n/** sort changes to be processable in order */\nexport function sortChanges(a, b) {\n    if (a.type === b.type) {\n        // longest pointer first (outer to inner)\n        return b.pointer.length - a.pointer.length;\n    }\n    // delete first\n    if (a.type === \"delete\") {\n        return -1;\n    } else if (b.type === \"delete\") {\n        return 1;\n    }\n    // move next\n    if (a.type === \"move\") {\n        return -1;\n    } else if (b.type === \"move\") {\n        return 1;\n    }\n    // at last add\n    if (a.type === \"add\") {\n        return -1;\n    } else if (b.type === \"add\") {\n        return 1;\n    }\n    throw new Error(`Uncaught comparisson ${a.type}:${b.type}`);\n}\n\nexport type SimpleChange = { type: \"add\"|\"delete\"|\"update\", pointer: JSONPointer, from?: JSONPointer, to?: JSONPointer };\n\n\nexport function changesWithChildPointers(changes: Array<Change>, previousData, currentData): Array<SimpleChange> {\n    // build a list of changes for all pointers that have been modified.\n    // Also converts move-change types to add & delete for a simpler api\n    const changeStream: Array<SimpleChange> = [];\n    changes.forEach((change: Change) => {\n        if (change.type === \"add\") {\n            pointersOf(gp.get(currentData, change.pointer), change.pointer).forEach(pointer => {\n                changeStream.push({ type: \"add\", pointer });\n            });\n\n        } else if (change.type === \"delete\") {\n            pointersOf(gp.get(previousData, change.pointer), change.pointer).forEach(pointer => {\n                changeStream.push({ type: \"delete\", pointer });\n            });\n\n        } else if (change.type === \"move\") {\n            pointersOf(gp.get(previousData, change.pointer), change.pointer).forEach(pointer => {\n                changeStream.push({ type: \"delete\", pointer, to: pointer.replace(change.pointer, change.to) });\n            });\n            pointersOf(gp.get(currentData, change.to), change.to).forEach(pointer => {\n                changeStream.push({ type: \"add\", pointer, from: pointer.replace(change.to, change.pointer) });\n            });\n        } else {\n            // value change\n            changeStream.push(change);\n        }\n    });\n\n    changeStream.sort(sortChanges);\n    return changeStream;\n}\n\n\n\nexport function changesFromPatchResult(patchResult: PatchResult, parentDataType, originalData: any): Array<Change> {\n    if (parentDataType === \"array\") {\n        return getArrayChangeList(patchResult, originalData);\n    } else if (parentDataType === \"object\") {\n        return getObjectChangeList(patchResult);\n    } else if (Array.isArray(patchResult.patch)) {\n        return [{ type: \"update\", pointer: patchResult.pointer }];\n    }\n    throw new Error(`Unknown patchResult: ${JSON.stringify(patchResult)}`);\n}\n\n\n/** converts a patch to a list of simple changes for add, delete and move operations */\nexport function getArrayChangeList(patchResult: PatchResult, originalData: any): Array<Change> {\n    const changeList = [];\n\n    const eventLocation = patchResult.pointer;\n    let originalArray = gp.get(originalData, eventLocation);\n    if (Array.isArray(originalArray) === false) {\n        return changeList;\n    }\n    originalArray = originalArray.map((_, index) => `${eventLocation}/${index}`);\n    const changedArray = diffpatch.patch(Array.from(originalArray), patchResult.patch);\n\n    // retrieve deleted items\n    for (let i = 0, l = originalArray.length; i < l; i += 1) {\n        if (changedArray.includes(originalArray[i]) === false) {\n            const change: DeleteChange = { type: \"delete\", pointer: originalArray[i] };\n            changeList.push(change);\n        }\n    }\n\n    // identify added and movement items\n    for (let i = 0, l = changedArray.length; i < l; i += 1) {\n        let change: AddChange|MoveChange;\n        const ptrOrData = changedArray[i];\n        const ptrChanged = ptrOrData !== `${eventLocation}/${i}`;\n        if (ptrChanged === false) {\n            continue;\n        }\n\n        if (isPointer(ptrOrData)) {\n            change = <MoveChange>{ type: \"move\", pointer: ptrOrData, to: `${eventLocation}/${i}` };\n        } else {\n            change = <AddChange>{ type: \"add\", pointer: `${eventLocation}/${i}` };\n        }\n        changeList.push(change);\n    }\n\n    return changeList;\n}\n\n\n/** converts a patch to a list of simple changes for add, delete and move operations */\nexport function getObjectChangeList(patchResult: PatchResult): Array<Change> {\n    const changeList = [];\n    const { pointer } = patchResult;\n    const properties = Object.keys(patchResult.patch);\n    for (let i = 0, l = properties.length; i < l; i += 1) {\n        const property = properties[i];\n        const change = patchResult.patch[property];\n        if (change.length === 1) {\n            changeList.push(<AddChange>{ type: \"add\", pointer: `${pointer}/${property}` });\n        } else if (change[2] === 0) {\n            changeList.push(<DeleteChange>{ type: \"delete\", pointer: `${pointer}/${property}` });\n        } else if (change[2] === 3) {\n            console.log(\"object property movement\", patchResult);\n            throw new Error(`Property movement currently unsupported (${JSON.stringify(change)})`);\n        }\n        // changed value\n        // else if (change.length === 2) { console.log(\"change\", `${patch.pointer}/${property}`); }\n    }\n    return changeList;\n}\n","import copy from \"../utils/copy\";\nimport diffpatch from \"../utils/diffpatch\";\nimport createDiff, { Patch } from \"../utils/createDiff\";\nimport getTypeOf from \"json-schema-library/lib/getTypeOf\";\nimport gp from \"gson-pointer\";\nimport isRootPointer from \"../utils/isRootPointer\";\nimport Store from \"../../store\";\nimport { JSONData, JSONPointer } from \"../../types\";\n\nimport { UpdateDataEvent } from \"../../editors/Editor\";\nimport { Change, SimpleChange, changesFromPatchResult, changesWithChildPointers } from \"./change\";\n\n\nconst ID = \"data\";\n\n\ntype BeforeUpdateEvent = {\n    type: \"data:update:before\";\n    value: { pointer: JSONPointer; action: string; };\n}\n\ntype AfterUpdateEvent = {\n    type: \"data:update:after\";\n    value: { pointer: JSONPointer; patch: Patch };\n}\n\ntype ContainerUpdateEvent = {\n    type: \"data:update:container\";\n    value: { pointer: JSONPointer; changes: Array<Change> };\n}\n\ntype UpdateDoneEvent = {\n    type: \"data:update:done\";\n    value: Array<SimpleChange>;\n}\n\nexport type Event = BeforeUpdateEvent|ContainerUpdateEvent|AfterUpdateEvent|UpdateDoneEvent;\n\nexport type Watcher = (event: Event) => void;\n\nexport type Observer = {\n    (event: UpdateDataEvent): void;\n    bubbleEvents?: boolean;\n}\n\n\nexport default class DataService {\n    /** current state */\n    store: Store;\n    /** current observers on json-pointer changes */\n    observers: { [pointer: string]: Array<Observer> } = {};\n    /** internal value to track previous data */\n    lastUpdate = {};\n    /** list of active watchers on update-lifecycle events */\n    watcher = [];\n\n\n    /**\n     * Read and modify form data and notify observers\n     * @param state - current state/store of application\n     * @param data - current application data (form)\n     */\n    constructor(store: Store, data?: JSONData) {\n        if (!(store instanceof Store)) {\n            throw new Error(\"Given state in DataService must be of instance 'State'\");\n        }\n\n        this.store = store;\n        this.onStateChanged = this.onStateChanged.bind(this);\n        this.store.subscribe(ID, this.onStateChanged);\n\n        if (data !== undefined) {\n            this.set(\"#\", data);\n            this.resetUndoRedo();\n        }\n    }\n\n    // improved version - supporting multiple patches\n    onStateChanged() {\n        const { present: data } = this.store.get(ID);\n        const patches = createDiff(this.lastUpdate, data);\n        if (patches.length === 0) {\n            return;\n        }\n\n        const allChanges = [];\n\n        // @todo simplify event-arguments: we have patches, changes and simplechanges\n        for (let i = 0, l = patches.length; i < l; i += 1) {\n            const eventLocation = patches[i].pointer;\n            const parentData = this.getDataByReference(eventLocation);\n            const parentDataType = getTypeOf(parentData);\n\n            // build simple patch-information and notify about changes in pointer for move-instance support\n            // this is a major performance improvement for array-item movements\n            const changes = changesFromPatchResult(patches[i], parentDataType, this.lastUpdate);\n            if (parentDataType === \"array\" || parentDataType === \"object\") {\n                this.notifyWatcher({ type: \"data:update:container\", value: { pointer: eventLocation, changes }});\n            }\n\n            // collect all changes fo change-stream\n            allChanges.push(...changes);\n\n            const payload = { pointer: eventLocation, patch: patches[i].patch };\n            this.notifyWatcher({ type: \"data:update:after\", value: payload });\n            this.bubbleObservers(eventLocation, { type: \"data:update\", value: payload });\n        }\n\n        const changeStream = changesWithChildPointers(allChanges, this.lastUpdate, data);\n        this.notifyWatcher(<UpdateDoneEvent>{ type: \"data:update:done\", value: changeStream });\n        this.lastUpdate = data;\n    }\n\n    /** clear undo/redo stack */\n    resetUndoRedo() {\n        this.store.dispatch.data.clearHistory();\n        this.store.previousState?.errors.pop();\n    }\n\n    /**\n     * Get a copy of current data from the requested `pointer`\n     * @param [pointer] - data to fetch. Defaults to _root_\n     * @returns data, associated with `pointer`\n     */\n    get(pointer: JSONPointer = \"#\") {\n        const value = this.getDataByReference(pointer);\n        return copy(value);\n    }\n\n    /** returns a reference to data from the requested `pointer` (cheaper)\n     * @param [pointer=\"#\"] - data to fetch. Defaults to _root_\n     * @returns data, associated with `pointer`\n     */\n    getDataByReference(pointer: JSONPointer = \"#\") {\n        const state = this.store.store.getState();\n        return gp.get(state.data.present, pointer);\n    }\n\n    /**\n     * Change data at the given `pointer`\n     * @param pointer - data location to modify\n     * @param value - new value at pointer\n     * @param [options]\n     */\n    set(pointer: JSONPointer, value: any, options?: { addToHistory?: boolean }) {\n        if (this.isValid(pointer) === false) {\n            throw new Error(`Pointer ${pointer} does not exist in data`);\n        }\n\n        const currentValue = this.getDataByReference(pointer);\n        if (diffpatch.diff(currentValue, value) == null) {\n            return;\n        }\n\n        if (pointer === \"#\") {\n            // do not add root changes to undo (for sync, skip this)\n            options = { ...options, addToHistory: false};\n        }\n\n        this.notifyWatcher({ type: \"data:update:before\", value: { pointer, action: \"data\" }});\n        // this.store.dispatch(ActionCreators.setData(pointer, value, currentValue, isSynched));\n        this.store.dispatch.data.set({ pointer, value, addToHistory: options?.addToHistory });\n    }\n\n    /**\n     * Delete data at the given `pointer`\n     * @param pointer - data location to delete\n     */\n    delete(pointer: JSONPointer) {\n        if (isRootPointer(pointer)) {\n            throw new Error(\"Can not remove root data via delete. Use set(\\\"#/\\\", {}) instead.\");\n        }\n\n        const frags = gp.split(pointer);\n        const key = frags.pop();\n        const parentPointer = gp.join(frags);\n        const data = this.get(parentPointer);\n\n        gp.remove(data, key);\n        this.set(parentPointer, data);\n    }\n\n    /** get valid undo count */\n    undoCount(): number {\n        return this.store.get(ID).past.length;\n    }\n\n    /** get valid redo count */\n    redoCount(): number {\n        return this.store.get(ID).future.length;\n    }\n\n    /** undo last change */\n    undo() {\n        this.notifyWatcher({ type: \"data:update:before\", value: { pointer: \"#\", action: \"undo\" }});\n        this.store.dispatch.data.undo();\n        // this.store.dispatch(ActionCreators.undo());\n    }\n\n    /** redo last undo */\n    redo() {\n        this.notifyWatcher({ type: \"data:update:before\", value: { pointer: \"#\", action: \"redo\" }});\n        // this.store.dispatch(ActionCreators.redo());\n        this.store.dispatch.data.redo();\n    }\n\n    notifyWatcher(event: Event) {\n        this.watcher.forEach(watcher => watcher(event));\n    }\n\n    /** watch DataService lifecycle events */\n    watch(callback: Watcher) {\n        if (this.watcher.includes(callback) === false) {\n            this.watcher.push(callback);\n        }\n        return callback;\n    }\n\n    removeWatcher(callback: Watcher) {\n        this.watcher = this.watcher.filter(watcher => watcher !== callback);\n    }\n\n    /**\n     * observes changes in data at the specified json-pointer\n     * @param pointer - json-pointer to watch\n     * @param callback - called on a change\n     * @param bubbleEvents - set to true to receive notifications changes in children of pointer\n     * @returns callback\n     */\n    observe<T extends Observer>(pointer: JSONPointer, callback: T, bubbleEvents = false): T {\n        callback.bubbleEvents = bubbleEvents;\n        this.observers[pointer] = this.observers[pointer] || [];\n        this.observers[pointer].push(callback);\n        return callback;\n    }\n\n    /** stop an observer from watching changes on pointer */\n    removeObserver(pointer: JSONPointer, callback: Observer) {\n        if (this.observers[pointer] && this.observers[pointer].length > 0) {\n            this.observers[pointer] = this.observers[pointer].filter(cb => cb !== callback);\n        }\n        return this;\n    }\n\n    /** send an event to all json-pointer observers */\n    notify(pointer: JSONPointer, event: UpdateDataEvent) {\n        if (this.observers[pointer] == null || this.observers[pointer].length === 0) {\n            return;\n        }\n        const observers = this.observers[pointer];\n        for (let i = 0, l = observers.length; i < l; i += 1) {\n            if (observers[i].bubbleEvents === true || event.value.pointer === pointer) {\n                observers[i](event);\n            }\n        }\n    }\n\n    bubbleObservers(pointer: JSONPointer, event: UpdateDataEvent) {\n        const frags = gp.split(pointer);\n        while (frags.length) {\n            this.notify(gp.join(frags, true), event);\n            frags.length -= 1;\n        }\n        this.notify(\"#\", event);\n    }\n\n    /** Test the pointer for existing data */\n    isValid(pointer: JSONPointer): boolean {\n        return isRootPointer(pointer) || gp.get(this.getDataByReference(), pointer) !== undefined;\n    }\n\n    /** destroy service */\n    destroy() {\n        this.store.unsubscribe(ID, this.onStateChanged);\n    }\n}\n\n","import { JSONPointer } from \"../../types\";\n\n\n/**\n * converts input data to a list of pointers for all objects, array and values\n *\n * usage example\n *\n * ```js\n * const value = data.list[0];\n * const pointers = pointersOf(value, \"#/list/0\");\n * // or const pointers = pointersOf(gp.get(data, \"#/list/0), \"#/list/0\");\n * ```\n *\n * @param data\n * @param [pointer] root pointer of data\n */\nexport default function pointersOf(data: any, pointer: JSONPointer = \"#\", result = []): Array<JSONPointer> {\n    if (data == null) {\n        return result;\n    }\n\n    result.push(pointer);\n\n    if (Array.isArray(data)) {\n        data.forEach((value, index) => {\n            pointersOf(value, `${pointer}/${index}`, result);\n        });\n\n    } else if (typeof data === \"object\") {\n        Object.keys(data).forEach(property =>\n            property !== \"_id\" && pointersOf(data[property], `${pointer}/${property}`, result)\n        );\n\n    }\n\n    return result;\n}\n","/* eslint arrow-parens: 0 */\nimport gp from \"gson-pointer\";\nimport { JSONPointer, ValidationError } from \"../../types\";\nimport { UpdateErrorsEvent } from \"../../editors/Editor\";\n\n\nexport type Observer = {\n    (event: UpdateErrorsEvent): void;\n    receiveChildEvents?: boolean;\n}\n\n\n/**\n * > Internal helper, mainly used in [ValidationService](#validationservice) to support the weird notification behaviour\n * of error-events.\n *\n *\n * ### Motivation\n *\n * Error-events in the validation process occur per error, because we want them to pass as quickly as\n * possible (Asynchronous errors may take a long time and available instant feedback are postponed). In the previous\n * version two events were required in every editor\n *\n * 1. observing \"start validation\"-events to reset the errors and\n * 2. observing \"add error\"-events to build up the asynchronous incoming error-list\n *\n * This is tedious and brings some overhead using the api. Thus, the observe \"set error\"-event, introduced hereby\n * will collect the errors and repeatedly call the observer with the current, complete list of errors\n *\n * 1. for the observable and\n * 2. any observable that includes listening to changes of child-editors\n *\n *\n * ### Usage as observer\n *\n * An observer will receive an up-to-date version of all events occuring at the location\n *\n * ```js\n *  // init\n *  observable.observe(\"#/pointer/to/my/location\", (errors) => {\n *      // list of current errors, continously updated\n *      this.errors = errors;\n *      this.processErrors(); // or some such\n *  });\n *  ```\n *\n * or if you are interested in events occuring further down in data\n *\n * ```js\n *  // init\n *  observable.observe(\"#/pointer/to/my/location\", (errors) => {\n *      // list of current errors at location from pointer and further down within the data structure e.g.\n *      // \"#/pointer/to/my/location\", \"#/pointer/to/my/location/xy\", \"#/pointer/to/my/location/az/er\", etc\n *      continously updated\n *      this.errors = errors;\n *      this.processErrors(); // or some such\n *  }, true); // <- bubble events\n *  ```\n * and remove the event listener with\n *\n * ```js\n *  observable.observe(\"#/pointer/to/my/location\", myRegisteredCallbackFunction);\n * ```\n *\n * ### Usage as observable\n *\n * ```js\n *  // init\n *  this.observers = new BubblingCollectionObservable();\n *  // notify session\n *  this.observers.notify(\"#/pointer/to/location\", { event });\n *  // another notification\n *  this.observers.notify(\"#/pointer/to/any-location\", { event2 });\n *  // same target or if listening with the option `receiveChildEvents`, will receive\n *  [{ event }, { event2 }] // observable event\n *  // and reset session by\n *  this.observers.reset(); // any observers will be reset with an events receiving an empty list\n *  [] // observable event\n *  // sending another notification will notify the target with a new list of events\n *  this.observers.notify(\"#/pointer/to/any-location\", { event3 });\n *  [{ event3 }] // observable event\n * ```\n *\n *\n */\nclass BubblingCollectionObservable {\n    observers = {};\n    eventCollection = {};\n    bubbleCollection = {};\n\n    /**\n     * Observe events on the _pointer_ (`#/observe/location`). May also observe\n     * events of _child-pointers_ (`#/observe/location/child/item`) with the\n     * option `receiveChildEvents` set to `true`\n     *\n     * @param pointer - location to observe\n     * @param observer - observer\n     * @param [receiveChildEvents=false]\n     */\n    observe(pointer: JSONPointer, observer: Observer, receiveChildEvents = false) {\n        this.observers[pointer] = this.observers[pointer] || [];\n        if (this.observers[pointer].includes(observer) === false) {\n            observer.receiveChildEvents = receiveChildEvents;\n            this.observers[pointer].push(observer);\n        }\n        return observer;\n    }\n\n    /**\n     * Remove an observer\n     * @param  {JsonPointer} pointer\n     * @param  {Function} observer\n     */\n    removeObserver(pointer: JSONPointer, observer) {\n        if (this.observers[pointer] == null) {\n            return;\n        }\n        const index = this.observers[pointer].indexOf(observer);\n        if (index !== -1) {\n            this.observers[pointer].splice(index, 1);\n        }\n    }\n\n    /**\n     * @todo this might become obsolete by clearEvents\n     *\n     * Reset all collections from the previous events, starting with a list of\n     * empty events. Any previously called observers will be called again with\n     * an empty event-list `[]`.\n     */\n    reset() {\n        // notify observers of reset by sending an empty list of events\n        const map = {};\n        Object.keys(this.eventCollection).concat(Object.keys(this.bubbleCollection))\n            // .filter(pointer => pointer.includes(sourcePointer))\n            .forEach(p => { map[p] = true; });\n        this.eventCollection = {};\n        this.bubbleCollection = {};\n        Object.keys(map).forEach(pointer => this._notify(pointer, pointer, []));\n        this.eventCollection = {};\n        this.bubbleCollection = {};\n    }\n\n    /**\n     * Clears all events at a given pointer and notifies all listeners with\n     * their changed list of events\n     *\n     * @param  {JsonPointer} pointer\n     * @param  {boolean} [clearChildren=true]    if false, children of `pointer` will not be reset\n     */\n    clearEvents(pointer: JSONPointer, clearChildren = true) {\n        let changed = false;\n\n        if (clearChildren) {\n            Object.keys(this.eventCollection).forEach(target => {\n                if (!(target.startsWith(pointer) && target !== pointer)) {\n                    return;\n                }\n                if (this.eventCollection[target].length > 0) {\n                    changed = true;\n                    this.eventCollection[target].length = 0;\n                    this.bubbleCollection[target] = {}; // reset bubble collection\n                    this._notify(target, target, this.eventCollection[target]);\n                }\n            });\n        }\n\n        const collection = this.eventCollection[pointer];\n        if ((Array.isArray(collection) && collection.length > 0)) {\n            changed = true;\n            collection.length = 0;\n            this.bubbleCollection[pointer] = {}; // reset bubble collection\n        }\n\n        if (changed) {\n            // clear target and notify parents\n            this._notifyAll(pointer, collection);\n        }\n    }\n\n    /**\n     * Notifies all listeners of `pointer` (bubble notification)\n     *\n     * @param pointer\n     * @param eventCollection    - array of events at target `pointer`\n     */\n    _notifyAll(pointer: JSONPointer, eventCollection: Array<ValidationError>) {\n        const frags = gp.split(pointer);\n        while (frags.length > 0) {\n            const p = gp.join(frags, true);\n            this._notify(p, pointer, eventCollection);\n            frags.pop();\n        }\n        this._notify(\"#\", pointer, eventCollection);\n    }\n\n    /**\n     * Notify observers at _pointer_. Note that the received event is a\n     * aggregated event-list []. For a first call the received event will look\n     * like `[{ event }]` and the next event will be `[{ event }, { newEvent }]`,\n     * etc, until `reset()` ist called by the observable.\n     */\n    notify(pointer: JSONPointer, event: ValidationError) {\n        this.eventCollection[pointer] = this.eventCollection[pointer] || [];\n        this.eventCollection[pointer].push(event);\n\n        this._notifyAll(pointer, this.eventCollection[pointer]);\n    }\n\n    _notify(observerPointer: JSONPointer, sourcePointer: JSONPointer, errors: Array<ValidationError> = []) {\n        if (this.observers[observerPointer] == null) {\n            return;\n        }\n        this.observers[observerPointer].forEach(observer => {\n            if (observer.receiveChildEvents === false && observerPointer === sourcePointer) {\n                observer({ type: \"validation:errors\", value: errors });\n                return;\n            }\n            if (observer.receiveChildEvents === false && observerPointer !== sourcePointer) {\n                return;\n            }\n\n            this.bubbleCollection[observerPointer] = this.bubbleCollection[observerPointer] || {};\n            const map = this.bubbleCollection[observerPointer];\n            map[sourcePointer] = errors;\n            const combinedErrors = Object.keys(map).reduce((res, next) => res.concat(map[next]), []);\n            observer({ type: \"validation:errors\", value: combinedErrors });\n        });\n    }\n}\n\n\nexport default BubblingCollectionObservable;\n","import gp from \"gson-pointer\";\nimport validateAsync from \"json-schema-library/lib/validateAsync\";\nimport { JSONData, JSONPointer, ValidationError } from \"../../types\";\n\n\n/** error mapper to convert error types and messages (e.g. to add language-translations) */\nexport type ValidationErrorMapper = (error: ValidationError) => ValidationError;\n/** called, with a list of all errors, when validation has been finished */\nexport type OnDone = (errors: Array<ValidationError>) => void;\n/** called immediately, with with each error, occuring on validation */\nexport type OnError = (error: ValidationError, currentErrors: Array<ValidationError>) => void;\n\n\n/**\n * @param data - application json data\n * @param schema - json-schema describing data\n * @param [errorHandler] - optional callback to modify errors\n */\nexport default class Validation {\n    /** if validation has been canceled and thus, is obsolete */\n    canceled = false;\n    cbDone: OnDone;\n    cbError: OnError;\n    data: JSONData;\n    errorHandler: ValidationErrorMapper;\n    errors: Array<ValidationError>;\n    /** entry point of validation */\n    pointer: JSONPointer;\n\n    constructor(data: JSONData, pointer: JSONPointer, errorHandler: ValidationErrorMapper) {\n        this.errors = [];\n        this.data = data;\n        this.pointer = pointer;\n        this.errorHandler = errorHandler;\n    }\n\n    /**\n     * start validation of data\n     * @param core - json-schema-library core, containing json-schema\n     * @param onErrorCb - called for error notification while validation is running\n     * @param onDoneCb - called on a finished validation with a list of validation errors\n     */\n    start(core, onErrorCb: OnError, onDoneCb: OnDone): Promise<Array<ValidationError>> {\n        this.cbDone = onDoneCb;\n        this.cbError = onErrorCb;\n\n        // @feature selective-validation\n        const pointer = this.pointer;\n        let data = this.data;\n        let schema = core.getSchema();\n        if (pointer !== \"#\") {\n            schema = core.getSchema(pointer, data);\n            data = gp.get(data, pointer);\n        }\n\n        return validateAsync(core, data, { schema, pointer, onError: this.onError.bind(this) })\n            .then(errors => {\n                this.onDone(errors);\n                return errors as Array<ValidationError>;\n            })\n            .catch(error => {\n                this.onFail(error);\n                return [];\n            });\n    }\n\n    onError(validationError: ValidationError): void {\n        if (this.canceled) {\n            return;\n        }\n        validationError = this.errorHandler(validationError);\n        this.errors.push(validationError);\n        this.cbError(validationError, this.errors);\n    }\n\n    onDone(validationErrors: Array<ValidationError>): void {\n        if (this.canceled) {\n            return;\n        }\n        if (this.errors.length !== validationErrors.length) {\n            console.error(\"Inconsistent validation errors. Not all errors were emitted by validateAsync()\");\n        }\n        this.cbDone(this.errors);\n    }\n\n    onFail(error: Error): void {\n        if (this.canceled) {\n            return;\n        }\n\n        console.error(\"Validation failed\", error);\n        this.cbDone(this.errors);\n    }\n\n    /** cancel validation - preventing notification of running validation results */\n    cancel(): void {\n        this.canceled = true;\n    }\n}\n","export default function copy<T>(data: T): T {\n    if (data === undefined || (Array.isArray(data) === false && typeof data !== \"object\")) {\n        return data;\n    }\n    return JSON.parse(JSON.stringify(data));\n}\n","import diffpatch, { Delta } from \"./diffpatch\";\nimport gp from \"gson-pointer\";\nimport { JSONPointer } from \"../../types\";\n\n\n/** sort by longest pointer first (from tree leaves to root node) */\nfunction sortByPointer(a, b) {\n    if (a.pointer < b.pointer) {\n        return -1;\n    } else if (a.pointer > b.pointer) {\n        return 1;\n    }\n    return 0;\n}\n\n\n// const isDelete = (change: Change): boolean => change.length === 3 && change[2] === 0;\n// const isArrayMove = (change: Change): boolean => change.length === 3 && change[2] === 3;\n// const isModify = (change: Change): boolean => change.length === 2;\n// const isAdd = (change: Change): boolean => change.length === 1;\nexport type Change = [any, any?, number?];\n\n\nexport type Patch = {\n    /** the property \"_t\" { \"_t\": \"a\"} is not typed, but assigned to array-patches (jsondiffpatch delta format) */\n    [property: string]: Change;\n}\n\n\nfunction isChange(value: any) : value is Change {\n    return Array.isArray(value);\n}\n\n\nexport type PatchResult = {\n    pointer: JSONPointer;\n    patch: Patch\n}\n\n\ntype ChangeResult = {\n    pointer: JSONPointer;\n    change: Change;\n    /** if patch is a patch on array */\n    isArrayItem: boolean;\n    /** true, if element-property was added or removed */\n    changedProperty: boolean;\n}\n\n\n/** converts the diff tree result to a flat list of patches */\nfunction deltaToChangeList(pointer: JSONPointer, diff: Delta, result = []): Array<ChangeResult> {\n    // run through each property and search for a patch\n    const properties = Object.keys(diff);\n    const isArrayItem = diff[\"_t\"] === \"a\";\n\n    properties.forEach(property => {\n        // skip array flag\n        if (property === \"_t\") {\n            return;\n        }\n\n        const change = diff[property];\n        if (!isChange(change)) {\n            // step into path and search for patches\n            // @note this could also be a removed array-item (\"_<index>\": value)\n            // findPatches(`${pointer}/${property.replace(/^_/, \"\")}`, value, result);\n            deltaToChangeList(`${pointer}/${property}`, change, result);\n            return;\n        }\n\n        // add the patch to list\n        const propertyAdded = diff[property].length === 1;\n        const propertyRemoved = diff[property][2] === 0;\n        const entry = {\n            pointer: `${pointer}/${property}`,\n            change,\n            isArrayItem,\n            changedProperty: !isArrayItem && (propertyAdded || propertyRemoved)\n        };\n\n        result.push(entry);\n    });\n\n    return result;\n}\n\n\n/**\n * returns a list of changes from the passed diffpatch-delta\n * Changes on object-properties (add, remove, rename) or array-items (add,\n * remove, move) are grouped by their parent object or array.\n */\nexport function diffToPatches(diff: Delta): Array<PatchResult> {\n    const map = {};\n    const changes = deltaToChangeList(\"#\", diff);\n    // merge all item patches by their parent-pointer\n    changes.forEach(entry => {\n        const { pointer, change, isArrayItem, changedProperty } = entry;\n\n        if (isArrayItem) {\n            const parent = gp.join(pointer, \"..\");\n            const key = pointer.replace(`${parent}/`, \"\");\n            map[parent] = map[parent] || { _t: \"a\" };\n            map[parent][key] = change;\n            return;\n        }\n\n        if (changedProperty) {\n            const parent = gp.join(pointer, \"..\");\n            const key = pointer.replace(`${parent}/`, \"\");\n            map[parent] = map[parent] || {};\n            map[parent][key] = change;\n            return;\n        }\n\n        map[entry.pointer] = change;\n    });\n\n    return Object.keys(map)\n        .map(pointer => ({ pointer, patch: map[pointer] }))\n        .sort(sortByPointer);\n}\n\n\n/**\n * creates a diff between given data-versions and returns a list of changes.\n * Changes on object-properties (add, remove, rename) or array-items (add,\n * remove, move) are grouped by their parent object or array.\n */\nexport default function createDiff<T extends any>(previousValue: T, newValue: T): Array<PatchResult> {\n    const diff = diffpatch.diff(previousValue, newValue);\n    return diff == null ? [] : diffToPatches(diff);\n}\n","import { DiffPatcher, Delta } from \"jsondiffpatch\";\n\n\nexport { Delta };\n\n\nconst options = {\n    // used to match objects when diffing arrays, by default only === operator is used\n    // this function is used only to when objects are not equal by ref\n    objectHash: obj => obj._id,\n    arrays: {\n        // default true, detect items moved inside the array (otherwise they will be registered as remove+add)\n        detectMove: true,\n        // default false, the value of items moved is not included in deltas\n        includeValueOnMove: false\n    }\n};\n\n\nconst diffpatch = new DiffPatcher(options); // jsondiffpatch.create(options);\n// @ts-ignore\ndiffpatch.options = options;\n\n\nexport default diffpatch;\n","import getTypeOf from \"json-schema-library/lib/getTypeOf\";\nconst ID_PROPERTY = \"_id\";\n\n\nfunction generateId(index: string|number): string {\n    return `${index}${Math.random()}${Date.now()}`;\n}\n\n\nfunction addMissingItemIDs(list: Array<any>): void {\n    list.forEach((item, index) => {\n        if (item[ID_PROPERTY] == null) {\n            const type = getTypeOf(item);\n            if (type === \"object\" || type === \"array\") {\n                item[ID_PROPERTY] = ensureItemIDs.config.generateId(index);\n            }\n        }\n    });\n}\n\n\nfunction ensureItemIDs<T extends any>(data: T): T {\n    if (Array.isArray(data)) {\n        ensureItemIDs.config.addMissingItemIDs(data);\n        data.forEach(item => ensureItemIDs(item));\n\n    } else if (getTypeOf(data) === \"object\") {\n        Object.keys(data).forEach((key) => ensureItemIDs(data[key]));\n    }\n\n    return data;\n}\n\n\nensureItemIDs.config = {\n    ID_PROPERTY,\n    addMissingItemIDs,\n    generateId\n};\n\n\nexport default ensureItemIDs;\n","function isScrollable(dom: HTMLElement): boolean {\n    const hasScrollableContent = dom.scrollHeight > dom.clientHeight;\n    const overflowYStyle = window.getComputedStyle(dom).overflowY;\n    const isOverflowHidden = overflowYStyle.indexOf('hidden') !== -1;\n    return hasScrollableContent && !isOverflowHidden;\n}\n\n\nexport default function getScrollParent(dom: HTMLElement): HTMLElement|Window {\n    if (!dom || dom === document.body) {\n        return window;\n    }\n    if (isScrollable(dom)) {\n        return dom;\n    }\n    return getScrollParent(dom.parentNode as HTMLElement);\n}\n","import { isRoot } from \"gson-pointer\";\nexport default isRoot;\n","import { init } from \"@rematch/core\";\nimport ui, { UIReducers } from \"./models/ui\";\nimport diffpatch from \"../services/utils/diffpatch\";\n\n\nexport type ModelReducers = {\n    ui: UIReducers;\n}\n\nexport type Dispatch = ModelReducers & typeof store.dispatch;\n\n\nconst store = init({ models: { ui } });\n/** rematch-redux dispatch */\nexport const dispatch: Dispatch = store.dispatch;\n/** rematch-redux getState */\nexport const getState = store.getState; // eslint-disable-line prefer-destructuring\n\n\nexport type GlobalEvent = {\n    type: \"global\",\n    value: { modelId: string, changes }\n};\n\nexport type Watcher = (event: GlobalEvent) => void;\n\nlet watchers = [];\nfunction notifyWatcher(event: GlobalEvent) {\n    watchers.forEach(w => w(event));\n}\n\n/** watch global changes, like ui */\nexport function watch(watcher: Watcher): Watcher {\n    watchers.push(watcher);\n    return watcher;\n}\n\n/** stop watching global changes, like ui */\nexport function removeWatcher(watcher: Watcher) {\n    watchers = watchers.filter(w => w !== watcher);\n}\n\n\nconst initialState = store.getState();\nconst modelIds = Object.keys(initialState);\nconst previousModels = {};\nmodelIds.forEach(modelId => { previousModels[modelId] = JSON.stringify(initialState[modelId]); });\n\n\nstore.subscribe(() => {\n    const state = store.getState();\n    modelIds.forEach(modelId => {\n        const stateString = JSON.stringify(state[modelId]);\n        if (stateString === previousModels[modelId]) {\n            return;\n        }\n        const diff = diffpatch.diff(JSON.parse(previousModels[modelId]), state[modelId]);\n        if (diff == null) {\n            return;\n        }\n        previousModels[modelId] = stateString;\n        const changes = {};\n        Object.keys(diff).map(property => changes[property] = state[modelId][property]);\n        notifyWatcher({ type: \"global\", value: { modelId, changes } });\n    });\n});\n\n","import { createNanoEvents } from \"nanoevents\";\nimport { init, RematchStore, RematchRootState } from \"@rematch/core\";\nimport data, { DataReducers } from \"../store/models/data\";\nimport errors, { ErrorReducers } from \"../store/models/errors\";\n\n\nconst models = { data, errors };\n\nexport type Model = typeof models;\n\nexport type ModelReducers = {\n    data: DataReducers;\n    errors: ErrorReducers;\n}\n\n\nexport default class Store {\n    store: RematchStore<Model>;\n    dispatch: ModelReducers; // usually ModelReducers & typeof store.dispatch\n    emitter = createNanoEvents();\n    getState: () => RematchRootState<Model>;\n    previousState?: RematchRootState<Model>;\n\n\n    constructor() {\n        this.store = init({ models });\n        this.dispatch = this.store.dispatch;\n        this.getState = this.store.getState;\n        this.store.subscribe(() => this.onChange(this.store.getState()));\n    }\n\n    onChange(currentState: RematchRootState<Model>) {\n        if (currentState === this.previousState) {\n            return;\n        }\n\n        Object\n            .keys(currentState)\n            .forEach(id => {\n                const subState = currentState[id];\n                if (this.previousState?.[id] !== subState) {\n                    this.emitter.emit(id, subState);\n                }\n            });\n\n        this.previousState = currentState;\n    }\n\n    get<T extends keyof ModelReducers>(id: T): RematchRootState<Model>[T] {\n        return this.store.getState()[id];\n    }\n\n    /** Subscribe to changes */\n    subscribe<T extends keyof ModelReducers>(id: T, callback: (value: RematchRootState<Model>[T]) => void) {\n        this.emitter.on(id, callback);\n    }\n\n    unsubscribe(id: keyof ModelReducers, callback) {\n        this.emitter.events[id] = this.emitter.events[id]?.filter(func => func !== callback) ?? [];\n    }\n}\n","import copy from \"../../services/utils/copy\";\nimport ensureItemIDs from \"../../services/utils/ensureItemIDs\";\nimport gp from \"gson-pointer\";\nimport isRootPointer from \"../../services/utils/isRootPointer\";\nimport { JSONData, JSONPointer } from \"../../types\";\n\n\nexport type DataState = {\n    undoSize: number;\n    past: Array<JSONData>;\n    present: JSONData;\n    future: Array<JSONData>;\n}\n\n\nexport const initialState: DataState = {\n    undoSize: 50,\n    past: [],\n    present: null,\n    future: []\n};\n\n\nexport type ActionSet = {\n    pointer: JSONPointer,\n    value: JSONData;\n    addToHistory?: boolean;\n}\n\n\nexport interface DataReducers {\n    undo();\n    redo();\n    clearHistory();\n    removeLastUndo();\n    set(action: ActionSet);\n}\n\n\nexport default {\n    state: initialState,\n    reducers: {\n        clearHistory(state: DataState) {\n            return { ...state, past: [], future: [] };\n        },\n        removeLastUndo(state: DataState) {\n            const past = Array.from(state.past);\n            past.pop();\n            return { ...state, past };\n        },\n        undo(state: DataState) {\n            if (state.past.length === 0) {\n                return state;\n            }\n            const newState = copy(state);\n            newState.future.push(newState.present);\n            newState.present = newState.past.pop();\n            return newState;\n        },\n        redo(state: DataState) {\n            if (state.future.length === 0) {\n                return state;\n            }\n            const newState = copy(state);\n            newState.past.push(newState.present);\n            newState.present = newState.future.pop();\n            return newState;\n        },\n        set(state: DataState, action: ActionSet) {\n            const { pointer = \"#\" } = action;\n            const value = ensureItemIDs(action.value);\n\n            const newState = copy(state);\n            if (action.addToHistory !== false && newState.present != null) {\n                newState.past.push(copy(newState.present));\n                newState.future.length = 0;\n                while (newState.past.length > state.undoSize) {\n                    newState.past.shift();\n                }\n            }\n\n            if (isRootPointer(pointer)) {\n                newState.present = copy(value);\n                return newState;\n            }\n\n            gp.set(newState.present, pointer, copy(value));\n            return newState;\n        }\n    }\n};\n","import { ValidationError } from \"../../types\";\n\n\nexport type ErrorState = Array<ValidationError>;\n\n\nexport const initialState = [];\n\n\nexport interface ErrorReducers {\n    set(errors: ErrorState);\n}\n\n\nexport default {\n    state: initialState,\n    reducers: {\n        set(state: ErrorState, errors: ErrorState = []) {\n            return errors;\n        }\n    }\n};\n","import { JSONPointer } from \"../../types\";\n\n\nexport type UIState = {\n    currentPointer: JSONPointer;\n    currentPage: JSONPointer;\n    overlayIsVisible: boolean;\n}\n\nexport type Overlay = {\n    isOpen: boolean;\n}\n\n\nexport const initialState: UIState = {\n    currentPointer: \"\",\n    currentPage: \"\",\n    /** true, if the overlay is currently visible */\n    overlayIsVisible: false\n};\n\n\nexport type UIReducers = {\n    setCurrentPage(pointer: JSONPointer);\n    setCurrentPointer(pointer: JSONPointer);\n    showOverlay(overlayIsVisible: boolean);\n}\n\n\nexport default {\n    state: initialState,\n    reducers: {\n        setCurrentPage(state: UIState, pointer: JSONPointer): UIState {\n            return { ...state, currentPage: pointer };\n        },\n        setCurrentPointer(state: UIState, pointer: JSONPointer): UIState {\n            return { ...state, currentPointer: pointer };\n        },\n        showOverlay(state: UIState, overlayIsVisible: boolean): UIState {\n            return { ...state, overlayIsVisible };\n        }\n    }\n};\n","import gp from \"gson-pointer\";\nimport populated from \"./populated\";\nimport jlib from \"json-schema-library\";\nconst { eachSchema } = jlib;\nconst UI_PROPERTY = \"editron:ui\";\nimport { JSONPointer, JSONSchema } from \"../types\";\nimport Controller from \"../Controller\";\n\n/** property on a schema-definition, containing editron-options */\nexport const EDITRON_OPTION_PROPERTY = \"editron:ui\";\n\n\nexport function getEditronOptions(schema: JSONSchema) {\n    return schema[EDITRON_OPTION_PROPERTY];\n}\n\n\nexport function isPointer(string: JSONPointer): boolean {\n    return typeof string === \"string\" && /^(#?\\/.+|\\.?\\.\\/.+)/.test(string);\n}\n\n\n// returns a list of {title, pointer} from root-node to pointer, excluding root node\nfunction getBreadcrumps(pointer: JSONPointer, controller: Controller): Array<string> {\n    const breadcrumps = [];\n    while (pointer !== \"#\") {\n        breadcrumps.unshift({\n            title: getOption(pointer, controller, \"title\"),\n            pointer\n        });\n        pointer = gp.join(pointer, \"..\");\n    }\n    return breadcrumps;\n}\n\n\nfunction enumOptions(schema: JSONSchema): Array<any> {\n    let options;\n    if (schema?.[UI_PROPERTY]?.enum) {\n        options = schema.enum.map((value, index) => ({\n            title: schema[UI_PROPERTY].enum[index] || schema.enum[index],\n            value: schema.enum[index]\n        }));\n\n    } else if (schema.options && schema.options.enum_titles) {\n        // @legacy support jdorn/json-editor\n        options = schema.enum.map((value, index) => ({\n            title: schema.options.enum_titles[index] || schema.enum[index],\n            value: schema.enum[index]\n        }));\n    } else {\n        options = schema.enum;\n    }\n    return options;\n}\n\n\n/**\n * Resolves the given pointer absolute or relative in data\n * @param pointer - current base pointer for relative targets\n * @param controller\n * @param pointerToResolve - relative or absolute pointer (must start with `/` or `../`)\n * @return target value of at #/pointer/pointerToResolve or false\n */\nfunction resolveReference(pointer: JSONPointer, controller: Controller, pointerToResolve: JSONPointer): any {\n    if (populated(pointerToResolve) === false || isPointer(pointerToResolve) === false) {\n        return null;\n    }\n\n    let targetPointer = pointerToResolve;\n    if (targetPointer[0] !== \"#\") {\n        targetPointer = gp.join(pointer, targetPointer);\n    }\n\n    const result = controller.service(\"data\").get(targetPointer);\n    return populated(result, result, null);\n}\n\n\nexport type EditorSettings = {\n    hidden: boolean;\n    description?: string;\n    title?: string;\n    [p: string]: any;\n}\n\n/**\n * Returns the resolved copy of an options object. This method is used by the controller to help setup the\n * main options object of an editor instance. It is simplified, in that it currently does  not resolve any reference\n * on the current data\n * @return a resolved copy of the editron:ui settings\n */\nfunction copyOptions(pointer: JSONPointer, controller: Controller): EditorSettings {\n    const schema = controller.service(\"schema\").get(pointer);\n\n    const settings = {\n        hidden: false,\n        description: schema.description,\n        ...schema.options, // @legacy options\n        ...schema[UI_PROPERTY]\n    };\n\n    settings.title = getTitle(pointer, controller); // this comes last, because ensures an '*' is appended if required\n\n    Object\n        .keys(settings)\n        .forEach(option => {\n            settings[option] = resolveOption(pointer, controller, settings[option]);\n        });\n\n    return settings;\n}\n\n\n/**\n * Ensures each schema contains a valid schema[UI_PROPERTY] object\n * @param rootSchema\n * @return extended clone of json-schema\n */\nfunction extendSchema<T extends JSONSchema>(rootSchema: T): T {\n    rootSchema = JSON.parse(JSON.stringify(rootSchema));\n\n    eachSchema(rootSchema, childSchema => {\n        if (childSchema.$ref && childSchema[UI_PROPERTY] == null) {\n            // do not add default options for references - json-schema-library\n            // merges on root elements only (which is acceptable)\n            return;\n        }\n\n        childSchema[UI_PROPERTY] = {\n            hidden: false,\n            title: childSchema.title || \"\",\n            description: childSchema.description || \"\",\n            ...childSchema.options, // @legacy options\n            ...childSchema[UI_PROPERTY]\n        };\n    });\n\n    return rootSchema;\n}\n\n\n/**\n * Resolves a list of pointers, where the first found value is returned. Supports simple strings as fallback.\n *  e.g. `[\"/data/local/title\", \"/data/local/subtitle\", \"Title\"]`\n *\n * @return the option value\n */\nfunction resolveOption<T>(pointer: JSONPointer, controller: Controller, optionValue: T): T {\n    if (Array.isArray(optionValue)) {\n        for (let i = 0; i < optionValue.length; i += 1) {\n            const option = optionValue[i];\n            if (isPointer(option)) {\n                const value = resolveReference(pointer, controller, option);\n                if (populated(value)) {\n                    return value;\n                }\n            } else if (populated(option)) {\n                return option;\n            }\n        }\n    }\n    return optionValue;\n}\n\n\n/**\n * Returns the first defined option set in schema. Supports relative and absolute pointers in data\n *\n * @param pointer\n * @param controller\n * @param options - a list of option properties. The first non-empty option will be returned\n * @return the first non-empty option\n */\nfunction getOption(pointer: JSONPointer, controller: Controller, ...options: Array<string>): any {\n    if (options.length === 0) {\n        throw new Error(\"Expected at least one options property to be given in getOption\");\n    }\n\n    const schema = controller.service(\"schema\").get(pointer);\n    const editronOptions = schema[UI_PROPERTY] || {};\n\n    for (let i = 0; i < options.length; i += 1) {\n        const option = editronOptions[options[i]];\n        const resolver = isPointer(option) ? resolveReference : resolveOption;\n        const value = resolver(pointer, controller, option);\n\n        if (populated(value)) {\n            return value;\n        } else if (populated(schema[options[i]])) {\n            return schema[options[i]];\n        }\n    }\n\n    return null;\n}\n\n\nfunction getTitle(pointer: JSONPointer, controller: Controller) {\n    const schema = controller.service(\"schema\").get(pointer);\n    const title = getOption(pointer, controller, \"title\") || \"\";\n    return schema.minLength && title ? `${title.replace(/\\s*\\*\\s*$/, \"\")} *` : title;\n}\n\n\nfunction getDefaultOption(schema: JSONSchema, option: string): \"\"|any {\n    return schema[UI_PROPERTY] ? (schema[UI_PROPERTY][option] || \"\") : \"\";\n}\n\n\nexport default {\n    UI_PROPERTY,\n    getOption,\n    copyOptions,\n    extendSchema,\n    getBreadcrumps,\n    getTitle,\n    enumOptions,\n    getDefaultOption\n};\n","import m from \"mithril\";\nimport createElement from \"./createElement\";\nimport LocationService from \"../services/LocationService\";\nimport OverlayService from \"../services/OverlayService\";\nimport SelectTileComponent from \"../components/overlayselecttiles\";\nimport UISchema, { getEditronOptions } from \"./UISchema\";\nimport DataService from \"../services/dataservice\";\nimport SchemaService from \"../services/SchemaService\";\nimport { JSONPointer } from \"../types\";\n\n\n/**\n * Request to insert an array child item at the given pointer. If multiple options are present, a dialogue is opened to\n * let the user select the appropriate type of child (oneof).\n * @param dataService\n * @param schemaService\n * @param pointer - to array on which to insert the child\n * @param index - index within array, where the child should be inserted (does not replace). Default: 0\n */\nfunction addItem(dataService: DataService, schemaService: SchemaService, locationService: LocationService, pointer: JSONPointer, index = 0) {\n    const list = dataService.get(pointer);\n    const schema = schemaService.get(pointer);\n    if (schema.type !== \"array\") {\n        throw new Error(`Can not add item to a non-array (${pointer})`);\n    }\n\n    const selectOptions = schemaService.getChildSchemaSelection(pointer, index);\n\n    // single option, immediately create template data and add item to list\n    if (selectOptions.length === 1) {\n        addSelection(0, schemaService, dataService);\n        return;\n    }\n\n    // multiple options, ask user\n    const element = createElement(\".overlay__item\");\n    const selection = selectOptions.map((item, oneOfIndex) => ({\n        icon: UISchema.getDefaultOption(item, \"icon\"),\n        title: UISchema.getDefaultOption(item, \"title\"),\n        description: UISchema.getDefaultOption(item, \"description\"),\n        value: oneOfIndex\n    }));\n\n    // fetch overlay options\n    const options = getEditronOptions(schemaService.get(pointer));\n    const overlayOptions = {\n        header: \"\",\n        ...options?.overlay\n    };\n\n    // create user-selection\n    m.render(element, m(SelectTileComponent, {\n        // description: \"Modulauswahl - Bitte wählen\",\n        value: 0,\n        options: selection,\n        onchange: (value) => {\n            const selectedIndex = parseInt(value, 10);\n            addSelection(selectedIndex, schemaService, dataService);\n            OverlayService.close();\n            locationService.goto(`${pointer}/${index}`);\n        }\n    }));\n\n    // add data of selection\n    function addSelection(selectedIndex, schemaService, dataService) {\n        const itemSchema = selectOptions[selectedIndex];\n        const itemData = schemaService.getTemplate(itemSchema);\n        list.splice(index, 0, itemData);\n        dataService.set(pointer, list);\n    }\n\n    // and ask question\n    OverlayService.open(element, {\n        header: overlayOptions.header,\n        confirmButton: false\n    });\n        // .then(action => { console.log(\"dialog closed\", action); });\n}\n\n\nexport default addItem;\n","import Controller from \"../Controller\";\nimport { JSONPointer } from \"../types\";\n\n\nexport default {\n\n    addItem(pointer: JSONPointer, controller: Controller, index: number): void {\n        controller.addItemTo(pointer, index);\n    },\n\n    removeItem(pointer: JSONPointer, controller: Controller, index: number): void {\n        const nextList = controller.service(\"data\").get(pointer);\n        nextList.splice(index, 1);\n        controller.service(\"data\").set(pointer, nextList);\n    },\n\n    cloneItem(pointer: JSONPointer, controller: Controller, index: number): void {\n        const nextList = controller.service(\"data\").get(pointer);\n        const item = nextList[index];\n        // copy value without control variables\n        const clone = JSON.stringify(item, (key, value) => key !== \"_id\" ? value : undefined);\n        nextList.splice(index, 0, JSON.parse(clone));\n        controller.service(\"data\").set(pointer, nextList);\n    },\n\n    moveItem(pointer: JSONPointer, controller: Controller, index: number, destinationIndex: number): void {\n        if (destinationIndex < 0) {\n            return;\n        }\n\n        const list = controller.service(\"data\").get(pointer);\n        if (list[index] == null || list[destinationIndex] == null) {\n            return;\n        }\n\n        list.splice(destinationIndex, 0, list.splice(index, 1)[0]);\n        controller.service(\"data\").set(pointer, list);\n    },\n\n    moveElement(list: Array<any>, index: number, destinationIndex: number): void {\n        list.splice(destinationIndex, 0, list.splice(index, 1)[0]);\n    }\n};\n","import m from \"mithril\";\n\n\nexport type HTMLAttributes = {\n    /** whitespace separated list of classNames, added to class (workaround) */\n    className?: string;\n    [p: string]: any;\n}\n\n\nexport default function createElement(selector: string, attributes?: HTMLAttributes): HTMLElement {\n    const vnode = m(selector, attributes);\n    const element = document.createElement(vnode.tag as string);\n    Object.keys(vnode.attrs).forEach((key) => {\n        if (key === \"className\") {\n            vnode.attrs[key].split(\" \").forEach((className) => element.classList.add(className));\n        } else if (vnode.attrs[key] != null && vnode.attrs[key] !== \"\") {\n            element.setAttribute(key, vnode.attrs[key]);\n        }\n    });\n    return element;\n}\n","import { Foxy, Options, handler } from \"@technik-sde/foxy\";\n\n\nconst defaultOptions = {\n    handlers: [\n        handler.unsplash,\n        handler.image,\n        handler.video\n    ]\n};\n\n\nexport default function createProxy(options: Options|Foxy = {}): Foxy {\n    if (options.constructor.name === \"Foxy\") {\n        return options as Foxy;\n    }\n\n    const o = { ...defaultOptions, ...options };\n\n    if (Array.isArray(o.handlers)) {\n        return new Foxy(o);\n    }\n\n    throw new Error(`Failed initializing proxy from: ${JSON.stringify(options)}`);\n}\n","import render from \"json-schema-library/lib/utils/render\";\nimport { JSONData, ValidationError } from \"../types\";\nimport Controller from \"../Controller\";\n\ntranslate.strings = {\n    \"array:button:moveup\": \"move up\",\n    \"array:button:movedown\": \"move down\",\n    \"array:button:remove\": \"remove\",\n    \"array:button:clone\": \"duplicate\"\n};\ntranslateError.strings = {};\n\n\nexport function translate(key: string, data?: JSONData) {\n    if (typeof translate.strings[key] === \"string\") {\n        return data == null ? translate.strings[key] : render(translate.strings[key], data);\n    } else if (typeof translate.strings[key] === \"function\") {\n        return translate.strings[key](data);\n    }\n    return key;\n}\n\n\nexport function translateError(controller: Controller, error: ValidationError): ValidationError {\n    if (typeof translateError.strings[error.code] === \"string\") {\n        error.message = error.data == null ?\n            translateError.strings[error.code] : render(translateError.strings[error.code], error.data);\n    } else if (typeof translateError.strings[error.code] === \"function\") {\n        error.message = translateError.strings[error.code](controller, error);\n    }\n    return error;\n}\n\n\nexport function addLanguage(lang, keys) {\n    const _keys = (keys == null && Object.prototype.toString.call(lang) === \"[object Object]\") ? lang : keys;\n    Object.assign(translateError.strings, _keys.errors);\n    Object.assign(translate.strings, _keys.strings);\n}\n","export * as i18n from \"./i18n\";\nexport { default as addItem } from \"./addItem\";\nexport { default as array } from \"./array\";\nexport { default as createElement } from \"./createElement\";\nexport { default as isNodeContext } from \"./isNodeContext\";\nexport { default as populated } from \"./populated\";\nexport { default as selection } from \"./selection\";\nexport { default as selectEditor } from \"./selectEditor\";\nexport { default as UISchem } from \"./UISchema\";\n","export default function isEmpty(value: any): boolean {\n    return value == null || value === \"\" ||\n        (typeof value === \"object\" && Object.keys(value).length === 0) ||\n        (Array.isArray(value) && value.length === 0);\n}\n","/* global process */\nexport default function isNodeContext(): boolean {\n    if (typeof process === \"object\") {\n        if (typeof process.versions === \"object\") {\n            if (typeof process.versions.node !== \"undefined\") {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n","// returns true if the value is valid, that is: it has content\nexport default function populated<T extends any, K extends any>(value: any, returnIf?: K, returnElse?: T): boolean|T|K {\n    let isPopulated = true;\n\n    if (value == null || value === \"\" || value === \"#\") {\n        isPopulated = false;\n    } else if (typeof value === \"string\") {\n        isPopulated = value.replace(/<[^>]+>/g, \"\").replace(/[^A-Za-z0-9]/g, \"\").length > 0;\n    } else if (Array.isArray(value)) {\n        isPopulated = value.length > 0;\n    } else if (Object.prototype.toString.call(value) === \"[object Object]\") {\n        isPopulated = Object.keys(value).length > 0;\n    }\n\n    if (returnIf === undefined && returnElse === undefined) {\n        return isPopulated;\n    }\n\n    return isPopulated ? returnIf : returnElse;\n}\n","import { JSONPointer } from \"../types\";\nimport Controller from \"../Controller\";\nimport { EditorPlugin } from \"../editors/Editor\";\n\n\ninterface EditorConstructor {\n    editorOf(pointer, controller, options): boolean;\n}\n\n\n/**\n * Selects an editor based on the given schema\n *\n * @param editorViews - List of editors with a static function 'editorOf'\n * @param pointer - current pointer in data\n * @param controller\n * @param options - the complete and resolved (UISchema) options object (editron:ui + additions)\n * @return The constructor of the chosen editor od false if no editor could be resolved\n *  or is denied\n */\nfunction select(editors: Array<EditorPlugin>, pointer: JSONPointer, controller: Controller, options): EditorPlugin|false|undefined {\n    // @todo export this to a configurable function (this is distributed across modules: json-schema-library)\n    if (/_id$/.test(pointer)) {\n        return false; // abort if it is an internal value\n    }\n\n    const schema = controller.service(\"schema\").get(pointer);\n    if (schema.type === \"error\") {\n        // data-pointer could not be found in schema\n        // @todo find a better solution for additional data: maybe an 'additional data'-editor\n        return false;\n    }\n\n    // @ui-option hidden\n    if (options.hidden === true) {\n        return false;\n    }\n\n    for (let i = 0, l = editors.length; i < l; i += 1) {\n        if (editors[i].editorOf(pointer, controller, options)) {\n            return editors[i];\n        }\n    }\n\n    return undefined;\n}\n\n\nexport default select;\n","import Controller from \"../Controller\";\n\n\nexport type Direction = \"up\"|\"down\"|\"left\"|\"right\";\n\nexport type Blurable = {\n    mayBlur(direction): boolean;\n}\n\nexport type FocusableElement = HTMLInputElement|HTMLSelectElement|HTMLTextAreaElement;\n\nconst isBlurable = (element): element is Blurable => (typeof element.mayBlur === \"function\");\n\n\n/** returns true if one may trigger blur on the element via cursor movement **/\nfunction mayBlur(element: FocusableElement|Blurable, direction: Direction): boolean {\n    const dir = (direction === \"down\" || direction === \"right\") ? 1 : -1;\n\n    if (isBlurable(element)) {\n        return element.mayBlur(direction);\n    }\n\n    if (element.tagName === \"INPUT\" && element.type === \"number\") {\n        // there is no selection-indicator for numbers, so we cannot determine\n        // if the motion is within the input-field. Must use input.type=text\n        // for this to work\n        return false;\n    }\n\n    if (element.tagName === \"INPUT\" && element.type === \"checkbox\") {\n        return true;\n    }\n\n    if (element.tagName === \"SELECT\") {\n        return false;\n    }\n\n    if (element.tagName === \"INPUT\") {\n        const input = <HTMLInputElement>element;\n        if (direction === \"up\" || direction === \"down\") {\n            return true;\n        }\n        if (direction === \"left\" && input.selectionStart === 0) {\n            return true;\n        }\n        if (direction === \"right\" && input.value.length === input.selectionEnd) {\n            return true;\n        }\n        return false;\n    }\n\n    if (element.tagName === \"TEXTAREA\") {\n        const input = <HTMLTextAreaElement>element;\n        if (element.value === \"\") {\n            return true;\n        } else if (dir === -1 && input.selectionStart === 0) {\n            return true;\n        } else if (dir === 1 && input.value.length === input.selectionEnd) {\n            return true;\n        }\n        return false;\n    }\n\n    return true;\n}\n\n/** returns the current active (editron) input element or false */\nfunction getActiveInput(controller: Controller, parent: HTMLElement = document.body): FocusableElement|false {\n    const currentPointer = controller.service(\"location\").getCurrent();\n    if (currentPointer === \"#\") {\n        console.log(\"abort empty selection\", currentPointer, \"active element\", document.activeElement);\n        return false;\n    }\n    const activeInput = parent.querySelector(`[data-id=\"${currentPointer}\"]`) as FocusableElement;\n    if (activeInput == null) { return false; }\n    if (activeInput !== document.activeElement) {\n        console.log(\"selection: active input is not the same as current editor\", activeInput, document.activeElement);\n    }\n\n    return activeInput;\n}\n\n/** returns a list of available editron input-elements (including textaras, select) */\nfunction getAvailableInputs(parent: HTMLElement): Array<FocusableElement> {\n    return Array.from(parent.querySelectorAll(\"input,textarea,select\"));\n}\n\n/** returns the next input element in direction or false if it is last/first */\nfunction getNextInput(controller: Controller, direction: Direction = \"down\", { parent = document.body } = {}) {\n    const activeElement = getActiveInput(controller, parent);\n    if (activeElement === false) {\n        return false;\n    }\n    const allElements = getAvailableInputs(parent);\n    const dir = (direction === \"down\" || direction === \"right\") ? 1 : -1;\n    const currentIndex = allElements.indexOf(activeElement);\n    if (currentIndex === -1) {\n        return false;\n    }\n\n    const nextElement = allElements[currentIndex + dir];\n    if (nextElement && nextElement.focus) {\n        return nextElement;\n    }\n\n    return false;\n}\n\n\ntype Options = {\n    /** ignores movement restrictions (e.g. navigation in textarea) */\n    force?: boolean;\n    /** scan only in given parentNode */\n    parent?: HTMLElement;\n};\n\n/**\n * move the focus from current element to next visible input-element\n * inputs being (textarea, input and select with an id-attribute containing a json-pointer-id)\n * @returns true - if there was a new target was found or the move prevented\n */\nfunction focusNextInput(controller: Controller, direction: Direction = \"down\", options: Options = {}) {\n    const { force = false, parent = document.body } = options;\n    const activeElement = getActiveInput(controller, parent);\n    if (activeElement === false) {\n        return false;\n    }\n\n    if (force === false && mayBlur(activeElement, direction) === false) {\n        // console.log(\"prevent blur of\", activeElement);\n        return true;\n    }\n\n    const nextElement = getNextInput(controller, direction, options);\n    if (nextElement) {\n        nextElement.focus();\n        return true;\n    }\n\n    return false;\n}\n\n\nexport default {\n    focusNextInput,\n    getNextInput,\n    getAvailableInputs,\n    getActiveInput,\n    mayBlur\n};\n","module.exports = m;"],"sourceRoot":""}