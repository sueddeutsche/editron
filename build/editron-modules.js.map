{"version":3,"sources":["webpack://editronModules/webpack/bootstrap","webpack://editronModules/./Controller.js","webpack://editronModules/./components/container/index.js","webpack://editronModules/./components/containerdescription/index.js","webpack://editronModules/./components/containererrors/index.js","webpack://editronModules/./components/containerheader/index.js","webpack://editronModules/./components/index.js","webpack://editronModules/./components/overlay/index.js","webpack://editronModules/./components/overlayselecttiles/index.js","webpack://editronModules/./editors/AbstractEditor.js","webpack://editronModules/./editors/AbstractValueEditor.js","webpack://editronModules/./editors/arrayeditor/ArrayItemEditor.js","webpack://editronModules/./editors/arrayeditor/ArrayItemView.js","webpack://editronModules/./editors/arrayeditor/index.js","webpack://editronModules/./editors/index.js","webpack://editronModules/./editors/objecteditor/index.js","webpack://editronModules/./editors/oneofeditor/index.js","webpack://editronModules/./editors/valueeditor/View.js","webpack://editronModules/./editors/valueeditor/index.js","webpack://editronModules/./editron.js","webpack://editronModules/./editron.scss","webpack://editronModules/./node_modules/@technik-sde/foxy/dist/foxy.js","webpack://editronModules/./node_modules/autosize/dist/autosize.js","webpack://editronModules/./node_modules/deepmerge/dist/cjs.js","webpack://editronModules/./node_modules/diff_match_patch/lib/diff_match_patch.js","webpack://editronModules/./node_modules/gson-conform/lib/asArray.js","webpack://editronModules/./node_modules/gson-conform/lib/forEach.js","webpack://editronModules/./node_modules/gson-conform/lib/index.js","webpack://editronModules/./node_modules/gson-conform/lib/keyOf.js","webpack://editronModules/./node_modules/gson-conform/lib/keys.js","webpack://editronModules/./node_modules/gson-conform/lib/values.js","webpack://editronModules/./node_modules/gson-pointer/index.js","webpack://editronModules/./node_modules/gson-pointer/lib/delete.js","webpack://editronModules/./node_modules/gson-pointer/lib/get.js","webpack://editronModules/./node_modules/gson-pointer/lib/isRoot.js","webpack://editronModules/./node_modules/gson-pointer/lib/join.js","webpack://editronModules/./node_modules/gson-pointer/lib/removeUndefinedItems.js","webpack://editronModules/./node_modules/gson-pointer/lib/set.js","webpack://editronModules/./node_modules/gson-pointer/lib/split.js","webpack://editronModules/./node_modules/gson-query/lib/common.js","webpack://editronModules/./node_modules/gson-query/lib/delete.js","webpack://editronModules/./node_modules/gson-query/lib/filter.js","webpack://editronModules/./node_modules/gson-query/lib/get.js","webpack://editronModules/./node_modules/gson-query/lib/index.js","webpack://editronModules/./node_modules/gson-query/lib/run.js","webpack://editronModules/./node_modules/json-schema-library/index.js","webpack://editronModules/./node_modules/json-schema-library/lib/SchemaService.js","webpack://editronModules/./node_modules/json-schema-library/lib/addSchema.js","webpack://editronModules/./node_modules/json-schema-library/lib/addValidator.js","webpack://editronModules/./node_modules/json-schema-library/lib/compile/getRef.js","webpack://editronModules/./node_modules/json-schema-library/lib/compile/index.js","webpack://editronModules/./node_modules/json-schema-library/lib/compile/joinScope.js","webpack://editronModules/./node_modules/json-schema-library/lib/compile/splitRef.js","webpack://editronModules/./node_modules/json-schema-library/lib/compileSchema.js","webpack://editronModules/./node_modules/json-schema-library/lib/config/settings.js","webpack://editronModules/./node_modules/json-schema-library/lib/config/strings.js","webpack://editronModules/./node_modules/json-schema-library/lib/cores/CoreInterface.js","webpack://editronModules/./node_modules/json-schema-library/lib/cores/Draft04.js","webpack://editronModules/./node_modules/json-schema-library/lib/cores/JsonEditor.js","webpack://editronModules/./node_modules/json-schema-library/lib/createSchemaOf.js","webpack://editronModules/./node_modules/json-schema-library/lib/each.js","webpack://editronModules/./node_modules/json-schema-library/lib/eachSchema.js","webpack://editronModules/./node_modules/json-schema-library/lib/getChildSchemaSelection.js","webpack://editronModules/./node_modules/json-schema-library/lib/getSchema.js","webpack://editronModules/./node_modules/json-schema-library/lib/getTemplate.js","webpack://editronModules/./node_modules/json-schema-library/lib/getTypeOf.js","webpack://editronModules/./node_modules/json-schema-library/lib/isValid.js","webpack://editronModules/./node_modules/json-schema-library/lib/resolveAllOf.js","webpack://editronModules/./node_modules/json-schema-library/lib/resolveAnyOf.js","webpack://editronModules/./node_modules/json-schema-library/lib/resolveOneOf.fuzzy.js","webpack://editronModules/./node_modules/json-schema-library/lib/resolveOneOf.strict.js","webpack://editronModules/./node_modules/json-schema-library/lib/resolveRef.strict.js","webpack://editronModules/./node_modules/json-schema-library/lib/resolveRef.withOverwrite.js","webpack://editronModules/./node_modules/json-schema-library/lib/schema/getTypeDefs.js","webpack://editronModules/./node_modules/json-schema-library/lib/schema/getTypeId.js","webpack://editronModules/./node_modules/json-schema-library/lib/schema/types.js","webpack://editronModules/./node_modules/json-schema-library/lib/step.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/__.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/copy.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/createCustomError.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/filter.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/flattenArray.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/merge.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/punycode.ucs2decode.js","webpack://editronModules/./node_modules/json-schema-library/lib/utils/render.js","webpack://editronModules/./node_modules/json-schema-library/lib/validate.js","webpack://editronModules/./node_modules/json-schema-library/lib/validateAsync.js","webpack://editronModules/./node_modules/json-schema-library/lib/validation/errors.js","webpack://editronModules/./node_modules/json-schema-library/lib/validation/format.js","webpack://editronModules/./node_modules/json-schema-library/lib/validation/keyword.js","webpack://editronModules/./node_modules/json-schema-library/lib/validation/type.js","webpack://editronModules/./node_modules/json-schema-library/lib/validation/typeKeywordMapping.js","webpack://editronModules/./node_modules/json-schema-library/remotes/index.js","webpack://editronModules/./node_modules/jsondiffpatch/dist/jsondiffpatch.umd.js","webpack://editronModules/./node_modules/lodash-es/_Symbol.js","webpack://editronModules/./node_modules/lodash-es/_baseGetTag.js","webpack://editronModules/./node_modules/lodash-es/_freeGlobal.js","webpack://editronModules/./node_modules/lodash-es/_getPrototype.js","webpack://editronModules/./node_modules/lodash-es/_getRawTag.js","webpack://editronModules/./node_modules/lodash-es/_objectToString.js","webpack://editronModules/./node_modules/lodash-es/_overArg.js","webpack://editronModules/./node_modules/lodash-es/_root.js","webpack://editronModules/./node_modules/lodash-es/isObjectLike.js","webpack://editronModules/./node_modules/lodash-es/isPlainObject.js","webpack://editronModules/./node_modules/mithril-material-forms/components/button/index.js","webpack://editronModules/./node_modules/mithril-material-forms/components/checkbox/index.js","webpack://editronModules/./node_modules/mithril-material-forms/components/checkboxform/index.js","webpack://editronModules/./node_modules/mithril-material-forms/components/errors/getErrorClass.js","webpack://editronModules/./node_modules/mithril-material-forms/components/errors/index.js","webpack://editronModules/./node_modules/mithril-material-forms/components/imagepreview/index.js","webpack://editronModules/./node_modules/mithril-material-forms/components/input/index.js","webpack://editronModules/./node_modules/mithril-material-forms/components/inputform/index.js","webpack://editronModules/./node_modules/mithril-material-forms/components/inputform/sanitizeValue.js","webpack://editronModules/./node_modules/mithril-material-forms/components/label/index.js","webpack://editronModules/./node_modules/mithril-material-forms/components/select/index.js","webpack://editronModules/./node_modules/mithril-material-forms/components/selectform/index.js","webpack://editronModules/./node_modules/mithril-material-forms/components/textarea/index.js","webpack://editronModules/./node_modules/mithril-material-forms/components/textareaform/index.js","webpack://editronModules/./node_modules/mithril-material-forms/index.js","webpack://editronModules/./node_modules/process/browser.js","webpack://editronModules/./node_modules/redux-undo/lib/index.js","webpack://editronModules/./node_modules/redux/es/applyMiddleware.js","webpack://editronModules/./node_modules/redux/es/bindActionCreators.js","webpack://editronModules/./node_modules/redux/es/combineReducers.js","webpack://editronModules/./node_modules/redux/es/compose.js","webpack://editronModules/./node_modules/redux/es/createStore.js","webpack://editronModules/./node_modules/redux/es/index.js","webpack://editronModules/./node_modules/redux/es/utils/warning.js","webpack://editronModules/./node_modules/symbol-observable/es/index.js","webpack://editronModules/./node_modules/symbol-observable/es/ponyfill.js","webpack://editronModules/./node_modules/valid-url/index.js","webpack://editronModules/(webpack)/buildin/global.js","webpack://editronModules/(webpack)/buildin/harmony-module.js","webpack://editronModules/(webpack)/buildin/module.js","webpack://editronModules/./plugin/index.js","webpack://editronModules/./services/DataService.js","webpack://editronModules/./services/LocationService.js","webpack://editronModules/./services/OverlayService.js","webpack://editronModules/./services/SchemaService.js","webpack://editronModules/./services/SessionService.js","webpack://editronModules/./services/State.js","webpack://editronModules/./services/ValidationService.js","webpack://editronModules/./services/index.js","webpack://editronModules/./services/reducers/actions.js","webpack://editronModules/./services/reducers/dataReducer.js","webpack://editronModules/./services/reducers/errorReducer.js","webpack://editronModules/./services/uistate/actions.js","webpack://editronModules/./services/uistate/index.js","webpack://editronModules/./services/uistate/uiReducer.js","webpack://editronModules/./services/utils/BubblingCollectionObservable.js","webpack://editronModules/./services/utils/Validation.js","webpack://editronModules/./services/utils/copy.js","webpack://editronModules/./services/utils/diffpatch.js","webpack://editronModules/./services/utils/ensureItemIDs.js","webpack://editronModules/./services/utils/getParentPointer.js","webpack://editronModules/./services/utils/getPatchesPerPointer.js","webpack://editronModules/./services/utils/isRootPointer.js","webpack://editronModules/./utils/UISchema.js","webpack://editronModules/./utils/addItem.js","webpack://editronModules/./utils/array.js","webpack://editronModules/./utils/createElement.js","webpack://editronModules/./utils/createProxy.js","webpack://editronModules/./utils/getID.js","webpack://editronModules/./utils/i18n.js","webpack://editronModules/./utils/index.js","webpack://editronModules/./utils/isNodeContext.js","webpack://editronModules/./utils/populated.js","webpack://editronModules/./utils/selectEditor.js","webpack://editronModules/./utils/selection.js","webpack://editronModules/external \"m\""],"names":["gp","require","Core","cores","JsonEditor","addValidator","DataService","SchemaService","ValidationService","LocationService","State","selectEditor","_createElement","addItem","UISchema","getID","plugin","i18n","createProxy","isValidPointer","pointer","assertValidPointer","Error","removeEditorFrom","instances","editor","getPointer","filter","instance","length","eachInstance","cb","Object","keys","forEach","Controller","schema","data","options","extendSchema","editors","getEditors","disabled","state","core","_proxy","proxy","getValidators","validationType","validator","addFormatValidator","addKeywordValidator","e","console","log","message","schemaService","validationService","setErrorHandler","error","translateError","addDefaultData","dataService","onAfterDataUpdate","on","EVENTS","AFTER_UPDATE","bind","validateAll","resetUndoRedo","active","getInstances","setActive","selector","attributes","element","instanceOptions","id","copyOptions","Editor","undefined","warn","get","appendChild","toElement","addInstance","$element","parentNode","removeChild","push","index","join","set","format","datatype","keyword","setSchema","setData","setTimeout","destroyed","validate","getDataByReference","destroy","off","update","includes","replace","newPointer","module","exports","m","ContainerHeader","ContainerErrors","ContainerDescription","ContainerView","childContainerSelector","getChildContainer","$childContainer","querySelector","view","vnode","attrs","hideTitle","children","populated","description","trust","Array","isArray","errors","map","severity","getClass","title","icon","hasAction","classname","onadd","ondelete","onmoveup","onmovedown","name","onclick","container","containerdescription","containererrors","containerheader","overlay","overlayselecttiles","Button","button","fullscreen","header","oncreate","contentNode","dom","onClick","onAbort","titleAbort","showSave","onSave","Tile","value","toLowerCase","getDataValue","node","getAttribute","className","onchange","Function","prototype","target","tile","getTypeClass","type","AbstractEditor","controller","createElement","getSchema","observe","notifyNestedChanges","setErrors","notifyNestedErrors","getErrorsAndWarnings","oldPointer","removeObserver","location","setCurrent","blur","removeInstance","_addError","_clearErrors","updateErrors","getId","convert","integer","converted","parseInt","isNaN","number","parseFloat","AbstractValueEditor","viewModel","editorValueType","editorElementProperties","instantUpdate","onfocus","onblur","setValue","changePointer","setAttribute","render","isActive","ArrayItemView","arrayUtils","ArrayItemEditor","onAdd","add","onRemove","remove","onremove","onmove","move","$target","editorTarget","createEditor","updatePointer","parentPointer","removeItem","to","moveItem","getIndex","canRemove","minItems","canAdd","maxItems","showIndex","trim","insert","preventDefault","diffpatch","View","ArrayEditor","addItemTo","arrayHTMLElement","Infinity","controls","updateView","$items","rebuildChildren","updateControls","previousPointer","child","changeEvent","patch","applyPatches","originalChildren","slice","newChild","indexOf","currentLocation","getCurrent","i","l","currentPointer","editorLocation","insertBefore","innerHTML","item","childPointer","childEditor","classList","toggle","ObjectEditor","OneOfEditor","ValueEditor","TextareaForm","OverlayService","showJSON","open","ok","save","JSON","stringify","childEditors","addDelete","$children","_property","property","propertyData","code","showProperty","deleteProperty","Select","UI_PROPERTY","oneOfSchema","items","renderOneOf","childSchema","oneOf","oneOfIndex","changeChild","getIndexOf","rebuild","getTemplate","currentSchema","CheckboxForm","SelectForm","InputForm","chooseInput","config","enumOptions","rows","components","services","utils","t","define","self","n","r","o","call","c","d","defineProperty","enumerable","Symbol","toStringTag","__esModule","create","hasOwnProperty","p","s","u","handlers","splice","findHandler","Promise","reject","some","use","find","loadImageInfo","src","image","Image","width","height","fetch","then","blob","URL","createObjectURL","addEventListener","naturalWidth","naturalHeight","loadVideoInfo","video","document","duration","poster","videoWidth","videoHeight","isHandler","toString","source","URLSearchParams","quality","fit","auto","unsplash","test","getImageURL","resolve","getImageInfo","getVideoURL","getVideoInfo","global","factory","Map","values","has","key","_delete","createEvent","Event","bubbles","evt","initEvent","assign","ta","nodeName","heightOffset","clientWidth","cachedHeight","init","style","window","getComputedStyle","resize","boxSizing","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","changeOverflow","offsetWidth","overflowY","getParentOverflows","el","arr","Element","scrollTop","scrollHeight","overflows","docTop","documentElement","styleHeight","Math","round","computed","actualHeight","offsetHeight","dispatchEvent","err","pageResize","removeEventListener","overflowX","wordWrap","methods","autosize","x","isMergeableObject","isNonNullObject","isSpecial","stringValue","isReactElement","canUseSymbol","REACT_ELEMENT_TYPE","$$typeof","emptyTarget","val","cloneUnlessOtherwiseSpecified","clone","deepmerge","defaultArrayMerge","concat","getMergeFunction","customMerge","getEnumerableOwnPropertySymbols","getOwnPropertySymbols","symbol","propertyIsEnumerable","getKeys","propertyIsOnObject","object","_","propertyIsUnsafe","mergeObject","destination","arrayMerge","sourceIsArray","targetIsArray","sourceAndTargetTypesMatch","all","deepmergeAll","array","reduce","prev","next","deepmerge_1","diff_match_patch","Diff_Timeout","Diff_EditCost","Diff_DualThreshold","Match_Threshold","Match_Distance","Patch_DeleteThreshold","Patch_Margin","getMaxBits","maxbits","oldi","newi","Match_MaxBits","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","diff_main","text1","text2","opt_checklines","checklines","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","diff_compute","unshift","diff_cleanupMerge","longtext","shorttext","hm","diff_halfMatch","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","linearray","a","diff_linesToChars","diff_map","diff_charsToLines","diff_cleanupSemantic","count_delete","count_insert","text_delete","text_insert","j","pop","lineArray","lineHash","diff_linesToCharsMunge","text","chars","lineStart","lineEnd","lineArrayLength","line","String","fromCharCode","chars1","chars2","y","charCodeAt","ms_end","Date","getTime","text1_length","text2_length","max_d","doubleEnd","v_map1","v_map2","v1","v2","footstep","footsteps","done","front","k","charAt","diff_path1","diff_path2","v_map","path","last_op","pathLength","pointermin","pointermax","min","pointermid","pointerstart","floor","pointerend","dmp","diff_halfMatchI","seed","best_common","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","prefixLength","suffixLength","hm1","ceil","hm2","changes","equalities","equalitiesLength","lastequality","length_changes1","length_changes2","diff_cleanupSemanticLossless","punctuation","whitespace","linebreak","blanklineEnd","blanklineStart","diff_cleanupSemanticScore","one","two","score","match","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","diff_cleanupEfficiency","pre_ins","pre_del","post_ins","post_del","diff_xIndex","loc","last_chars1","last_chars2","diff_prettyHtml","html","op","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","max","diff_toDelta","encodeURI","diff_fromDelta","delta","diffsLength","tokens","split","param","decodeURI","ex","match_main","pattern","match_bitap","match_alphabet","match_bitapScore","accuracy","proximity","abs","score_threshold","best_loc","lastIndexOf","matchmask","bin_min","bin_mid","bin_max","last_rd","start","finish","rd","charMatch","patch_addContext","start2","length1","padding","prefix","suffix","start1","length2","patch_make","opt_b","opt_c","patches","patch_obj","patchDiffLength","char_count1","char_count2","prepatch_text","postpatch_text","diff_type","diff_text","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","results","expected_loc","start_loc","end_loc","index1","index2","mod","paddingLength","extraLength","bigpatch","patch_size","precontext","empty","shift","postcontext","patch_toText","patch_fromText","textline","textPointer","sign","coords1","coords2","asArray","callback","keyOf","resultKey","itemValue","itemKey","isRoot","removeUndefinedItems","pointerDelete","keepArrayIndices","properties","lastProperty","defaultValue","result","run","simpleJoin","matchMutlipleSlashes","matchTildes","matchSlashes","joinList","list","isURI","encodeURIComponent","firstPointer","arguments","option","apply","skip","arrayIndex","nextKeyIsArray","current","addValue","keyAsIndex","matchPointerPrefixes","sanitizeProperty","sanitizeAndDecodeProperty","decodeURIComponent","sanitize","rIsRegExp","stripPointerPrefix","convertToRegExp","pointerPartial","RegExp","splitRegExp","parsePointer","partials","queryGet","POINTER","PARENT","queryDelete","obj","jsonPointer","matches","ALL","common","f","queryKey","query","valid","queryRegExp","regex","MAP","filterValues","filterKeys","selectCurly","selectPlaceholder","splitQuery","temp","group","revertReplacement","propertyQuery","filterQuery","isValid","truthy","tests","or","getCbFactory","VALUE","cbGetAll","cbGetMap","cbGetPointer","cbGetValue","queryRun","steps","_query","cbPassAll","strings","Interface","Draft04","addSchema","compileSchema","createCustomError","createSchemaOf","each","eachSchema","getChildSchemaSelection","getTypeOf","step","validateAsync","copy","parse","cache","parentSchema","variableSchema","remotes","url","addError","errorId","errorCreator","addFormat","formatType","validationFunction","validateFormat","addKeyword","typeKeywords","validateKeyword","splitRef","suffixes","isObject","getRef","context","rootSchema","$ref","__ref","$remote","ids","fragments","base","joinScope","COMPILED","COMPILED_REF","GET_REF","GET_ROOT","compile","force","rootSchemaAsString","scopes","getRoot","previousScope","scope","trailingHash","isDomain","trailingFragments","idAndPointer","previous","emptyValues","DECLARATOR_ONEOF","GET_TEMPLATE_RECURSION_LIMIT","floatingPointPrecision","propertyBlacklist","AdditionalItemsError","AdditionalPropertiesError","AnyOfError","AllOfError","EnumError","FormatDateTimeError","FormatEmailError","FormatUrlError","FormatUriError","FormatHostnameError","FormatIPV4Error","FormatIPV6Error","FormatRegExError","MaximumError","MaxItemsError","MaxLengthError","MaxPropertiesError","MinimumError","MinItemsError","MinLengthError","MinPropertiesError","MissingOneOfPropertyError","MissingDependencyError","MultipleOfError","MultipleOneOfError","NoAdditionalPropertiesError","NotError","OneOfError","OneOfPropertyError","PatternError","PatternPropertiesError","RequiredPropertyError","TypeError","UndefinedValueError","UnknownPropertyError","UniqueItemsError","ValueNotEmptyError","resolveRef","resolveAnyOf","resolveAllOf","__rootSchema","CoreInterface","resolveOneOf","Draft04Core","validateType","JsonEditorCore","dataType","nextSchema","getTypeDefs","nextTypeDefs","defs","def","eachDefinition","walk","definitions","defId","defschema","schemaPointer","emptyObject","frags","_get","resolveOneOfFuzzy","merge","settings","shouldResolveRef","convertValue","createTemplateSchema","templateSchema","anyOf","resolvedAnyOf","allOf","resolvedSchema","TYPE","templateData","getDefault","template","itemCount","templateValue","initValue","mergedSchema","allOfSchema","allOfError","found","anyOfSchema","anyOfError","flattenArray","fuzzyObjectValue","oneOfProperty","oneOfValue","missingOneOfPropertyError","oneOfPropertySchema","errorOrPromise","oneOfPropertyError","schemaOfItem","fuzzyGreatest","fuzzyValue","oneOfError","multipleOneOfError","resolveRefMerge","gq","getTypeId","types","parent","keywords","validationKeywords","not","string","stepType","itemsType","additionalItems","additionalItemsError","targetSchema","patternProperties","patterns","additionalProperties","unknownPropertyError","expectedType","__","fallback","dashCase","str","isPromise","isError","errorsOnly","overwriteMerge","destinationArray","sourceArray","b","ucs2decode","output","counter","extra","getJsonSchemaType","jsType","Number","isInteger","receivedType","typeError","received","expected","invalidTypeError","createErrorNotification","onError","notifyError","resolvedErrors","stack","additionalPropertiesError","enumError","formatUrlError","formatUriError","formatDateTimeError","formatEmailError","formatHostnameError","formatIPV4Error","formatIPV6Error","formatRegExError","invalidSchemaError","maximumError","maxItemsError","maxLengthError","maxPropertiesError","minimumError","minItemsError","minLengthError","minPropertiesError","missingDependencyError","multipleOfError","noAdditionalPropertiesError","notError","patternError","patternPropertiesError","requiredPropertyError","undefinedValueError","uniqueItemsError","valueNotEmptyError","validUrl","isValidDateTime","isValidIPV4","isValidIPV6","FormatValidation","email","hostname","ipv4","ipv6","uri","isUri","isWebUri","FPP","KeywordValidation","receivedProperties","prop","expectedProperties","subSchema","dependencies","dependencyErrors","dependency","missingProperty","valueStr","itemData","itemSchema","itemErrors","maximum","exclusiveMaximum","maxLength","lengthOfString","maxProperties","propertyCount","minLength","minimum","exclusiveMinimum","minProperties","multipleOf","patternExample","pp","expr","patternSchema","patternFound","valErrors","keyErrors","propertiesRequired","required","requiredNotEmpty","uniqueItems","itemPointer","duplicatePointer","TypeValidation","reset","chalk","_typeof","iterator","constructor","classCallCheck","Constructor","createClass","defineProperties","props","descriptor","configurable","writable","protoProps","staticProps","receiver","desc","getOwnPropertyDescriptor","getPrototypeOf","getter","inherits","subClass","superClass","setPrototypeOf","__proto__","possibleConstructorReturn","ReferenceError","slicedToArray","sliceIterator","_arr","_n","_d","_e","_i","_s","toConsumableArray","arr2","from","Processor","selfOptions","pipes","_options","pipe","pipeArg","processor","process","input","nextPipe","lastPipe","lastContext","nextAfterChildren","hasResult","Pipe","filters","debug","filterName","exiting","resultCheck","msg","append","_filters","prepend","_filters2","after","params","before","clear","shouldHaveResult","should","noResult","Context","setResult","exit","switchTo","childName","root","cloneRegExp","re","regexMatch","exec","arg","cloned","DiffContext","_Context","left","right","_this","cloneDiffValues","clone$$1","PatchContext","ReverseContext","isArray$1","diffFilter","trivialMatchesDiffFilter","leftType","rightType","leftIsArray","rightIsArray","patchFilter","trivialMatchesPatchFilter","nested","regexArgs","reverseFilter","trivialReferseFilter","collectChildrenDiffFilter","_t","objectsDiffFilter","propertyFilter","patchFilter$1","nestedPatchFilter","collectChildrenPatchFilter","reverseFilter$1","nestedReverseFilter","collectChildrenReverseFilter","defaultMatch","array1","array2","lengthMatrix","len1","len2","matrix","backtrack","sequence","indices1","indices2","subsequence","get$1","innerContext","lcs","ARRAY_MOVE","isArray$2","arrayIndexOf","arraysHaveMatchByRef","val1","val2","matchItems","value1","value2","objectHash","matchByPosition","hash1","hash2","hashCache1","hashCache2","diffFilter$1","arraysDiffFilter","matchContext","commonHead","commonTail","trimmed1","trimmed2","seq","removedItems","detectMove","arrays","includeValueOnMove","removedItemsLength","indexOnArray2","isMove","removeItemIndex1","compare","numerically","numericallyBy","patchFilter$2","toRemove","toInsert","toModify","sort","indexDiff","removedValue","toInsertLength","insertion","toModifyLength","modification","collectChildrenPatchFilter$1","reverseFilter$2","arraysReverseFilter","newName","substr","reverseArrayDeltaIndex","itemDelta","reverseIndex","deltaIndex","deltaItem","moveFromIndex","moveToIndex","deleteIndex","collectChildrenReverseFilter$1","diffFilter$2","datesDiffFilter","createCommonjsModule","fn","diffMatchPatch","opt_deadline","MAX_VALUE","deadline","diff_compute_","diff_halfMatch_","diff_lineMode_","diff_bisect_","diff_linesToChars_","diff_charsToLines_","v_offset","v_length","k1start","k1end","k2start","k2end","k1","k1_offset","x1","y1","k2_offset","x2","diff_bisectSplit_","k2","y2","text1a","text2a","text1b","text2b","diffsb","diff_linesToCharsMunge_","diff_commonOverlap_","text_length","best","diff_halfMatchI_","length_insertions1","length_deletions1","length_insertions2","length_deletions2","deletion","overlap_length1","overlap_length2","diff_cleanupSemanticScore_","char1","char2","nonAlphaNumeric1","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","pattern_amp","pattern_lt","pattern_gt","pattern_para","match_bitap_","match_alphabet_","match_bitapScore_","patch_addContext_","patchHeader","TEXT_DIFF","DEFAULT_MIN_LENGTH","cachedDiffPatch","getDiffMatchPatch","diff_match_patch_not_found","diff","txt1","txt2","_patch","_error","textPatchFailed","diffFilter$3","textsDiffFilter","textDiff","diffMatchPatch$$1","patchFilter$3","textsPatchFilter","textDeltaReverse","lines","lineTmp","headerRegex","lineHeader","reverseFilter$3","textsReverseFilter","DiffPatcher","_processor","reverse","unpatch","isArray$3","getObjectKeys","names","trimUnderscore","arrayKeyToSortNumber","arrayKeyComparer","key1","key2","BaseFormatter","prepareContext","recurse","finalize","buffer","out","_buffer","typeFormattterNotFound","deltaType","typeFormattterErrorFormatter","_ref","leftKey","movedFrom","isLast","useMoveOriginHere","leftValue","getDeltaType","nodeType","nodeBegin","rootBegin","typeFormattter","nodeEnd","rootEnd","formatDeltaChildren","forEachDeltaKey","arrayKeys","moveDestinations","includeMoveDestinations","parseTextDiff","lineOutput","pieces","chr","pieceIndex","piecesLength","piece","pieceOutput","freeze","HtmlFormatter","_BaseFormatter","formatValue","htmlEscape","formatTextDiffString","nodeClass","hasArrows","adjustArrows","format_unchanged","format_movedestination","format_node","format_added","format_modified","format_deleted","format_moved","format_textdiff","replacements","jsondiffpatchHtmlFormatterAdjustArrows","nodeArg","getElementText","textContent","innerText","eachByQuery","elems","querySelectorAll","eachChildren","_ref2","_ref3","arrowParent","svg","display","destinationElem","distance","offsetTop","top","curve","showUnchanged","show","delay","body","classes","showing","hiding","visible","hidden","intervalId","setInterval","clearInterval","hideUnchanged","defaultInstance","AnnotatedFormatter","indent","levels","indentLevel","indentPad","row","json","htmlNote","wrapPropertyName","deltaAnnotations","added","formatLegend","modified","deleted","moved","textdiff","formatAnyChange","annotator","defaultInstance$1","format$1","annotated","OPERATIONS","JSONFormatter","pushCurrentOp","currentPath","pushMoveOp","toPath","last","sortBy","pred","compareByIndexDesc","indexA","indexB","lastA","lastB","opsByDescendingOrder","removeOps","splitA","splitB","partitionOps","fns","initArr","fill","position","acc","isMoveOp","isRemoveOp","_ref4","reorderOps","_partitionOps","_partitionOps2","moveOps","removedOps","restOps","removeOpsReverse","defaultInstance$2","format$2","jsonpatch","chalkColor","_len","args","_key","colors","movedestination","unchanged","textDiffLine","ConsoleFormatter","outLine","_len2","_key2","color","pushColor","popColor","defaultInstance$3","format$3","log$1","console$1","dateReviver","parts","UTC","defaultInstance$4","clone$1","formatters","nullTag","undefinedTag","symToStringTag","baseGetTag","getRawTag","objectToString","freeGlobal","getPrototype","overArg","objectProto","nativeObjectToString","isOwn","tag","unmasked","func","transform","freeSelf","isObjectLike","objectTag","funcProto","funcToString","objectCtorString","isPlainObject","proto","Ctor","getClassNames","classNames","raised","event","checked","Checkbox","Label","Errors","defaultOptions","placeholder","getErrorClass","isVNode","RATIO_DEFAULT","isEmpty","getRatioStyle","ratio","getRatio","toFixed","dim","MetaDescription","InlineImage","maxRatio","onload","ImagePreview","overflowContainer","updateRatio","ratioMax","ratioImg","hasOverflow","asBackgroundImage","currentTarget","content","hasFocus","onupdate","inputAttributes","oninput","updateEvent","Input","sanitizeValue","TYPES","$form","updateClasses","hasValue","contains","inputType","focusClass","errorClass","emptyClass","intValue","floatValue","_vnode","$wrapper","raf","requestAnimationFrame","textarea","focus","onbeforeremove","textareaAttributes","Textarea","checkbox","checkboxForm","inputForm","label","select","selectForm","textareaForm","imagePreview","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","len","nextTick","Item","browser","env","argv","version","versions","noop","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","_extends","parseActions","undoable","distinctState","includeAction","ifAction","excludeAction","_toConsumableArray","__DEBUG__","_console","debugStart","action","_console2","groupCollapsed","debugEnd","groupEnd","ActionTypes","UNDO","REDO","JUMP_TO_FUTURE","JUMP_TO_PAST","ActionCreators","undo","redo","jumpToFuture","jumpToPast","history","past","future","limit","free","present","historyOverflow","wrapState","updateState","createHistory","rawActions","reducer","rawConfig","initialState","initTypes","undoType","redoType","jumpToPastType","jumpToFutureType","initialHistory","res","actionType","updatedHistory","currentState","previousState","actions","applyMiddleware","middlewares","createStore","preloadedState","enhancer","store","_dispatch","dispatch","chain","middlewareAPI","getState","middleware","compose","bindActionCreator","actionCreator","bindActionCreators","actionCreators","boundActionCreators","getUndefinedStateErrorMessage","actionName","getUnexpectedStateShapeWarningMessage","inputState","reducers","unexpectedKeyCache","reducerKeys","argumentName","INIT","unexpectedKeys","assertReducerShape","random","combineReducers","finalReducers","warning","finalReducerKeys","shapeAssertionError","combination","warningMessage","hasChanged","nextState","previousStateForKey","nextStateForKey","errorMessage","funcs","currentReducer","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","subscribe","listener","isSubscribed","unsubscribe","replaceReducer","nextReducer","observable","outerSubscribe","observer","observeState","$$observable","isCrushed","ponyfill","symbolObservablePonyfill","is_uri","is_iri","is_http_uri","is_http_iri","is_https_uri","is_https_iri","is_web_uri","is_web_iri","isHttpUri","isHttpsUri","splitUri","splitted","scheme","authority","fragment","allowHttps","port","g","originalModule","webpackPolyfill","deprecate","paths","validators","keywordValidator","mitt","isRootPointer","dataReducer","getParentPointer","getPatchesPerPointer","DEBUG","BEFORE_UPDATE","FINAL_UPDATE","observers","emitter","register","lastUpdate","onStateChanged","info","eventLocation","parentData","parentDataType","bubbleObservers","unregister","isSynched","currentValue","DATA_SET","eventType","createEventObject","bubbleEvents","eventObject","notify","UIState","DELAY","PAGE_EVENT","TARGET_EVENT","targetPointer","nextPage","currentPage","getCurrentPage","setCurrentPage","setCurrentPointer","getCurrentPointer","targetElement","getElementById","scrollTarget","offsetParent","scrollIntoView","CURRENT_PAGE_EVENT","CURRENT_POINTER_EVENT","Overlay","OVERLAY_EVENT","onChange","setOverlay","close","getElement","$el","jsl","resetCache","localStorage","getItem","setItem","redux","FLAG_CHANGED","subState","errorReducer","Validation","BubblingCollectionObservable","BEFORE_VALIDATION","AFTER_VALIDATION","ON_ERROR","errorHandler","currentValidation","cancel","clearEvents","remainingErrors","startsWith","newError","currentErrors","completeListOfErrors","validationErrors","bubbledEvents","withChildErrors","selectError","withChildWarnings","SessionService","UndoActionCreators","UndoActionTypes","ERRORS_SET","newValue","prevValue","ensureItemIDs","defaultState","newState","UI_PAGE_SET","UI_OVERLAY_SET","UI_CURRENT_SET","uiReducer","ui","currentContent","Singleton","UIStateContructor","eventCollection","bubbleCollection","receiveChildEvents","_notify","clearChildren","changed","collection","_notifyAll","observerPointer","sourcePointer","events","canceled","onErrorCb","onDoneCb","cbDone","cbError","onDone","onFail","validationError","_id","ID_PROPERTY","generateId","now","addMissingItemIDs","sortByPointer","findPatches","entry","propertyAdded","propertyRemoved","isArrayItem","changedKey","previousValue","isPointer","getBreadcrumps","breadcrumps","getOption","enum_titles","resolveReference","pointerToResolve","getTitle","resolveOption","optionValue","editronOptions","resolver","getDefaultOption","SelectTileComponent","selectOptions","addSelection","selection","selectedIndex","nextList","destinationIndex","moveElement","Foxy","handler","translate","addLanguage","lang","_keys","isNodeContext","UISchem","returnIf","returnElse","isPopulated","editorViews","editorOf","mayBlur","direction","tagName","selectionStart","selectionEnd","getActiveInput","currentId","activeElement","activeInput","getAvailableInputs","getNextInput","allElements","currentIndex","nextElement","focusNextInput"],"mappings":"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","file":"editron-modules.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const gp = require(\"gson-pointer\");\nconst Core = require(\"json-schema-library\").cores.JsonEditor;\nconst addValidator = require(\"json-schema-library/lib/addValidator\");\nconst DataService = require(\"./services/DataService\");\nconst SchemaService = require(\"./services/SchemaService\");\nconst ValidationService = require(\"./services/ValidationService\");\nconst LocationService = require(\"./services/LocationService\");\nconst State = require(\"./services/State\");\nconst selectEditor = require(\"./utils/selectEditor\");\nconst _createElement = require(\"./utils/createElement\");\nconst addItem = require(\"./utils/addItem\");\nconst UISchema = require(\"./utils/UISchema\");\nconst getID = require(\"./utils/getID\");\nconst plugin = require(\"./plugin\");\nconst i18n = require(\"./utils/i18n\");\nconst createProxy = require(\"./utils/createProxy\");\n\n\nfunction isValidPointer(pointer) {\n    return pointer[0] === \"#\";\n}\n\nfunction assertValidPointer(pointer) {\n    if (isValidPointer(pointer) === false) {\n        throw new Error(`Invalid json(schema)-pointer: ${pointer}`);\n    }\n}\n\n\n// removes the editor from the instances-inventory of active editors\nfunction removeEditorFrom(instances, editor) {\n    const pointer = editor.getPointer();\n    if (instances[pointer]) {\n        instances[pointer] = instances[pointer].filter(instance => editor !== instance);\n        if (instances[pointer].length === 0) {\n            delete instances[pointer];\n        }\n    }\n}\n\nfunction eachInstance(instances, cb) {\n    Object.keys(instances).forEach(pointer => {\n        instances[pointer].forEach(editor => cb(pointer, editor));\n    });\n}\n\n\n/**\n * Main component to build editors. Each editor should receive the controller, which carries all required services\n * for editor initialization\n *\n * ### Usage\n *\n * Instantiate the controller\n *\n * ```js\n * import { Controller } from \"editron\";\n * // jsonSchema = { type: \"object\", required: [\"title\"], properties: { title: { type: \"string\" } } }\n * const editron = new Controller(jsonSchema);\n * ```\n *\n * or, using all parameters\n *\n * ```js\n *  import { Controller } from \"editron\";\n *  // jsonSchema = { type: \"object\", required: [\"title\"], properties: { title: { type: \"string\" } } }\n *  // data = { title: \"Hello\" } - or simply use {}\n *  // options = { editors: [ complete list of custom editors ] }\n *  const editron = new Controller(jsonSchema, data, options);\n * ```\n *\n * and start rendering editors\n *\n * ```js\n *  const editor = editron.createEditor(\"#\", document.querySelector(\"#editor\"));\n *  // render from title only: editron.createEditor(\"#/title\", document.querySelector(\"#title\"));\n * ```\n *\n * to fetch the generated data use\n *\n * ```js\n *  const data = editron.getData();\n * ```\n *\n * @param  {Object} schema          - json schema describing required data/form template\n * @param  {Any} data               - initial data for given json-schema\n * @param  {Object} [options]       - configuration options\n * @param  {Array} options.editors  - list of editron-editors/widgets to use. Order defines editor to use\n *      (based on editorOf-method)\n */\nclass Controller {\n    constructor(schema = {}, data = {}, options = {}) {\n        schema = UISchema.extendSchema(schema);\n\n        this.options = Object.assign({\n            editors: [\n                ...plugin.getEditors(),\n                require(\"./editors/oneofeditor\"),\n                require(\"./editors/arrayeditor\"),\n                require(\"./editors/objecteditor\"),\n                require(\"./editors/valueeditor\")\n            ]\n        }, options);\n\n        this.disabled = false;\n        this.editors = this.options.editors;\n        this.state = new State();\n        this.instances = {};\n        this.core = new Core();\n        this._proxy = createProxy(this.options.proxy);\n\n        plugin.getValidators().forEach(([validationType, ...validator]) => {\n            try {\n                if (validationType === \"format\") {\n                    return this.addFormatValidator(...validator);\n                } else if (validationType === \"keyword\") {\n                    return this.addKeywordValidator(...validator);\n                }\n                throw new Error(`Unknown validation type '${validationType}'`);\n            } catch (e) {\n                console.log(\"Error:\", e.message);\n            }\n            return false;\n        });\n\n        this.schemaService = new SchemaService(schema, data, this.core);\n        this.validationService = new ValidationService(this.state, schema, this.core);\n        // enable i18n error-translations\n        this.validationService.setErrorHandler(error => i18n.translateError(this, error));\n        // merge given data with template data\n        data = this.schemaService.addDefaultData(data, schema);\n        this.dataService = new DataService(this.state, data);\n        // start validation after data has been updated\n        this.onAfterDataUpdate = this.dataService\n            .on(DataService.EVENTS.AFTER_UPDATE, this.onAfterDataUpdate.bind(this));\n        // run initial validation\n        this.validateAll();\n    }\n\n    resetUndoRedo() {\n        this.dataService.resetUndoRedo();\n    }\n\n    setActive(active = true) {\n        const disabled = active === false;\n        if (this.disabled === disabled) {\n            return;\n        }\n        this.disabled = disabled;\n        eachInstance(this.getInstances(), (pointer, editor) => {\n            editor.setActive(!this.disabled);\n        });\n    }\n\n    isActive() {\n        return !this.disabled;\n    }\n\n    /**\n     * Helper to create dom elements via mithril syntax\n     *\n     * @param  {String} selector    - a css selector describing the desired element\n     * @param  {Object} attributes  - a map of dom attribute:value of the element (reminder className = class)\n     * @return {HTMLDomElement} the resulting DOMHtml element (not attached)\n     */\n    createElement(selector, attributes) { // eslint-disable-line class-methods-use-this\n        return _createElement(selector, attributes);\n    }\n\n    /**\n     * The only entry point to create editors.\n     * Use in application and from editors to create (delegate) child editors\n     *\n     * @param  {String} pointer         - data pointer to editor in current state\n     * @param  {HTMLElement} element    - parent element of create editor. Will be appended automatically\n     * @param  {Object} [options]       - individual editor options\n     * @return {Object|undefined} created editor-instance or undefined;\n     */\n    createEditor(pointer, element, options) {\n        if (pointer == null || element == null) {\n            throw new Error(`Missing ${pointer == null ? \"pointer\" : \"element\"} in createEditor`);\n        }\n\n        assertValidPointer(pointer);\n\n        // merge schema[\"editron:ui\"] object with options. options precede\n        const instanceOptions = Object.assign(\n            {\n                id: getID(pointer),\n                pointer,\n                disabled: this.disabled\n            },\n            UISchema.copyOptions(pointer, this),\n            options\n        );\n\n        // find a matching editor\n        const Editor = selectEditor(this.getEditors(), pointer, this, instanceOptions);\n        if (Editor === false) {\n            return undefined;\n        }\n\n        if (Editor === undefined) {\n            console.warn(`Could not resolve an editor for ${pointer}`, this.schema().get(pointer));\n            return undefined;\n        }\n\n        // iniitialize editor and save editor in list\n        // @TODO loose reference to destroyed editors\n        const editor = new Editor(pointer, this, instanceOptions);\n        element.appendChild(editor.toElement());\n        editor.setActive(!this.disabled);\n        this.addInstance(pointer, editor);\n\n        return editor;\n    }\n\n    /**\n     * Call this method, when your editor is destroyed, deregistering its instance on editron\n     * @param  {Instance} editor    - editor instance to remove\n     */\n    removeInstance(editor) {\n        // controller inserted child and removes it here again\n        const $element = editor.toElement();\n        if ($element.parentNode) {\n            $element.parentNode.removeChild($element);\n        }\n\n        removeEditorFrom(this.instances, editor);\n    }\n\n    addInstance(pointer, editor) {\n        this.instances[pointer] = this.instances[pointer] || [];\n        this.instances[pointer].push(editor);\n    }\n\n    /**\n     * Request to insert a child item (within the data) at the given pointer. If multiple options are present, a\n     * dialogue is opened to let the user select the appropriate type of child (oneof).\n     * @param {String} pointer  - to array on which to insert the child\n     * @param {Number} index    - index within array, where the child should be inserted (does not replace). Default: 0\n     */\n    addItemTo(pointer, index = 0) {\n        addItem(this.data(), this.schema(), pointer, index);\n        LocationService.goto(gp.join(pointer, index, true));\n    }\n\n    /**\n     * Get or update data from a pointer\n     * @return {DataService} DataService instance\n     */\n    data() { return this.dataService; }\n\n    /**\n     * Get the json schema from a pointer or replace the schema\n     * @return {SchemaService} SchemaService instance\n     */\n    schema() { return this.schemaService; }\n\n    /**\n     * @return {Foxy} proxy instance\n     */\n    proxy() { return this._proxy; }\n\n    /**\n     * Validate data based on a json-schema and register to generated error events\n     *\n     * - start validation\n     * - get your current errors at _pointer_\n     * - hook into validation to receive your errors at _pointer_\n     *\n     * @return {ValidationService} ValidationService instance\n     */\n    validator() { return this.validationService; }\n\n    /**\n     * ## Usage\n     *  goto(pointer) - Jump to given json pointer. This might also load another page if the root property changes.\n     *  setCurrent(pointer) - Update current pointer, but do not jump to target\n     *\n     * @return {Object} LocationService-Singleton\n     */\n    location() { return LocationService; }\n\n    /**\n     * Set the application data\n     * @param {Any} data    - json data matching registered json-schema\n     */\n    setData(data) {\n        data = this.schemaService.addDefaultData(data);\n        this.data().set(\"#\", data);\n    }\n\n    /**\n     * @param {JsonPointer} [pointer=\"#\"] - location of data to fetch. Defaults to root (all) data\n     * @return {Any} data at the given location\n     */\n    getData(pointer = \"#\") {\n        return this.data().get(pointer);\n    }\n\n    /**\n     * @return {Array} registered editor-widgets used to edit the json-data\n     */\n    getEditors() { return this.editors; }\n\n    /**\n     * @return {Object} currently active editor/widget instances\n     */\n    getInstances() { return this.instances; }\n\n    /**\n     * @param {String} format       - value of _format_\n     * @param {Function} validator  - validator function receiving (core, schema, value, pointer). Return `undefined`\n     *      for a valid _value_ and an object `{type: \"error\", message: \"err-msg\", data: { pointer }}` as error. May\n     *      als return a promise\n     */\n    addFormatValidator(format, validator) {\n        addValidator.format(this.core, format, validator);\n    }\n\n    /**\n     * @param {String} datatype     - JSON-Schema datatype to register attribute, e.g. \"string\" or \"object\"\n     * @param {String} keyword      - custom keyword\n     * @param {Function} validator  - validator function receiving (core, schema, value, pointer). Return `undefined`\n     *      for a valid _value_ and an object `{type: \"error\", message: \"err-msg\", data: { pointer }}` as error. May\n     *      als return a promise\n     */\n    addKeywordValidator(datatype, keyword, validator) {\n        addValidator.keyword(this.core, datatype, keyword, validator);\n    }\n\n    /**\n     * Change the new schema for the current data\n     * @param {Object} schema   - a valid json-schema\n     */\n    setSchema(schema) {\n        schema = UISchema.extendSchema(schema);\n        this.validationService.set(schema);\n        this.schemaService.setSchema(schema);\n    }\n\n    // update data in schema service\n    update() {\n        this.schemaService.setData(this.dataService.get());\n    }\n\n    /**\n     * Starts validation of current data\n     */\n    validateAll() {\n        setTimeout(() =>\n            this.destroyed !== true && this.validationService.validate(this.dataService.getDataByReference())\n        );\n    }\n\n    /**\n     * Destroy the editor, its widgets and services\n     */\n    destroy() {\n        // delete all editors\n        Object.keys(this.instances).forEach(pointer => {\n            this.instances[pointer] && this.instances[pointer].forEach(instance => instance.destroy());\n        });\n\n        this.destroyed = true;\n        this.instances = {};\n        this.schemaService.destroy();\n        this.validationService.destroy();\n        this.dataService.destroy();\n        this.dataService.off(DataService.EVENTS.AFTER_UPDATE, this.onAfterDataUpdate);\n    }\n\n    onAfterDataUpdate({ pointer }) {\n        this.update();\n\n        // @feature selective-validation\n        if (pointer.includes(\"/\")) {\n            // @attention validate parent-object or array, in order to support parent-validators.\n            // Any higher validators will still be ignore\n            pointer = pointer.replace(/\\/[^/]+$/, \"\");\n        }\n\n        setTimeout(() => {\n            const data = this.dataService.getDataByReference();\n            this.destroyed !== true && this.validationService.validate(data, pointer);\n        });\n    }\n\n    changePointer(newPointer, editor) {\n        removeEditorFrom(this.instances, editor);\n        this.addInstance(newPointer, editor);\n    }\n}\n\n\nmodule.exports = Controller;\n","const m = require(\"mithril\");\nconst ContainerHeader = require(\"../containerheader\");\nconst ContainerErrors = require(\"../containererrors\");\nconst ContainerDescription = require(\"../containerdescription\");\n\n\n/**\n * @view ContainerView\n *\n * A Container Component is used for any non-value like object or arrays. They hold other values. This group may expose\n * a group-title and errors. Any childnodes must go to the container '.jed-container__children'.\n *\n * @type {Object}\n */\nconst ContainerView = {\n\n    childContainerSelector: \".editron-container__children\",\n\n    getChildContainer($element) {\n        const $childContainer = $element.querySelector(ContainerView.childContainerSelector);\n        if ($childContainer == null) {\n            throw new Error(\"Container-Component hast not yet been rendered\");\n        }\n        return $childContainer;\n    },\n\n    view(vnode) {\n        return [\n            vnode.attrs.hideTitle === true ? null : m(ContainerHeader, vnode.attrs),\n            m(ContainerDescription, vnode.attrs),\n            vnode.children,\n            m(ContainerErrors, vnode.attrs),\n            m(this.childContainerSelector)\n        ];\n    }\n};\n\nmodule.exports = ContainerView;\n","const m = require(\"mithril\");\nconst populated = require(\"../../utils/populated\");\n\n\n/**\n * @name   ContainerDescription\n * @description\n * Mithril Component to render a description\n *\n * # Usage\n *\n * render by\n *\n * ```js\n *  m(ContainerDescription, { description: \"description\" }\n * ```\n *\n * which will result in a html-node like\n *\n * ```html\n *  <div class=\"editron-container__description mmf-meta\">\"description\"</div>\n * ```\n *\n * @type {Object} m.render(ContainerDescription)\n * @param {String|Object} description  - html string or mithril-vnode of a description\n */\nmodule.exports = {\n    view(vnode) {\n        return populated(vnode.attrs.description,\n            m(\".editron-container__description.mmf-meta\", m.trust(vnode.attrs.description))\n        );\n    }\n};\n","const m = require(\"mithril\");\n\n\nmodule.exports = {\n    view(vnode) {\n        if (Array.isArray(vnode.attrs.errors) === false || vnode.attrs.errors.length === 0) {\n            return null;\n        }\n\n        return m(\"ul.editron-container__errors\", vnode.attrs.errors.map((error) =>\n            m(\"li\", { \"class\": `is-${error.severity || \"error\"}` }, error.message)\n        ));\n    }\n};\n","const m = require(\"mithril\");\nconst getID = require(\"../../utils/getID\");\nconst populated = require(\"../../utils/populated\");\n\n\nfunction getClass({ title, icon, hasAction, disabled }) {\n    let classname = `${title ? \"withTitle\" : \"noTitle\"}`;\n    classname += ` ${hasAction ? \"withActions\" : \"noActions\"}`;\n    classname += ` ${icon ? \"withIcon\" : \"noIcon\"}`;\n    classname += disabled ? \" is-disabled\" : \"\";\n    return classname;\n}\n\n\nmodule.exports = {\n    view(vnode) {\n        const attrs = Object.assign({\n            pointer: \"\",\n            icon: \"\",\n            title: \"\",\n            disabled: false\n            // onadd\n            // ondelete\n            // onmoveup\n            // onmovedown\n        }, vnode.attrs);\n\n        attrs.hasAction = attrs.onadd || attrs.ondelete || attrs.onmoveup || attrs.onmovedown;\n\n        return m(\".editron-container__header\",\n            {\n                \"class\": getClass(attrs),\n                name: getID(attrs.pointer)\n            },\n\n            m(\".editron-container__title\",\n                populated(vnode.attrs.icon, m(\"i.mmf-icon\", attrs.icon)),\n                (!attrs.hideTitle) && m(\"h2\", attrs.title)\n            ),\n\n            m(\".editron-container__actions\",\n                attrs.onmoveup ? m(\"i.mmf-icon.mmf-icon--add\", {\n                    onclick: attrs.onmoveup\n                }, \"arrow_upward\") : \"\",\n\n                attrs.onmovedown ? m(\"i.mmf-icon.mmf-icon--add\", {\n                    onclick: attrs.onmovedown\n                }, \"arrow_downward\") : \"\",\n\n                attrs.onadd ? m(\"i.mmf-icon.mmf-icon--add\", {\n                    onclick: () => attrs.onadd()\n                }, \"add\") : \"\",\n\n                attrs.ondelete ? m(\"i.mmf-icon.mmf-icon--delete\", {\n                    onclick: attrs.ondelete\n                }, \"delete\") : \"\"\n            )\n        );\n    }\n};\n","module.exports = {\n    container: require(\"./container\"),\n    containerdescription: require(\"./containerdescription\"),\n    containererrors: require(\"./containererrors\"),\n    containerheader: require(\"./containerheader\"),\n    overlay: require(\"./overlay\"),\n    // overlayjson: require(\"./overlayjson\"),\n    overlayselecttiles: require(\"./overlayselecttiles\")\n};\n","const m = require(\"mithril\");\nconst Button = require(\"mithril-material-forms\").button;\n\n\nmodule.exports = {\n\n    /**\n     * @View mithril\n     * Content overlay\n     *\n     * @param  {VNode} vnode                        - mithril virtual node\n     * @param  {VNode.attrs.container} container    - parent container\n     * @return {Object} virtual node\n     */\n    view(vnode) {\n        return m(\"section.ui-overlay__card\",\n            {\n                \"class\": vnode.attrs.fullscreen ? \"ui-overlay__card--fullscreen\" : null\n            },\n            vnode.attrs.header ? m(\".ui-card__header\",\n                m(\"h1\", vnode.attrs.header)\n            ) : \"\",\n            m(\".ui-card__content\",\n                {\n                    oncreate: (contentNode) => contentNode.dom.appendChild(vnode.attrs.container)\n                }\n            ),\n            m(\".ui-card__footer\",\n                m(Button,\n                    {\n                        onClick: vnode.attrs.onAbort\n                    },\n                    vnode.attrs.titleAbort\n                ),\n                vnode.attrs.showSave ? m(Button,\n                    {\n                        onClick: vnode.attrs.onSave\n                    },\n                    \"Speichern\"\n                ) : \"\"\n            )\n        );\n    }\n};\n","const m = require(\"mithril\");\n\n\nconst Tile = {\n    view(vnode) {\n        return m(\".editron-form-box\",\n            {\n                \"data-value\": vnode.attrs.value,\n                \"data-type\": vnode.attrs.title.toLowerCase() // @uitest\n            },\n            m(\".editron-form-box__content\",\n                m(\".editron-form-box__title\",\n                    [\n                        vnode.attrs.icon ? m(\".mmf-icon\", vnode.attrs.icon) : \"\",\n                        vnode.attrs.title\n                    ]\n                ),\n                m(\".editron-form-box__description\", vnode.attrs.description)\n            )\n        );\n    }\n};\n\n\nfunction getDataValue(node) {\n    while (\n        node.parentNode &&\n        node.getAttribute(\"data-value\") == null &&\n        node.className.includes(\"editron-form-tiles\") === false\n    ) {\n        node = node.parentNode;\n    }\n    return node.getAttribute(\"data-value\");\n}\n\n/**\n * @View mithril\n * Overlay content to pick options. Displayed as tiles\n * @type {Object}\n */\nmodule.exports = {\n    view(vnode) {\n        const attrs = Object.assign({\n            value: 0,\n            options: [{ title: \"Keine Optionen angegeben\", value: false }],\n            onchange: Function.prototype\n        }, vnode.attrs);\n\n        return m(\".editron-form-tiles\",\n            {\n                onclick: (e) => {\n                    const value = getDataValue(e.target);\n                    attrs.onchange(value);\n                }\n            },\n            attrs.options.map((tile) =>\n                m(Tile, {\n                    active: attrs.value === tile.value,\n                    title: tile.title,\n                    icon: tile.icon,\n                    description: m.trust(tile.description), // allow html\n                    value: tile.value\n                })\n            )\n        );\n    }\n};\n","function getTypeClass(schema) {\n    return schema.type === \"array\" || schema.type === \"object\" ? schema.type : \"value\";\n}\n\n\n/**\n * This is an optional base class for a custom editor. Inheriting from AbstractEditor will setup most required\n * editor-methods to work by default, while still allowing custom implementations. Most of all, it removes\n * the tedious and redundant controller/serivce/pointer bootstraping.\n *\n * Still required is\n *\n *      1. a custom `static editorOf(p, c, o)`-method, to register on a schema\n *      2. an `update(patch)`-method to respond to changes of the data at _pointer_\n *      3. a custom `updatePointer(newPointer)`-method to respond to changes in the location of the editor. Most of\n *          times, the pointer will be used in rendering and/or when creating child-editors. Dont forget to call\n *          `super.updatePointer(newPointer)`\n *\n * and optionally an `updateErrors(errors)`-method to handle new (or removed) errors.\n *\n * Convenience methods are\n *\n *      - `getData()` to fetch the associated data of the current _pointer_\n *      - `setData(newValue)` to update the associated data of the current _pointer_\n *      - `getSchema()` returning the json-schema of the current _pointer_\n *      - `getErrors()` returning a list of current errors\n *      - `toElement()` gives you the root dom-node for this editor (aka render target)\n *      - `focus()` and `blur()` to manage the selection state of the current input (requires correct placement of _id_)\n *\n * @param {String} pointer          - pointer referencing the current data and schema\n * @param {Controller} controller   - editron controller instance\n * @param {Object} options          - resolved options object\n */\nclass AbstractEditor {\n\n    static editorOf(pointer, controller, options) { // eslint-disable-line\n        throw new Error(\"Missing editorOf-method in custom editor\");\n    }\n\n    constructor(pointer, controller, options) {\n        this.pointer = pointer;\n        this.controller = controller;\n        this.options = options;\n\n        this.dom = this.controller\n            .createElement(`.editron-container.editron-container--${getTypeClass(this.getSchema())}`, options.attrs);\n\n        this.update = controller.data()\n            .observe(pointer, this.update.bind(this), options.notifyNestedChanges === true);\n\n        this.setErrors = controller.validator()\n            .observe(pointer, this.setErrors.bind(this), options.notifyNestedErrors === true);\n\n        this.errors = this.controller.validator()\n            .getErrorsAndWarnings(pointer);\n    }\n\n    update() {\n        throw new Error(\"Missing implemented of method 'update' in custom editor\");\n    }\n\n    updatePointer(newPointer) {\n        const oldPointer = this.pointer;\n\n        this.controller.data().removeObserver(oldPointer, this.update);\n        this.controller.validator().removeObserver(oldPointer, this.setErrors);\n\n        this.pointer = newPointer;\n\n        this.controller.data().observe(newPointer, this.update, this.options.notifyNestedChanges === true);\n        this.setErrors = this.controller.validator().observe(newPointer, this.setErrors);\n\n        return [newPointer, oldPointer];\n    }\n\n    getData() {\n        return this.controller.data().get(this.pointer);\n    }\n\n    setData(data) {\n        return this.controller.data().set(this.pointer, data);\n    }\n\n    getErrors() {\n        return this.errors;\n    }\n\n    getSchema() {\n        return this.controller.schema().get(this.pointer);\n    }\n\n    getPointer() {\n        return this.pointer;\n    }\n\n    focus() {\n        this.controller.location().setCurrent(this.pointer);\n    }\n\n    blur() {\n        this.controller.location().blur(this.pointer);\n    }\n\n    toElement() {\n        return this.dom;\n    }\n\n    destroy() {\n        this.controller.removeInstance(this); // remove editor from editron and our html-element (dom) from the DOM\n        this.controller.data().removeObserver(this.pointer, this.update);\n        this.controller.validator().removeObserver(this.pointer, this._addError);\n        this.controller.validator().off(\"beforeValidation\", this._clearErrors);\n    }\n\n    setErrors(errors) {\n        this.errors = errors;\n        if (this.updateErrors) {\n            this.updateErrors(this.errors);\n        }\n    }\n}\n\n\nmodule.exports = AbstractEditor;\n","const m = require(\"mithril\");\nconst getId = require(\"../utils/getID\");\n\nconst convert = {\n    \"boolean\": value => {\n        if (value === \"true\") {\n            return true;\n        }\n        if (value === \"false\") {\n            return false;\n        }\n        return value;\n    },\n    integer: value => {\n        const converted = parseInt(value);\n        if (isNaN(converted) === false) {\n            return converted;\n        }\n        return value;\n    },\n    number: value => {\n        const converted = parseFloat(value);\n        if (isNaN(converted) === false) {\n            return converted;\n        }\n        return value;\n    }\n};\n\n\n/**\n * Convenience class, which registers required events and base methods for value-editors (not object, array)\n *\n * Usage\n * ```js\n *      MyValueEditor extends AbstractValueEditor {\n *          constructor(pointer, controller, options) {\n *              super(pointer, controller, options);\n *              this.render();\n *          }\n *          render() {\n *              m.render(this.$element, m(MyView, this.viewModel));\n *          }\n *      }\n * ```\n */\nclass AbstractValueEditor {\n\n    static editorOf(pointer, controller) {\n        const schema = controller.schema().get(pointer);\n        return schema.type !== \"object\" && schema.type !== \"array\";\n    }\n\n    /**\n     * #options\n     *      - editorValueType:String - custom type of editor value (added as classname)\n     *      - editorElementProperties:Object - add custom properties to main DOM-element\n     *      - viewModel:Object - viewModel which extends base viewmodel\n     *\n     * @param  {String} pointer         - json pointer to value\n     * @param  {Controller} controller  - json editor controller\n     * @param  {Object} options\n     */\n    constructor(pointer, controller, options) {\n        this.pointer = pointer;\n        this.controller = controller;\n\n        const schema = controller.schema().get(pointer);\n\n        options = Object.assign({\n            viewModel: null,\n            title: null,\n            description: null,\n            editorValueType: schema.enum ? \"select\" : schema.type,\n            editorElementProperties: null\n        }, options);\n\n        // create main DOM-element for view-generation\n        this.$element = controller.createElement(\n            `.editron-value.editron-value--${options.editorValueType}`,\n            Object.assign({\n                name: getId(pointer)\n            }, options.attrs)\n        );\n\n        // use this model to generate the view. may be customized with `options.viewModel`\n        this.viewModel = Object.assign({\n            pointer,\n            id: getId(pointer),\n            title: options.title,\n            description: options.description,\n            value: controller.data().get(pointer),\n            instantUpdate: options.instantUpdate,\n            schema,\n            options,\n            errors: controller.validator().getErrorsAndWarnings(pointer),\n            onfocus: () => controller.location().setCurrent(pointer),\n            onblur: () => controller.location().blur(pointer),\n            onchange: value => {\n                if (convert[schema.type]) {\n                    value = convert[schema.type](value);\n                }\n                this.setValue(value);\n            }\n        }, options.viewModel);\n\n        // in order to deregister callbacks in destroy(), bind all callbacks to this class\n        this.update = controller.data().observe(pointer, this.update.bind(this));\n        this.setErrors = controller.validator().observe(pointer, this.setErrors.bind(this));\n\n        // this.render();\n    }\n\n    getPointer() {\n        return this.pointer;\n    }\n\n    updatePointer(pointer) {\n        if (pointer === this.pointer) {\n            return;\n        }\n\n        this.controller.changePointer(pointer, this);\n\n        const oldPointer = this.pointer;\n        this.$element.setAttribute(\"name\", `editor-${pointer}`);\n        this.pointer = pointer;\n        this.viewModel.pointer = pointer;\n        this.viewModel.id = getId(pointer);\n        this.viewModel.onfocus = () => this.controller.location().setCurrent(pointer);\n        this.controller.data().removeObserver(oldPointer, this.update);\n        this.controller.validator().removeObserver(oldPointer, this.setErrors);\n        this.controller.data().observe(pointer, this.update);\n        this.controller.validator().observe(pointer, this.setErrors);\n\n        this.update();\n    }\n\n    setActive(active = true) {\n        this.viewModel.disabled = active === false;\n        if (this.viewModel.options) {\n            this.viewModel.options.disabled = this.viewModel.disabled;\n        }\n        this.render();\n    }\n\n    // update display value in view\n    update() {\n        this.viewModel.value = this.controller.data().get(this.pointer);\n        this.viewModel.disabled = !this.controller.isActive();\n        this.render();\n    }\n\n    // updates value in data-store\n    setValue(value) {\n        this.controller.data().set(this.pointer, value);\n        // do not trigger rendering here. data-observer will notify change event\n    }\n\n    // adds an error to view\n    setErrors(errors) {\n        this.viewModel.errors = errors;\n        this.render();\n    }\n\n    // update view\n    render() {\n        // this.$element.innerHTML = \"<b>Overwrite AbstractValueEditor.render() to generate your view</b>\";\n        m.render(this.$element, m(\"b\", \"Overwrite AbstractValueEditor.render() to generate view\"));\n    }\n\n    // return main dom element\n    toElement() {\n        return this.$element;\n    }\n\n    // destroy this editor\n    destroy() {\n        if (this.viewModel) {\n            this.controller.removeInstance(this);\n\n            // destroy this editor only once\n            m.render(this.$element, m(\"i\"));\n\n            this.viewModel = null;\n            this.controller.data().removeObserver(this.pointer, this.update);\n            this.controller.validator().removeObserver(this.pointer, this.setErrors);\n            this.$element = null;\n        }\n    }\n}\n\n\nmodule.exports = AbstractValueEditor;\n","const m = require(\"mithril\");\nconst gp = require(\"gson-pointer\");\nconst ArrayItemView = require(\"./ArrayItemView\");\nconst arrayUtils = require(\"../../utils/array\");\n\n\nclass ArrayItemEditor {\n\n    constructor(pointer, controller, options = {}) {\n        // eslint-disable-next-line max-len\n        this.$element = controller.createElement(\".editron-container__child.editron-container__child--array-item\", options.attrs);\n        this.controller = controller;\n\n        this.onAdd = () => this.add();\n        this.onRemove = () => this.remove();\n\n        this.viewModel = Object.assign({\n            disabled: false,\n            onadd: this.onAdd,\n            onremove: this.onRemove,\n            onmove: index => this.move(index)\n        }, options);\n\n        this.render();\n\n        const $target = this.$element.querySelector(ArrayItemView.editorTarget);\n        this.editor = controller.createEditor(pointer, $target, {\n            ondelete: this.onRemove\n        });\n\n        this.updatePointer(pointer);\n    }\n\n    render() {\n        m.render(this.$element, m(ArrayItemView, this.viewModel));\n    }\n\n    add() {\n        arrayUtils.addItem(this.parentPointer, this.controller, this.viewModel.index + 1);\n    }\n\n    remove() {\n        arrayUtils.removeItem(this.parentPointer, this.controller, this.viewModel.index);\n    }\n\n    move(to) {\n        arrayUtils.moveItem(this.parentPointer, this.controller, this.viewModel.index, to);\n    }\n\n    updatePointer(newPointer) {\n        this.parentPointer = gp.join(newPointer, \"..\", true);\n        this.viewModel.index = ArrayItemEditor.getIndex(newPointer);\n        this.viewModel.pointer = newPointer;\n        this.viewModel.length = this.controller.data().get(this.parentPointer).length;\n        this.render();\n        this.editor && this.editor.updatePointer(newPointer);\n    }\n\n    toElement() {\n        return this.$element;\n    }\n\n    getPointer() {\n        return this.viewModel.pointer;\n    }\n\n    destroy() {\n        if (this.viewModel) {\n            this.viewModel = null;\n            this.editor && this.editor.destroy();\n            this.$element.parentNode && this.$element.parentNode.removeChild(this.$element);\n        }\n    }\n\n    static getIndex(pointer) {\n        const parentPointer = gp.join(pointer, \"..\");\n        return parseInt(pointer.replace(`${parentPointer}/`, \"\"));\n    }\n}\n\n\nmodule.exports = ArrayItemEditor;\n","const m = require(\"mithril\");\n\n\nconst ArrayItemView = {\n\n    editorTarget: \".editron-item\",\n\n    view({ attrs }) {\n        const { disabled = false } = attrs;\n        const canRemove = attrs.minItems < attrs.length;\n        const canAdd = attrs.maxItems > attrs.length;\n        const showIndex = attrs.showIndex === true;\n\n        return [\n            // CONTROLS\n            m(\"ul.editron-container__controls.editron-container__controls--child\",\n                {\n                    \"class\": disabled ? \"is-disabled\" : undefined\n                },\n                (attrs.move === false || attrs.index === 0) ? \"\" : m(\"li\",\n                    { onclick: () => !disabled && attrs.onmove(attrs.index - 1) },\n                    m(\"i.mmf-icon\", \"arrow_upward\")\n                ),\n                (attrs.move === false || attrs.index === attrs.length - 1) ? \"\" : m(\"li\",\n                    { onclick: () => !disabled && attrs.onmove(attrs.index + 1) },\n                    m(\"i.mmf-icon\", \"arrow_downward\")\n                ),\n                (attrs.remove && attrs.ondelete && canRemove) ? m(\"li\",\n                    { onclick: () => !disabled && attrs.ondelete(attrs.index) },\n                    m(\"i.mmf-icon\", \"delete\")\n                ) : \"\",\n                (attrs.add && attrs.onadd && canAdd) ? m(\"li\",\n                    { onclick: () => !disabled && attrs.onadd(attrs.index) },\n                    m(\"i.mmf-icon\", \"add\")\n                ) : \"\"\n            ),\n\n            // TARGET CONTAINER FOR EDITOR\n            m(this.editorTarget, {\n                \"data-index\": `${attrs.index + 1} / ${attrs.length}`,\n                \"class\": [\n                    disabled ? \"is-disabled\" : \"\",\n                    canRemove ? \"has-remove-enabled\" : \"has-remove-disabled\",\n                    canAdd ? \"has-add-enabled\" : \"has-add-disabled\",\n                    showIndex ? \"with-index\" : \"\"\n                ].join(\" \").trim()\n            }),\n\n            // ADD BUTTON\n            (attrs.insert && canAdd) ? m(\".editron-container__separator.mmf-row\",\n                m(\".editron-container__button--add\",\n                    {\n                        \"class\": disabled ? \"is-disabled\" : undefined,\n                        onclick: e => {\n                            console.log(\"add\", disabled);\n                            if (!disabled) {\n                                e.preventDefault();\n                                attrs.onadd && attrs.onadd(attrs.index);\n                            }\n                        }\n                    },\n                    m(\"i.mmf-icon\", \"add_circle\")\n                )\n            ) : \"\"\n        ];\n    }\n};\n\n\nmodule.exports = ArrayItemView;\n","const m = require(\"mithril\");\nconst ArrayItemEditor = require(\"./ArrayItemEditor\");\nconst diffpatch = require(\"../../services/utils/diffpatch\");\nconst View = require(\"../../components/container\");\n\n\nclass ArrayEditor {\n\n    static editorOf(pointer, controller) {\n        const schema = controller.schema().get(pointer);\n        return schema.type === \"array\";\n    }\n\n    constructor(pointer, controller, options = {}) {\n        // add id to element, since no other input-form is associated with this editor\n        options.attrs = Object.assign({ id: options.id }, options.attrs);\n        const schema = controller.schema().get(pointer);\n        const data = controller.data().get(pointer);\n\n        this.onAdd = (index = 0) => {\n            if (!this.viewModel.disabled) {\n                controller.addItemTo(this.pointer, index);\n            }\n        };\n\n        const arrayHTMLElement = \".editron-container.editron-container--array.withAddButton\";\n        this.$element = controller.createElement(arrayHTMLElement, options.attrs);\n\n        this.controller = controller;\n        this.pointer = pointer;\n        this.children = [];\n        this.viewModel = Object.assign({\n            pointer,\n            attrs: {},\n            errors: controller.validator().getErrorsAndWarnings(pointer),\n            onadd: this.onAdd,\n            length: data.length,\n            maxItems: schema.maxItems || Infinity,\n            minItems: schema.minItems || 0\n        }, options);\n\n        this.viewModel.controls = Object.assign({\n            add: false,\n            remove: true,\n            move: true,\n            insert: true,\n            showIndex: options[\"array:index\"] === true,\n            maxItems: schema.maxItems || Infinity,\n            minItems: schema.minItems || 0\n        }, options.controls);\n\n        this.updateView = controller.data().observe(pointer, this.updateView.bind(this));\n        this.setErrors = controller.validator().observe(pointer, this.setErrors.bind(this));\n\n        this.render();\n        this.$items = this.$element.querySelector(View.childContainerSelector);\n        this.rebuildChildren();\n        this.updateControls();\n    }\n\n    setActive(active = true) {\n        const disabled = active === false;\n        this.viewModel.disabled = disabled;\n        this.viewModel.controls.disabled = disabled;\n        this.rebuildChildren();\n        this.render();\n    }\n\n    update() {\n        this.rebuildChildren();\n        this.updateControls();\n    }\n\n    updatePointer(newPointer) {\n        if (this.pointer === newPointer) {\n            return;\n        }\n\n        this.controller.changePointer(newPointer, this);\n\n        const previousPointer = this.pointer;\n        this.pointer = newPointer;\n        this.viewModel.pointer = newPointer;\n        this.viewModel.attrs.id = newPointer;\n\n        this.controller.data().removeObserver(previousPointer, this.updateView);\n        this.controller.validator().removeObserver(previousPointer, this.setErrors);\n        this.controller.data().observe(newPointer, this.updateView);\n        this.controller.validator().observe(newPointer, this.setErrors);\n\n        this.children.forEach((child, index) => child.updatePointer(`${newPointer}/${index}`));\n        this.render();\n    }\n\n    updateView(changeEvent) {\n        if (changeEvent && changeEvent.patch) {\n            this.applyPatches(changeEvent.patch);\n        } else {\n            this.rebuildChildren();\n        }\n        this.updateControls();\n    }\n\n    applyPatches(patch) {\n        // fetch a copy of the original list\n        const originalChildren = this.children.slice(0);\n        // and patch the current list\n        diffpatch.patch(this.children, patch);\n\n        // search for inserted children\n        this.children.forEach((child, index) => {\n            if (child instanceof ArrayItemEditor === false) {\n                const pointer = `${this.pointer}/${index}`;\n                const newChild = new ArrayItemEditor(pointer, this.controller, this.viewModel.controls);\n                // @insert?\n                this.children[index] = newChild;\n            }\n        });\n\n        // search for removed children\n        originalChildren.forEach(child => {\n            if (this.children.indexOf(child) === -1) {\n                child.destroy();\n            }\n        });\n\n        // update view: move and inserts nodes\n        const currentLocation = this.controller.location().getCurrent();\n\n        for (let i = 0, l = this.children.length; i < l; i += 1) {\n            const previousPointer = this.children[i].getPointer();\n            const currentPointer = `${this.pointer}/${i}`;\n\n            // update current location\n            if (currentLocation.indexOf(previousPointer) === 0) {\n                const editorLocation = currentLocation.replace(previousPointer, currentPointer);\n                this.controller.location().setCurrent(editorLocation);\n            }\n\n            // update child views to match patched list\n            this.children[i].updatePointer(currentPointer);\n            if (this.$items.children[i] === this.children[i].toElement()) {\n                // skip moving node, already in place\n                continue;\n            } else if (i + 1 < this.$items.children.length) {\n                // move node to correct position\n                this.$items.insertBefore(this.children[i].toElement(), this.$items.children[i + 1]);\n            } else {\n                // remaining nodes may be simply appended\n                this.$items.appendChild(this.children[i].toElement());\n            }\n        }\n    }\n\n    rebuildChildren() {\n        const data = this.controller.data().get(this.pointer);\n\n        // delete all child editors\n        this.children.forEach(editor => editor.destroy());\n        this.children.length = 0;\n        this.$items.innerHTML = \"\";\n\n        // recreate child editors\n        data.forEach((item, index) => {\n            const childPointer = `${this.pointer}/${index}`;\n            const childEditor = new ArrayItemEditor(childPointer, this.controller, this.viewModel.controls);\n            this.$items.appendChild(childEditor.toElement());\n            this.children.push(childEditor);\n        });\n    }\n\n    updateControls() {\n        this.viewModel.length = this.children.length;\n        this.viewModel.onadd = this.viewModel.maxItems > this.children.length ? this.onAdd : false;\n\n        this.$element.classList.toggle(\"has-add-disabled\", this.viewModel.maxItems <= this.children.length);\n        this.$element.classList.toggle(\"has-remove-disabled\", this.viewModel.minItems >= this.children.length);\n    }\n\n    getPointer() {\n        return this.pointer;\n    }\n\n    setErrors(errors) {\n        this.viewModel.errors = errors;\n        this.render();\n    }\n\n    render() {\n        m.render(this.$element, m(View, this.viewModel));\n    }\n\n    toElement() {\n        return this.$element;\n    }\n\n    destroy() {\n        if (this.viewModel) {\n            this.controller.removeInstance(this);\n\n            this.viewModel = null;\n            m.render(this.$element, m(\"i\"));\n            this.controller.data().removeObserver(this.pointer, this.updateView);\n            this.controller.validator().removeObserver(this.pointer, this.setErrors);\n            this.children.forEach(editor => editor.destroy());\n        }\n    }\n}\n\n\nmodule.exports = ArrayEditor;\n","module.exports = {\n    AbstractEditor: require(\"./AbstractEditor\"),\n    AbstractValueEditor: require(\"./AbstractValueEditor\"),\n    ArrayEditor: require(\"./arrayeditor\"),\n    ObjectEditor: require(\"./objecteditor\"),\n    OneOfEditor: require(\"./oneofeditor\"),\n    ValueEditor: require(\"./valueeditor\")\n};\n","const m = require(\"mithril\");\nconst TextareaForm = require(\"mithril-material-forms/components/textareaform\");\nconst OverlayService = require(\"../../services/OverlayService\");\nconst View = require(\"../../components/container\");\n\n\nfunction showJSON(controller, data, title) {\n    const element = controller.createElement(\".overlay__item.overlay__item--json\");\n    OverlayService.open(element, { ok: true, save: false });\n    // render textarea after it is injected into dom, to correctly update textarea size\n    m.render(element, m(TextareaForm, { title, value: JSON.stringify(data, null, 4) }));\n}\n\n\nclass ObjectEditor {\n\n    static editorOf(pointer, controller) {\n        const schema = controller.schema().get(pointer);\n        return schema.type === \"object\";\n    }\n\n    constructor(pointer, controller, options = {}) {\n        // add id to element, since no other input-form is associated with this editor\n        options.attrs = Object.assign({ id: options.id }, options.attrs);\n\n        this.$element = controller.createElement(\".editron-container.editron-container--object\", options.attrs);\n        this.pointer = pointer;\n        this.options = options;\n        this.controller = controller;\n        this.childEditors = [];\n        this.viewModel = Object.assign({\n            pointer,\n            icon: options.icon,\n            errors: [],\n            attrs: {},\n            hideTitle: options.hideTitle,\n            title: options.title,\n            description: options.description\n        }, options);\n\n        if (options.addDelete) {\n            this.viewModel.ondelete = () => controller.data().delete(pointer);\n        }\n\n        this.rebuildChildren = controller.data().observe(pointer, this.rebuildChildren.bind(this));\n        this.setErrors = controller.validator().observe(pointer, this.setErrors.bind(this));\n\n        this.setErrors(controller.validator().getErrorsAndWarnings(pointer));\n        this.render();\n        this.$children = this.$element.querySelector(View.childContainerSelector);\n        this.rebuildChildren();\n    }\n\n    updatePointer(pointer) {\n        if (this.pointer === pointer || this.viewModel == null) {\n            return;\n        }\n\n        this.controller.changePointer(pointer, this);\n\n        const oldPointer = this.pointer;\n        this.$element.id = pointer;\n\n        const controller = this.controller;\n        this.options.attrs.id = pointer;\n        this.pointer = pointer;\n        this.viewModel.pointer = pointer;\n        if (this.options.addDelete) {\n            // console.log(\"Update ondelete\", pointer);\n            this.viewModel.ondelete = () => controller.data().delete(pointer);\n        }\n        controller.data().removeObserver(oldPointer, this.rebuildChildren);\n        controller.validator().removeObserver(oldPointer, this.setErrors);\n        controller.data().observe(pointer, this.rebuildChildren);\n        controller.validator().observe(pointer, this.setErrors);\n\n        this.childEditors.forEach(editor => {\n            editor.updatePointer(`${this.pointer}/${editor._property}`);\n        });\n\n        this.render();\n    }\n\n    setActive(active = true) {\n        this.viewModel.disabled = active === false;\n        this.render();\n    }\n\n    update() {\n        this.rebuildChildren();\n    }\n\n    rebuildChildren() {\n        if (this.viewModel == null) {\n            console.error(`destroyed ObjectEditor receives an update event\n                - this may be invoked through oneOf-Editor`, this);\n            return;\n        }\n\n        // fetch latest data\n        const data = this.controller.data().get(this.pointer);\n        // destroy child editor\n        this.childEditors.forEach(editor => editor.destroy());\n        this.childEditors.length = 0;\n        // clear html\n        this.$children.innerHTML = \"\";\n        // rebuild children\n        if (data) {\n            Object.keys(data).forEach(property => {\n                const editor = this.controller.createEditor(`${this.pointer}/${property}`, this.$children);\n                if (editor) {\n                    editor._property = property;\n                    this.childEditors.push(editor);\n                }\n            });\n        }\n\n        this.render();\n    }\n\n    deleteProperty(property) {\n        const data = this.controller.data().get(this.pointer);\n        delete data[property];\n        this.controller.data().set(this.pointer, data);\n    }\n\n    showProperty(property) {\n        const propertyData = this.controller.data().get(`${this.pointer}/${property}`);\n        showJSON(this.controller, propertyData, property);\n    }\n\n    setErrors(errors = []) {\n        // if we receive errors here, a property may be missing (which should go to schema.getTemplate) or additional,\n        // but prohibited properties exist. For the latter, add an option to show and/or delete the property. Within\n        // arrays this should come per default, as the may insert in add items...\n        this.viewModel.errors = errors.map(error => {\n            if (error.code === \"no-additional-properties-error\") {\n                const message = error.message;\n                const property = error.data.property;\n                return {\n                    severity: error.type || \"error\",\n                    message: m(\".editron-error.editron-error--object-property\",\n                        m(\"span\", m.trust(message)),\n                        m(\"a.mmf-icon\", { onclick: () => this.showProperty(property) }, \"visibility\"),\n                        m(\"a.mmf-icon\", { onclick: () => this.deleteProperty(property) }, \"clear\")\n                    )\n                };\n            }\n            return error;\n        });\n        this.render();\n    }\n\n    render() {\n        m.render(this.$element, m(View, this.viewModel));\n    }\n\n    toElement() {\n        return this.$element;\n    }\n\n    getPointer() {\n        return this.pointer;\n    }\n\n    destroy() {\n        if (this.viewModel) {\n            this.controller.removeInstance(this);\n\n            m.render(this.$element, m(\"i\"));\n            this.controller.data().removeObserver(this.pointer, this.rebuildChildren);\n            this.controller.validator().removeObserver(this.pointer, this.setErrors);\n\n            this.childEditors.forEach(editor => editor.destroy());\n            this.childEditors.length = 0;\n            this.$children.innerHTML = \"\";\n            this.viewModel = null;\n        }\n    }\n}\n\n\nmodule.exports = ObjectEditor;\n","const m = require(\"mithril\");\nconst gp = require(\"gson-pointer\");\nconst Select = require(\"mithril-material-forms/components/select\");\nconst getId = require(\"../../utils/getID\");\nconst View = require(\"../../components/container\");\nconst UI_PROPERTY = require(\"../../utils/UISchema\").UI_PROPERTY;\n\n\nclass OneOfEditor {\n    static editorOf(pointer, controller, options) {\n        const schema = controller.schema().get(pointer);\n        return schema.oneOfSchema && !schema.items && !options.renderOneOf;\n    }\n\n    constructor(pointer, controller, options) {\n        const childSchema = controller.schema().get(pointer);\n        // @special case. Our options lie in `schema.oneOfSchema`\n        const schema = childSchema.oneOfSchema;\n        const attrs = gp.get(schema, `#/${UI_PROPERTY}/attrs`);\n\n        this.schema = schema;\n        this.childSchema = childSchema;\n\n        // ensure requried titles are set\n        schema.oneOf.forEach((oneOfSchema, index) => (oneOfSchema.title = oneOfSchema.title || `${index}.`));\n\n        this.$element = controller.createElement(\".editron-container.editron-container--oneof\", attrs);\n        this.controller = controller;\n        this.pointer = pointer;\n        this.viewModel = {\n            id: getId(pointer),\n            pointer,\n            options: schema.oneOf.map((oneOf, index) => ({ title: oneOf.title, value: index })),\n            onchange: oneOfIndex => {\n                this.changeChild(schema.oneOf[oneOfIndex]);\n            },\n            value: this.getIndexOf(childSchema),\n            title: schema.title,\n            description: schema.description\n        };\n\n        // use bubble=true to catch inner changes (changes are compared by a diff which may not notify parent pointer)\n        this.update = controller.data().observe(pointer, this.update.bind(this), true);\n\n        this.render();\n        this.$childContainer = this.$element.querySelector(View.childContainerSelector);\n        this.rebuild();\n    }\n\n    setActive(active = true) {\n        this.viewModel.disabled = active === false;\n        this.render();\n    }\n\n    changeChild(schema) {\n        this.childEditor && this.childEditor.destroy();\n        const data = this.controller.schema().getTemplate(schema);\n        this.controller.data().set(this.pointer, data);\n    }\n\n    getIndexOf(currentSchema) {\n        for (let i = 0, l = this.schema.oneOf.length; i < l; i += 1) {\n            if (this.schema.oneOf[i].title === currentSchema.title) {\n                return i;\n            }\n        }\n        return 0;\n    }\n\n    updatePointer(newPointer) {\n        const oldPointer = this.getPointer();\n        if (oldPointer === newPointer) {\n            return;\n        }\n\n        this.controller.changePointer(newPointer, this);\n\n        this.pointer = newPointer;\n        this.viewModel.id = getId(newPointer);\n        this.viewModel.pointer = newPointer;\n        this.$element.id = newPointer;\n        this.controller.data().removeObserver(oldPointer, this.update);\n        this.controller.data().observe(newPointer, this.update, true);\n\n        if (this.childEditor) {\n            this.childEditor.updatePointer(newPointer);\n        }\n\n        this.render();\n    }\n\n    update() {\n        const currentSchema = this.controller.schema().get(this.pointer);\n        delete currentSchema.oneOfSchema; // is recreated each time\n        if (currentSchema.title === this.childSchema.title) {\n            return;\n        }\n\n        this.viewModel.value = this.getIndexOf(currentSchema);\n        this.childSchema = currentSchema;\n        this.rebuild();\n    }\n\n    rebuild() {\n        this.childEditor && this.childEditor.destroy();\n        this.$childContainer.innerHTML = \"\";\n        this.childEditor = this.controller.createEditor(this.pointer, this.$childContainer, {\n            // @attention this is very important or else we create an infinite loop through selectEditor\n            renderOneOf: true\n        });\n\n        this.render();\n    }\n\n    render() {\n        m.render(this.$element, m(View, this.viewModel,\n            m(\".editron-value\",\n                m(Select, this.viewModel)\n            )\n        ));\n    }\n\n    toElement() {\n        return this.$element;\n    }\n\n    getPointer() {\n        return this.pointer;\n    }\n\n    destroy() {\n        if (this.viewModel) {\n            this.controller.removeInstance(this);\n\n            this.viewModel = null;\n            m.render(this.$element, \"i\");\n            this.controller.data().removeObserver(this.pointer, this.update);\n        }\n    }\n}\n\n\nmodule.exports = OneOfEditor;\n","const m = require(\"mithril\");\n\nconst CheckboxForm = require(\"mithril-material-forms/components/checkboxform\");\nconst SelectForm = require(\"mithril-material-forms/components/selectform\");\nconst TextareaForm = require(\"mithril-material-forms/components/textareaform\");\nconst InputForm = require(\"mithril-material-forms/components/inputform\");\nconst UISchema = require(\"../../utils/UISchema\");\n\n\nfunction chooseInput(attrs, options = {}) {\n    const schema = attrs.schema;\n    const config = Object.assign({\n        type: schema.type,\n        title: schema.title,\n        description: schema.description,\n        onblur: attrs.onblur || Function.prototype,\n        onfocus: attrs.onfocus || Function.prototype,\n        onchange: attrs.onchange || Function.prototype\n    }, attrs, options);\n\n    if (schema.enum && schema.enum.length > 0) {\n        config.options = UISchema.enumOptions(schema);\n        return m(SelectForm, config);\n    }\n    if (schema.type === \"boolean\") {\n        return m(CheckboxForm, config);\n    }\n    if (schema.type === \"string\" && schema.format === \"html\") {\n        return m(TextareaForm, config);\n    }\n    if (schema.type === \"string\" && schema.format === \"textarea\") {\n        config.rows = options[\"textarea:rows\"] || 1;\n        return m(TextareaForm, config);\n    }\n    return m(InputForm, config);\n}\n\n\nmodule.exports = {\n    view(vnode) {\n        return chooseInput(vnode.attrs, vnode.attrs.options);\n    }\n};\n","const m = require(\"mithril\");\nconst View = require(\"./View\");\nconst AbstractValueEditor = require(\"../AbstractValueEditor\");\n\n\nclass ValueEditor extends AbstractValueEditor {\n\n    static editorOf(pointer, controller) {\n        const schema = controller.schema().get(pointer);\n        return schema.type !== \"object\" && schema.type !== \"array\";\n    }\n\n    constructor(pointer, controller, options = {}) {\n        super(pointer, controller, options);\n        this.render();\n    }\n\n    render() {\n        m.render(this.$element, m(View, this.viewModel));\n    }\n}\n\n\nmodule.exports = ValueEditor;\n","/**\n * Editron-Core. Depending on your build setup, use\n *\n * ```js\n * import { Controller } from \"editron\";\n * // or\n * const { Controller } = require(\"editron\");\n * ```\n * to get the editron core entry point for a enjoyable formular world\n *\n *\n * @type {Package} exported methods and utilities\n * @property {Controller} Controller    - the main Editron-Class you want to start all form applications\n * @property {Object} components        - mithril components, for default html-generation of headers and containers\n * @property {Object} editors           - basic editron editors for object, array and simple value reprensentation\n * @property {Object} services          - services to work on data, json-schema, validation and more\n * @property {Object} utils             - utility functions, to generate ids, translate strings and resolve editors\n * @property {Object} plugin            - basic plugin implementation for editor registration\n */\nmodule.exports = {\n    Controller: require(\"./Controller\"),\n    components: require(\"./components\"),\n    editors: require(\"./editors\"),\n    services: require(\"./services\"),\n    utils: require(\"./utils\"),\n    plugin: require(\"./plugin\")\n};\n","module.exports = __webpack_public_path__ + \"editron.css\";","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"foxy\",[],t):\"object\"==typeof exports?exports.foxy=t():e.foxy=t()}(\"undefined\"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){\"use strict\";n.r(t),n.d(t,\"Foxy\",(function(){return r})),n.d(t,\"handler\",(function(){return u})),n.d(t,\"utils\",(function(){return o}));class r{constructor(e={}){this.handlers=e.handlers||[]}addHandler(e,t=0){null==this.handlers[t]&&this.handlers.push(e),this.handlers.splice(t,0,e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e)}getImageURL(e){return this.get(\"getImageURL\",e)}getImageInfo(e){return this.get(\"getImageInfo\",e)}getVideoURL(e){return this.get(\"getVideoURL\",e)}getVideoInfo(e){return this.get(\"getVideoInfo\",e)}getURL(e){return this.get(\"getURL\",e)}get(e,t){const n=this.findHandler(e,t);return null==n?Promise.reject(new Error(`There is no handler for method '${e}(${JSON.stringify(t)})'`)):n[e](t)}isSupported(e){return this.handlers.some(t=>t.use(e))}findHandler(e,t){return this.handlers.find(n=>\"function\"==typeof n[e]&&!0===n.use(t))}}var o={loadImageInfo:function(e,t={}){const n={src:e,image:new Image,type:\"\",width:0,height:0};return fetch(e,t).then(e=>e.blob()).then(e=>(n.type=e.type.replace(/^[^/]+\\//,\"\"),URL.createObjectURL(e))).then(e=>new Promise((t,r)=>{n.image.addEventListener(\"load\",()=>t()),n.image.addEventListener(\"error\",r),n.image.src=e})).then(()=>(n.width=n.image.naturalWidth,n.height=n.image.naturalHeight,n))},loadVideoInfo:function(e,t={}){const n={src:e,width:0,height:0,video:document.createElement(\"video\"),duration:0,poster:\"\"};return fetch(e,t).then(e=>e.blob()).then(e=>(n.type=e.type.replace(/^[^/]+\\//,\"\"),URL.createObjectURL(e))).then(e=>new Promise((t,r)=>{n.video.addEventListener(\"error\",r),n.video.addEventListener(\"loadedmetadata\",()=>{const{video:e}=n;n.width=e.videoWidth,n.height=e.videoHeight,n.duration=e.duration,n.poster=e.poster,t(n)});const o=document.createElement(\"source\");o.setAttribute(\"src\",e),n.video.appendChild(o)}))},isHandler:function(e){return\"[object Object]\"===Object.prototype.toString.call(e)&&\"function\"==typeof e.use}};const i=/^https:\\/\\/images\\.unsplash\\.com\\/photo-\\d{13}-[0-9a-f]{12}/;function s(e){const t=e.source.replace(/\\?.*$/,\"\"),n=new URLSearchParams(e.source.replace(/^.*\\?/,\"\"));return e.width&&n.set(\"w\",e.width),e.height&&n.set(\"h\",e.height),e.quality&&n.set(\"q\",e.quality),e.fit&&n.set(\"fit\",e.fit),e.auto&&n.set(\"auto\",e.auto),`${t}?${n.toString()}`}const u={unsplash:{use:e=>i.test(e.source),getImageURL:e=>Promise.resolve(s(e)),getImageInfo:e=>o.loadImageInfo(s(e))},image:{use:e=>/^https?:\\/\\//.test(e.source),getImageURL:e=>Promise.resolve(e.source),getImageInfo:e=>o.loadImageInfo(e.source)},video:{use:e=>/^https?:\\/\\//.test(e.source),getVideoURL:e=>Promise.resolve(e.source),getVideoInfo:e=>o.loadVideoInfo(e.source)}}}])}));","/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, mod.exports);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (module, exports) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function createEvent(name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = null;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\t\t\tta.style.height = ta.scrollHeight + heightOffset + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that \n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight < styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap.delete(ta);\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function autosize(el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function autosize(el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\texports.default = autosize;\n\tmodule.exports = exports['default'];\n});","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","/**\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Computes the difference between two texts to create a patch.\n * Applies the patch onto another text, allowing for errors.\n * @author fraser@google.com (Neil Fraser)\n */\n\n/**\n * Class containing the diff, match and patch methods.\n * @constructor\n */\nfunction diff_match_patch() {\n\n  // Defaults.\n  // Redefine these in your program to override the defaults.\n\n  // Number of seconds to map a diff before giving up (0 for infinity).\n  this.Diff_Timeout = 1.0;\n  // Cost of an empty edit operation in terms of edit characters.\n  this.Diff_EditCost = 4;\n  // The size beyond which the double-ended diff activates.\n  // Double-ending is twice as fast, but less accurate.\n  this.Diff_DualThreshold = 32;\n  // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n  this.Match_Threshold = 0.5;\n  // How far to search for a match (0 = exact location, 1000+ = broad match).\n  // A match this many characters away from the expected location will add\n  // 1.0 to the score (0.0 is a perfect match).\n  this.Match_Distance = 1000;\n  // When deleting a large block of text (over ~64 characters), how close does\n  // the contents have to match the expected contents. (0.0 = perfection,\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\n  // end points of a delete need to match.\n  this.Patch_DeleteThreshold = 0.5;\n  // Chunk size for context length.\n  this.Patch_Margin = 4;\n\n  /**\n   * Compute the number of bits in an int.\n   * The normal answer for JavaScript is 32.\n   * @return {number} Max bits\n   */\n  function getMaxBits() {\n    var maxbits = 0;\n    var oldi = 1;\n    var newi = 2;\n    while (oldi != newi) {\n      maxbits++;\n      oldi = newi;\n      newi = newi << 1;\n    }\n    return maxbits;\n  }\n  // How many bits in a number?\n  this.Match_MaxBits = getMaxBits();\n}\n\n\n//  DIFF FUNCTIONS\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean} opt_checklines Optional speedup flag.  If present and false,\n *     then don't run a line-level diff first to identify the changed areas.\n *     Defaults to true, which does a faster, slightly less optimal diff\n * @return {Array.<Array.<number|string>>} Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_main = function(text1, text2, opt_checklines) {\n  // Check for null inputs.\n  if (text1 == null || text2 == null) {\n    throw new Error('Null input. (diff_main)');\n  }\n\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    return [[DIFF_EQUAL, text1]];\n  }\n\n  if (typeof opt_checklines == 'undefined') {\n    opt_checklines = true;\n  }\n  var checklines = opt_checklines;\n\n  // Trim off common prefix (speedup).\n  var commonlength = this.diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = this.diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = this.diff_compute(text1, text2, checklines);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  this.diff_cleanupMerge(diffs);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\n *     line-level diff first to identify the changed areas.\n *     If true, then run a faster, slightly less optimal diff\n * @return {Array.<Array.<number|string>>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_compute = function(text1, text2, checklines) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\n             [DIFF_EQUAL, shorttext],\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n  longtext = shorttext = null;  // Garbage collect.\n\n  // Check to see if the problem can be split in two.\n  var hm = this.diff_halfMatch(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines);\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  // Perform a real diff.\n  if (checklines && (text1.length < 100 || text2.length < 100)) {\n    // Too trivial for the overhead.\n    checklines = false;\n  }\n  var linearray;\n  if (checklines) {\n    // Scan the text on a line-by-line basis first.\n    var a = this.diff_linesToChars(text1, text2);\n    text1 = a[0];\n    text2 = a[1];\n    linearray = a[2];\n  }\n  diffs = this.diff_map(text1, text2);\n  if (!diffs) {\n    // No acceptable result.\n    diffs = [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n  }\n  if (checklines) {\n    // Convert the diff back to original text.\n    this.diff_charsToLines(diffs, linearray);\n    // Eliminate freak matches (e.g. blank lines)\n    this.diff_cleanupSemantic(diffs);\n\n    // Rediff any replacement blocks, this time character-by-character.\n    // Add a dummy entry at the end.\n    diffs.push([DIFF_EQUAL, '']);\n    var pointer = 0;\n    var count_delete = 0;\n    var count_insert = 0;\n    var text_delete = '';\n    var text_insert = '';\n    while (pointer < diffs.length) {\n      switch (diffs[pointer][0]) {\n        case DIFF_INSERT:\n          count_insert++;\n          text_insert += diffs[pointer][1];\n          break;\n        case DIFF_DELETE:\n          count_delete++;\n          text_delete += diffs[pointer][1];\n          break;\n        case DIFF_EQUAL:\n          // Upon reaching an equality, check for prior redundancies.\n          if (count_delete >= 1 && count_insert >= 1) {\n            // Delete the offending records and add the merged ones.\n            var a = this.diff_main(text_delete, text_insert, false);\n            diffs.splice(pointer - count_delete - count_insert,\n                         count_delete + count_insert);\n            pointer = pointer - count_delete - count_insert;\n            for (var j = a.length - 1; j >= 0; j--) {\n              diffs.splice(pointer, 0, a[j]);\n            }\n            pointer = pointer + a.length;\n          }\n          count_insert = 0;\n          count_delete = 0;\n          text_delete = '';\n          text_insert = '';\n          break;\n      }\n     pointer++;\n    }\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n  return diffs;\n};\n\n\n/**\n * Split two texts into an array of strings.  Reduce the texts to a string of\n * hashes where each Unicode character represents one line.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string|Array.<string>>} Three element Array, containing the\n *     encoded text1, the encoded text2 and the array of unique strings.  The\n *     zeroth element of the array of unique strings is intentionally blank.\n * @private\n */\ndiff_match_patch.prototype.diff_linesToChars = function(text1, text2) {\n  var lineArray = [];  // e.g. lineArray[4] == 'Hello\\n'\n  var lineHash = {};   // e.g. lineHash['Hello\\n'] == 4\n\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n  lineArray[0] = '';\n\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   * @param {string} text String to encode.\n   * @return {string} Encoded string.\n   * @private\n   */\n  function diff_linesToCharsMunge(text) {\n    var chars = '';\n    // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n    var lineStart = 0;\n    var lineEnd = -1;\n    // Keeping our own length variable is faster than looking it up.\n    var lineArrayLength = lineArray.length;\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart);\n      if (lineEnd == -1) {\n        lineEnd = text.length - 1;\n      }\n      var line = text.substring(lineStart, lineEnd + 1);\n      lineStart = lineEnd + 1;\n\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) :\n          (lineHash[line] !== undefined)) {\n        chars += String.fromCharCode(lineHash[line]);\n      } else {\n        chars += String.fromCharCode(lineArrayLength);\n        lineHash[line] = lineArrayLength;\n        lineArray[lineArrayLength++] = line;\n      }\n    }\n    return chars;\n  }\n\n  var chars1 = diff_linesToCharsMunge(text1);\n  var chars2 = diff_linesToCharsMunge(text2);\n  return [chars1, chars2, lineArray];\n};\n\n\n/**\n * Rehydrate the text in a diff from a string of line hashes to real lines of\n * text.\n * @param {Array.<Array.<number|string>>} diffs Array of diff tuples.\n * @param {Array.<string>} lineArray Array of unique strings.\n * @private\n */\ndiff_match_patch.prototype.diff_charsToLines = function(diffs, lineArray) {\n  for (var x = 0; x < diffs.length; x++) {\n    var chars = diffs[x][1];\n    var text = [];\n    for (var y = 0; y < chars.length; y++) {\n      text[y] = lineArray[chars.charCodeAt(y)];\n    }\n    diffs[x][1] = text.join('');\n  }\n};\n\n\n/**\n * Explore the intersection points between the two texts.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {?Array.<Array.<number|string>>} Array of diff tuples or null if no\n *     diff available.\n * @private\n */\ndiff_match_patch.prototype.diff_map = function(text1, text2) {\n  // Don't run for too long.\n  var ms_end = (new Date()).getTime() + this.Diff_Timeout * 1000;\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = text1_length + text2_length - 1;\n  var doubleEnd = this.Diff_DualThreshold * 2 < max_d;\n  // JavaScript efficiency note: (x << 32) + y doesn't work since numbers are\n  // only 32 bit.  Use x + ',' + y to create a hash instead.\n  var v_map1 = [];\n  var v_map2 = [];\n  var v1 = {};\n  var v2 = {};\n  v1[1] = 0;\n  v2[1] = 0;\n  var x, y;\n  var footstep;  // Used to track overlapping paths.\n  var footsteps = {};\n  var done = false;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (text1_length + text2_length) % 2;\n  for (var d = 0; d < max_d; d++) {\n    // Bail out if timeout reached.\n    if (this.Diff_Timeout > 0 && (new Date()).getTime() > ms_end) {\n      return null;\n    }\n\n    // Walk the front path one step.\n    v_map1[d] = {};\n    for (var k = -d; k <= d; k += 2) {\n      if (k == -d || k != d && v1[k - 1] < v1[k + 1]) {\n        x = v1[k + 1];\n      } else {\n        x = v1[k - 1] + 1;\n      }\n      y = x - k;\n      if (doubleEnd) {\n        footstep = x + ',' + y;\n        if (front && footsteps[footstep] !== undefined) {\n          done = true;\n        }\n        if (!front) {\n          footsteps[footstep] = d;\n        }\n      }\n      while (!done && x < text1_length && y < text2_length &&\n             text1.charAt(x) == text2.charAt(y)) {\n        x++;\n        y++;\n        if (doubleEnd) {\n          footstep = x + ',' + y;\n          if (front && footsteps[footstep] !== undefined) {\n            done = true;\n          }\n          if (!front) {\n            footsteps[footstep] = d;\n          }\n        }\n      }\n      v1[k] = x;\n      v_map1[d][x + ',' + y] = true;\n      if (x == text1_length && y == text2_length) {\n        // Reached the end in single-path mode.\n        return this.diff_path1(v_map1, text1, text2);\n      } else if (done) {\n        // Front path ran over reverse path.\n        v_map2 = v_map2.slice(0, footsteps[footstep] + 1);\n        var a = this.diff_path1(v_map1, text1.substring(0, x),\n                                text2.substring(0, y));\n        return a.concat(this.diff_path2(v_map2, text1.substring(x),\n                                        text2.substring(y)));\n      }\n    }\n\n    if (doubleEnd) {\n      // Walk the reverse path one step.\n      v_map2[d] = {};\n      for (var k = -d; k <= d; k += 2) {\n        if (k == -d || k != d && v2[k - 1] < v2[k + 1]) {\n          x = v2[k + 1];\n        } else {\n          x = v2[k - 1] + 1;\n        }\n        y = x - k;\n        footstep = (text1_length - x) + ',' + (text2_length - y);\n        if (!front && footsteps[footstep] !== undefined) {\n          done = true;\n        }\n        if (front) {\n          footsteps[footstep] = d;\n        }\n        while (!done && x < text1_length && y < text2_length &&\n               text1.charAt(text1_length - x - 1) ==\n               text2.charAt(text2_length - y - 1)) {\n          x++;\n          y++;\n          footstep = (text1_length - x) + ',' + (text2_length - y);\n          if (!front && footsteps[footstep] !== undefined) {\n            done = true;\n          }\n          if (front) {\n            footsteps[footstep] = d;\n          }\n        }\n        v2[k] = x;\n        v_map2[d][x + ',' + y] = true;\n        if (done) {\n          // Reverse path ran over front path.\n          v_map1 = v_map1.slice(0, footsteps[footstep] + 1);\n          var a = this.diff_path1(v_map1, text1.substring(0, text1_length - x),\n                                  text2.substring(0, text2_length - y));\n          return a.concat(this.diff_path2(v_map2,\n                          text1.substring(text1_length - x),\n                          text2.substring(text2_length - y)));\n        }\n      }\n    }\n  }\n  // Number of diffs equals number of characters, no commonality at all.\n  return null;\n};\n\n\n/**\n * Work from the middle back to the start to determine the path.\n * @param {Array.<Object>} v_map Array of paths.\n * @param {string} text1 Old string fragment to be diffed.\n * @param {string} text2 New string fragment to be diffed.\n * @return {Array.<Array.<number|string>>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_path1 = function(v_map, text1, text2) {\n  var path = [];\n  var x = text1.length;\n  var y = text2.length;\n  /** @type {?number} */\n  var last_op = null;\n  for (var d = v_map.length - 2; d >= 0; d--) {\n    while (1) {\n      if (v_map[d][(x - 1) + ',' + y] !== undefined) {\n        x--;\n        if (last_op === DIFF_DELETE) {\n          path[0][1] = text1.charAt(x) + path[0][1];\n        } else {\n          path.unshift([DIFF_DELETE, text1.charAt(x)]);\n        }\n        last_op = DIFF_DELETE;\n        break;\n      } else if (v_map[d][x + ',' + (y - 1)] !== undefined) {\n        y--;\n        if (last_op === DIFF_INSERT) {\n          path[0][1] = text2.charAt(y) + path[0][1];\n        } else {\n          path.unshift([DIFF_INSERT, text2.charAt(y)]);\n        }\n        last_op = DIFF_INSERT;\n        break;\n      } else {\n        x--;\n        y--;\n        if (text1.charAt(x) != text2.charAt(y)) {\n          throw new Error('No diagonal.  Can\\'t happen. (diff_path1)');\n        }\n        if (last_op === DIFF_EQUAL) {\n          path[0][1] = text1.charAt(x) + path[0][1];\n        } else {\n          path.unshift([DIFF_EQUAL, text1.charAt(x)]);\n        }\n        last_op = DIFF_EQUAL;\n      }\n    }\n  }\n  return path;\n};\n\n\n/**\n * Work from the middle back to the end to determine the path.\n * @param {Array.<Object>} v_map Array of paths.\n * @param {string} text1 Old string fragment to be diffed.\n * @param {string} text2 New string fragment to be diffed.\n * @return {Array.<Array.<number|string>>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_path2 = function(v_map, text1, text2) {\n  var path = [];\n  var pathLength = 0;\n  var x = text1.length;\n  var y = text2.length;\n  /** @type {?number} */\n  var last_op = null;\n  for (var d = v_map.length - 2; d >= 0; d--) {\n    while (1) {\n      if (v_map[d][(x - 1) + ',' + y] !== undefined) {\n        x--;\n        if (last_op === DIFF_DELETE) {\n          path[pathLength - 1][1] += text1.charAt(text1.length - x - 1);\n        } else {\n          path[pathLength++] =\n              [DIFF_DELETE, text1.charAt(text1.length - x - 1)];\n        }\n        last_op = DIFF_DELETE;\n        break;\n      } else if (v_map[d][x + ',' + (y - 1)] !== undefined) {\n        y--;\n        if (last_op === DIFF_INSERT) {\n          path[pathLength - 1][1] += text2.charAt(text2.length - y - 1);\n        } else {\n          path[pathLength++] =\n              [DIFF_INSERT, text2.charAt(text2.length - y - 1)];\n        }\n        last_op = DIFF_INSERT;\n        break;\n      } else {\n        x--;\n        y--;\n        if (text1.charAt(text1.length - x - 1) !=\n            text2.charAt(text2.length - y - 1)) {\n          throw new Error('No diagonal.  Can\\'t happen. (diff_path2)');\n        }\n        if (last_op === DIFF_EQUAL) {\n          path[pathLength - 1][1] += text1.charAt(text1.length - x - 1);\n        } else {\n          path[pathLength++] =\n              [DIFF_EQUAL, text1.charAt(text1.length - x - 1)];\n        }\n        last_op = DIFF_EQUAL;\n      }\n    }\n  }\n  return path;\n};\n\n\n/**\n * Determine the common prefix of two strings\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\ndiff_match_patch.prototype.diff_commonPrefix = function(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ==\n        text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\ndiff_match_patch.prototype.diff_commonSuffix = function(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(text1.length - 1) !=\n                          text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {?Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\ndiff_match_patch.prototype.diff_halfMatch = function(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 10 || shorttext.length < 1) {\n    return null;  // Pointless.\n  }\n  var dmp = this;  // 'this' becomes 'window' in a closure.\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext\n   * @return {?Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i),\n                                               shorttext.substring(j));\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i),\n                                               shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) +\n            shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length >= longtext.length / 2) {\n      return [best_longtext_a, best_longtext_b,\n              best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI(longtext, shorttext,\n                            Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI(longtext, shorttext,\n                            Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {Array.<Array.<number|string>>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupSemantic = function(diffs) {\n  var changes = false;\n  var equalities = [];  // Stack of indices where equalities are found.\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\n  var lastequality = null;  // Always equal to equalities[equalitiesLength-1][1]\n  var pointer = 0;  // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_changes1 = 0;\n  // Number of characters that changed after the equality.\n  var length_changes2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // equality found\n      equalities[equalitiesLength++] = pointer;\n      length_changes1 = length_changes2;\n      length_changes2 = 0;\n      lastequality = diffs[pointer][1];\n    } else {  // an insertion or deletion\n      length_changes2 += diffs[pointer][1].length;\n      if (lastequality !== null && (lastequality.length <= length_changes1) &&\n          (lastequality.length <= length_changes2)) {\n        // Duplicate record\n        diffs.splice(equalities[equalitiesLength - 1], 0,\n                     [DIFF_DELETE, lastequality]);\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_changes1 = 0;  // Reset the counters.\n        length_changes2 = 0;\n        lastequality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n  this.diff_cleanupSemanticLossless(diffs);\n};\n\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {Array.<Array.<number|string>>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function(diffs) {\n  // Define some regex patterns for matching boundaries.\n  var punctuation = /[^a-zA-Z0-9]/;\n  var whitespace = /\\s/;\n  var linebreak = /[\\r\\n]/;\n  var blanklineEnd = /\\n\\r?\\n$/;\n  var blanklineStart = /^\\r?\\n\\r?\\n/;\n\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 5 (best) to 0 (worst).\n   * Closure, makes reference to regex patterns defined above.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   */\n  function diff_cleanupSemanticScore(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 5;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var score = 0;\n    // One point for non-alphanumeric.\n    if (one.charAt(one.length - 1).match(punctuation) ||\n        two.charAt(0).match(punctuation)) {\n      score++;\n      // Two points for whitespace.\n      if (one.charAt(one.length - 1).match(whitespace) ||\n          two.charAt(0).match(whitespace)) {\n        score++;\n        // Three points for line breaks.\n        if (one.charAt(one.length - 1).match(linebreak) ||\n            two.charAt(0).match(linebreak)) {\n          score++;\n          // Four points for blank lines.\n          if (one.match(blanklineEnd) || two.match(blanklineStart)) {\n            score++;\n          }\n        }\n      }\n    }\n    return score;\n  }\n\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore = diff_cleanupSemanticScore(equality1, edit) +\n          diff_cleanupSemanticScore(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score = diff_cleanupSemanticScore(equality1, edit) +\n            diff_cleanupSemanticScore(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n};\n\n\n/**\n * Reduce the number of edits by eliminating operationally trivial equalities.\n * @param {Array.<Array.<number|string>>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupEfficiency = function(diffs) {\n  var changes = false;\n  var equalities = [];  // Stack of indices where equalities are found.\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\n  var lastequality = '';  // Always equal to equalities[equalitiesLength-1][1]\n  var pointer = 0;  // Index of current position.\n  // Is there an insertion operation before the last equality.\n  var pre_ins = false;\n  // Is there a deletion operation before the last equality.\n  var pre_del = false;\n  // Is there an insertion operation after the last equality.\n  var post_ins = false;\n  // Is there a deletion operation after the last equality.\n  var post_del = false;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // equality found\n      if (diffs[pointer][1].length < this.Diff_EditCost &&\n          (post_ins || post_del)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer;\n        pre_ins = post_ins;\n        pre_del = post_del;\n        lastequality = diffs[pointer][1];\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0;\n        lastequality = '';\n      }\n      post_ins = post_del = false;\n    } else {  // an insertion or deletion\n      if (diffs[pointer][0] == DIFF_DELETE) {\n        post_del = true;\n      } else {\n        post_ins = true;\n      }\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n      if (lastequality && ((pre_ins && pre_del && post_ins && post_del) ||\n                           ((lastequality.length < this.Diff_EditCost / 2) &&\n                            (pre_ins + pre_del + post_ins + post_del) == 3))) {\n        // Duplicate record\n        diffs.splice(equalities[equalitiesLength - 1], 0,\n                     [DIFF_DELETE, lastequality]);\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        equalitiesLength--;  // Throw away the equality we just deleted;\n        lastequality = '';\n        if (pre_ins && pre_del) {\n          // No changes made which could affect previous entry, keep going.\n          post_ins = post_del = true;\n          equalitiesLength = 0;\n        } else {\n          equalitiesLength--;  // Throw away the previous equality;\n          pointer = equalitiesLength > 0 ?\n              equalities[equalitiesLength - 1] : -1;\n          post_ins = post_del = false;\n        }\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array.<Array.<number|string>>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupMerge = function(diffs) {\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete !== 0 || count_insert !== 0) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if ((pointer - count_delete - count_insert) > 0 &&\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\n                  DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] +=\n                    text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL,\n                    text_insert.substring(0, commonlength)]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\n                  commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length -\n                  commonlength);\n              text_delete = text_delete.substring(0, text_delete.length -\n                  commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          if (count_delete === 0) {\n            diffs.splice(pointer - count_delete - count_insert,\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\n          } else if (count_insert === 0) {\n            diffs.splice(pointer - count_delete - count_insert,\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\n          } else {\n            diffs.splice(pointer - count_delete - count_insert,\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\n                [DIFF_INSERT, text_insert]);\n          }\n          pointer = pointer - count_delete - count_insert +\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\n                                        diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n          diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n            diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n\n\n/**\n * loc is a location in text1, compute and return the equivalent location in\n * text2.\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n * @param {Array.<Array.<number|string>>} diffs Array of diff tuples.\n * @param {number} loc Location within text1.\n * @return {number} Location within text2.\n */\ndiff_match_patch.prototype.diff_xIndex = function(diffs, loc) {\n  var chars1 = 0;\n  var chars2 = 0;\n  var last_chars1 = 0;\n  var last_chars2 = 0;\n  var x;\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {  // Equality or deletion.\n      chars1 += diffs[x][1].length;\n    }\n    if (diffs[x][0] !== DIFF_DELETE) {  // Equality or insertion.\n      chars2 += diffs[x][1].length;\n    }\n    if (chars1 > loc) {  // Overshot the location.\n      break;\n    }\n    last_chars1 = chars1;\n    last_chars2 = chars2;\n  }\n  // Was the location was deleted?\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\n    return last_chars2;\n  }\n  // Add the remaining character length.\n  return last_chars2 + (loc - last_chars1);\n};\n\n\n/**\n * Convert a diff array into a pretty HTML report.\n * @param {Array.<Array.<number|string>>} diffs Array of diff tuples.\n * @return {string} HTML representation.\n */\ndiff_match_patch.prototype.diff_prettyHtml = function(diffs) {\n  var html = [];\n  var i = 0;\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];    // Operation (insert, delete, equal)\n    var data = diffs[x][1];  // Text of change.\n    var text = data.replace(/&/g, '&amp;').replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;').replace(/\\n/g, '&para;<BR>');\n    switch (op) {\n      case DIFF_INSERT:\n        html[x] = '<INS STYLE=\"background:#E6FFE6;\" TITLE=\"i=' + i + '\">' +\n                text + '</INS>';\n        break;\n      case DIFF_DELETE:\n        html[x] = '<DEL STYLE=\"background:#FFE6E6;\" TITLE=\"i=' + i + '\">' +\n                text + '</DEL>';\n        break;\n      case DIFF_EQUAL:\n        html[x] = '<SPAN TITLE=\"i=' + i + '\">' + text + '</SPAN>';\n        break;\n    }\n    if (op !== DIFF_DELETE) {\n      i += data.length;\n    }\n  }\n  return html.join('');\n};\n\n\n/**\n * Compute and return the source text (all equalities and deletions).\n * @param {Array.<Array.<number|string>>} diffs Array of diff tuples.\n * @return {string} Source text.\n */\ndiff_match_patch.prototype.diff_text1 = function(diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      text[x] = diffs[x][1];\n    }\n  }\n  return text.join('');\n};\n\n\n/**\n * Compute and return the destination text (all equalities and insertions).\n * @param {Array.<Array.<number|string>>} diffs Array of diff tuples.\n * @return {string} Destination text.\n */\ndiff_match_patch.prototype.diff_text2 = function(diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE) {\n      text[x] = diffs[x][1];\n    }\n  }\n  return text.join('');\n};\n\n\n/**\n * Compute the Levenshtein distance; the number of inserted, deleted or\n * substituted characters.\n * @param {Array.<Array.<number|string>>} diffs Array of diff tuples.\n * @return {number} Number of changes.\n */\ndiff_match_patch.prototype.diff_levenshtein = function(diffs) {\n  var levenshtein = 0;\n  var insertions = 0;\n  var deletions = 0;\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];\n    var data = diffs[x][1];\n    switch (op) {\n      case DIFF_INSERT:\n        insertions += data.length;\n        break;\n      case DIFF_DELETE:\n        deletions += data.length;\n        break;\n      case DIFF_EQUAL:\n        // A deletion and an insertion is one substitution.\n        levenshtein += Math.max(insertions, deletions);\n        insertions = 0;\n        deletions = 0;\n        break;\n    }\n  }\n  levenshtein += Math.max(insertions, deletions);\n  return levenshtein;\n};\n\n\n/**\n * Crush the diff into an encoded string which describes the operations\n * required to transform text1 into text2.\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\n * @param {Array.<Array.<number|string>>} diffs Array of diff tuples.\n * @return {string} Delta text.\n */\ndiff_match_patch.prototype.diff_toDelta = function(diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    switch (diffs[x][0]) {\n      case DIFF_INSERT:\n        text[x] = '+' + encodeURI(diffs[x][1]);\n        break;\n      case DIFF_DELETE:\n        text[x] = '-' + diffs[x][1].length;\n        break;\n      case DIFF_EQUAL:\n        text[x] = '=' + diffs[x][1].length;\n        break;\n    }\n  }\n  // Opera doesn't know how to encode char 0.\n  return text.join('\\t').replace(/\\x00/g, '%00').replace(/%20/g, ' ');\n};\n\n\n/**\n * Given the original text1, and an encoded string which describes the\n * operations required to transform text1 into text2, compute the full diff.\n * @param {string} text1 Source string for the diff.\n * @param {string} delta Delta text.\n * @return {Array.<Array.<number|string>>} Array of diff tuples.\n * @throws {Error} If invalid input.\n */\ndiff_match_patch.prototype.diff_fromDelta = function(text1, delta) {\n  var diffs = [];\n  var diffsLength = 0;  // Keeping our own length var is faster in JS.\n  var pointer = 0;  // Cursor in text1\n  // Opera doesn't know how to decode char 0.\n  delta = delta.replace(/%00/g, '\\0');\n  var tokens = delta.split(/\\t/g);\n  for (var x = 0; x < tokens.length; x++) {\n    // Each token begins with a one character parameter which specifies the\n    // operation of this token (delete, insert, equality).\n    var param = tokens[x].substring(1);\n    switch (tokens[x].charAt(0)) {\n      case '+':\n        try {\n          diffs[diffsLength++] = [DIFF_INSERT, decodeURI(param)];\n        } catch (ex) {\n          // Malformed URI sequence.\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\n        }\n        break;\n      case '-':\n        // Fall through.\n      case '=':\n        var n = parseInt(param, 10);\n        if (isNaN(n) || n < 0) {\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\n        }\n        var text = text1.substring(pointer, pointer += n);\n        if (tokens[x].charAt(0) == '=') {\n          diffs[diffsLength++] = [DIFF_EQUAL, text];\n        } else {\n          diffs[diffsLength++] = [DIFF_DELETE, text];\n        }\n        break;\n      default:\n        // Blank tokens are ok (from a trailing \\t).\n        // Anything else is an error.\n        if (tokens[x]) {\n          throw new Error('Invalid diff operation in diff_fromDelta: ' +\n                          tokens[x]);\n        }\n    }\n  }\n  if (pointer != text1.length) {\n    throw new Error('Delta length (' + pointer +\n        ') does not equal source text length (' + text1.length + ').');\n  }\n  return diffs;\n};\n\n\n//  MATCH FUNCTIONS\n\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n */\ndiff_match_patch.prototype.match_main = function(text, pattern, loc) {\n  // Check for null inputs.\n  if (text == null || pattern == null || loc == null) {\n    throw new Error('Null input. (match_main)');\n  }\n\n  loc = Math.max(0, Math.min(loc, text.length));\n  if (text == pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0;\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1;\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc;\n  } else {\n    // Do a fuzzy compare.\n    return this.match_bitap(text, pattern, loc);\n  }\n};\n\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n * Bitap algorithm.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n * @private\n */\ndiff_match_patch.prototype.match_bitap = function(text, pattern, loc) {\n  if (pattern.length > this.Match_MaxBits) {\n    throw new Error('Pattern too long for this browser.');\n  }\n\n  // Initialise the alphabet.\n  var s = this.match_alphabet(pattern);\n\n  var dmp = this;  // 'this' becomes 'window' in a closure.\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   * @param {number} e Number of errors in match.\n   * @param {number} x Location of match.\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\n   * @private\n   */\n  function match_bitapScore(e, x) {\n    var accuracy = e / pattern.length;\n    var proximity = Math.abs(loc - x);\n    if (!dmp.Match_Distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy;\n    }\n    return accuracy + (proximity / dmp.Match_Distance);\n  }\n\n  // Highest score beyond which we give up.\n  var score_threshold = this.Match_Threshold;\n  // Is there a nearby exact match? (speedup)\n  var best_loc = text.indexOf(pattern, loc);\n  if (best_loc != -1) {\n    score_threshold = Math.min(match_bitapScore(0, best_loc), score_threshold);\n    // What about in the other direction? (speedup)\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\n    if (best_loc != -1) {\n      score_threshold =\n          Math.min(match_bitapScore(0, best_loc), score_threshold);\n    }\n  }\n\n  // Initialise the bit arrays.\n  var matchmask = 1 << (pattern.length - 1);\n  best_loc = -1;\n\n  var bin_min, bin_mid;\n  var bin_max = pattern.length + text.length;\n  var last_rd;\n  for (var d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    bin_min = 0;\n    bin_mid = bin_max;\n    while (bin_min < bin_mid) {\n      if (match_bitapScore(d, loc + bin_mid) <= score_threshold) {\n        bin_min = bin_mid;\n      } else {\n        bin_max = bin_mid;\n      }\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\n    }\n    // Use the result from this iteration as the maximum for the next.\n    bin_max = bin_mid;\n    var start = Math.max(1, loc - bin_mid + 1);\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\n\n    var rd = Array(finish + 2);\n    rd[finish + 1] = (1 << d) - 1;\n    for (var j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      var charMatch = s[text.charAt(j - 1)];\n      if (d === 0) {  // First pass: exact match.\n        rd[j] = ((rd[j + 1] << 1) | 1) & charMatch;\n      } else {  // Subsequent passes: fuzzy match.\n        rd[j] = ((rd[j + 1] << 1) | 1) & charMatch |\n                (((last_rd[j + 1] | last_rd[j]) << 1) | 1) |\n                last_rd[j + 1];\n      }\n      if (rd[j] & matchmask) {\n        var score = match_bitapScore(d, j - 1);\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (score <= score_threshold) {\n          // Told you so.\n          score_threshold = score;\n          best_loc = j - 1;\n          if (best_loc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - best_loc);\n          } else {\n            // Already passed loc, downhill from here on in.\n            break;\n          }\n        }\n      }\n    }\n    // No hope for a (better) match at greater error levels.\n    if (match_bitapScore(d + 1, loc) > score_threshold) {\n      break;\n    }\n    last_rd = rd;\n  }\n  return best_loc;\n};\n\n\n/**\n * Initialise the alphabet for the Bitap algorithm.\n * @param {string} pattern The text to encode.\n * @return {Object} Hash of character locations.\n * @private\n */\ndiff_match_patch.prototype.match_alphabet = function(pattern) {\n  var s = {};\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] = 0;\n  }\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] |= 1 << (pattern.length - i - 1);\n  }\n  return s;\n};\n\n\n//  PATCH FUNCTIONS\n\n\n/**\n * Increase the context until it is unique,\n * but don't let the pattern expand beyond Match_MaxBits.\n * @param {patch_obj} patch The patch to grow.\n * @param {string} text Source text.\n * @private\n */\ndiff_match_patch.prototype.patch_addContext = function(patch, text) {\n  if (text.length == 0) {\n    return;\n  }\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\n  var padding = 0;\n\n  // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) &&\n         pattern.length < this.Match_MaxBits - this.Patch_Margin -\n         this.Patch_Margin) {\n    padding += this.Patch_Margin;\n    pattern = text.substring(patch.start2 - padding,\n                             patch.start2 + patch.length1 + padding);\n  }\n  // Add one chunk for good luck.\n  padding += this.Patch_Margin;\n\n  // Add the prefix.\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\n  if (prefix) {\n    patch.diffs.unshift([DIFF_EQUAL, prefix]);\n  }\n  // Add the suffix.\n  var suffix = text.substring(patch.start2 + patch.length1,\n                              patch.start2 + patch.length1 + padding);\n  if (suffix) {\n    patch.diffs.push([DIFF_EQUAL, suffix]);\n  }\n\n  // Roll back the start points.\n  patch.start1 -= prefix.length;\n  patch.start2 -= prefix.length;\n  // Extend the lengths.\n  patch.length1 += prefix.length + suffix.length;\n  patch.length2 += prefix.length + suffix.length;\n};\n\n\n/**\n * Compute a list of patches to turn text1 into text2.\n * Use diffs if provided, otherwise compute it ourselves.\n * There are four ways to call this function, depending on what data is\n * available to the caller:\n * Method 1:\n * a = text1, b = text2\n * Method 2:\n * a = diffs\n * Method 3 (optimal):\n * a = text1, b = diffs\n * Method 4 (deprecated, use method 3):\n * a = text1, b = text2, c = diffs\n *\n * @param {string|Array.<Array.<number|string>>} a text1 (methods 1,3,4) or\n * Array of diff tuples for text1 to text2 (method 2).\n * @param {string|Array.<Array.<number|string>>} opt_b text2 (methods 1,4) or\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\n * @param {string|Array.<Array.<number|string>>} opt_c Array of diff tuples for\n * text1 to text2 (method 4) or undefined (methods 1,2,3).\n * @return {Array.<patch_obj>} Array of patch objects.\n */\ndiff_match_patch.prototype.patch_make = function(a, opt_b, opt_c) {\n  var text1, diffs;\n  if (typeof a == 'string' && typeof opt_b == 'string' &&\n      typeof opt_c == 'undefined') {\n    // Method 1: text1, text2\n    // Compute diffs from text1 and text2.\n    text1 = a;\n    diffs = this.diff_main(text1, opt_b, true);\n    if (diffs.length > 2) {\n      this.diff_cleanupSemantic(diffs);\n      this.diff_cleanupEfficiency(diffs);\n    }\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' &&\n      typeof opt_c == 'undefined') {\n    // Method 2: diffs\n    // Compute text1 from diffs.\n    diffs = a;\n    text1 = this.diff_text1(diffs);\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' &&\n      typeof opt_c == 'undefined') {\n    // Method 3: text1, diffs\n    text1 = a;\n    diffs = opt_b;\n  } else if (typeof a == 'string' && typeof opt_b == 'string' &&\n      opt_c && typeof opt_c == 'object') {\n    // Method 4: text1, text2, diffs\n    // text2 is not used.\n    text1 = a;\n    diffs = opt_c;\n  } else {\n    throw new Error('Unknown call format to patch_make.');\n  }\n\n  if (diffs.length === 0) {\n    return [];  // Get rid of the null case.\n  }\n  var patches = [];\n  var patch = new patch_obj();\n  var patchDiffLength = 0;  // Keeping our own length var is faster in JS.\n  var char_count1 = 0;  // Number of characters into the text1 string.\n  var char_count2 = 0;  // Number of characters into the text2 string.\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\n  // context info.\n  var prepatch_text = text1;\n  var postpatch_text = text1;\n  for (var x = 0; x < diffs.length; x++) {\n    var diff_type = diffs[x][0];\n    var diff_text = diffs[x][1];\n\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = char_count1;\n      patch.start2 = char_count2;\n    }\n\n    switch (diff_type) {\n      case DIFF_INSERT:\n        patch.diffs[patchDiffLength++] = diffs[x];\n        patch.length2 += diff_text.length;\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text +\n                         postpatch_text.substring(char_count2);\n        break;\n      case DIFF_DELETE:\n        patch.length1 += diff_text.length;\n        patch.diffs[patchDiffLength++] = diffs[x];\n        postpatch_text = postpatch_text.substring(0, char_count2) +\n                         postpatch_text.substring(char_count2 +\n                             diff_text.length);\n        break;\n      case DIFF_EQUAL:\n        if (diff_text.length <= 2 * this.Patch_Margin &&\n            patchDiffLength && diffs.length != x + 1) {\n          // Small equality inside a patch.\n          patch.diffs[patchDiffLength++] = diffs[x];\n          patch.length1 += diff_text.length;\n          patch.length2 += diff_text.length;\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\n          // Time for a new patch.\n          if (patchDiffLength) {\n            this.patch_addContext(patch, prepatch_text);\n            patches.push(patch);\n            patch = new patch_obj();\n            patchDiffLength = 0;\n            // Unlike Unidiff, our patch lists have a rolling context.\n            // http://code.google.com/p/google-diff-match-patch/wiki/Unidiff\n            // Update prepatch text & pos to reflect the application of the\n            // just completed patch.\n            prepatch_text = postpatch_text;\n            char_count1 = char_count2;\n          }\n        }\n        break;\n    }\n\n    // Update the current character count.\n    if (diff_type !== DIFF_INSERT) {\n      char_count1 += diff_text.length;\n    }\n    if (diff_type !== DIFF_DELETE) {\n      char_count2 += diff_text.length;\n    }\n  }\n  // Pick up the leftover patch if not empty.\n  if (patchDiffLength) {\n    this.patch_addContext(patch, prepatch_text);\n    patches.push(patch);\n  }\n\n  return patches;\n};\n\n\n/**\n * Given an array of patches, return another array that is identical.\n * @param {Array.<patch_obj>} patches Array of patch objects.\n * @return {Array.<patch_obj>} Array of patch objects.\n */\ndiff_match_patch.prototype.patch_deepCopy = function(patches) {\n  // Making deep copies is hard in JavaScript.\n  var patchesCopy = [];\n  for (var x = 0; x < patches.length; x++) {\n    var patch = patches[x];\n    var patchCopy = new patch_obj();\n    patchCopy.diffs = [];\n    for (var y = 0; y < patch.diffs.length; y++) {\n      patchCopy.diffs[y] = patch.diffs[y].slice();\n    }\n    patchCopy.start1 = patch.start1;\n    patchCopy.start2 = patch.start2;\n    patchCopy.length1 = patch.length1;\n    patchCopy.length2 = patch.length2;\n    patchesCopy[x] = patchCopy;\n  }\n  return patchesCopy;\n};\n\n\n/**\n * Merge a set of patches onto the text.  Return a patched text, as well\n * as a list of true/false values indicating which patches were applied.\n * @param {Array.<patch_obj>} patches Array of patch objects.\n * @param {string} text Old text.\n * @return {Array.<string|Array.<boolean>>} Two element Array, containing the\n *      new text and an array of boolean values.\n */\ndiff_match_patch.prototype.patch_apply = function(patches, text) {\n  if (patches.length == 0) {\n    return [text, []];\n  }\n\n  // Deep copy the patches so that no changes are made to originals.\n  patches = this.patch_deepCopy(patches);\n\n  var nullPadding = this.patch_addPadding(patches);\n  text = nullPadding + text + nullPadding;\n\n  this.patch_splitMax(patches);\n  // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n  var delta = 0;\n  var results = [];\n  for (var x = 0; x < patches.length; x++) {\n    var expected_loc = patches[x].start2 + delta;\n    var text1 = this.diff_text1(patches[x].diffs);\n    var start_loc;\n    var end_loc = -1;\n    if (text1.length > this.Match_MaxBits) {\n      // patch_splitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits),\n                                  expected_loc);\n      if (start_loc != -1) {\n        end_loc = this.match_main(text,\n            text1.substring(text1.length - this.Match_MaxBits),\n            expected_loc + text1.length - this.Match_MaxBits);\n        if (end_loc == -1 || start_loc >= end_loc) {\n          // Can't find valid trailing context.  Drop this patch.\n          start_loc = -1;\n        }\n      }\n    } else {\n      start_loc = this.match_main(text, text1, expected_loc);\n    }\n    if (start_loc == -1) {\n      // No match found.  :(\n      results[x] = false;\n      // Subtract the delta for this failed patch from subsequent patches.\n      delta -= patches[x].length2 - patches[x].length1;\n    } else {\n      // Found a match.  :)\n      results[x] = true;\n      delta = start_loc - expected_loc;\n      var text2;\n      if (end_loc == -1) {\n        text2 = text.substring(start_loc, start_loc + text1.length);\n      } else {\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\n      }\n      if (text1 == text2) {\n        // Perfect match, just shove the replacement text in.\n        text = text.substring(0, start_loc) +\n               this.diff_text2(patches[x].diffs) +\n               text.substring(start_loc + text1.length);\n      } else {\n        // Imperfect match.  Run a diff to get a framework of equivalent\n        // indices.\n        var diffs = this.diff_main(text1, text2, false);\n        if (text1.length > this.Match_MaxBits &&\n            this.diff_levenshtein(diffs) / text1.length >\n            this.Patch_DeleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false;\n        } else {\n          this.diff_cleanupSemanticLossless(diffs);\n          var index1 = 0;\n          var index2;\n          for (var y = 0; y < patches[x].diffs.length; y++) {\n            var mod = patches[x].diffs[y];\n            if (mod[0] !== DIFF_EQUAL) {\n              index2 = this.diff_xIndex(diffs, index1);\n            }\n            if (mod[0] === DIFF_INSERT) {  // Insertion\n              text = text.substring(0, start_loc + index2) + mod[1] +\n                     text.substring(start_loc + index2);\n            } else if (mod[0] === DIFF_DELETE) {  // Deletion\n              text = text.substring(0, start_loc + index2) +\n                     text.substring(start_loc + this.diff_xIndex(diffs,\n                         index1 + mod[1].length));\n            }\n            if (mod[0] !== DIFF_DELETE) {\n              index1 += mod[1].length;\n            }\n          }\n        }\n      }\n    }\n  }\n  // Strip the padding off.\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\n  return [text, results];\n};\n\n\n/**\n * Add some padding on text start and end so that edges can match something.\n * Intended to be called only from within patch_apply.\n * @param {Array.<patch_obj>} patches Array of patch objects.\n * @return {string} The padding string added to each side.\n */\ndiff_match_patch.prototype.patch_addPadding = function(patches) {\n  var paddingLength = this.Patch_Margin;\n  var nullPadding = '';\n  for (var x = 1; x <= paddingLength; x++) {\n    nullPadding += String.fromCharCode(x);\n  }\n\n  // Bump all the patches forward.\n  for (var x = 0; x < patches.length; x++) {\n    patches[x].start1 += paddingLength;\n    patches[x].start2 += paddingLength;\n  }\n\n  // Add some padding on start of first diff.\n  var patch = patches[0];\n  var diffs = patch.diffs;\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift([DIFF_EQUAL, nullPadding]);\n    patch.start1 -= paddingLength;  // Should be 0.\n    patch.start2 -= paddingLength;  // Should be 0.\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    var extraLength = paddingLength - diffs[0][1].length;\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\n    patch.start1 -= extraLength;\n    patch.start2 -= extraLength;\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  // Add some padding on end of last diff.\n  patch = patches[patches.length - 1];\n  diffs = patch.diffs;\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push([DIFF_EQUAL, nullPadding]);\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  return nullPadding;\n};\n\n\n/**\n * Look through the patches and break up any which are longer than the maximum\n * limit of the match algorithm.\n * @param {Array.<patch_obj>} patches Array of patch objects.\n */\ndiff_match_patch.prototype.patch_splitMax = function(patches) {\n  for (var x = 0; x < patches.length; x++) {\n    if (patches[x].length1 > this.Match_MaxBits) {\n      var bigpatch = patches[x];\n      // Remove the big old patch.\n      patches.splice(x--, 1);\n      var patch_size = this.Match_MaxBits;\n      var start1 = bigpatch.start1;\n      var start2 = bigpatch.start2;\n      var precontext = '';\n      while (bigpatch.diffs.length !== 0) {\n        // Create one of several smaller patches.\n        var patch = new patch_obj();\n        var empty = true;\n        patch.start1 = start1 - precontext.length;\n        patch.start2 = start2 - precontext.length;\n        if (precontext !== '') {\n          patch.length1 = patch.length2 = precontext.length;\n          patch.diffs.push([DIFF_EQUAL, precontext]);\n        }\n        while (bigpatch.diffs.length !== 0 &&\n               patch.length1 < patch_size - this.Patch_Margin) {\n          var diff_type = bigpatch.diffs[0][0];\n          var diff_text = bigpatch.diffs[0][1];\n          if (diff_type === DIFF_INSERT) {\n            // Insertions are harmless.\n            patch.length2 += diff_text.length;\n            start2 += diff_text.length;\n            patch.diffs.push(bigpatch.diffs.shift());\n            empty = false;\n          } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 &&\n                     patch.diffs[0][0] == DIFF_EQUAL &&\n                     diff_text.length > 2 * patch_size) {\n            // This is a large deletion.  Let it pass in one chunk.\n            patch.length1 += diff_text.length;\n            start1 += diff_text.length;\n            empty = false;\n            patch.diffs.push([diff_type, diff_text]);\n            bigpatch.diffs.shift();\n          } else {\n            // Deletion or equality.  Only take as much as we can stomach.\n            diff_text = diff_text.substring(0, patch_size - patch.length1 -\n                                               this.Patch_Margin);\n            patch.length1 += diff_text.length;\n            start1 += diff_text.length;\n            if (diff_type === DIFF_EQUAL) {\n              patch.length2 += diff_text.length;\n              start2 += diff_text.length;\n            } else {\n              empty = false;\n            }\n            patch.diffs.push([diff_type, diff_text]);\n            if (diff_text == bigpatch.diffs[0][1]) {\n              bigpatch.diffs.shift();\n            } else {\n              bigpatch.diffs[0][1] =\n                  bigpatch.diffs[0][1].substring(diff_text.length);\n            }\n          }\n        }\n        // Compute the head context for the next patch.\n        precontext = this.diff_text2(patch.diffs);\n        precontext =\n            precontext.substring(precontext.length - this.Patch_Margin);\n        // Append the end context for this patch.\n        var postcontext = this.diff_text1(bigpatch.diffs)\n                              .substring(0, this.Patch_Margin);\n        if (postcontext !== '') {\n          patch.length1 += postcontext.length;\n          patch.length2 += postcontext.length;\n          if (patch.diffs.length !== 0 &&\n              patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\n            patch.diffs[patch.diffs.length - 1][1] += postcontext;\n          } else {\n            patch.diffs.push([DIFF_EQUAL, postcontext]);\n          }\n        }\n        if (!empty) {\n          patches.splice(++x, 0, patch);\n        }\n      }\n    }\n  }\n};\n\n\n/**\n * Take a list of patches and return a textual representation.\n * @param {Array.<patch_obj>} patches Array of patch objects.\n * @return {string} Text representation of patches.\n */\ndiff_match_patch.prototype.patch_toText = function(patches) {\n  var text = [];\n  for (var x = 0; x < patches.length; x++) {\n    text[x] = patches[x];\n  }\n  return text.join('');\n};\n\n\n/**\n * Parse a textual representation of patches and return a list of patch objects.\n * @param {string} textline Text representation of patches.\n * @return {Array.<patch_obj>} Array of patch objects.\n * @throws {Error} If invalid input.\n */\ndiff_match_patch.prototype.patch_fromText = function(textline) {\n  var patches = [];\n  if (!textline) {\n    return patches;\n  }\n  // Opera doesn't know how to decode char 0.\n  textline = textline.replace(/%00/g, '\\0');\n  var text = textline.split('\\n');\n  var textPointer = 0;\n  while (textPointer < text.length) {\n    var m = text[textPointer].match(/^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/);\n    if (!m) {\n      throw new Error('Invalid patch string: ' + text[textPointer]);\n    }\n    var patch = new patch_obj();\n    patches.push(patch);\n    patch.start1 = parseInt(m[1], 10);\n    if (m[2] === '') {\n      patch.start1--;\n      patch.length1 = 1;\n    } else if (m[2] == '0') {\n      patch.length1 = 0;\n    } else {\n      patch.start1--;\n      patch.length1 = parseInt(m[2], 10);\n    }\n\n    patch.start2 = parseInt(m[3], 10);\n    if (m[4] === '') {\n      patch.start2--;\n      patch.length2 = 1;\n    } else if (m[4] == '0') {\n      patch.length2 = 0;\n    } else {\n      patch.start2--;\n      patch.length2 = parseInt(m[4], 10);\n    }\n    textPointer++;\n\n    while (textPointer < text.length) {\n      var sign = text[textPointer].charAt(0);\n      try {\n        var line = decodeURI(text[textPointer].substring(1));\n      } catch (ex) {\n        // Malformed URI sequence.\n        throw new Error('Illegal escape in patch_fromText: ' + line);\n      }\n      if (sign == '-') {\n        // Deletion.\n        patch.diffs.push([DIFF_DELETE, line]);\n      } else if (sign == '+') {\n        // Insertion.\n        patch.diffs.push([DIFF_INSERT, line]);\n      } else if (sign == ' ') {\n        // Minor equality.\n        patch.diffs.push([DIFF_EQUAL, line]);\n      } else if (sign == '@') {\n        // Start of next patch.\n        break;\n      } else if (sign === '') {\n        // Blank line?  Whatever.\n      } else {\n        // WTF?\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\n      }\n      textPointer++;\n    }\n  }\n  return patches;\n};\n\n\n/**\n * Class representing one patch operation.\n * @constructor\n */\nfunction patch_obj() {\n  /** @type {Array.<Array.<number|string>>} */\n  this.diffs = [];\n  /** @type {?number} */\n  this.start1 = null;\n  /** @type {?number} */\n  this.start2 = null;\n  /** @type {number} */\n  this.length1 = 0;\n  /** @type {number} */\n  this.length2 = 0;\n}\n\n\n/**\n * Emmulate GNU diff's format.\n * Header: @@ -382,8 +481,9 @@\n * Indicies are printed as 1-based, not 0-based.\n * @return {string} The GNU diff string.\n */\npatch_obj.prototype.toString = function() {\n  var coords1, coords2;\n  if (this.length1 === 0) {\n    coords1 = this.start1 + ',0';\n  } else if (this.length1 == 1) {\n    coords1 = this.start1 + 1;\n  } else {\n    coords1 = (this.start1 + 1) + ',' + this.length1;\n  }\n  if (this.length2 === 0) {\n    coords2 = this.start2 + ',0';\n  } else if (this.length2 == 1) {\n    coords2 = this.start2 + 1;\n  } else {\n    coords2 = (this.start2 + 1) + ',' + this.length2;\n  }\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\n  var op;\n  // Escape the body of the patch with %xx notation.\n  for (var x = 0; x < this.diffs.length; x++) {\n    switch (this.diffs[x][0]) {\n      case DIFF_INSERT:\n        op = '+';\n        break;\n      case DIFF_DELETE:\n        op = '-';\n        break;\n      case DIFF_EQUAL:\n        op = ' ';\n        break;\n    }\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\n  }\n  // Opera doesn't know how to encode char 0.\n  return text.join('').replace(/\\x00/g, '%00').replace(/%20/g, ' ');\n};\n\n\n// Export these global variables so that they survive Google's JS compiler.\n/*changed by lfborjas: changed `window` for `exports` to make it suitable for the node.js module conventions*/\nexports['diff_match_patch'] = diff_match_patch;\nexports['patch_obj'] = patch_obj;\nexports['DIFF_DELETE'] = DIFF_DELETE;\nexports['DIFF_INSERT'] = DIFF_INSERT;\nexports['DIFF_EQUAL'] = DIFF_EQUAL;\n","\"use strict\";\n\n\n/**\n * Converts an object to an array\n *\n * @param  {Mixed} value to convert to array\n * @return {Array} to array converted input\n */\nfunction asArray(value) {\n\tif (Array.isArray(value)) {\n\t\treturn value; // prevent duplication\n\t} else if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\treturn Object.keys(value).map(function (key) {\n\t\t\treturn value[key];\n\t\t});\n\t} else {\n\t\treturn [];\n\t}\n}\n\n\nmodule.exports = asArray;\n","\"use strict\";\n\n\n/**\n * Iterates over object or array, passing each key, value and parentObject to the callback\n *\n * @param  {Object|Array} value\tto iterate\n * @param  {Function} callback\treceiving key on given input value\n */\nfunction forEach(object, callback) {\n\tvar keys;\n\tif (Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\t} else if (Object.prototype.toString.call(object) === \"[object Object]\") {\n\t\tObject.keys(object).forEach(function (key) {\n\t\t\tcallback(object[key], key, object);\n\t\t});\n\t}\n}\n\n\nmodule.exports = forEach;\n","\"use strict\";\n\n\nexports.values = require(\"./values\");\nexports.asArray = require(\"./asArray\");\nexports.forEach = require(\"./forEach\");\nexports.keyOf = require(\"./keyOf\");\nexports.keys = require(\"./keys\");\n","\"use strict\";\n\n\nvar forEach = require(\"./forEach\");\n\n\n/**\n * Returns the key of the value\n *\n * @param  {Object|Array} data\tto scan\n * @param  {Mixed} value \t\tto search\n * @return {String|Number} key of (last) found result or null\n */\nfunction keyOf(data, value) {\n\tvar resultKey = null;\n\tforEach(data, function (itemValue, itemKey) {\n\t\tif (value === itemValue) {\n\t\t\tresultKey = itemKey;\n\t\t}\n\t});\n\n\treturn resultKey;\n}\n\n\nmodule.exports = keyOf;\n","\"use strict\";\n\n\n/**\n * Returns all keys of the given input data\n *\n * @param  {Mixed} value\n * @return {Array} containing keys of given value\n */\nfunction keys(value) {\n\tvar keys;\n\n\tif (Array.isArray(value)) {\n\t\tkeys = value.map(function (value, index) { return index; });\n\n\t} else if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\treturn Object.keys(value);\n\n\t} else {\n\t\tkeys = [];\n\t}\n\n\treturn keys;\n}\n\n\nmodule.exports = keys;\n","\"use strict\";\n\n\n/**\n * Returns all values of the given input data\n * @param  {Mixed} value input data\n * @return {Array} array of input data's values\n */\nfunction values(value) {\n\tvar values;\n\tif (Array.isArray(value)) {\n\t\t// []\n\t\tvalues = value;\n\t} else if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t// {}\n\t\tvalues = Object.keys(value).map(function (key) {\n\t\t\treturn value[key];\n\t\t});\n\t} else if (value != null) {\n\t\t// *\n\t\tvalues = [value];\n\t} else {\n\t\tvalues = [];\n\t}\n\treturn values;\n}\n\n\nmodule.exports = values;\n","\"use strict\";\n\n\nexports.get = require(\"./lib/get\");\nexports.set = require(\"./lib/set\");\nexports.delete = require(\"./lib/delete\");\nexports.join = require(\"./lib/join\");\nexports.split = require(\"./lib/split\");\n\nexports.isRoot = require(\"./lib/isRoot\");\n","\"use strict\";\n\n\nvar split = require(\"./split\");\nvar get = require(\"./get\");\nvar removeUndefinedItems = require(\"./removeUndefinedItems\");\n\n\nfunction pointerDelete(data, pointer, keepArrayIndices) {\n\tvar properties = split(pointer);\n\tvar lastProperty = properties.pop();\n\tvar target = get(data, properties);\n\tif (target) {\n\t\tdelete target[lastProperty];\n\t}\n\tif (Array.isArray(target) && keepArrayIndices !== true) {\n\t\tremoveUndefinedItems(target);\n\t}\n\treturn data;\n}\n\n\nmodule.exports = pointerDelete;\n","\"use strict\";\n\nvar split = require(\"./split\");\nvar isRoot = require(\"./isRoot\");\n\n\nfunction get(data, pointer, defaultValue) {\n\tif (pointer == null || data == null) {\n\t\treturn defaultValue;\n\t}\n\tif (isRoot(pointer)) {\n\t\treturn data;\n\t}\n\tconst result = run(data, split(pointer));\n\tif (result === undefined) {\n\t\treturn defaultValue;\n\t}\n\treturn result;\n}\n\nfunction run(data, path) {\n\tvar property = path.shift();\n\tif (data === undefined) {\n\t\treturn;\n\t} else if (property !== undefined) {\n\t\treturn run(data[property], path);\n\t}\n\treturn data;\n}\n\n\nmodule.exports = get;\n","module.exports = function isRoot(pointer) {\n\treturn pointer === \"#\" || pointer === \"\";\n};\n","\"use strict\";\n\n\nvar split = require(\"./split\");\nvar toString = Object.prototype.toString;\nvar simpleJoin = Array.prototype.join;\nvar matchMutlipleSlashes = /\\/+/g;\nvar matchTildes = /~/g;\nvar matchSlashes = /\\//g;\n\n\nfunction joinList(list, isURI) {\n\tif (list.length === 0) {\n\t\treturn isURI ? \"#\" : \"\";\n\t}\n\n\tvar pointer = list.join(\"/\");\n\tfor (var i = 0, l = list.length; i < l; i += 1) {\n\t\tlist[i] = list[i].replace(matchTildes, \"~0\").replace(matchSlashes, \"~1\");\n\t\tif (isURI) {\n\t\t\tlist[i] = encodeURIComponent(list[i]);\n\t\t}\n\t}\n\n\tvar pointer = (isURI ? \"#/\" : \"/\") + list.join(\"/\");\n\treturn pointer.replace(matchMutlipleSlashes, \"/\");\n}\n\n\nfunction join(firstPointer) {\n\tvar result = [];\n\tif (Array.isArray(firstPointer)) {\n\t\treturn joinList(firstPointer, arguments[1] === true);\n\t}\n\n\t// determine type of pointer\n\tvar option = arguments[arguments.length - 1];\n\tvar isURI = (typeof option === \"boolean\") ? option : (firstPointer && firstPointer[0] === \"#\");\n\n\tfor (var i = 0, l = arguments.length; i < l; i += 1) {\n\t\tresult.push.apply(result, split(arguments[i]));\n\t}\n\n\t// build final list of properties\n\tvar pointer = [];\n\tfor (var i = 0, l = result.length; i < l; i += 1) {\n\t\tif (result[i] === \"..\") {\n\t\t\tif (pointer.length === 0) {\n\t\t\t\treturn isURI ? \"#\" : \"\";\n\t\t\t}\n\t\t\tpointer.pop();\n\t\t} else {\n\t\t\tpointer.push(result[i]);\n\t\t}\n\t}\n\n\treturn joinList(pointer, isURI);\n}\n\n\nmodule.exports = join;\n","\"use strict\";\n\n\nfunction removeUndefinedItems(array) {\n\tvar i = 0;\n\tvar skip = 0;\n\twhile ((i + skip) < array.length) {\n\t\tif (array[i + skip] === undefined) {\n\t\t\tskip += 1;\n\t\t}\n\t\tarray[i] = array[i + skip];\n\t\ti += 1;\n\t}\n\tarray.length = array.length - skip;\n\treturn array;\n}\n\n\nmodule.exports = removeUndefinedItems;\n","\"use strict\";\n\n\nvar split = require(\"./split\");\nvar isArray = /^\\[.*\\]$/;\nvar arrayIndex = /^\\[(.+)\\]$/;\n\n\nfunction set(data, pointer, value) {\n\tif (pointer == null) {\n\t\treturn data;\n\t}\n\n\tvar properties = split(pointer);\n\tif (properties.length === 0) {\n\t\treturn data;\n\t}\n\n\tif (data == null) {\n\t\tdata = isArray.test(properties[0]) ? [] : {};\n\t}\n\n\tvar key, nextKeyIsArray, current = data;\n\twhile (properties.length > 1) {\n\t\tkey = properties.shift();\n\t\tnextKeyIsArray = isArray.test(properties[0]);\n\t\tcurrent = create(current, key, nextKeyIsArray);\n\t}\n\tkey = properties.pop();\n\taddValue(current, key, value);\n\treturn data;\n}\n\n\nfunction addValue(data, key, value) {\n\tvar index;\n\tvar keyAsIndex = key.match(arrayIndex);\n\tif (key === \"[]\" && Array.isArray(data)) {\n\t\tdata.push(value);\n\t} else if (keyAsIndex) {\n\t\tindex = keyAsIndex.pop();\n\t\tdata[index] = value;\n\t} else {\n\t\tdata[key] = value;\n\t}\n}\n\n\nfunction create(data, key, isArray) {\n\tif (data[key] != null) {\n\t\treturn data[key];\n\t}\n\tvar value = isArray ? [] : {};\n\taddValue(data, key, value);\n\treturn value;\n}\n\n\nmodule.exports = set;\n","\"use strict\";\n\nvar isRoot = require(\"./isRoot\");\n\nvar matchSlashes = /~1/g;\nvar matchTildes = /~0/g;\nvar matchMutlipleSlashes = /\\/+/g;\nvar matchPointerPrefixes = /(^[#/]*|\\/+$)/g;\n\n\nfunction sanitizeProperty(property) {\n\treturn property.replace(matchSlashes, \"/\").replace(matchTildes, \"~\");\n}\n\n\nfunction sanitizeAndDecodeProperty(property) {\n\treturn sanitizeProperty(decodeURIComponent(property));\n}\n\n\nfunction split(pointer) {\n\tif (pointer == null || typeof pointer !== \"string\" || isRoot(pointer)) {\n\t\treturn Array.isArray(pointer) ? pointer : [];\n\t}\n\tconst sanitize = pointer.indexOf(\"#\") >= 0 ? sanitizeAndDecodeProperty : sanitizeProperty;\n\tpointer = pointer.replace(matchMutlipleSlashes, \"/\");\n\tpointer = pointer.replace(matchPointerPrefixes, \"\");\n\n\tvar result = pointer.split(\"/\");\n\tfor (var i = 0, l = result.length; i < l; i += 1) {\n\t\tresult[i] = sanitize(result[i]);\n\t}\n\treturn result;\n}\n\n\nmodule.exports = split;","var rIsRegExp = /^\\{.*\\}$/;\n\n\n/**\n * Removes root prefix of pointer\n *\n * @param  {String} pointer\n * @return {String} simple pointer path\n */\nfunction stripPointerPrefix(pointer) {\n    pointer = pointer.toString();\n    return pointer.replace(/[#/]*/, \"\");\n}\n\n\nfunction convertToRegExp(pointerPartial) {\n    return new RegExp(pointerPartial.replace(/^\\{|\\}$/g, \"\"));\n}\n\n\nfunction splitRegExp(pointer) {\n    pointer = pointer.replace(/^\\{|\\/\\{/g, \"{\");\n    pointer = pointer.replace(/\\}\\/|\\}$/g, \"}\");\n    return pointer.split(\"\");\n}\n\n\n/**\n * Can not be used in conjuction with filters...\n * REMOVE stripPointer...\n *\n * @param  {String} pointer\n * @return {Array}\n */\nfunction parsePointer(pointer) {\n    var partials;\n    var current;\n    var result;\n    pointer = stripPointerPrefix(pointer);\n\n    if (pointer.indexOf(\"{\") === -1) {\n        return pointer.split(\"/\");\n    }\n\n    result = [];\n    partials = splitRegExp(pointer);\n\n    while ((current = partials.shift()) != null) {\n        if (current === \"\") {\n            continue;\n        }\n\n        if (rIsRegExp.test(current)) {\n            result.push(current);\n\n        } else {\n            result.push.apply(result, current.split(\"/\"));\n        }\n    }\n\n    return result;\n}\n\n\nexports.rIsRegExp = rIsRegExp;\nexports.convertToRegExp = convertToRegExp;\nexports.splitRegExp = splitRegExp;\nexports.parsePointer = parsePointer;\n\n","var pointerDelete = require(\"gson-pointer\").delete;\nvar removeUndefinedItems = require(\"gson-pointer/lib/removeUndefinedItems\");\nvar queryGet = require(\"./get\");\n\nvar POINTER = 3;\nvar PARENT = 2;\n\n\nfunction queryDelete(obj, jsonPointer) {\n    var matches = queryGet(obj, jsonPointer, queryGet.ALL);\n    matches.forEach(function (match) {\n        pointerDelete(obj, match[POINTER], true);\n    });\n    matches.forEach(function (match) {\n        if (Array.isArray(match[PARENT])) {\n            removeUndefinedItems(match[PARENT]);\n        }\n    });\n    return obj;\n}\n\n\nmodule.exports = queryDelete;\n","var o = require(\"gson-conform\");\nvar common = require(\"./common\");\n\n\nvar f = {\n    queryKey: function (obj, query) {\n        return function (key) {\n            return valid(obj[key], query);\n        };\n    },\n    queryRegExp: function (obj, query, regex) {\n        return function (key) {\n            return regex.test(key) ? valid(obj[key], query) : false;\n        };\n    }\n};\n\nvar MAP = {\n    \"false\": false,\n    \"true\": true,\n    \"null\": null\n};\n\n\n/**\n * Filter properties by query: select|if:property\n *\n * @param  {Object|Array} obj\n * @param  {String} query key:value pairs separated by &\n * @return {Array} values matching the given query\n */\nfunction filterValues(obj, query) {\n    return filterKeys(obj, query).map(function (key) {\n        return obj[key];\n    });\n}\n\nvar selectCurly = /(\\{[^}]*\\})/g;\nvar selectPlaceholder = /\\d+/g;\nfunction splitQuery(value) {\n    // nothing to escape\n    if (value.indexOf(\"?\") === -1 || value.indexOf(\"{\") === -1) {\n        return value.split(\"?\", 2);\n    }\n\n    // @todo this must be simpler to solve\n    var map = {};\n    var temp = value.replace(selectCurly, function replace(match, group, index) {\n        var id = \"\" + index + \"\";\n        map[id] = match;\n        return id;\n    });\n    var result = temp.split(\"?\", 2);\n    for (var i = 0; i < result.length; i += 1) {\n        result[i] = result[i].replace(selectPlaceholder, function revertReplacement(match) {\n            return map[match];\n        });\n    }\n    return result;\n}\n\n/**\n * Filter properties by query: select|if:property\n *\n * @param  {Object|Array} obj\n * @param  {String} query key:value pairs separated by &\n * @return {Array} object keys matching the given query\n */\nfunction filterKeys(obj, query) {\n    if (obj && query) {\n        var matches = splitQuery(query);\n        var propertyQuery = matches[0];\n        var filterQuery = matches[1];\n\n        var keys;\n        var regex;\n        if (propertyQuery === \"*\" || propertyQuery === \"**\") {\n            keys = o.keys(obj);\n            return keys.filter(f.queryKey(obj, filterQuery));\n\n        } else if (common.rIsRegExp.test(propertyQuery)) {\n            keys = o.keys(obj);\n            regex = common.convertToRegExp(propertyQuery);\n            return keys.filter(f.queryRegExp(obj, filterQuery, regex));\n\n        } else if (obj[propertyQuery] && valid(obj[propertyQuery], filterQuery)) {\n            return [propertyQuery];\n        }\n    }\n    return [];\n}\n\n\n/**\n * Returns true if the query matches. Query: key:value&key:value\n * @param  {Object|Array} obj\n * @param  {String} query key:value pairs separated by &\n * @return {Boolean} if query matched object\n */\nfunction valid(obj, query) {\n    if (!query) {\n        return true;\n    }\n    if (!obj) {\n        return false;\n    }\n\n    var key;\n    var value;\n    var isValid = true;\n    var truthy;\n\n    var tests = query\n        .replace(/(&&)/g, \"$1\")\n        .replace(/(\\|\\|)/g, \"$1\")\n        .split(\"\");\n\n    var or = false;\n    for (var i = 0, l = tests.length; i < l; i += 2) {\n        if (tests[i].indexOf(\":!\") > -1) {\n            truthy = false;\n            value = tests[i].split(\":!\");\n\n        } else if (tests[i].indexOf(\":\") === -1) {\n            truthy = false;\n            value = [tests[i], undefined];\n\n        } else {\n            truthy = true;\n            value = tests[i].split(\":\");\n        }\n\n        key = value[0];\n        value = value[1];\n\n        if (value === \"undefined\") {\n            value = undefined; // undefined is unmappable\n        } else {\n            value = MAP[value] === undefined ? value : MAP[value];\n        }\n\n        // perform filter test, exception undefined is not matched for negated non-undefined values\n        value = (truthy ? (value === obj[key]) : (value !== obj[key] && (obj[key] !== undefined || key === undefined)));\n\n        if (or) {\n            isValid = isValid || value;\n        } else {\n            isValid = isValid && value;\n        }\n\n        or = tests[i + 1] === \"||\";\n    }\n\n    return isValid;\n}\n\n\nexports.values = filterValues;\nexports.keys = filterKeys;\nexports.valid = valid;\n","/* eslint no-unused-vars: 0 */\nvar query = require(\"./run\");\n\n\n/**\n * Returns the query results as an array or object, depending on its callback\n *\n * ## return type\n *\n * - get.ALL = 'all' returns all arguments of query callback [value, key, parent, pointer]\n * - get.POINTER = 'pointer' returns only the json pointers to the targets\n * - get.VALUE = 'value' Default. Returns only the matched value\n * - get.MAP = Returns an object with all available pointers and their data, like { pointer: value }\n *\n * @param  {Mixed} obj\n * @param  {Pointer} jsonPointer\n * @param  {String} type\t\t\t- type of return value. Defaults to \"value\"\n * @return {Array|Object} containing result in specified format\n */\nfunction queryGet(obj, jsonPointer, type) {\n    var matches = type === queryGet.MAP ? {} : [];\n    var cb = getCbFactory(type, matches);\n    query(obj, jsonPointer, cb);\n    return matches;\n}\n\nqueryGet.ALL = \"all\";\nqueryGet.MAP = \"map\";\nqueryGet.POINTER = \"pointer\";\nqueryGet.VALUE = \"value\";\n\n\nfunction getCbFactory(type, matches) {\n    if (typeof type === \"function\") {\n        return function cb(value, key, obj, pointer) {\n            matches.push(type(obj[key], key, obj, pointer));\n        };\n    }\n\n    switch (type) {\n        case queryGet.ALL:\n            return function cbGetAll(value, key, obj, pointer) {\n                matches.push([obj[key], key, obj, pointer]);\n            };\n\n        case queryGet.MAP:\n            return function cbGetMap(value, key, obj, pointer) {\n                matches[pointer] = value;\n            };\n\n        case queryGet.POINTER:\n            return function cbGetPointer(value, key, obj, pointer) {\n                matches.push(pointer);\n            };\n\n        case queryGet.VALUE:\n            return function cbGetValue(value, key, obj, pointer) {\n                matches.push(value);\n            };\n\n        default:\n            return function cbGetValue(value, key, obj, pointer) {\n                matches.push(value);\n            };\n    }\n}\n\n\nmodule.exports = queryGet;\n","exports.get = require(\"./get\");\nexports.run = require(\"./run\");\nexports.delete = require(\"./delete\");\nexports.filter = require(\"./filter\");\n","var filter = require(\"./filter\");\nvar parsePointer = require(\"./common\").parsePointer;\n// @note gson-pointer: only strings are valid pointer properties to join. Ensure key is a string (could be index)\nvar join = require(\"gson-pointer\").join;\n\n\n/**\n * callback for each match of json-glob-pointer\n *\n * @param  {Any} obj\n * @param  {String} jsonPointer - function (value, key, parentObject, pointerToValue)\n * @param  {Function} cb\n */\nfunction queryRun(obj, jsonPointer, cb) {\n    // get steps into obj\n    var steps = parsePointer(jsonPointer);\n    // cleanup first and last\n    if (steps[0] === \"\") {\n        // @todo due to pointer cleanup, this is probably never called\n        steps.shift();\n    }\n    if (steps[steps.length - 1] === \"\") {\n        steps.length -= 1;\n    }\n\n    _query(obj, steps, cb, \"#\");\n}\n\n\nfunction cbPassAll(obj, cb, pointer) {\n    return function (key) {\n        cb(obj[key], key, obj, join(pointer, String(key)));\n    };\n}\n\n\nfunction _query(obj, steps, cb, pointer) {\n    var matches;\n    var query = steps.shift();\n\n    if (steps.length === 0) {\n        // get keys matching the query and call back\n        matches = filter.keys(obj, query);\n        matches.forEach(cbPassAll(obj, cb, pointer));\n\n    } else if (/^\\*\\*/.test(query)) {\n        // run next query on current object\n        _query(obj, steps.slice(0), cb, pointer);\n\n    } else {\n        matches = filter.keys(obj, query);\n        matches.forEach(function (key) {\n            _query(obj[key], steps.slice(0), cb, join(pointer, String(key)));\n        });\n    }\n\n    if (/^\\*\\*/.test(query)) {\n        // match this query (**) again\n        steps.unshift(query);\n        matches = filter.keys(obj, query);\n        matches.forEach(function (key) {\n            _query(obj[key], steps.slice(0), cb, join(pointer, String(key)));\n        });\n    }\n}\n\n\nmodule.exports = queryRun;\n","module.exports = {\n    config: {\n        strings: require(\"./lib/config/strings\")\n    },\n    cores: {\n        Interface: require(\"./lib/cores/CoreInterface\"),\n        Draft04: require(\"./lib/cores/Draft04\"), // core implementing draft04 specs\n        JsonEditor: require(\"./lib/cores/JsonEditor\") // adjusted core of draft04 to better support the json-editor\n    },\n    addSchema: require(\"./lib/addSchema\"), // add a schema to be references via $ref\n    addValidator: require(\"./lib/addValidator\"), // add validation for keyword, format, datatype and customize errors\n    compileSchema: require(\"./lib/compileSchema\"),\n    createCustomError: require(\"./lib/utils/createCustomError\"),\n    createSchemaOf: require(\"./lib/createSchemaOf\"), // creates a simple schema based on the given data\n    each: require(\"./lib/each\"), // iterate over data, receiving each data-entry with its schema\n    eachSchema: require(\"./lib/eachSchema\"), // iterates over a json-schemas type definitions\n    getChildSchemaSelection: require(\"./lib/getChildSchemaSelection\"), // get available child schemas\n    getSchema: require(\"./lib/getSchema\"), // get schema of datapointer\n    getTemplate: require(\"./lib/getTemplate\"), // create data which is valid to the given schema\n    getTypeOf: require(\"./lib/getTypeOf\"), // returns the javascript datatype\n    isValid: require(\"./lib/isValid\"), // returns a boolean if the schema is valid\n    SchemaService: require(\"./lib/SchemaService\"),\n    step: require(\"./lib/step\"), // steps into a json-schema, returning the matching child-schema\n    validate: require(\"./lib/validate\"), // validates data by a schema\n    validateAsync: require(\"./lib/validateAsync\") // async validation of data by a schema\n};\n","const getSchema = require(\"./getSchema\");\nconst Core = require(\"./cores/JsonEditor\");\nconst gp = require(\"gson-pointer\");\n\n\nfunction copy(value) {\n    return JSON.parse(JSON.stringify(value));\n}\n\n\nclass SchemaService {\n\n    constructor(schema, data) {\n        this.core = new Core(schema);\n        this.schema = schema;\n        this.data = data;\n        this.cache = {};\n    }\n\n    updateData(data) {\n        this.data = data;\n        this.cache = {};\n    }\n\n    updateSchema(schema) {\n        this.schema = schema;\n        this.core.setSchema(schema);\n        this.cache = {};\n    }\n\n    get(pointer, data) {\n        if (data) { // possibly separate entry point\n            const schema = getSchema(this.core, data, this.schema, pointer);\n            return copy(schema);\n        }\n\n        if (pointer === \"#\") { // root\n            return this.schema;\n        }\n\n        if (this.cache[pointer]) { // return cached result\n            return this.cache[pointer];\n        }\n\n        const parentPointer = gp.join(pointer, \"..\");\n        let parentSchema = this.cache[parentPointer];\n        if (parentSchema == null) {\n            // store parent (major performance improvement if its within oneof)\n            parentSchema = getSchema(this.core, this.data, this.schema, parentPointer);\n            if (parentSchema.variableSchema !== true) {\n                this.cache[parentPointer] = copy(parentSchema);\n            }\n        }\n\n        // step from parent to child\n        const key = gp.split(pointer).pop();\n        let schema = getSchema(this.core, gp.get(this.data, parentPointer), this.cache[parentPointer], key);\n        schema = copy(schema);\n        if (schema.variableSchema !== true) {\n            this.cache[pointer] = schema;\n        }\n        return schema;\n    }\n}\n\n\nmodule.exports = SchemaService;\n","const remotes = require(\"../remotes\");\nconst compileSchema = require(\"./compileSchema\");\n\n\nmodule.exports = function addSchema(url, schema) {\n    schema.id = schema.id || url;\n    remotes[url] = compileSchema(schema);\n};\n","/**\n * @throws Error\n * Adds a custom error. May override existing errors\n *\n * @param {Core} core\n * @param {String} errorId          - id of error @see /lib/validation/errors\n * @param {Function} errorCreator   - function returning an error-object @see /lib/utils/createCustomError\n */\nfunction addError(core, errorId, errorCreator) {\n    if (typeof errorCreator !== \"function\") {\n        throw new Error(`Error callback 'errorCreator' must be of type function. Received ${typeof errorCreator}`);\n    }\n    core.errors[errorId] = errorCreator;\n}\n\n/**\n * Adds a custom format validator. Existing format may not be overriden (may still be modified manually)\n * @param {Core} core\n * @param {String} formatType           - format type (i.e. `format: \"html\"`)\n * @param {Function} validationFunction - called with (core, schema, value, pointer)\n */\nfunction addFormat(core, formatType, validationFunction) {\n    if (typeof validationFunction !== \"function\") {\n        throw new Error(`Validation function expected. Received ${typeof validationFunction}`);\n    }\n    if (core.validateFormat[formatType] == null) {\n        core.validateFormat[formatType] = validationFunction;\n        return;\n    }\n    throw new Error(`A format '${formatType}' is already registered to validation`);\n}\n\n/**\n * Adds a custom keyword validation to a specific type. May not override existing keywords.\n *\n * @param {Core} core\n * @param {String} datatype             - valid datatype like \"object\", \"array\", \"string\", etc\n * @param {String} keyword              - The keyword to add, i.e. `minWidth: ...`\n * @param {Function} validationFunction - called with (core, schema, value, pointer)\n */\nfunction addKeyword(core, datatype, keyword, validationFunction) {\n    if (typeof validationFunction !== \"function\") {\n        throw new Error(`Validation function expected. Received ${typeof validationFunction}`);\n    }\n    if (core.typeKeywords[datatype] == null) {\n        throw new Error(`Unknown datatype ${datatype}. Failed adding custom keyword validation.`);\n    }\n    if (core.typeKeywords[datatype].includes(keyword) === false) {\n        core.typeKeywords[datatype].push(keyword);\n    }\n    core.validateKeyword[keyword] = validationFunction;\n}\n\n\nmodule.exports = {\n    error: addError,\n    format: addFormat,\n    keyword: addKeyword\n};\n","const { get } = require(\"gson-pointer\");\nconst splitRef = require(\"./splitRef\");\nconst suffixes = /(#|\\/)+$/g;\nconst getTypeOf = require(\"../getTypeOf\");\n// const emptyValues = [\"\", null, \"#\"];\n\nconst isObject = val => (getTypeOf(val) === \"object\");\n\n\n// 1. combined is known\n// 2. base or pointer is known\n// 3. base + pointer is known\n\nmodule.exports = function getRef(context, rootSchema, $ref) {\n    if (isObject($ref)) {\n        $ref = $ref.__ref || $ref.$ref;\n    }\n\n    if ($ref == null) {\n        return rootSchema;\n    }\n\n    let schema;\n\n    // is it a known $ref?\n    const $remote = $ref.replace(suffixes, \"\");\n    if (context.remotes[$remote]) {\n        schema = context.remotes[$remote];\n        if (schema && schema.$ref) {\n            return getRef(context, rootSchema, schema.$ref);\n        }\n        return schema;\n    }\n    if (context.ids[$ref]) {\n        schema = get(rootSchema, context.ids[$ref]);\n        if (schema && schema.$ref) {\n            return getRef(context, rootSchema, schema.$ref);\n        }\n        return schema;\n    }\n\n    // is it a ref with host/pointer?\n    const fragments = splitRef($ref);\n    if (fragments.length === 0) {\n        return rootSchema;\n    }\n\n    if (fragments.length === 1) {\n        $ref = fragments[0];\n        if (context.remotes[$ref]) {\n            schema = context.remotes[$ref];\n            return getRef(context, rootSchema, schema.$ref);\n        }\n        if (context.ids[$ref]) {\n            schema = get(rootSchema, context.ids[$ref]);\n            if (schema && schema.$ref) {\n                return getRef(context, rootSchema, schema.$ref);\n            }\n            return schema;\n        }\n    }\n\n    if (fragments.length === 2) {\n        const base = fragments[0];\n        $ref = fragments[1];\n\n        if (context.remotes[base]) {\n            if (context.remotes[base].getRef) {\n                return context.remotes[base].getRef($ref);\n            }\n            // console.log(\"warning: uncompiled remote - context may be wrong\", base);\n            return getRef(context, context.remotes[base], $ref);\n        }\n        if (context.ids[base]) {\n            return getRef(context, get(rootSchema, context.ids[base]), $ref);\n        }\n    }\n\n    schema = get(rootSchema, context.ids[$ref] || $ref);\n    if (schema && schema.$ref) {\n        return getRef(context, rootSchema, schema.$ref);\n    }\n    return schema;\n};\n","/* eslint max-statements-per-line: [\"error\", { \"max\": 2 }] */\nconst eachSchema = require(\"../eachSchema\");\nconst remotes = require(\"../../remotes\");\nconst joinScope = require(\"./joinScope\");\nconst getRef = require(\"./getRef\");\n\nconst COMPILED = \"__compiled\";\nconst COMPILED_REF = \"__ref\";\nconst GET_REF = \"getRef\";\nconst GET_ROOT = \"getRoot\";\nconst suffixes = /(#|\\/)+$/g;\n\n\nfunction compile(rootSchema, force = false) {\n    if (rootSchema[COMPILED] !== undefined) { return rootSchema; } // eslint-disable-line\n    const context = { ids: {}, remotes: Object.assign({}, remotes) };\n    const rootSchemaAsString = JSON.stringify(rootSchema);\n    rootSchema = JSON.parse(rootSchemaAsString);\n    Object.defineProperty(rootSchema, COMPILED, { enumerable: false, value: true });\n    Object.defineProperty(rootSchema, GET_REF, { enumerable: false, value: getRef.bind(null, context, rootSchema) });\n    // Object.defineProperty(rootSchema, \"debug\", { enumerable: false, value: schema => {\n    //     console.log(JSON.stringify(context.ids, null, 2));\n    //     console.log(\"remotes\", Object.keys(remotes));\n    //     console.log(JSON.stringify(rootSchema, null, 2));\n    // } });\n    if (force === false && rootSchemaAsString.includes(\"$ref\") === false) {\n        // bail early, when no $refs are defined\n        return rootSchema;\n    }\n\n    const scopes = {};\n    const getRoot = () => rootSchema;\n    eachSchema(rootSchema, (schema, pointer) => {\n        if (schema.id) { context.ids[schema.id.replace(suffixes, \"\")] = pointer; }\n\n        // build up scopes and add them to $ref-resolution map\n        pointer = `#${pointer}`.replace(/##+/, \"#\");\n        const previousPointer = pointer.replace(/\\/[^/]+$/, \"\");\n        const parentPointer = pointer.replace(/\\/[^/]+\\/[^/]+$/, \"\");\n        const previousScope = scopes[previousPointer] || scopes[parentPointer];\n        const scope = joinScope(previousScope, schema.id);\n        scopes[pointer] = scope;\n        if (context.ids[scope] == null) { context.ids[scope] = pointer; }\n\n        if (schema.$ref) {\n            Object.defineProperty(schema, COMPILED_REF, { enumerable: false, value: joinScope(scope, schema.$ref) });\n            // @todo currently not used:\n            Object.defineProperty(schema, GET_ROOT, { enumerable: false, value: getRoot });\n            // console.log(\"compiled ref\", scope, schema.$ref, \"=>\", joinScope(scope, schema.$ref));\n        }\n    });\n\n    // console.log(JSON.stringify(context.ids, null, 2));\n    return rootSchema;\n}\n\n\nmodule.exports = compile;\n","/* eslint max-statements-per-line: [\"error\", { \"max\": 2 }] */\nconst suffixes = /(#|\\/)+$/;\nconst trailingHash = /#$/;\nconst isDomain = /^[^:]+:\\/\\/[^/]+\\//;\nconst trailingFragments = /\\/[^/]*$/;\nconst idAndPointer = /#.*$/;\n\nmodule.exports = function joinScope(previous, id) {\n    if (previous == null && id == null) { return \"#\"; }\n    if (id == null) { return previous.replace(trailingHash, \"\"); }\n    if (previous == null) { return id.replace(trailingHash, \"\"); }\n\n    if (id[0] === \"#\") { return `${previous.replace(idAndPointer, \"\")}${id.replace(suffixes, \"\")}`; }\n    if (isDomain.test(id)) { return id.replace(trailingHash, \"\"); }\n    return `${previous.replace(trailingFragments, \"\")}/${id.replace(trailingHash, \"\")}`;\n};\n","const suffixes = /(#|\\/)+$/g;\nconst emptyValues = [\"\", null, \"#\"];\n\n\nmodule.exports = function splitRef($ref) {\n    if (emptyValues.includes($ref)) {\n        return [];\n    }\n\n    $ref = $ref.replace(suffixes, \"\");\n    if ($ref.indexOf(\"#\") === -1) {\n        return [$ref.replace(suffixes, \"\")];\n    }\n    if ($ref.indexOf(\"#\") === 0) {\n        return [$ref.replace(suffixes, \"\")];\n    }\n    const result = $ref.split(\"#\");\n    result[0] = result[0].replace(suffixes, \"\");\n    result[1] = `#${result[1].replace(suffixes, \"\")}`;\n    return result;\n};\n","module.exports = require(\"./compile\");\n","module.exports = {\n    DECLARATOR_ONEOF: \"oneOfProperty\",\n    GET_TEMPLATE_RECURSION_LIMIT: 1,\n    floatingPointPrecision: 10000,\n    propertyBlacklist: [\"_id\"]\n};\n","/* eslint max-len: 0 */\nmodule.exports = {\n    // validation errors\n    AdditionalItemsError: \"Array at `{{pointer}}` may not have an additional item `{{key}}`\",\n    AdditionalPropertiesError: \"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`\",\n    AnyOfError: \"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`\",\n    AllOfError: \"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`\",\n    EnumError: \"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`\",\n    FormatDateTimeError: \"Value `{{value}}` at `{{pointer}}` is not a valid date-time\",\n    FormatEmailError: \"Value `{{value}}` at `{{pointer}}` is not a valid email\",\n    FormatUrlError: \"Value `{{value}}` at `{{pointer}}` is not a valid url\",\n    FormatUriError: \"Value `{{value}}` at `{{pointer}}` is not a valid uri\",\n    FormatHostnameError: \"Value `{{value}}` at `{{pointer}}` is not a valid hostname\",\n    FormatIPV4Error: \"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address\",\n    FormatIPV6Error: \"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address\",\n    FormatRegExError: \"Value `{{value}}` at `{{pointer}}` is not a valid regular expression\",\n    MaximumError: \"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum\",\n    MaxItemsError: \"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`\",\n    MaxLengthError: \"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.\",\n    MaxPropertiesError: \"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`\",\n    MinimumError: \"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum\",\n    MinItemsError: \"Too few items in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`\",\n    MinLengthError: \"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.\",\n    MinPropertiesError: \"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`\",\n    MissingOneOfPropertyError: \"Value at `{{pointer}}aroperty `{{property}}`\",\n    MissingDependencyError: \"The required propery '{{missingProperty}}' in `{{pointer}}` is missing\",\n    MultipleOfError: \"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`\",\n    MultipleOneOfError: \"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`\",\n    NoAdditionalPropertiesError: \"Additional property `{{property}}` in `{{pointer}}` is not allowed\",\n    NotError: \"Value `{{value}}` at pointer should not match schema `{{not}}`\",\n    OneOfError: \"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema\",\n    OneOfPropertyError: \"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`\",\n    PatternError: \"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`\",\n    PatternPropertiesError: \"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}\",\n    RequiredPropertyError: \"The required property `{{key}}` is missing at `{{pointer}}`\",\n    TypeError: \"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`\",\n    UndefinedValueError: \"Value must not be undefined in `{{pointer}}`\",\n    UnknownPropertyError: \"Could not find a valid schema for property `{{pointer}}` within object\",\n    UniqueItemsError: \"Expected unique items in {{pointer}}: duplicate value `{{value}}` found at {{itemPointer}} and {{duplicatePointer}}\",\n    ValueNotEmptyError: \"A value for `{{property}}` is required at `{{pointer}}`\"\n};\n","const resolveRef = require(\"../resolveRef.withOverwrite\");\nconst compileSchema = require(\"../compileSchema\");\nconst resolveAnyOf = require(\"../resolveAnyOf\");\nconst resolveAllOf = require(\"../resolveAllOf\");\n\n\n/* eslint no-unused-vars: 0 no-empty-function: 0 */\nmodule.exports = class CoreInterface {\n\n    constructor(schema) {\n        this.setSchema(schema);\n    }\n\n    get rootSchema() {\n        return this.__rootSchema;\n    }\n\n    set rootSchema(rootSchema) {\n        if (rootSchema == null) {\n            return;\n        }\n        this.__rootSchema = compileSchema(rootSchema);\n    }\n\n    each(data, callback, schema = this.rootSchema, pointer = \"#\") {\n        return new Error(\"function 'each' is not implemented\");\n    }\n\n    validate(data, schema = this.rootSchema, pointer = \"#\") {\n        return [new Error(\"function 'validate' is not implemented\")];\n    }\n\n    isValid(data, schema = this.rootSchema, pointer = \"#\") {\n        return new Error(\"function 'isValid' is not implemented\");\n    }\n\n    resolveAnyOf(data, schema, pointer = \"#\") {\n        return resolveAnyOf(this, data, schema, pointer);\n    }\n\n    resolveAllOf(data, schema, pointer = \"#\") {\n        return resolveAllOf(this, data, schema, pointer);\n    }\n\n    resolveRef(schema) {\n        return new Error(\"function 'resolveRef' is not implemented\");\n    }\n\n    resolveOneOf(data, schema, pointer = \"#\") {\n        return new Error(\"function 'resolveOneOf' is not implemented\");\n    }\n\n    getSchema(pointer, data, schema = this.rootSchema) {\n        return new Error(\"function 'getSchema' is not implemented\");\n    }\n\n    getTemplate(data, schema = this.rootSchema) {\n        return new Error(\"function 'getTemplate' is not implemented\");\n    }\n\n    setSchema(schema) {\n        this.rootSchema = schema;\n    }\n\n    step(key, schema, data, pointer = \"#\") {\n        return new Error(\"function 'step' is not implemented\");\n    }\n};\n","const CoreInterface = require(\"./CoreInterface\");\nconst step = require(\"../step\");\nconst validate = require(\"../validate\");\nconst resolveOneOf = require(\"../resolveOneOf.strict\");\nconst resolveRef = require(\"../resolveRef.strict\");\nconst getTemplate = require(\"../getTemplate\");\nconst getSchema = require(\"../getSchema\");\nconst each = require(\"../each\");\nconst compileSchema = require(\"../compileSchema\");\n\nconst remotes = require(\"../../remotes\");\nremotes[\"http://json-schema.org/draft-04/schema\"] = compileSchema(require(\"../../remotes/draft04.json\"));\n\n\nclass Draft04Core extends CoreInterface {\n\n    constructor(schema) {\n        super(schema);\n        this.typeKeywords = JSON.parse(JSON.stringify(require(\"../validation/typeKeywordMapping\")));\n        this.validateKeyword = Object.assign({}, require(\"../validation/keyword\"));\n        this.validateType = Object.assign({}, require(\"../validation/type\"));\n        this.validateFormat = Object.assign({}, require(\"../validation/format\"));\n        this.errors = Object.assign({}, require(\"../validation/errors\"));\n    }\n\n    each(data, callback, schema = this.rootSchema, pointer = \"#\") {\n        each(this, data, callback, schema, pointer);\n    }\n\n    validate(data, schema = this.rootSchema, pointer = \"#\") {\n        return validate(this, data, schema, pointer);\n    }\n\n    isValid(data, schema = this.rootSchema, pointer = \"#\") {\n        return this.validate(data, schema, pointer).length === 0;\n    }\n\n    resolveOneOf(data, schema, pointer) {\n        return resolveOneOf(this, data, schema, pointer);\n    }\n\n    resolveRef(schema) {\n        return resolveRef(schema, this.rootSchema);\n    }\n\n    getSchema(pointer, data, schema = this.rootSchema) {\n        return getSchema(this, pointer, data, schema);\n    }\n\n    getTemplate(data, schema = this.rootSchema) {\n        return getTemplate(this, data, schema);\n    }\n\n    step(key, schema, data, pointer = \"#\") {\n        return step(this, key, schema, data, pointer);\n    }\n}\n\n\nmodule.exports = Draft04Core;\n","const CoreInterface = require(\"./CoreInterface\");\nconst step = require(\"../step\");\nconst validate = require(\"../validate\");\nconst resolveOneOf = require(\"../resolveOneOf.fuzzy\");\nconst resolveRef = require(\"../resolveRef.withOverwrite\");\nconst getTemplate = require(\"../getTemplate\");\nconst getSchema = require(\"../getSchema\");\nconst each = require(\"../each\");\n\n\nclass JsonEditorCore extends CoreInterface {\n\n    constructor(schema) {\n        super(schema);\n        this.typeKeywords = JSON.parse(JSON.stringify(require(\"../validation/typeKeywordMapping\")));\n        this.validateKeyword = Object.assign({}, require(\"../validation/keyword\"));\n        // set properties required per default and prevent no duplicate errors.\n        // This is required for fuzzy resolveOneOf\n        // this.validateKeyword.properties = this.validateKeyword.propertiesRequired;\n        // this.validateKeyword.required = this.validateKeyword.requiredNotEmpty;\n        this.validateType = Object.assign({}, require(\"../validation/type\"));\n        this.validateFormat = Object.assign({}, require(\"../validation/format\"));\n        this.errors = Object.assign({}, require(\"../validation/errors\"));\n    }\n\n    each(data, callback, schema = this.rootSchema, pointer = \"#\") {\n        each(this, data, callback, schema, pointer);\n    }\n\n    validate(data, schema = this.rootSchema, pointer = \"#\") {\n        return validate(this, data, schema, pointer);\n    }\n\n    isValid(data, schema = this.rootSchema, pointer = \"#\") {\n        return this.validate(data, schema, pointer).length === 0;\n    }\n\n    resolveOneOf(data, schema, pointer) {\n        return resolveOneOf(this, data, schema, pointer);\n    }\n\n    resolveRef(schema) {\n        return resolveRef(schema, this.rootSchema);\n    }\n\n    getSchema(pointer, data, schema = this.rootSchema) {\n        return getSchema(this, pointer, data, schema);\n    }\n\n    getTemplate(data, schema = this.rootSchema) {\n        return getTemplate(this, data, schema);\n    }\n\n    step(key, schema, data, pointer = \"#\") {\n        return step(this, key, schema, data, pointer);\n    }\n}\n\n\nmodule.exports = JsonEditorCore;\n","const getTypeOf = require(\"./getTypeOf\");\n\n\n/**\n * Create a simple json schema for the given input data\n * @param  {Mixed} data     - data to get json schema for\n * @return {Object} schema\n */\nfunction createSchemaOf(data) {\n    const schema = {\n        type: getTypeOf(data)\n    };\n\n    if (schema.type === \"object\") {\n        schema.properties = {};\n        Object.keys(data).forEach(key => (schema.properties[key] = createSchemaOf(data[key])));\n    }\n\n    if (schema.type === \"array\" && data.length === 1) {\n        schema.items = createSchemaOf(data[0]);\n\n    } else if (schema.type === \"array\") {\n        schema.items = data.map(createSchemaOf);\n    }\n\n    return schema;\n}\n\n\nmodule.exports = createSchemaOf;\n\n","const getTypeOf = require(\"./getTypeOf\");\n\n\n/**\n * Iterates over data, retrieving its schema\n *\n * @param  {CoreInterface} core - validator\n * @param  {Mixed} data         - the data to iterate\n * @param  {Function} callback  - will be called with (schema, data, pointer) on each item\n * @param  {Object} [schema]    - the schema matching the data. Defaults to rootSchema\n * @param  {String} [pointer]   - pointer to current data. Default to rootPointer\n */\nfunction each(core, data, callback, schema = core.rootSchema, pointer = \"#\") {\n    callback(schema, data, pointer);\n    const dataType = getTypeOf(data);\n\n    if (dataType === \"object\") {\n        Object.keys(data).forEach(key => {\n            const nextSchema = core.step(key, schema, data, pointer); // not save\n            const next = data[key]; // save\n            core.each(next, callback, nextSchema, `${pointer}/${key}`);\n        });\n    } else if (dataType === \"array\") {\n        data.forEach((next, key) => {\n            const nextSchema = core.step(key, schema, data, pointer);\n            core.each(next, callback, nextSchema, `${pointer}/${key}`);\n        });\n    }\n}\n\n\nmodule.exports = each;\n","const gp = require(\"gson-pointer\");\nconst getTypeDefs = require(\"./schema/getTypeDefs\");\nconst isObject = value => Object.prototype.toString.call(value) === \"[object Object]\";\n\n\nfunction nextTypeDefs(schema, pointer) {\n    if (this.callback(schema, pointer) === true) { // eslint-disable-line no-invalid-this\n        return; // stop iteration\n    }\n\n    const defs = getTypeDefs(schema);\n    // eslint-disable-next-line no-invalid-this\n    defs.forEach(next => this.nextTypeDefs(next.def, gp.join(pointer, next.pointer, false)));\n}\n\n\nfunction eachDefinition(walk, schema, pointer) {\n    Object.keys(schema.definitions)\n        .forEach(defId => {\n            if (!isObject(schema.definitions[defId])) {\n                console.log(`Invalid schema in ${pointer}/definitions/${defId}`);\n                return;\n            }\n            walk.nextTypeDefs(schema.definitions[defId], gp.join(pointer, \"definitions\", defId, false));\n        });\n}\n\n\nmodule.exports = function eachSchema(schema, callback, pointer = \"#\") {\n    const walk = { callback, nextTypeDefs };\n    walk.nextTypeDefs(schema, pointer);\n\n    if (schema.definitions == null) {\n        return;\n    }\n\n    walk.callback = (defschema, schemaPointer) => {\n        callback(defschema, schemaPointer);\n        if (defschema.definitions != null) {\n            eachDefinition(walk, defschema, schemaPointer);\n        }\n    };\n\n    eachDefinition(walk, schema, pointer);\n};\n","\n/**\n * Returns a list of possible child-schemas for the given property key. In case of a oneOf selection, multiple schemas\n * could be added at the given property (e.g. item-index), thus an array of options is returned. In all other cases\n * a list with a single item will be returned\n *\n * @param  {Core} core          - core to use\n * @param  {String} property    - parent schema of following property\n * @param  {Object} [schema]    - parent schema of following property\n * @return {Object}\n */\nmodule.exports = function getChildSchemaSelection(core, property, schema = core.rootSchema) {\n    const result = core.step(property, schema, {}, \"#\");\n\n    if (result.type === \"error\") {\n        if (result.code === \"one-of-error\") {\n            return result.data.oneOf;\n        }\n        return result;\n    }\n\n    return [result];\n};\n","const gp = require(\"gson-pointer\");\nconst emptyObject = {};\n\n\n/**\n * Returns the json-schema of a data-json-pointer.\n *\n *  Notes\n *      - Uses core.step to walk through data and schema\n *\n * @param  {CoreInterface} core\n * @param  {String} pointer     - json pointer in data to get the json schema for\n * @param  {Mixed} [data]       - the data object, which includes the json pointers value. This is optional, as\n *                                 long as no oneOf, anyOf, etc statement is part of the pointers schema\n * @param  {Object} [schema]    - the json schema to iterate. Defaults to core.rootSchema\n * @return {Object|Error} json schema object of the json-pointer or an error\n */\nfunction getSchema(core, pointer, data, schema = core.rootSchema) {\n    const frags = gp.split(pointer);\n    return _get(core, schema, frags, pointer, data);\n}\n\n\nfunction _get(core, schema, frags, pointer, data = emptyObject) {\n    if (frags.length === 0) {\n        return schema;\n    }\n\n    const key = frags.shift(); // step key\n    schema = core.step(key, schema, data, pointer); // step schema\n    if (schema && schema.type === \"error\") {\n        return schema;\n    }\n    data = data[key]; // step data\n    return _get(core, schema, frags, `${pointer}/${key}`, data);\n}\n\n\nmodule.exports = getSchema;\n","/* eslint quote-props: 0, max-statements-per-line: [\"error\", { \"max\": 2 }] */\nconst resolveOneOfFuzzy = require(\"./resolveOneOf.fuzzy\");\nconst getTypeOf = require(\"./getTypeOf\");\nconst merge = require(\"./utils/merge\");\nconst copy = require(\"./utils/copy\");\nconst settings = require(\"./config/settings\");\n\n\nlet cache;\nfunction shouldResolveRef(schema, pointer) {\n    // ensure we refactored consistently\n    if (pointer == null) { throw new Error(\"Missing pointer\"); }\n\n    const { $ref } = schema;\n    if ($ref == null) { return true; }\n\n    const value = (cache[pointer] == null || cache[pointer][$ref] == null) ? 0 : cache[pointer][$ref];\n    return value < settings.GET_TEMPLATE_RECURSION_LIMIT;\n}\n\nfunction resolveRef(core, schema, pointer) {\n    // ensure we refactored consistently\n    if (pointer == null) { throw new Error(\"missing pointer\", pointer); }\n\n    const { $ref } = schema;\n    if ($ref == null) { return schema; }\n\n    // @todo pointer + ref is redundant?\n    cache[pointer] = cache[pointer] || {};\n    cache[pointer][$ref] = cache[pointer][$ref] || 0;\n    cache[pointer][$ref] += 1;\n    return core.resolveRef(schema);\n}\n\n\nfunction convertValue(type, value) {\n    if (type === \"string\") {\n        return JSON.stringify(value);\n    } else if (typeof value !== \"string\") {\n        return null;\n    }\n    try {\n        value = JSON.parse(value);\n        if (typeof value === type) {\n            return value;\n        }\n    } catch (e) {} // eslint-disable-line no-empty\n    return null;\n}\n\n/**\n * Resolves $ref, allOf and anyOf schema-options, returning a combined json-schema.\n * Also returns a pointer-property on schema, that must be used as current pointer.\n * @param  {Core} core\n * @param  {JSONSchema} schema\n * @param  {any} data\n * @param  {JSONPointer} pointer\n * @return {JSONSchem} resolved json-schema or input-schema\n */\nfunction createTemplateSchema(core, schema, data, pointer) {\n    // invalid schema\n    if (getTypeOf(schema) !== \"object\") {\n        return Object.assign({ pointer }, schema);\n    }\n    // return if reached recursion limit\n    if (shouldResolveRef(schema, pointer) === false && data == null) { return false; }\n\n    // resolve $ref and copy schema\n    let templateSchema = copy(resolveRef(core, schema, pointer));\n\n    if (Array.isArray(schema.anyOf) && schema.anyOf.length > 0) {\n        // test if we may resolve\n        if (shouldResolveRef(schema.anyOf[0], `${pointer}/anyOf/0`)) {\n            const resolvedAnyOf = resolveRef(core, schema.anyOf[0], `${pointer}/anyOf/0`);\n            templateSchema = merge(templateSchema, resolvedAnyOf);\n            // add pointer return-value, if any\n            templateSchema.pointer = schema.anyOf[0].$ref || templateSchema.pointer;\n        }\n        delete templateSchema.anyOf;\n    }\n\n    // resolve allOf\n    if (Array.isArray(schema.allOf)) {\n        for (let i = 0, l = schema.allOf.length; i < l; i += 1) {\n            // test if we may resolve\n            if (shouldResolveRef(schema.allOf[i], `${pointer}/allOf/${i}`)) {\n                templateSchema = merge(templateSchema, resolveRef(core, schema.allOf[i], `${pointer}/allOf/${i}`));\n                // add pointer return-value, if any\n                templateSchema.pointer = schema.allOf[i].$ref || templateSchema.pointer;\n            }\n        }\n        delete templateSchema.allOf;\n    }\n\n    templateSchema.pointer = templateSchema.pointer || schema.$ref || pointer;\n    return templateSchema;\n}\n\n/**\n * Create data object matching the given schema\n *\n * @param  {CoreInterface} core     - json schema core\n * @param  {Mixed} [data]           - optional template data\n * @param  {Object} [schema]        - json schema, defaults to rootSchema\n * @return {Mixed} created template data\n */\nfunction getTemplate(core, data, schema, pointer) {\n    if (schema == null) { throw new Error(\"getTemplate: missing schema for data\", data); }\n    if (pointer == null) { throw new Error(\"Missing pointer\"); }\n\n    // resolve $ref references, allOf and first anyOf definitions\n    schema = createTemplateSchema(core, schema, data, pointer);\n    if (schema === false) { return undefined; }\n    pointer = schema.pointer;\n\n    if (schema.oneOf) {\n        // find correct schema for data\n        const resolvedSchema = resolveOneOfFuzzy(core, data, schema);\n        if (data == null && resolvedSchema.type === \"error\") {\n            schema = schema.oneOf[0];\n        } else if (resolvedSchema.type === \"error\") {\n            // @todo - check: do not return schema, but either input-data or undefined (clearing wrong data)\n            return data;\n        } else {\n            schema = resolvedSchema;\n        }\n    }\n\n    if (schema.type == null) {\n        return undefined;\n    }\n\n    // reset invalid type\n    if (data != null && getTypeOf(data) !== schema.type) {\n        data = convertValue(schema.type, data);\n    }\n\n    if (TYPE[schema.type] == null) { // eslint-disable-line no-use-before-define\n        throw new Error(`Unsupported type '${schema.type} in ${JSON.stringify(schema)}'`);\n    }\n\n    const templateData = TYPE[schema.type](core, schema, data, pointer); // eslint-disable-line no-use-before-define\n    return templateData;\n}\n\n\nconst TYPE = {\n    \"string\": (core, schema, data) => getDefault(schema, data, \"\"),\n    \"number\": (core, schema, data) => getDefault(schema, data, 0),\n    \"integer\": (core, schema, data) => getDefault(schema, data, 0),\n    \"boolean\": (core, schema, data) => getDefault(schema, data, false),\n    \"object\": (core, schema, data, pointer) => {\n        const template = schema.default === undefined ? {} : schema.default;\n        const d = {}; // do not assign data here, to keep ordering from json-schema\n\n        if (schema.properties) {\n            Object.keys(schema.properties).forEach(key => {\n                const value = (data == null || data[key] == null) ? template[key] : data[key];\n                d[key] = getTemplate(core, value, schema.properties[key], `${pointer}/properties/${key}`);\n            });\n        }\n\n        if (data) {\n            // merge any missing data (additionals) to resulting object\n            Object.keys(data).forEach(key => (d[key] == null && (d[key] = data[key])));\n        }\n\n        // returns object, which is ordered by json-schema\n        return d;\n    },\n    // build array type of items, ignores additionalItems\n    \"array\": (core, schema, data, pointer) => {\n        const template = schema.default === undefined ? [] : schema.default;\n        const d = data || [];\n        schema.minItems = schema.minItems || 0;\n\n        // items are undefined\n        if (schema.items == null) {\n            return d;\n        }\n\n        // build defined set of items\n        if (Array.isArray(schema.items)) {\n            for (let i = 0, l = Math.min(schema.minItems, schema.items.length); i < l; i += 1) {\n                d[i] = getTemplate(core, d[i] == null ? template[i] : d[i], schema.items[i], `${pointer}/items/${i}`);\n            }\n            return d;\n        }\n\n        // abort if the schema is invalid\n        if (getTypeOf(schema.items) !== \"object\") {\n            return d;\n        }\n\n        // resolve allOf and first anyOf definition\n        const templateSchema = createTemplateSchema(core, schema.items, data, pointer);\n        if (templateSchema === false) {\n            return d;\n        }\n        pointer = templateSchema.pointer || pointer;\n\n        // build oneOf\n        if (templateSchema.oneOf && d.length === 0) {\n            const oneOfSchema = templateSchema.oneOf[0];\n            for (let i = 0; i < schema.minItems; i += 1) {\n                d[i] = getTemplate(core, d[i] == null ? template[i] : d[i], oneOfSchema, `${pointer}/oneOf/0`);\n            }\n            return d;\n        }\n\n        if (templateSchema.oneOf && d.length > 0) {\n            const itemCount = Math.max(schema.minItems, d.length);\n            for (let i = 0; i < itemCount; i += 1) {\n                const value = d[i] == null ? template[i] : d[i];\n                const one = resolveOneOfFuzzy(core, value, templateSchema);\n                if (one) {\n                    d[i] = getTemplate(core, value, one, `${pointer}/oneOf/${i}`);\n                } else {\n                    d[i] = value;\n                }\n            }\n            return d;\n        }\n\n        // build items-definition\n        if (templateSchema.type) {\n            for (let i = 0, l = Math.max(schema.minItems, d.length); i < l; i += 1) {\n                d[i] = getTemplate(core, d[i] == null ? template[i] : d[i], templateSchema, `${pointer}/items`);\n            }\n            return d;\n        }\n\n        return d;\n    }\n};\n\n\nfunction getDefault(schema, templateValue, initValue) {\n    if (templateValue != null) {\n        return templateValue;\n    } else if (schema.default === undefined && Array.isArray(schema.enum)) {\n        return schema.enum[0];\n    } else if (schema.default === undefined) {\n        return initValue;\n    }\n    return schema.default;\n}\n\n\nmodule.exports = (core, data, schema = core.rootSchema) => {\n    cache = { \"mi\": \"..\" };\n    return getTemplate(core, data, schema, \"#\");\n};\n","const toString = Object.prototype.toString;\n\nmodule.exports = function getTypeOf(value) {\n    // eslint-disable-next-line newline-per-chained-call\n    return toString.call(value).match(/\\s([^\\]]+)\\]/).pop().toLowerCase();\n};\n","/**\n * Test if the data is valid according to the given schema\n *\n * @param  {CoreInterface} core - validator\n * @param  {Mixed} value        - value to validate\n * @param  {Schema} [schema]    - json schema\n * @param  {String} [pointer]   - json pointer pointing to value\n * @return {Boolean} if schema does match given value\n */\nmodule.exports = function isValid(core, value, schema = core.rootSchema, pointer = \"#\") {\n    return core.validate(value, schema, pointer).length === 0;\n};\n","const copy = require(\"./utils/copy\");\nconst merge = require(\"./utils/merge\");\nconst errors = require(\"./validation/errors\");\n\n\nmodule.exports = function resolveAllOf(core, data, schema = core.rootSchema, pointer = \"#\") {\n    let mergedSchema = copy(schema);\n    for (let i = 0; i < schema.allOf.length; i += 1) {\n        const allOfSchema = core.resolveRef(schema.allOf[i]);\n        if (core.isValid(data, allOfSchema, pointer) === false) {\n            return errors.allOfError({ value: data, pointer, allOf: JSON.stringify(schema.allOf) });\n        }\n        mergedSchema = merge(mergedSchema, allOfSchema);\n    }\n\n    delete mergedSchema.allOf;\n    return mergedSchema;\n};\n","const copy = require(\"./utils/copy\");\nconst merge = require(\"./utils/merge\");\nconst errors = require(\"./validation/errors\");\n\n\nmodule.exports = function resolveAnyOf(core, data, schema = core.rootSchema, pointer = \"#\") {\n    let found = false;\n    let mergedSchema = copy(schema);\n    for (let i = 0; i < schema.anyOf.length; i += 1) {\n        const anyOfSchema = core.resolveRef(schema.anyOf[i]);\n        if (core.isValid(data, schema.anyOf[i], pointer)) {\n            found = true;\n            mergedSchema = merge(mergedSchema, anyOfSchema);\n        }\n    }\n\n    if (found === false) {\n        return errors.anyOfError({ value: data, pointer, anyOf: JSON.stringify(schema.anyOf) });\n    }\n\n    delete mergedSchema.anyOf;\n    return mergedSchema;\n};\n","const filter = require(\"./utils/filter\");\nconst flattenArray = require(\"./utils/flattenArray\");\nconst getTypeOf = require(\"./getTypeOf\");\nconst { DECLARATOR_ONEOF } = require(\"./config/settings\");\n\n\n/**\n * Returns a ranking for the data and given schema\n *\n * @param  {CoreInterface} core\n * @param  {Object} one     - json schema type: object\n * @param  {Object} data\n * @param  {String} pointer\n * @return {Number} ranking value (higher is better)\n */\nfunction fuzzyObjectValue(core, one, data, pointer) {\n    if (data == null || one.properties == null) {\n        return -1;\n    }\n\n    let value = 0;\n    const keys = Object.keys(one.properties);\n    for (var i = 0; i < keys.length; i += 1) {\n        const key = keys[i];\n        if (data[key] != null && core.isValid(data[key], one.properties[key], pointer)) {\n            value += 1;\n        }\n    }\n\n    return value;\n}\n\n/**\n * Selects and returns a oneOf schema for the given data\n *\n * @param  {CoreInterface} core\n * @param  {Mixed} data\n * @param  {Object} schema      - current json schema containing property oneOf\n * @param  {String} pointer     - json pointer to data\n * @return {Object|Error} oneOf schema or an error\n */\nmodule.exports = function resolveOneOf(core, data, schema = core.rootSchema, pointer = \"#\") {\n    // !keyword: oneOfProperty\n    // an additional <DECLARATOR_ONEOF> (default `oneOfProperty`) on the schema will exactly determine the\n    // oneOf value (if set in data)\n\n    // @fixme\n    // abort if no data is given an DECLARATOR_ONEOF is set (used by getChildSchemaSelection)\n    // this case (data != null) should not be necessary\n    if (data != null && schema[DECLARATOR_ONEOF]) {\n\n        const errors = [];\n        const oneOfProperty = schema[DECLARATOR_ONEOF];\n        const oneOfValue = data[schema[DECLARATOR_ONEOF]];\n\n        if (oneOfValue === undefined) {\n            return core.errors.missingOneOfPropertyError({ property: oneOfProperty, pointer });\n        }\n\n        for (let i = 0; i < schema.oneOf.length; i += 1) {\n            const one = core.resolveRef(schema.oneOf[i]);\n            const oneOfPropertySchema = core.step(oneOfProperty, one, data, pointer);\n\n            if (oneOfPropertySchema && oneOfPropertySchema.type === \"error\") {\n                return oneOfPropertySchema;\n            }\n\n            let result = flattenArray(core.validate(oneOfValue, oneOfPropertySchema, pointer));\n            result = result.filter(filter.errorOrPromise);\n\n            if (result.length > 0) {\n                errors.push(...result);\n            } else {\n                return schema.oneOf[i];\n            }\n        }\n\n        return core.errors.oneOfPropertyError({ property: oneOfProperty, value: oneOfValue, pointer, errors });\n    }\n\n    // keyword: oneOf\n    const matches = [];\n    for (let i = 0; i < schema.oneOf.length; i += 1) {\n        const one = core.resolveRef(schema.oneOf[i]);\n        if (core.isValid(data, one, pointer)) {\n            matches.push(one);\n        }\n    }\n\n    if (matches.length === 1) {\n        return matches[0];\n    }\n\n    // fuzzy match oneOf\n    if (getTypeOf(data) === \"object\") {\n        let schemaOfItem;\n        let fuzzyGreatest = 0;\n\n        for (let i = 0; i < schema.oneOf.length; i += 1) {\n            const one = core.resolveRef(schema.oneOf[i]);\n            const fuzzyValue = fuzzyObjectValue(core, one, data);\n\n            if (fuzzyGreatest < fuzzyValue) {\n                fuzzyGreatest = fuzzyValue;\n                schemaOfItem = schema.oneOf[i];\n            }\n        }\n\n        if (schemaOfItem === undefined) {\n            return core.errors.oneOfError({ value: JSON.stringify(data), pointer, oneOf: schema.oneOf });\n        }\n\n        return schemaOfItem;\n    }\n\n    if (matches.length > 1) {\n        return core.errors.multipleOneOfError({ matches, data, pointer });\n    }\n\n    return core.errors.oneOfError({ value: JSON.stringify(data), pointer, oneOf: schema.oneOf });\n};\n","const filter = require(\"./utils/filter\");\nconst flattenArray = require(\"./utils/flattenArray\");\n\n\n/**\n * Selects and returns a oneOf schema for the given data\n *\n * @param  {CoreInterface} core - validator\n * @param  {Mixed} data\n * @param  {Object} schema      - current json schema containing property oneOf\n * @param  {String} pointer     - json pointer to data\n * @return {Object|Error} oneOf schema or an error\n */\nmodule.exports = function resolveOneOf(core, data, schema = core.rootSchema, pointer = \"#\") {\n    const matches = [];\n    const errors = [];\n    for (let i = 0; i < schema.oneOf.length; i += 1) {\n        const one = core.resolveRef(schema.oneOf[i]);\n\n        let result = flattenArray(core.validate(data, one, pointer));\n        result = result.filter(filter.errorOrPromise);\n\n        if (result.length > 0) {\n            errors.push(...result);\n        } else {\n            matches.push(one);\n        }\n    }\n\n    if (matches.length === 1) {\n        return matches[0];\n    }\n    if (matches.length > 1) {\n        return core.errors.multipleOneOfError({ value: data, pointer, matches });\n    }\n\n    return core.errors.oneOfError({ value: JSON.stringify(data), pointer, oneOf: schema.oneOf, errors });\n};\n","module.exports = function resolveRef(schema, rootSchema) {\n    if (schema == null || schema.$ref == null) {\n        return schema;\n    }\n\n    const resolvedSchema = rootSchema.getRef(schema);\n    return resolvedSchema;\n};\n","module.exports = function resolveRefMerge(schema, rootSchema) {\n    if (schema == null || schema.$ref == null) {\n        return schema;\n    }\n\n    const resolvedSchema = rootSchema.getRef(schema);\n    const mergedSchema = Object.assign({}, resolvedSchema, schema);\n    delete mergedSchema.$ref;\n    // @todo the following might not be safe nor incomplete\n    Object.defineProperty(mergedSchema, \"__ref\", { enumerable: false, value: schema.__ref });\n    Object.defineProperty(mergedSchema, \"getRoot\", { enumerable: false, value: schema.getRoot });\n    return mergedSchema;\n};\n\n","const gp = require(\"gson-pointer\");\nconst gq = require(\"gson-query\");\nconst getTypeId = require(\"./getTypeId\");\nconst types = require(\"./types\");\nconst isObject = value => Object.prototype.toString.call(value) === \"[object Object]\";\n\n\n/**\n * Returns a list of all (direct) type definitions from the given schema\n * @param  {Object} schema\n * @return {Array} list of type definition, given as { pointer, def }\n */\nmodule.exports = function getTypeDefs(schema) {\n    const defs = [];\n    const id = getTypeId(schema);\n    if (id == null) {\n        return defs;\n    }\n    const type = types[id];\n    if (type.definitions == null) {\n        return defs;\n    }\n    type.definitions.forEach(query => {\n        gq.run(schema, query, (value, key, parent, pointer) => {\n            if (isObject(value) && getTypeId(value)) {\n                defs.push({ pointer: gp.join(gp.split(pointer), false), def: value });\n            }\n        });\n    });\n    return defs;\n};\n","const types = require(\"./types\");\nconst isObject = value => Object.prototype.toString.call(value) === \"[object Object]\";\nconst typeKeywords = Object.keys(types).filter(id => types[id].type === false);\n\n\n/**\n * @throws Error    on multiple matches (invalid schema)\n *\n * Returns the type id of a schema object\n * @param  {Object} schema\n * @return {undefined|string} type id, if found\n */\nmodule.exports = function getTypeId(schema) {\n    if (isObject(schema) === false) {\n        return undefined;\n    }\n\n    if (schema.enum) {\n        return \"enum\";\n    }\n\n    if (types[schema.type]) {\n        return schema.type;\n    }\n\n    const ids = typeKeywords.filter(type => schema[type]);\n\n    if (ids.length === 1) {\n        return ids[0];\n    }\n\n    if (ids.length === 0) {\n        // @expensive, guess type object\n        for (let i = 0, l = types.object.keywords.length; i < l; i += 1) {\n            const keyword = types.object.keywords[i];\n            if (schema.hasOwnProperty(keyword)) {\n                return \"object\";\n            }\n        }\n\n        // @expensive, guess type array\n        for (let i = 0, l = types.array.keywords.length; i < l; i += 1) {\n            const keyword = types.array.keywords[i];\n            if (schema.hasOwnProperty(keyword)) {\n                return \"array\";\n            }\n        }\n\n        return undefined;\n    }\n\n    throw new Error(`Mutiple typeIds [${ids.join(\", \")}] matched in ${JSON.stringify(schema)}`);\n};\n","module.exports = {\n    $ref: {\n        type: false\n    },\n    allOf: {\n        type: false,\n        definitions: [\"allOf/*\"]\n    },\n    anyOf: {\n        type: false,\n        definitions: [\"anyOf/*\"]\n    },\n    array: {\n        type: true,\n        // ignore additionalItems:TypeDef, when items:TypeDef\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\", \"items\", \"items/*\", \"additionalItems\"],\n        validationKeywords: [\"minItems\", \"maxItems\", \"uniqueItems\"],\n        keywords: [\"items\", \"additionalItems\", \"minItems\", \"maxItems\", \"uniqueItems\"]\n    },\n    \"boolean\": {\n        type: true\n    },\n    \"enum\": {\n        type: false\n    },\n    integer: {\n        type: true,\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\"],\n        validationKeywords: [\"minimum\", \"maximum\", \"multipleOf\"]\n    },\n    not: {\n        type: false,\n        definitions: [\"not\"]\n    },\n    number: {\n        type: true,\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\"],\n        validationKeywords: [\"minimum\", \"maximum\", \"multipleOf\"]\n    },\n    \"null\": {\n        type: true\n    },\n    object: {\n        type: true,\n        // patternProperties also validate properties\n        // dependencies:(string, TypeDef) extend current TypeDef\n        // additional Properties validate only remaining properties (after properties & pattern)\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\",\n            \"properties/*\", \"additionalProperties\", \"patternProperties/*\", \"dependencies/*\"],\n        validationKeywords: [\"minProperties\", \"maxProperties\", \"required\"],\n        keywords: [\"properties\", \"additionalProperties\", \"patternProperties\", \"dependencies\", \"minProperties\",\n            \"maxProperties\", \"required\"]\n    },\n    oneOf: {\n        type: false,\n        definitions: [\"oneOf/*\"]\n    },\n    string: {\n        type: true,\n        definitions: [\"allOf/*\", \"anyOf/*\", \"oneOf/*\", \"not\"],\n        validationKeywords: [\"minLength\", \"maxLength\", \"pattern\"]\n    }\n};\n","const getTypeOf = require(\"./getTypeOf\");\nconst createSchemaOf = require(\"./createSchemaOf\");\nconst errors = require(\"./validation/errors\");\nconst merge = require(\"./utils/merge\");\n\n\nconst stepType = {\n\n    array: (core, key, schema, data, pointer) => {\n        const itemsType = getTypeOf(schema.items);\n\n        if (itemsType === \"object\") {\n            // oneOf\n            if (Array.isArray(schema.items.oneOf)) {\n                return core.resolveOneOf(data[key], schema.items, pointer) || false;\n            }\n\n            // anyOf\n            if (Array.isArray(schema.items.anyOf)) {\n                // schema of current object\n                return core.resolveAnyOf(data[key], schema.items, pointer);\n            }\n\n            // allOf\n            if (Array.isArray(schema.items.allOf)) {\n                return core.resolveAllOf(data[key], schema.items, pointer);\n            }\n\n            // spec: ignore additionalItems, when items is schema-object\n            return core.resolveRef(schema.items);\n        }\n\n        if (itemsType === \"array\") {\n            if (schema.items[key]) {\n                return core.resolveRef(schema.items[key]);\n            }\n\n            if (schema.additionalItems === false) {\n                return errors.additionalItemsError({ key, value: data[key], pointer });\n            }\n\n            if (schema.additionalItems === true || schema.additionalItems === undefined) {\n                return createSchemaOf(data[key]);\n            }\n\n            if (getTypeOf(schema.additionalItems) === \"object\") {\n                return schema.additionalItems;\n            }\n\n            throw new Error(`Invalid schema ${JSON.stringify(schema, null, 4)} for ${JSON.stringify(data, null, 4)}`);\n        }\n\n        if (schema.additionalItems !== false && data[key]) {\n            // @todo reevaluate: incomplete schema is created here\n            // @todo support additionalItems: {schema}\n            return createSchemaOf(data[key]);\n        }\n\n        return new Error(`Invalid array schema for ${key} at ${pointer}`);\n    },\n\n    object: (core, key, schema, data, pointer) => {\n\n        if (Array.isArray(schema.oneOf)) {\n            // update current schema\n            const oneOfSchema = core.resolveOneOf(data, schema, pointer);\n            // resolveOneOf does currently not apply merge with base schema\n            schema = merge(schema, oneOfSchema);\n            if (schema && schema.type === \"error\") {\n                return schema;\n            }\n        }\n\n        if (Array.isArray(schema.anyOf)) {\n            // update current schema\n            schema = core.resolveAnyOf(data, schema, pointer);\n            if (schema && schema.type === \"error\") {\n                return schema;\n            }\n        }\n\n        if (Array.isArray(schema.allOf)) {\n            // update current schema\n            schema = core.resolveAllOf(data, schema, pointer);\n            if (schema && schema.type === \"error\") {\n                return schema;\n            }\n        }\n\n        let targetSchema;\n\n        // step into object-properties\n        if (schema.properties && schema.properties[key] !== undefined) {\n            // @todo patternProperties also validate properties\n\n            targetSchema = core.resolveRef(schema.properties[key]);\n            if (targetSchema && targetSchema.type === \"error\") {\n                return targetSchema;\n            }\n\n            // check if there is a oneOf selection, which must be resolved\n            if (targetSchema && Array.isArray(targetSchema.oneOf)) {\n                // @special case: this is a mix of a schema and optional definitions\n                // we resolve the schema here and add the original schema to `oneOfSchema`\n                let resolvedSchema = core.resolveOneOf(data[key], targetSchema, `${pointer}/${key}`);\n                resolvedSchema = JSON.parse(JSON.stringify(resolvedSchema));\n                resolvedSchema.variableSchema = true;\n                resolvedSchema.oneOfSchema = targetSchema;\n                return resolvedSchema;\n            }\n\n            // resolved schema or error\n            if (targetSchema) {\n                return targetSchema;\n            }\n        }\n\n        // find matching property key\n        if (getTypeOf(schema.patternProperties) === \"object\") {\n            let regex;\n            const patterns = Object.keys(schema.patternProperties);\n            for (let i = 0, l = patterns.length; i < l; i += 1) {\n                regex = new RegExp(patterns[i]);\n                if (regex.test(key)) {\n                    return schema.patternProperties[patterns[i]];\n                }\n            }\n        }\n\n        if (getTypeOf(schema.additionalProperties) === \"object\") {\n            return schema.additionalProperties;\n        }\n\n        if (schema.additionalProperties === true) {\n            return createSchemaOf(data);\n        }\n\n        return errors.unknownPropertyError({ property: key, value: data, pointer });\n    }\n};\n\n\n/**\n * Returns the json-schema of the given object property or array item.\n * e.g. it steps by one key into the data\n *\n *  This helper determines the location of the property within the schema (additional properties, oneOf, ...) and\n *  returns the correct schema.\n *\n * @param  {CoreInterface} core     - validator\n * @param  {String|Number} key      - property-name or array-index\n * @param  {Object} schema          - json schema of current data\n * @param  {Object|Array} data      - parent of key\n * @param  {String} pointer\n * @return {Object|Error} Schema or Error if failed resolving key\n */\nfunction step(core, key, schema, data, pointer = \"#\") {\n    const expectedType = schema.type || getTypeOf(data);\n    if (stepType[expectedType]) {\n        return stepType[expectedType](core, key, schema, data, pointer);\n    }\n    return new Error(`Unsupported schema type ${schema.type} for key ${key}`);\n}\n\n\nmodule.exports = step;\n","const strings = require(\"../config/strings\");\nconst render = require(\"./render\");\n\n/**\n * Renders the given string as defined in __@see config/strings.js__\n * @param  {String} keyword\n * @param  {Object} data        - template data\n * @param  {String} fallback    - fallback template\n * @return {String} resultugn string\n */\nmodule.exports = function __(keyword, data, fallback = keyword) {\n    const template = strings[keyword] || fallback;\n    return render(template, data);\n};\n","module.exports = value => JSON.parse(JSON.stringify(value));\n","const __ = require(\"./__\");\n\nfunction dashCase(str) {\n    return str.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n}\n\n\n/**\n * Creates a custom Error-Constructor which instances may be identified by `customError instanceof Error`. Its messages\n * are defined by strings-object __@see config/strings.js__sa\n * @param  {String} name    - id of error (camelcased)\n * @return {Function} Error-Contructor\n */\nmodule.exports = function createCustomError(name) {\n    return function (data) {\n        return {\n            type: \"error\",\n            name,\n            code: dashCase(name),\n            message: __(name, data),\n            data\n        };\n    };\n\n    // function CustomError(data) {\n    //     const message = __(name, data);\n    //     const error = Error.call(this, message);\n    //     this.name = name;\n    //     this.code = dashCase(name);\n    //     this.stack = error.stack;\n    //     this.message = message;\n    //     this.data = data;\n    // }\n    // CustomError.prototype = Object.create(Error.prototype);\n    // CustomError.prototype.name = name;\n    // return CustomError;\n};\n","function isPromise(obj) {\n    return obj instanceof Promise;\n}\n\nfunction isError(obj) {\n    return obj && obj.type === \"error\";\n}\n\nmodule.exports = {\n    isError,\n    isPromise,\n    errorOrPromise(error) {\n        return isError(error) || isPromise(error);\n    },\n    errorsOnly(error) {\n        return isError(error);\n    }\n};\n","function flattenArray(list, result = []) {\n    for (let i = 0; i < list.length; i += 1) {\n        if (Array.isArray(list[i])) {\n            flattenArray(list[i], result);\n        } else {\n            result.push(list[i]);\n        }\n    }\n    return result;\n}\n\nmodule.exports = flattenArray;\n","const deepmerge = require(\"deepmerge\");\nconst overwriteMerge = (destinationArray, sourceArray) => sourceArray;\nmodule.exports = (a, b) => deepmerge(a, b, { arrayMerge: overwriteMerge });\n","/* eslint no-bitwise: 0 */\n\n/**\n * taken from punycode@2.1.0\n *\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n    const output = [];\n    let counter = 0;\n    const length = string.length;\n    while (counter < length) {\n        const value = string.charCodeAt(counter++);\n        if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n            // It's a high surrogate, and there is a next character.\n            const extra = string.charCodeAt(counter++);\n            // eslint-disable-next-line eqeqeq\n            if ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n                output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n            } else {\n                // It's an unmatched surrogate; only append this code unit, in case the\n                // next code unit is the high surrogate of a surrogate pair.\n                output.push(value);\n                counter--;\n            }\n        } else {\n            output.push(value);\n        }\n    }\n    return output;\n}\n\nmodule.exports = ucs2decode;\n","/**\n * Renders data into a string by {{variables}}.\n * Given a template string, removes all {{property}} substrings and replaces them with the property in the given data\n *\n * @param {String} template     - template string containing variables in handelbars/mustache style\n * @param {Object} data         - flat object containing properties matching variables\n * @return {String} rendered string\n */\nmodule.exports = function render(template, data = {}) {\n    return template.replace(/\\{\\{\\w+\\}\\}/g, match => data[match.replace(/[{}]/g, \"\")]);\n};\n","const getTypeOf = require(\"./getTypeOf\");\nconst filter = require(\"./utils/filter\");\nconst flattenArray = require(\"./utils/flattenArray\");\n\n\nfunction getJsonSchemaType(value, expectedType) {\n    let jsType = getTypeOf(value);\n\n    if (\n        jsType === \"number\" && (expectedType === \"integer\" ||\n        (Array.isArray(expectedType) && expectedType.includes(\"integer\")))\n    ) {\n        jsType = Number.isInteger(value) ? \"integer\" : \"number\";\n    }\n    return jsType;\n}\n\n\n/**\n * Validate data by a json schema\n *\n * @param  {CoreInterface} core - validator\n * @param  {Mixed} value        - value to validate\n * @param  {Schema} [schema]     - json schema, defaults to rootSchema\n * @param  {String} [pointer]   - json pointer pointing to value (used for error-messages only)\n * @return {Array} list of errors or empty\n */\nmodule.exports = function validate(core, value, schema = core.rootSchema, pointer = \"#\") {\n    if (schema.type === \"error\") {\n        return [schema];\n    }\n\n    schema = core.resolveRef(schema);\n\n    const receivedType = getJsonSchemaType(value, schema.type);\n    const expectedType = schema.type || receivedType;\n\n    if (receivedType !== expectedType && (!Array.isArray(expectedType) || !expectedType.includes(receivedType))) {\n        return [core.errors.typeError({ received: receivedType, expected: expectedType, value, pointer })];\n    }\n\n    if (core.validateType[receivedType] == null) {\n        return [core.errors.invalidTypeError({ receivedType, pointer })];\n    }\n\n    const errors = flattenArray(core.validateType[receivedType](core, schema, value, pointer));\n    // also promises may be passed along (validateAsync)\n    return errors.filter(filter.errorOrPromise);\n};\n","const filter = require(\"./utils/filter\");\nconst flattenArray = require(\"./utils/flattenArray\");\n\n\nfunction createErrorNotification(onError) {\n    return function notifyError(error) {\n        if (Array.isArray(error)) {\n            error = flattenArray(error);\n            error.forEach(notifyError);\n            return error;\n        }\n        if (filter.isError(error)) {\n            onError(error);\n        }\n        return error;\n    };\n}\n\n\n/**\n * @async\n * Validate data by a json schema\n *\n * @param  {CoreInterface} core         - validator\n * @param  {Mixed} value                - value to validate\n * @param  {Object} options\n * @param  {Schema} options.schema      - json schema to use, defaults to core.rootSchema\n * @param  {String} options.pointer     - json pointer pointing to current value. Used in error reports\n * @param  {Function} options.onError   - will be called for each error as soon as it is resolved\n * @return {Promise<Array>} list of errors or empty\n */\nmodule.exports = function validateAsync(core, value, { schema = core.rootSchema, pointer = \"#\", onError }) {\n    let errors = core.validate(value, schema, pointer);\n\n    if (onError) {\n        errors = flattenArray(errors);\n        const notifyError = createErrorNotification(onError);\n        for (let i = 0; i < errors.length; i += 1) {\n            if (errors[i] instanceof Promise) {\n                errors[i].then(notifyError);\n            } else if (filter.isError(errors[i])) {\n                onError(errors[i]);\n            }\n        }\n    }\n\n    return Promise\n        .all(errors)\n        .then(flattenArray)\n        .then(resolvedErrors => resolvedErrors.filter(filter.errorsOnly))\n        .catch(e => {\n            console.log(\"Failed resolving promises\", e.message);\n            console.log(e.stack);\n            throw e;\n        });\n};\n","/* eslint no-invalid-this: 0 */\nconst createCustomError = require(\"../utils/createCustomError\");\n\n\nconst errors = {\n    additionalItemsError: createCustomError(\"AdditionalItemsError\"),\n    additionalPropertiesError: createCustomError(\"AdditionalPropertiesError\"),\n    anyOfError: createCustomError(\"AnyOfError\"),\n    allOfError: createCustomError(\"AllOfError\"),\n    enumError: createCustomError(\"EnumError\"),\n    formatUrlError: createCustomError(\"FormatUrlError\"),\n    formatUriError: createCustomError(\"FormatUriError\"),\n    formatDateTimeError: createCustomError(\"FormatDateTimeError\"),\n    formatEmailError: createCustomError(\"FormatEmailError\"),\n    formatHostnameError: createCustomError(\"FormatHostnameError\"),\n    formatIPV4Error: createCustomError(\"FormatIPV4Error\"),\n    formatIPV6Error: createCustomError(\"FormatIPV6Error\"),\n    formatRegExError: createCustomError(\"FormatRegExError\"),\n    invalidSchemaError: createCustomError(\"InvalidSchemaError\"),\n    invalidTypeError: createCustomError(\"InvalidTypeError\"),\n    maximumError: createCustomError(\"MaximumError\"),\n    maxItemsError: createCustomError(\"MaxItemsError\"),\n    maxLengthError: createCustomError(\"MaxLengthError\"),\n    maxPropertiesError: createCustomError(\"MaxPropertiesError\"),\n    minimumError: createCustomError(\"MinimumError\"),\n    minItemsError: createCustomError(\"MinItemsError\"),\n    minLengthError: createCustomError(\"MinLengthError\"),\n    minPropertiesError: createCustomError(\"MinPropertiesError\"),\n    missingDependencyError: createCustomError(\"MissingDependencyError\"),\n    missingOneOfPropertyError: createCustomError(\"MissingOneOfPropertyError\"),\n    multipleOfError: createCustomError(\"MultipleOfError\"),\n    multipleOneOfError: createCustomError(\"MultipleOneOfError\"),\n    noAdditionalPropertiesError: createCustomError(\"NoAdditionalPropertiesError\"),\n    notError: createCustomError(\"NotError\"),\n    oneOfError: createCustomError(\"OneOfError\"),\n    oneOfPropertyError: createCustomError(\"OneOfPropertyError\"),\n    patternError: createCustomError(\"PatternError\"),\n    patternPropertiesError: createCustomError(\"PatternPropertiesError\"),\n    requiredPropertyError: createCustomError(\"RequiredPropertyError\"),\n    typeError: createCustomError(\"TypeError\"),\n    undefinedValueError: createCustomError(\"UndefinedValueError\"),\n    uniqueItemsError: createCustomError(\"UniqueItemsError\"),\n    unknownPropertyError: createCustomError(\"UnknownPropertyError\"),\n    valueNotEmptyError: createCustomError(\"ValueNotEmptyError\")\n};\n\n\nmodule.exports = errors;\n","/* eslint-disable max-len */\nconst errors = require(\"./errors\");\nconst validUrl = require(\"valid-url\");\n\n// https://gist.github.com/marcelotmelo/b67f58a08bee6c2468f8\nconst isValidDateTime = new RegExp(\"^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\\\.[0-9]+)?(([Zz])|([\\\\+|\\\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$\");\n// https://stackoverflow.com/questions/23483855/javascript-regex-to-validate-ipv4-and-ipv6-address-no-hostnames\nconst isValidIPV4 = /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\\-]*[A-Za-z0-9])$|^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/;\nconst isValidIPV6 = /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\\-]*[A-Za-z0-9])$|^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/;\n\n\n// Default JSON-Schema formats: date-time, email, hostname, ipv4, ipv6, uri, uriref\nconst FormatValidation = {\n\n    \"date-time\": (core, schema, value, pointer) => {\n        if (value === \"\" || isValidDateTime.test(value)) {\n            if (new Date(value).toString() === \"Invalid Date\") {\n                return errors.formatDateTimeError({ value, pointer });\n            }\n            return undefined;\n        }\n        return errors.formatDateTimeError({ value, pointer });\n    },\n\n    email: (core, schema, value, pointer) => {\n        if (value === \"\" || value.includes(\"@\")) {\n            return undefined;\n        }\n        return errors.formatEmailError({ value, pointer });\n    },\n\n    hostname: (core, schema, value, pointer) => {\n        if (value === \"\" || /\\./.test(value)) {\n            return undefined;\n        }\n        return errors.formatHostnameError({ value, pointer });\n    },\n\n    ipv4: (core, schema, value, pointer) => {\n        if (value === \"\" || isValidIPV4.test(value)) {\n            return undefined;\n        }\n        return errors.formatIPV4Error({ value, pointer });\n    },\n\n    ipv6: (core, schema, value, pointer) => {\n        if (value === \"\" || isValidIPV6.test(value)) {\n            return undefined;\n        }\n        return errors.formatIPV6Error({ value, pointer });\n    },\n\n    regex: (core, schema, value, pointer) => {\n        if (typeof value === \"string\" && /\\\\Z$/.test(value) === false) {\n            return undefined;\n        }\n        return errors.formatRegExError({ value, pointer });\n    },\n    uri: (core, schema, value, pointer) => {\n        if (value === \"\" || validUrl.isUri(value)) {\n            return undefined;\n        }\n        return errors.formatUriError({ value, pointer });\n    },\n\n    url: (core, schema, value, pointer) => {\n        if (value === \"\" || validUrl.isWebUri(value)) {\n            return undefined;\n        }\n        return errors.formatUrlError({ value, pointer });\n    }\n};\n\n\nmodule.exports = FormatValidation;\n","const getTypeOf = require(\"../getTypeOf\");\nconst ucs2decode = require(\"../utils/punycode.ucs2decode\");\nconst settings = require(\"../config/settings\");\nconst FPP = settings.floatingPointPrecision;\n\n// list of validation keywords: http://json-schema.org/latest/json-schema-validation.html#rfc.section.5\nconst KeywordValidation = {\n\n    additionalProperties: (core, schema, value, pointer) => {\n        if (schema.additionalProperties === true || schema.additionalProperties == null) {\n            return undefined;\n        }\n\n        if (getTypeOf(schema.patternProperties) === \"object\" && schema.additionalProperties === false) {\n            // this is an arrangement with patternProperties. patternProperties validate before additionalProperties:\n            // https://spacetelescope.github.io/understanding-json-schema/reference/object.html#index-5\n            return undefined;\n        }\n\n        const errors = [];\n        let receivedProperties = Object.keys(value).filter(prop => settings.propertyBlacklist.includes(prop) === false);\n        const expectedProperties = Object.keys(schema.properties || {});\n\n        if (getTypeOf(schema.patternProperties) === \"object\") {\n            // filter received properties by matching patternProperties\n            const patterns = Object.keys(schema.patternProperties).map(pattern => new RegExp(pattern));\n            receivedProperties = receivedProperties.filter(prop => {\n                for (let i = 0; i < patterns.length; i += 1) {\n                    if (patterns[i].test(prop)) {\n                        return false; // remove\n                    }\n                }\n                return true;\n            });\n        }\n\n        // adds an error for each an unexpected property\n        for (let i = 0, l = receivedProperties.length; i < l; i += 1) {\n            const property = receivedProperties[i];\n            if (expectedProperties.indexOf(property) === -1) {\n                const isObject = typeof schema.additionalProperties === \"object\";\n\n                // additionalProperties { oneOf: [] }\n                if (isObject && Array.isArray(schema.additionalProperties.oneOf)) {\n                    const result = core.resolveOneOf(\n                        value[property], schema.additionalProperties, `${pointer}/${property}`\n                    );\n                    if (result.type === \"error\") {\n                        errors.push(core.errors.additionalPropertiesError({\n                            schema: schema.additionalProperties,\n                            property: receivedProperties[i],\n                            properties: expectedProperties,\n                            pointer,\n                            // pass all validation errors\n                            errors: result.data.errors\n                        }));\n\n                    } else {\n                        errors.push(core.validate(value[property], result, pointer));\n                    }\n\n                // additionalProperties {}\n                } else if (isObject) {\n                    if (core.validate(value[property], schema.additionalProperties, pointer).length !== 0) {\n                        errors.push(core.errors.additionalPropertiesError({\n                            schema: schema.additionalProperties,\n                            property: receivedProperties[i],\n                            properties: expectedProperties,\n                            pointer\n                        }));\n                    }\n\n                } else {\n                    errors.push(core.errors.noAdditionalPropertiesError(\n                        { property: receivedProperties[i], properties: expectedProperties, pointer }\n                    ));\n                }\n            }\n        }\n\n        return errors;\n    },\n\n    allOf: (core, schema, value, pointer) => {\n        if (Array.isArray(schema.allOf) === false) {\n            return undefined;\n        }\n\n        const errors = [];\n        schema.allOf.forEach(subSchema => {\n            errors.push(core.validate(value, subSchema, pointer));\n        });\n\n        return errors;\n    },\n\n    anyOf: (core, schema, value, pointer) => {\n        if (Array.isArray(schema.anyOf) === false) {\n            return undefined;\n        }\n\n        for (let i = 0; i < schema.anyOf.length; i += 1) {\n            if (core.isValid(value, schema.anyOf[i])) {\n                return undefined;\n            }\n        }\n\n        return core.errors.anyOfError({ anyOf: schema.anyOf, value, pointer });\n    },\n\n    dependencies: (core, schema, value, pointer) => {\n        if (getTypeOf(schema.dependencies) !== \"object\") {\n            return undefined;\n        }\n\n        const errors = [];\n        Object.keys(value)\n            .forEach(property => {\n                if (schema.dependencies[property] === undefined) {\n                    return;\n                }\n\n                let dependencyErrors;\n                const type = getTypeOf(schema.dependencies[property]);\n                if (type === \"array\") {\n                    dependencyErrors = schema.dependencies[property]\n                        .filter(dependency => value[dependency] === undefined)\n                        .map(missingProperty => core.errors.missingDependencyError({ missingProperty, pointer }));\n                } else if (type === \"object\") {\n                    dependencyErrors = core.validate(value, schema.dependencies[property]);\n\n                } else {\n                    throw new Error(`Invalid dependency definition for ${pointer}/${property}. Must be list or schema`);\n                }\n\n                errors.push(...dependencyErrors);\n            });\n\n        return errors.length > 0 ? errors : undefined;\n    },\n\n    \"enum\": (core, schema, value, pointer) => {\n        const type = getTypeOf(value);\n        if (type === \"object\" || type === \"array\") {\n            const valueStr = JSON.stringify(value);\n            for (let i = 0; i < schema.enum.length; i += 1) {\n                if (JSON.stringify(schema.enum[i]) === valueStr) {\n                    return undefined;\n                }\n            }\n        } else if (schema.enum.includes(value)) {\n            return undefined;\n        }\n        return core.errors.enumError({ values: schema.enum, value, pointer });\n    },\n    format: (core, schema, value, pointer) => {\n        if (core.validateFormat[schema.format]) {\n            const errors = core.validateFormat[schema.format](core, schema, value, pointer);\n            return errors;\n        }\n        // fail silently if given format is not defined\n        return undefined;\n    },\n    items: (core, schema, value, pointer) => {\n        const errors = [];\n        for (var i = 0; i < value.length; i += 1) {\n            const itemData = value[i];\n            // @todo reevaluate: incomplete schema is created here\n            const itemSchema = core.step(i, schema, value, pointer);\n\n            if (itemSchema && itemSchema.type === \"error\") {\n                return [itemSchema];\n            }\n\n            const itemErrors = core.validate(itemData, itemSchema, `${pointer}/${i}`);\n            errors.push(...itemErrors);\n        }\n\n        return errors;\n    },\n    maximum: (core, schema, value, pointer) => {\n        if (isNaN(schema.maximum)) {\n            return undefined;\n        }\n        if (schema.maximum && schema.maximum < value) {\n            return core.errors.maximumError({ maximum: schema.maximum, length: value, pointer });\n        }\n        if (schema.maximum && schema.exclusiveMaximum === true && schema.maximum === value) {\n            return core.errors.maximumError({ maximum: schema.maximum, length: value, pointer });\n        }\n        return undefined;\n    },\n    maxItems: (core, schema, value, pointer) => {\n        if (isNaN(schema.maxItems)) {\n            return undefined;\n        }\n        if (schema.maxItems < value.length) {\n            return core.errors.maxItemsError({ maximum: schema.maxItems, length: value.length, pointer });\n        }\n        return undefined;\n    },\n    maxLength: (core, schema, value, pointer) => {\n        if (isNaN(schema.maxLength)) {\n            return undefined;\n        }\n        const lengthOfString = ucs2decode(value).length;\n        if (schema.maxLength < lengthOfString) {\n            return core.errors.maxLengthError({ maxLength: schema.maxLength, length: lengthOfString, pointer });\n        }\n        return undefined;\n    },\n    maxProperties: (core, schema, value, pointer) => {\n        const propertyCount = Object.keys(value).length;\n        if (isNaN(schema.maxProperties) === false && schema.maxProperties < propertyCount) {\n            return core.errors.maxPropertiesError({\n                maxProperties: schema.maxProperties,\n                length: propertyCount,\n                pointer\n            });\n        }\n        return undefined;\n    },\n    minLength: (core, schema, value, pointer) => {\n        if (isNaN(schema.minLength)) {\n            return undefined;\n        }\n        const lengthOfString = ucs2decode(value).length;\n        if (schema.minLength > lengthOfString) {\n            return core.errors.minLengthError({ minLength: schema.minLength, length: lengthOfString, pointer });\n        }\n        return undefined;\n    },\n    minimum: (core, schema, value, pointer) => {\n        if (isNaN(schema.minimum)) {\n            return undefined;\n        }\n        if (schema.minimum > value) {\n            return core.errors.minimumError({ minimum: schema.minimum, length: value, pointer });\n        }\n        if (schema.exclusiveMinimum === true && schema.minimum === value) {\n            return core.errors.minimumError({ minimum: schema.minimum, length: value, pointer });\n        }\n        return undefined;\n    },\n    minItems: (core, schema, value, pointer) => {\n        if (isNaN(schema.minItems)) {\n            return undefined;\n        }\n        if (schema.minItems > value.length) {\n            return core.errors.minItemsError({ minItems: schema.minItems, length: value.length, pointer });\n        }\n        return undefined;\n    },\n    minProperties: (core, schema, value, pointer) => {\n        if (isNaN(schema.minProperties)) {\n            return undefined;\n        }\n        const propertyCount = Object.keys(value).length;\n        if (schema.minProperties > propertyCount) {\n            return core.errors.minPropertiesError({\n                minProperties: schema.minProperties,\n                length: propertyCount, pointer\n            });\n        }\n        return undefined;\n    },\n    multipleOf: (core, schema, value, pointer) => {\n        if (isNaN(schema.multipleOf)) {\n            return undefined;\n        }\n        if ((value * FPP) % (schema.multipleOf * FPP) / FPP !== 0) {\n            return core.errors.multipleOfError({ multipleOf: schema.multipleOf, value, pointer });\n        }\n        return undefined;\n    },\n    not: (core, schema, value, pointer) => {\n        const errors = [];\n        if (core.validate(value, schema.not, pointer).length === 0) {\n            errors.push(core.errors.notError({ value, not: schema.not, pointer }));\n        }\n        return errors;\n    },\n    oneOf: (core, schema, value, pointer) => {\n        if (Array.isArray(schema.oneOf) === false) {\n            return undefined;\n        }\n\n        schema = core.resolveOneOf(value, schema, pointer);\n        if (schema && schema.type === \"error\") {\n            return schema;\n        }\n\n        return undefined;\n    },\n    pattern: (core, schema, value, pointer) => {\n        if ((new RegExp(schema.pattern)).test(value) === false) {\n            return core.errors.patternError({\n                pattern: schema.pattern,\n                description: schema.patternExample || schema.pattern,\n                received: value, pointer\n            });\n        }\n        return undefined;\n    },\n    patternProperties: (core, schema, value, pointer) => {\n        const properties = schema.properties || {};\n        const pp = schema.patternProperties;\n        if (getTypeOf(pp) !== \"object\") {\n            return undefined;\n        }\n\n        const errors = [];\n        const keys = Object.keys(value);\n        const patterns = Object.keys(pp).map(expr => ({\n            regex: new RegExp(expr),\n            patternSchema: pp[expr]\n        }));\n\n        keys.forEach(key => {\n            let patternFound = false;\n\n            for (let i = 0, l = patterns.length; i < l; i += 1) {\n                if (patterns[i].regex.test(key)) {\n                    patternFound = true;\n                    const valErrors = core.validate(value[key], patterns[i].patternSchema, `${pointer}/${key}`);\n                    if (valErrors && valErrors.length > 0) {\n                        errors.push(...valErrors);\n                    }\n                }\n            }\n\n            if (properties[key]) {\n                return;\n            }\n\n            if (patternFound === false && schema.additionalProperties === false) {\n                // this is an arrangement with additionalProperties\n                errors.push(core.errors.patternPropertiesError({\n                    key, pointer, patterns: Object.keys(pp).join(\",\")\n                }));\n            }\n        });\n\n        return errors;\n    },\n    properties: (core, schema, value, pointer) => {\n        const errors = [];\n        const keys = Object.keys(schema.properties || {});\n        for (var i = 0; i < keys.length; i += 1) {\n            const key = keys[i];\n            if (value[key] !== undefined) {\n                const itemSchema = core.step(key, schema, value, pointer);\n                const keyErrors = core.validate(value[key], itemSchema, `${pointer}/${key}`);\n                errors.push(...keyErrors);\n            }\n        }\n        return errors;\n    },\n    // @todo move to separate file: this is custom keyword validation for JsonEditor.properties keyword\n    propertiesRequired: (core, schema, value, pointer) => {\n        const errors = [];\n        const keys = Object.keys(schema.properties || {});\n        for (var i = 0; i < keys.length; i += 1) {\n            const key = keys[i];\n            if (value[key] === undefined) {\n                errors.push(core.errors.requiredPropertyError({ key, pointer }));\n            } else {\n                const itemSchema = core.step(key, schema, value, pointer);\n                const keyErrors = core.validate(value[key], itemSchema, `${pointer}/${key}`);\n                errors.push(...keyErrors);\n            }\n        }\n        return errors;\n    },\n    required: (core, schema, value, pointer) => {\n        if (Array.isArray(schema.required) === false) {\n            return undefined;\n        }\n\n        return schema.required.map(property => {\n            if (value[property] === undefined) {\n                return core.errors.requiredPropertyError({ key: property, pointer });\n            }\n            return undefined;\n        });\n    },\n    // @todo move to separate file: this is custom keyword validation for JsonEditor.required keyword\n    requiredNotEmpty: (core, schema, value, pointer) => {\n        if (Array.isArray(schema.required) === false) {\n            return undefined;\n        }\n\n        return schema.required.map(property => {\n            if (value[property] == null || value[property] === \"\") {\n                return core.errors.valueNotEmptyError({ property, pointer: `${pointer}/${property}` });\n            }\n            return undefined;\n        });\n    },\n    uniqueItems: (core, schema, value, pointer) => {\n        if ((Array.isArray(value) && schema.uniqueItems) === false) {\n            return undefined;\n        }\n\n        const errors = [];\n        const map = {};\n        value.forEach((item, index) => {\n            const id = JSON.stringify(item);\n            const itemPointer = `${pointer}/${index}`;\n            if (map[id]) {\n                errors.push(core.errors.uniqueItemsError({\n                    pointer,\n                    itemPointer: map[id],\n                    duplicatePointer: itemPointer,\n                    value: id\n                }));\n            } else {\n                map[id] = itemPointer;\n            }\n        });\n\n        return errors;\n    }\n};\n\n\nmodule.exports = KeywordValidation;\n\n","/**\n * @todo: type is also a keyword, as is properties, items, etc\n *\n * An instance has one of six primitive types (http://json-schema.org/latest/json-schema-core.html#rfc.section.4.2)\n * or seven in case of ajv https://github.com/epoberezkin/ajv/blob/master/KEYWORDS.md#type\n * 1 null, 2 boolean, 3 object, 4 array, 5 number, 6 string (7 integer)\n */\nconst TypeValidation = {\n\n    array: (core, schema, value, pointer) =>\n        core.typeKeywords.array\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer)),\n\n    object: (core, schema, value, pointer) =>\n        core.typeKeywords.object\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer)),\n\n    string: (core, schema, value, pointer) =>\n        core.typeKeywords.string\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer)),\n\n    integer: (core, schema, value, pointer) =>\n        core.typeKeywords.number\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer)),\n\n    number: (core, schema, value, pointer) =>\n        core.typeKeywords.number\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer)),\n\n    \"boolean\": (core, schema, value, pointer) =>\n        core.typeKeywords.boolean\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer)),\n\n    \"null\": (core, schema, value, pointer) =>\n        core.typeKeywords.null\n            .filter(key => schema && schema[key] != null)\n            .map(key => core.validateKeyword[key](core, schema, value, pointer))\n};\n\n\nmodule.exports = TypeValidation;\n","/* eslint quote-props: 0 */\n\n\n/**\n * Mapping, used in type validation to iterate over type-specific keywords to validate\n *\n *  - overview https://epoberezkin.github.io/ajv/keywords.html\n *\n * @type {Object}\n */\nmodule.exports = {\n    array: [\"enum\", \"items\", \"minItems\", \"maxItems\", \"uniqueItems\", \"not\"],\n    boolean: [\"enum\", \"not\"],\n    object: [\n        \"additionalProperties\", \"dependencies\", \"enum\", \"format\", \"minProperties\", \"maxProperties\",\n        \"patternProperties\", \"properties\", \"required\", \"not\", \"oneOf\", \"allOf\", \"anyOf\"\n    ],\n    string: [\"enum\", \"format\", \"maxLength\", \"minLength\", \"pattern\", \"not\", \"oneOf\", \"allOf\", \"anyOf\"],\n    number: [\"enum\", \"format\", \"maximum\", \"minimum\", \"multipleOf\", \"not\", \"oneOf\", \"allOf\", \"anyOf\"],\n    null: [\"enum\", \"format\", \"not\", \"oneOf\", \"allOf\", \"anyOf\"]\n};\n","module.exports = {\n    \"http://json-schema.org/draft-04/schema\": require(\"./draft04.json\"),\n\n    reset() {\n        Object.keys(this).forEach(key => {\n            if (typeof this[key] !== \"function\" && key !== \"http://json-schema.org/draft-04/schema\") {\n                delete this[key];\n            }\n        });\n    }\n};\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('./empty')) :\n\ttypeof define === 'function' && define.amd ? define(['exports', './empty'], factory) :\n\t(factory((global.jsondiffpatch = {}),global.chalk));\n}(this, (function (exports,chalk) { 'use strict';\n\nchalk = chalk && chalk.hasOwnProperty('default') ? chalk['default'] : chalk;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n\n\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nvar Processor = function () {\n  function Processor(options) {\n    classCallCheck(this, Processor);\n\n    this.selfOptions = options || {};\n    this.pipes = {};\n  }\n\n  createClass(Processor, [{\n    key: 'options',\n    value: function options(_options) {\n      if (_options) {\n        this.selfOptions = _options;\n      }\n      return this.selfOptions;\n    }\n  }, {\n    key: 'pipe',\n    value: function pipe(name, pipeArg) {\n      var pipe = pipeArg;\n      if (typeof name === 'string') {\n        if (typeof pipe === 'undefined') {\n          return this.pipes[name];\n        } else {\n          this.pipes[name] = pipe;\n        }\n      }\n      if (name && name.name) {\n        pipe = name;\n        if (pipe.processor === this) {\n          return pipe;\n        }\n        this.pipes[pipe.name] = pipe;\n      }\n      pipe.processor = this;\n      return pipe;\n    }\n  }, {\n    key: 'process',\n    value: function process(input, pipe) {\n      var context = input;\n      context.options = this.options();\n      var nextPipe = pipe || input.pipe || 'default';\n      var lastPipe = void 0;\n      var lastContext = void 0;\n      while (nextPipe) {\n        if (typeof context.nextAfterChildren !== 'undefined') {\n          // children processed and coming back to parent\n          context.next = context.nextAfterChildren;\n          context.nextAfterChildren = null;\n        }\n\n        if (typeof nextPipe === 'string') {\n          nextPipe = this.pipe(nextPipe);\n        }\n        nextPipe.process(context);\n        lastContext = context;\n        lastPipe = nextPipe;\n        nextPipe = null;\n        if (context) {\n          if (context.next) {\n            context = context.next;\n            nextPipe = lastContext.nextPipe || context.pipe || lastPipe;\n          }\n        }\n      }\n      return context.hasResult ? context.result : undefined;\n    }\n  }]);\n  return Processor;\n}();\n\nvar Pipe = function () {\n  function Pipe(name) {\n    classCallCheck(this, Pipe);\n\n    this.name = name;\n    this.filters = [];\n  }\n\n  createClass(Pipe, [{\n    key: 'process',\n    value: function process(input) {\n      if (!this.processor) {\n        throw new Error('add this pipe to a processor before using it');\n      }\n      var debug = this.debug;\n      var length = this.filters.length;\n      var context = input;\n      for (var index = 0; index < length; index++) {\n        var filter = this.filters[index];\n        if (debug) {\n          this.log('filter: ' + filter.filterName);\n        }\n        filter(context);\n        if ((typeof context === 'undefined' ? 'undefined' : _typeof(context)) === 'object' && context.exiting) {\n          context.exiting = false;\n          break;\n        }\n      }\n      if (!context.next && this.resultCheck) {\n        this.resultCheck(context);\n      }\n    }\n  }, {\n    key: 'log',\n    value: function log(msg) {\n      console.log('[jsondiffpatch] ' + this.name + ' pipe, ' + msg);\n    }\n  }, {\n    key: 'append',\n    value: function append() {\n      var _filters;\n\n      (_filters = this.filters).push.apply(_filters, arguments);\n      return this;\n    }\n  }, {\n    key: 'prepend',\n    value: function prepend() {\n      var _filters2;\n\n      (_filters2 = this.filters).unshift.apply(_filters2, arguments);\n      return this;\n    }\n  }, {\n    key: 'indexOf',\n    value: function indexOf(filterName) {\n      if (!filterName) {\n        throw new Error('a filter name is required');\n      }\n      for (var index = 0; index < this.filters.length; index++) {\n        var filter = this.filters[index];\n        if (filter.filterName === filterName) {\n          return index;\n        }\n      }\n      throw new Error('filter not found: ' + filterName);\n    }\n  }, {\n    key: 'list',\n    value: function list() {\n      return this.filters.map(function (f) {\n        return f.filterName;\n      });\n    }\n  }, {\n    key: 'after',\n    value: function after(filterName) {\n      var index = this.indexOf(filterName);\n      var params = Array.prototype.slice.call(arguments, 1);\n      if (!params.length) {\n        throw new Error('a filter is required');\n      }\n      params.unshift(index + 1, 0);\n      Array.prototype.splice.apply(this.filters, params);\n      return this;\n    }\n  }, {\n    key: 'before',\n    value: function before(filterName) {\n      var index = this.indexOf(filterName);\n      var params = Array.prototype.slice.call(arguments, 1);\n      if (!params.length) {\n        throw new Error('a filter is required');\n      }\n      params.unshift(index, 0);\n      Array.prototype.splice.apply(this.filters, params);\n      return this;\n    }\n  }, {\n    key: 'replace',\n    value: function replace(filterName) {\n      var index = this.indexOf(filterName);\n      var params = Array.prototype.slice.call(arguments, 1);\n      if (!params.length) {\n        throw new Error('a filter is required');\n      }\n      params.unshift(index, 1);\n      Array.prototype.splice.apply(this.filters, params);\n      return this;\n    }\n  }, {\n    key: 'remove',\n    value: function remove(filterName) {\n      var index = this.indexOf(filterName);\n      this.filters.splice(index, 1);\n      return this;\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.filters.length = 0;\n      return this;\n    }\n  }, {\n    key: 'shouldHaveResult',\n    value: function shouldHaveResult(should) {\n      if (should === false) {\n        this.resultCheck = null;\n        return;\n      }\n      if (this.resultCheck) {\n        return;\n      }\n      var pipe = this;\n      this.resultCheck = function (context) {\n        if (!context.hasResult) {\n          console.log(context);\n          var error = new Error(pipe.name + ' failed');\n          error.noResult = true;\n          throw error;\n        }\n      };\n      return this;\n    }\n  }]);\n  return Pipe;\n}();\n\nvar Context = function () {\n  function Context() {\n    classCallCheck(this, Context);\n  }\n\n  createClass(Context, [{\n    key: 'setResult',\n    value: function setResult(result) {\n      this.result = result;\n      this.hasResult = true;\n      return this;\n    }\n  }, {\n    key: 'exit',\n    value: function exit() {\n      this.exiting = true;\n      return this;\n    }\n  }, {\n    key: 'switchTo',\n    value: function switchTo(next, pipe) {\n      if (typeof next === 'string' || next instanceof Pipe) {\n        this.nextPipe = next;\n      } else {\n        this.next = next;\n        if (pipe) {\n          this.nextPipe = pipe;\n        }\n      }\n      return this;\n    }\n  }, {\n    key: 'push',\n    value: function push(child, name) {\n      child.parent = this;\n      if (typeof name !== 'undefined') {\n        child.childName = name;\n      }\n      child.root = this.root || this;\n      child.options = child.options || this.options;\n      if (!this.children) {\n        this.children = [child];\n        this.nextAfterChildren = this.next || null;\n        this.next = child;\n      } else {\n        this.children[this.children.length - 1].next = child;\n        this.children.push(child);\n      }\n      child.next = this;\n      return this;\n    }\n  }]);\n  return Context;\n}();\n\nvar isArray = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nfunction cloneRegExp(re) {\n  var regexMatch = /^\\/(.*)\\/([gimyu]*)$/.exec(re.toString());\n  return new RegExp(regexMatch[1], regexMatch[2]);\n}\n\nfunction clone(arg) {\n  if ((typeof arg === 'undefined' ? 'undefined' : _typeof(arg)) !== 'object') {\n    return arg;\n  }\n  if (arg === null) {\n    return null;\n  }\n  if (isArray(arg)) {\n    return arg.map(clone);\n  }\n  if (arg instanceof Date) {\n    return new Date(arg.getTime());\n  }\n  if (arg instanceof RegExp) {\n    return cloneRegExp(arg);\n  }\n  var cloned = {};\n  for (var name in arg) {\n    if (Object.prototype.hasOwnProperty.call(arg, name)) {\n      cloned[name] = clone(arg[name]);\n    }\n  }\n  return cloned;\n}\n\nvar DiffContext = function (_Context) {\n  inherits(DiffContext, _Context);\n\n  function DiffContext(left, right) {\n    classCallCheck(this, DiffContext);\n\n    var _this = possibleConstructorReturn(this, (DiffContext.__proto__ || Object.getPrototypeOf(DiffContext)).call(this));\n\n    _this.left = left;\n    _this.right = right;\n    _this.pipe = 'diff';\n    return _this;\n  }\n\n  createClass(DiffContext, [{\n    key: 'setResult',\n    value: function setResult(result) {\n      if (this.options.cloneDiffValues && (typeof result === 'undefined' ? 'undefined' : _typeof(result)) === 'object') {\n        var clone$$1 = typeof this.options.cloneDiffValues === 'function' ? this.options.cloneDiffValues : clone;\n        if (_typeof(result[0]) === 'object') {\n          result[0] = clone$$1(result[0]);\n        }\n        if (_typeof(result[1]) === 'object') {\n          result[1] = clone$$1(result[1]);\n        }\n      }\n      return Context.prototype.setResult.apply(this, arguments);\n    }\n  }]);\n  return DiffContext;\n}(Context);\n\nvar PatchContext = function (_Context) {\n  inherits(PatchContext, _Context);\n\n  function PatchContext(left, delta) {\n    classCallCheck(this, PatchContext);\n\n    var _this = possibleConstructorReturn(this, (PatchContext.__proto__ || Object.getPrototypeOf(PatchContext)).call(this));\n\n    _this.left = left;\n    _this.delta = delta;\n    _this.pipe = 'patch';\n    return _this;\n  }\n\n  return PatchContext;\n}(Context);\n\nvar ReverseContext = function (_Context) {\n  inherits(ReverseContext, _Context);\n\n  function ReverseContext(delta) {\n    classCallCheck(this, ReverseContext);\n\n    var _this = possibleConstructorReturn(this, (ReverseContext.__proto__ || Object.getPrototypeOf(ReverseContext)).call(this));\n\n    _this.delta = delta;\n    _this.pipe = 'reverse';\n    return _this;\n  }\n\n  return ReverseContext;\n}(Context);\n\nvar isArray$1 = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nvar diffFilter = function trivialMatchesDiffFilter(context) {\n  if (context.left === context.right) {\n    context.setResult(undefined).exit();\n    return;\n  }\n  if (typeof context.left === 'undefined') {\n    if (typeof context.right === 'function') {\n      throw new Error('functions are not supported');\n    }\n    context.setResult([context.right]).exit();\n    return;\n  }\n  if (typeof context.right === 'undefined') {\n    context.setResult([context.left, 0, 0]).exit();\n    return;\n  }\n  if (typeof context.left === 'function' || typeof context.right === 'function') {\n    throw new Error('functions are not supported');\n  }\n  context.leftType = context.left === null ? 'null' : _typeof(context.left);\n  context.rightType = context.right === null ? 'null' : _typeof(context.right);\n  if (context.leftType !== context.rightType) {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  if (context.leftType === 'boolean' || context.leftType === 'number') {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  if (context.leftType === 'object') {\n    context.leftIsArray = isArray$1(context.left);\n  }\n  if (context.rightType === 'object') {\n    context.rightIsArray = isArray$1(context.right);\n  }\n  if (context.leftIsArray !== context.rightIsArray) {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n\n  if (context.left instanceof RegExp) {\n    if (context.right instanceof RegExp) {\n      context.setResult([context.left.toString(), context.right.toString()]).exit();\n    } else {\n      context.setResult([context.left, context.right]).exit();\n    }\n  }\n};\ndiffFilter.filterName = 'trivial';\n\nvar patchFilter = function trivialMatchesPatchFilter(context) {\n  if (typeof context.delta === 'undefined') {\n    context.setResult(context.left).exit();\n    return;\n  }\n  context.nested = !isArray$1(context.delta);\n  if (context.nested) {\n    return;\n  }\n  if (context.delta.length === 1) {\n    context.setResult(context.delta[0]).exit();\n    return;\n  }\n  if (context.delta.length === 2) {\n    if (context.left instanceof RegExp) {\n      var regexArgs = /^\\/(.*)\\/([gimyu]+)$/.exec(context.delta[1]);\n      if (regexArgs) {\n        context.setResult(new RegExp(regexArgs[1], regexArgs[2])).exit();\n        return;\n      }\n    }\n    context.setResult(context.delta[1]).exit();\n    return;\n  }\n  if (context.delta.length === 3 && context.delta[2] === 0) {\n    context.setResult(undefined).exit();\n  }\n};\npatchFilter.filterName = 'trivial';\n\nvar reverseFilter = function trivialReferseFilter(context) {\n  if (typeof context.delta === 'undefined') {\n    context.setResult(context.delta).exit();\n    return;\n  }\n  context.nested = !isArray$1(context.delta);\n  if (context.nested) {\n    return;\n  }\n  if (context.delta.length === 1) {\n    context.setResult([context.delta[0], 0, 0]).exit();\n    return;\n  }\n  if (context.delta.length === 2) {\n    context.setResult([context.delta[1], context.delta[0]]).exit();\n    return;\n  }\n  if (context.delta.length === 3 && context.delta[2] === 0) {\n    context.setResult([context.delta[0]]).exit();\n  }\n};\nreverseFilter.filterName = 'trivial';\n\nfunction collectChildrenDiffFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  var result = context.result;\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    if (typeof child.result === 'undefined') {\n      continue;\n    }\n    result = result || {};\n    result[child.childName] = child.result;\n  }\n  if (result && context.leftIsArray) {\n    result._t = 'a';\n  }\n  context.setResult(result).exit();\n}\ncollectChildrenDiffFilter.filterName = 'collectChildren';\n\nfunction objectsDiffFilter(context) {\n  if (context.leftIsArray || context.leftType !== 'object') {\n    return;\n  }\n\n  var name = void 0;\n  var child = void 0;\n  var propertyFilter = context.options.propertyFilter;\n  for (name in context.left) {\n    if (!Object.prototype.hasOwnProperty.call(context.left, name)) {\n      continue;\n    }\n    if (propertyFilter && !propertyFilter(name, context)) {\n      continue;\n    }\n    child = new DiffContext(context.left[name], context.right[name]);\n    context.push(child, name);\n  }\n  for (name in context.right) {\n    if (!Object.prototype.hasOwnProperty.call(context.right, name)) {\n      continue;\n    }\n    if (propertyFilter && !propertyFilter(name, context)) {\n      continue;\n    }\n    if (typeof context.left[name] === 'undefined') {\n      child = new DiffContext(undefined, context.right[name]);\n      context.push(child, name);\n    }\n  }\n\n  if (!context.children || context.children.length === 0) {\n    context.setResult(undefined).exit();\n    return;\n  }\n  context.exit();\n}\nobjectsDiffFilter.filterName = 'objects';\n\nvar patchFilter$1 = function nestedPatchFilter(context) {\n  if (!context.nested) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var name = void 0;\n  var child = void 0;\n  for (name in context.delta) {\n    child = new PatchContext(context.left[name], context.delta[name]);\n    context.push(child, name);\n  }\n  context.exit();\n};\npatchFilter$1.filterName = 'objects';\n\nvar collectChildrenPatchFilter = function collectChildrenPatchFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    if (Object.prototype.hasOwnProperty.call(context.left, child.childName) && child.result === undefined) {\n      delete context.left[child.childName];\n    } else if (context.left[child.childName] !== child.result) {\n      context.left[child.childName] = child.result;\n    }\n  }\n  context.setResult(context.left).exit();\n};\ncollectChildrenPatchFilter.filterName = 'collectChildren';\n\nvar reverseFilter$1 = function nestedReverseFilter(context) {\n  if (!context.nested) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var name = void 0;\n  var child = void 0;\n  for (name in context.delta) {\n    child = new ReverseContext(context.delta[name]);\n    context.push(child, name);\n  }\n  context.exit();\n};\nreverseFilter$1.filterName = 'objects';\n\nfunction collectChildrenReverseFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  var delta = {};\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    if (delta[child.childName] !== child.result) {\n      delta[child.childName] = child.result;\n    }\n  }\n  context.setResult(delta).exit();\n}\ncollectChildrenReverseFilter.filterName = 'collectChildren';\n\n/*\n\nLCS implementation that supports arrays or strings\n\nreference: http://en.wikipedia.org/wiki/Longest_common_subsequence_problem\n\n*/\n\nvar defaultMatch = function defaultMatch(array1, array2, index1, index2) {\n  return array1[index1] === array2[index2];\n};\n\nvar lengthMatrix = function lengthMatrix(array1, array2, match, context) {\n  var len1 = array1.length;\n  var len2 = array2.length;\n  var x = void 0,\n      y = void 0;\n\n  // initialize empty matrix of len1+1 x len2+1\n  var matrix = [len1 + 1];\n  for (x = 0; x < len1 + 1; x++) {\n    matrix[x] = [len2 + 1];\n    for (y = 0; y < len2 + 1; y++) {\n      matrix[x][y] = 0;\n    }\n  }\n  matrix.match = match;\n  // save sequence lengths for each coordinate\n  for (x = 1; x < len1 + 1; x++) {\n    for (y = 1; y < len2 + 1; y++) {\n      if (match(array1, array2, x - 1, y - 1, context)) {\n        matrix[x][y] = matrix[x - 1][y - 1] + 1;\n      } else {\n        matrix[x][y] = Math.max(matrix[x - 1][y], matrix[x][y - 1]);\n      }\n    }\n  }\n  return matrix;\n};\n\nvar backtrack = function backtrack(matrix, array1, array2, index1, index2, context) {\n  if (index1 === 0 || index2 === 0) {\n    return {\n      sequence: [],\n      indices1: [],\n      indices2: []\n    };\n  }\n\n  if (matrix.match(array1, array2, index1 - 1, index2 - 1, context)) {\n    var subsequence = backtrack(matrix, array1, array2, index1 - 1, index2 - 1, context);\n    subsequence.sequence.push(array1[index1 - 1]);\n    subsequence.indices1.push(index1 - 1);\n    subsequence.indices2.push(index2 - 1);\n    return subsequence;\n  }\n\n  if (matrix[index1][index2 - 1] > matrix[index1 - 1][index2]) {\n    return backtrack(matrix, array1, array2, index1, index2 - 1, context);\n  } else {\n    return backtrack(matrix, array1, array2, index1 - 1, index2, context);\n  }\n};\n\nvar get$1 = function get(array1, array2, match, context) {\n  var innerContext = context || {};\n  var matrix = lengthMatrix(array1, array2, match || defaultMatch, innerContext);\n  var result = backtrack(matrix, array1, array2, array1.length, array2.length, innerContext);\n  if (typeof array1 === 'string' && typeof array2 === 'string') {\n    result.sequence = result.sequence.join('');\n  }\n  return result;\n};\n\nvar lcs = {\n  get: get$1\n};\n\nvar ARRAY_MOVE = 3;\n\nvar isArray$2 = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nvar arrayIndexOf = typeof Array.prototype.indexOf === 'function' ? function (array, item) {\n  return array.indexOf(item);\n} : function (array, item) {\n  var length = array.length;\n  for (var i = 0; i < length; i++) {\n    if (array[i] === item) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nfunction arraysHaveMatchByRef(array1, array2, len1, len2) {\n  for (var index1 = 0; index1 < len1; index1++) {\n    var val1 = array1[index1];\n    for (var index2 = 0; index2 < len2; index2++) {\n      var val2 = array2[index2];\n      if (index1 !== index2 && val1 === val2) {\n        return true;\n      }\n    }\n  }\n}\n\nfunction matchItems(array1, array2, index1, index2, context) {\n  var value1 = array1[index1];\n  var value2 = array2[index2];\n  if (value1 === value2) {\n    return true;\n  }\n  if ((typeof value1 === 'undefined' ? 'undefined' : _typeof(value1)) !== 'object' || (typeof value2 === 'undefined' ? 'undefined' : _typeof(value2)) !== 'object') {\n    return false;\n  }\n  var objectHash = context.objectHash;\n  if (!objectHash) {\n    // no way to match objects was provided, try match by position\n    return context.matchByPosition && index1 === index2;\n  }\n  var hash1 = void 0;\n  var hash2 = void 0;\n  if (typeof index1 === 'number') {\n    context.hashCache1 = context.hashCache1 || [];\n    hash1 = context.hashCache1[index1];\n    if (typeof hash1 === 'undefined') {\n      context.hashCache1[index1] = hash1 = objectHash(value1, index1);\n    }\n  } else {\n    hash1 = objectHash(value1);\n  }\n  if (typeof hash1 === 'undefined') {\n    return false;\n  }\n  if (typeof index2 === 'number') {\n    context.hashCache2 = context.hashCache2 || [];\n    hash2 = context.hashCache2[index2];\n    if (typeof hash2 === 'undefined') {\n      context.hashCache2[index2] = hash2 = objectHash(value2, index2);\n    }\n  } else {\n    hash2 = objectHash(value2);\n  }\n  if (typeof hash2 === 'undefined') {\n    return false;\n  }\n  return hash1 === hash2;\n}\n\nvar diffFilter$1 = function arraysDiffFilter(context) {\n  if (!context.leftIsArray) {\n    return;\n  }\n\n  var matchContext = {\n    objectHash: context.options && context.options.objectHash,\n    matchByPosition: context.options && context.options.matchByPosition\n  };\n  var commonHead = 0;\n  var commonTail = 0;\n  var index = void 0;\n  var index1 = void 0;\n  var index2 = void 0;\n  var array1 = context.left;\n  var array2 = context.right;\n  var len1 = array1.length;\n  var len2 = array2.length;\n\n  var child = void 0;\n\n  if (len1 > 0 && len2 > 0 && !matchContext.objectHash && typeof matchContext.matchByPosition !== 'boolean') {\n    matchContext.matchByPosition = !arraysHaveMatchByRef(array1, array2, len1, len2);\n  }\n\n  // separate common head\n  while (commonHead < len1 && commonHead < len2 && matchItems(array1, array2, commonHead, commonHead, matchContext)) {\n    index = commonHead;\n    child = new DiffContext(context.left[index], context.right[index]);\n    context.push(child, index);\n    commonHead++;\n  }\n  // separate common tail\n  while (commonTail + commonHead < len1 && commonTail + commonHead < len2 && matchItems(array1, array2, len1 - 1 - commonTail, len2 - 1 - commonTail, matchContext)) {\n    index1 = len1 - 1 - commonTail;\n    index2 = len2 - 1 - commonTail;\n    child = new DiffContext(context.left[index1], context.right[index2]);\n    context.push(child, index2);\n    commonTail++;\n  }\n  var result = void 0;\n  if (commonHead + commonTail === len1) {\n    if (len1 === len2) {\n      // arrays are identical\n      context.setResult(undefined).exit();\n      return;\n    }\n    // trivial case, a block (1 or more consecutive items) was added\n    result = result || {\n      _t: 'a'\n    };\n    for (index = commonHead; index < len2 - commonTail; index++) {\n      result[index] = [array2[index]];\n    }\n    context.setResult(result).exit();\n    return;\n  }\n  if (commonHead + commonTail === len2) {\n    // trivial case, a block (1 or more consecutive items) was removed\n    result = result || {\n      _t: 'a'\n    };\n    for (index = commonHead; index < len1 - commonTail; index++) {\n      result['_' + index] = [array1[index], 0, 0];\n    }\n    context.setResult(result).exit();\n    return;\n  }\n  // reset hash cache\n  delete matchContext.hashCache1;\n  delete matchContext.hashCache2;\n\n  // diff is not trivial, find the LCS (Longest Common Subsequence)\n  var trimmed1 = array1.slice(commonHead, len1 - commonTail);\n  var trimmed2 = array2.slice(commonHead, len2 - commonTail);\n  var seq = lcs.get(trimmed1, trimmed2, matchItems, matchContext);\n  var removedItems = [];\n  result = result || {\n    _t: 'a'\n  };\n  for (index = commonHead; index < len1 - commonTail; index++) {\n    if (arrayIndexOf(seq.indices1, index - commonHead) < 0) {\n      // removed\n      result['_' + index] = [array1[index], 0, 0];\n      removedItems.push(index);\n    }\n  }\n\n  var detectMove = true;\n  if (context.options && context.options.arrays && context.options.arrays.detectMove === false) {\n    detectMove = false;\n  }\n  var includeValueOnMove = false;\n  if (context.options && context.options.arrays && context.options.arrays.includeValueOnMove) {\n    includeValueOnMove = true;\n  }\n\n  var removedItemsLength = removedItems.length;\n  for (index = commonHead; index < len2 - commonTail; index++) {\n    var indexOnArray2 = arrayIndexOf(seq.indices2, index - commonHead);\n    if (indexOnArray2 < 0) {\n      // added, try to match with a removed item and register as position move\n      var isMove = false;\n      if (detectMove && removedItemsLength > 0) {\n        for (var removeItemIndex1 = 0; removeItemIndex1 < removedItemsLength; removeItemIndex1++) {\n          index1 = removedItems[removeItemIndex1];\n          if (matchItems(trimmed1, trimmed2, index1 - commonHead, index - commonHead, matchContext)) {\n            // store position move as: [originalValue, newPosition, ARRAY_MOVE]\n            result['_' + index1].splice(1, 2, index, ARRAY_MOVE);\n            if (!includeValueOnMove) {\n              // don't include moved value on diff, to save bytes\n              result['_' + index1][0] = '';\n            }\n\n            index2 = index;\n            child = new DiffContext(context.left[index1], context.right[index2]);\n            context.push(child, index2);\n            removedItems.splice(removeItemIndex1, 1);\n            isMove = true;\n            break;\n          }\n        }\n      }\n      if (!isMove) {\n        // added\n        result[index] = [array2[index]];\n      }\n    } else {\n      // match, do inner diff\n      index1 = seq.indices1[indexOnArray2] + commonHead;\n      index2 = seq.indices2[indexOnArray2] + commonHead;\n      child = new DiffContext(context.left[index1], context.right[index2]);\n      context.push(child, index2);\n    }\n  }\n\n  context.setResult(result).exit();\n};\ndiffFilter$1.filterName = 'arrays';\n\nvar compare = {\n  numerically: function numerically(a, b) {\n    return a - b;\n  },\n  numericallyBy: function numericallyBy(name) {\n    return function (a, b) {\n      return a[name] - b[name];\n    };\n  }\n};\n\nvar patchFilter$2 = function nestedPatchFilter(context) {\n  if (!context.nested) {\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var index = void 0;\n  var index1 = void 0;\n\n  var delta = context.delta;\n  var array = context.left;\n\n  // first, separate removals, insertions and modifications\n  var toRemove = [];\n  var toInsert = [];\n  var toModify = [];\n  for (index in delta) {\n    if (index !== '_t') {\n      if (index[0] === '_') {\n        // removed item from original array\n        if (delta[index][2] === 0 || delta[index][2] === ARRAY_MOVE) {\n          toRemove.push(parseInt(index.slice(1), 10));\n        } else {\n          throw new Error('only removal or move can be applied at original array indices,' + (' invalid diff type: ' + delta[index][2]));\n        }\n      } else {\n        if (delta[index].length === 1) {\n          // added item at new array\n          toInsert.push({\n            index: parseInt(index, 10),\n            value: delta[index][0]\n          });\n        } else {\n          // modified item at new array\n          toModify.push({\n            index: parseInt(index, 10),\n            delta: delta[index]\n          });\n        }\n      }\n    }\n  }\n\n  // remove items, in reverse order to avoid sawing our own floor\n  toRemove = toRemove.sort(compare.numerically);\n  for (index = toRemove.length - 1; index >= 0; index--) {\n    index1 = toRemove[index];\n    var indexDiff = delta['_' + index1];\n    var removedValue = array.splice(index1, 1)[0];\n    if (indexDiff[2] === ARRAY_MOVE) {\n      // reinsert later\n      toInsert.push({\n        index: indexDiff[1],\n        value: removedValue\n      });\n    }\n  }\n\n  // insert items, in reverse order to avoid moving our own floor\n  toInsert = toInsert.sort(compare.numericallyBy('index'));\n  var toInsertLength = toInsert.length;\n  for (index = 0; index < toInsertLength; index++) {\n    var insertion = toInsert[index];\n    array.splice(insertion.index, 0, insertion.value);\n  }\n\n  // apply modifications\n  var toModifyLength = toModify.length;\n  var child = void 0;\n  if (toModifyLength > 0) {\n    for (index = 0; index < toModifyLength; index++) {\n      var modification = toModify[index];\n      child = new PatchContext(context.left[modification.index], modification.delta);\n      context.push(child, modification.index);\n    }\n  }\n\n  if (!context.children) {\n    context.setResult(context.left).exit();\n    return;\n  }\n  context.exit();\n};\npatchFilter$2.filterName = 'arrays';\n\nvar collectChildrenPatchFilter$1 = function collectChildrenPatchFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    context.left[child.childName] = child.result;\n  }\n  context.setResult(context.left).exit();\n};\ncollectChildrenPatchFilter$1.filterName = 'arraysCollectChildren';\n\nvar reverseFilter$2 = function arraysReverseFilter(context) {\n  if (!context.nested) {\n    if (context.delta[2] === ARRAY_MOVE) {\n      context.newName = '_' + context.delta[1];\n      context.setResult([context.delta[0], parseInt(context.childName.substr(1), 10), ARRAY_MOVE]).exit();\n    }\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var name = void 0;\n  var child = void 0;\n  for (name in context.delta) {\n    if (name === '_t') {\n      continue;\n    }\n    child = new ReverseContext(context.delta[name]);\n    context.push(child, name);\n  }\n  context.exit();\n};\nreverseFilter$2.filterName = 'arrays';\n\nvar reverseArrayDeltaIndex = function reverseArrayDeltaIndex(delta, index, itemDelta) {\n  if (typeof index === 'string' && index[0] === '_') {\n    return parseInt(index.substr(1), 10);\n  } else if (isArray$2(itemDelta) && itemDelta[2] === 0) {\n    return '_' + index;\n  }\n\n  var reverseIndex = +index;\n  for (var deltaIndex in delta) {\n    var deltaItem = delta[deltaIndex];\n    if (isArray$2(deltaItem)) {\n      if (deltaItem[2] === ARRAY_MOVE) {\n        var moveFromIndex = parseInt(deltaIndex.substr(1), 10);\n        var moveToIndex = deltaItem[1];\n        if (moveToIndex === +index) {\n          return moveFromIndex;\n        }\n        if (moveFromIndex <= reverseIndex && moveToIndex > reverseIndex) {\n          reverseIndex++;\n        } else if (moveFromIndex >= reverseIndex && moveToIndex < reverseIndex) {\n          reverseIndex--;\n        }\n      } else if (deltaItem[2] === 0) {\n        var deleteIndex = parseInt(deltaIndex.substr(1), 10);\n        if (deleteIndex <= reverseIndex) {\n          reverseIndex++;\n        }\n      } else if (deltaItem.length === 1 && deltaIndex <= reverseIndex) {\n        reverseIndex--;\n      }\n    }\n  }\n\n  return reverseIndex;\n};\n\nfunction collectChildrenReverseFilter$1(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  var delta = {\n    _t: 'a'\n  };\n\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    var name = child.newName;\n    if (typeof name === 'undefined') {\n      name = reverseArrayDeltaIndex(context.delta, child.childName, child.result);\n    }\n    if (delta[name] !== child.result) {\n      delta[name] = child.result;\n    }\n  }\n  context.setResult(delta).exit();\n}\ncollectChildrenReverseFilter$1.filterName = 'arraysCollectChildren';\n\nvar diffFilter$2 = function datesDiffFilter(context) {\n  if (context.left instanceof Date) {\n    if (context.right instanceof Date) {\n      if (context.left.getTime() !== context.right.getTime()) {\n        context.setResult([context.left, context.right]);\n      } else {\n        context.setResult(undefined);\n      }\n    } else {\n      context.setResult([context.left, context.right]);\n    }\n    context.exit();\n  } else if (context.right instanceof Date) {\n    context.setResult([context.left, context.right]).exit();\n  }\n};\ndiffFilter$2.filterName = 'dates';\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar diffMatchPatch = createCommonjsModule(function (module) {\nfunction diff_match_patch() {\r\n\r\n  // Defaults.\r\n  // Redefine these in your program to override the defaults.\r\n\r\n  // Number of seconds to map a diff before giving up (0 for infinity).\r\n  this.Diff_Timeout = 1.0;\r\n  // Cost of an empty edit operation in terms of edit characters.\r\n  this.Diff_EditCost = 4;\r\n  // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\r\n  this.Match_Threshold = 0.5;\r\n  // How far to search for a match (0 = exact location, 1000+ = broad match).\r\n  // A match this many characters away from the expected location will add\r\n  // 1.0 to the score (0.0 is a perfect match).\r\n  this.Match_Distance = 1000;\r\n  // When deleting a large block of text (over ~64 characters), how close do\r\n  // the contents have to be to match the expected contents. (0.0 = perfection,\r\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\r\n  // end points of a delete need to match.\r\n  this.Patch_DeleteThreshold = 0.5;\r\n  // Chunk size for context length.\r\n  this.Patch_Margin = 4;\r\n\r\n  // The number of bits in an int.\r\n  this.Match_MaxBits = 32;\r\n}\r\n\r\n\r\n//  DIFF FUNCTIONS\r\n\r\n\r\n/**\r\n * The data structure representing a diff is an array of tuples:\r\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\r\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\r\n */\r\nvar DIFF_DELETE = -1;\r\nvar DIFF_INSERT = 1;\r\nvar DIFF_EQUAL = 0;\r\n\r\n/** @typedef {{0: number, 1: string}} */\r\ndiff_match_patch.prototype.diff_main = function(text1, text2, opt_checklines,\r\n    opt_deadline) {\r\n  // Set a deadline by which time the diff must be complete.\r\n  if (typeof opt_deadline == 'undefined') {\r\n    if (this.Diff_Timeout <= 0) {\r\n      opt_deadline = Number.MAX_VALUE;\r\n    } else {\r\n      opt_deadline = (new Date).getTime() + this.Diff_Timeout * 1000;\r\n    }\r\n  }\r\n  var deadline = opt_deadline;\r\n\r\n  // Check for null inputs.\r\n  if (text1 == null || text2 == null) {\r\n    throw new Error('Null input. (diff_main)');\r\n  }\r\n\r\n  // Check for equality (speedup).\r\n  if (text1 == text2) {\r\n    if (text1) {\r\n      return [[DIFF_EQUAL, text1]];\r\n    }\r\n    return [];\r\n  }\r\n\r\n  if (typeof opt_checklines == 'undefined') {\r\n    opt_checklines = true;\r\n  }\r\n  var checklines = opt_checklines;\r\n\r\n  // Trim off common prefix (speedup).\r\n  var commonlength = this.diff_commonPrefix(text1, text2);\r\n  var commonprefix = text1.substring(0, commonlength);\r\n  text1 = text1.substring(commonlength);\r\n  text2 = text2.substring(commonlength);\r\n\r\n  // Trim off common suffix (speedup).\r\n  commonlength = this.diff_commonSuffix(text1, text2);\r\n  var commonsuffix = text1.substring(text1.length - commonlength);\r\n  text1 = text1.substring(0, text1.length - commonlength);\r\n  text2 = text2.substring(0, text2.length - commonlength);\r\n\r\n  // Compute the diff on the middle block.\r\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline);\r\n\r\n  // Restore the prefix and suffix.\r\n  if (commonprefix) {\r\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\r\n  }\r\n  if (commonsuffix) {\r\n    diffs.push([DIFF_EQUAL, commonsuffix]);\r\n  }\r\n  this.diff_cleanupMerge(diffs);\r\n  return diffs;\r\n};\r\n\r\n\r\n/**\r\n * Find the differences between two texts.  Assumes that the texts do not\r\n * have any common prefix or suffix.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\r\n *     line-level diff first to identify the changed areas.\r\n *     If true, then run a faster, slightly less optimal diff.\r\n * @param {number} deadline Time when the diff should be complete by.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_compute_ = function(text1, text2, checklines,\r\n    deadline) {\r\n  var diffs;\r\n\r\n  if (!text1) {\r\n    // Just add some text (speedup).\r\n    return [[DIFF_INSERT, text2]];\r\n  }\r\n\r\n  if (!text2) {\r\n    // Just delete some text (speedup).\r\n    return [[DIFF_DELETE, text1]];\r\n  }\r\n\r\n  var longtext = text1.length > text2.length ? text1 : text2;\r\n  var shorttext = text1.length > text2.length ? text2 : text1;\r\n  var i = longtext.indexOf(shorttext);\r\n  if (i != -1) {\r\n    // Shorter text is inside the longer text (speedup).\r\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\r\n             [DIFF_EQUAL, shorttext],\r\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\r\n    // Swap insertions for deletions if diff is reversed.\r\n    if (text1.length > text2.length) {\r\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\r\n    }\r\n    return diffs;\r\n  }\r\n\r\n  if (shorttext.length == 1) {\r\n    // Single character string.\r\n    // After the previous speedup, the character can't be an equality.\r\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\r\n  }\r\n\r\n  // Check to see if the problem can be split in two.\r\n  var hm = this.diff_halfMatch_(text1, text2);\r\n  if (hm) {\r\n    // A half-match was found, sort out the return data.\r\n    var text1_a = hm[0];\r\n    var text1_b = hm[1];\r\n    var text2_a = hm[2];\r\n    var text2_b = hm[3];\r\n    var mid_common = hm[4];\r\n    // Send both pairs off for separate processing.\r\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\r\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline);\r\n    // Merge the results.\r\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\r\n  }\r\n\r\n  if (checklines && text1.length > 100 && text2.length > 100) {\r\n    return this.diff_lineMode_(text1, text2, deadline);\r\n  }\r\n\r\n  return this.diff_bisect_(text1, text2, deadline);\r\n};\r\n\r\n\r\n/**\r\n * Do a quick line-level diff on both strings, then rediff the parts for\r\n * greater accuracy.\r\n * This speedup can produce non-minimal diffs.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {number} deadline Time when the diff should be complete by.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_lineMode_ = function(text1, text2, deadline) {\r\n  // Scan the text on a line-by-line basis first.\r\n  var a = this.diff_linesToChars_(text1, text2);\r\n  text1 = a.chars1;\r\n  text2 = a.chars2;\r\n  var linearray = a.lineArray;\r\n\r\n  var diffs = this.diff_main(text1, text2, false, deadline);\r\n\r\n  // Convert the diff back to original text.\r\n  this.diff_charsToLines_(diffs, linearray);\r\n  // Eliminate freak matches (e.g. blank lines)\r\n  this.diff_cleanupSemantic(diffs);\r\n\r\n  // Rediff any replacement blocks, this time character-by-character.\r\n  // Add a dummy entry at the end.\r\n  diffs.push([DIFF_EQUAL, '']);\r\n  var pointer = 0;\r\n  var count_delete = 0;\r\n  var count_insert = 0;\r\n  var text_delete = '';\r\n  var text_insert = '';\r\n  while (pointer < diffs.length) {\r\n    switch (diffs[pointer][0]) {\r\n      case DIFF_INSERT:\r\n        count_insert++;\r\n        text_insert += diffs[pointer][1];\r\n        break;\r\n      case DIFF_DELETE:\r\n        count_delete++;\r\n        text_delete += diffs[pointer][1];\r\n        break;\r\n      case DIFF_EQUAL:\r\n        // Upon reaching an equality, check for prior redundancies.\r\n        if (count_delete >= 1 && count_insert >= 1) {\r\n          // Delete the offending records and add the merged ones.\r\n          diffs.splice(pointer - count_delete - count_insert,\r\n                       count_delete + count_insert);\r\n          pointer = pointer - count_delete - count_insert;\r\n          var a = this.diff_main(text_delete, text_insert, false, deadline);\r\n          for (var j = a.length - 1; j >= 0; j--) {\r\n            diffs.splice(pointer, 0, a[j]);\r\n          }\r\n          pointer = pointer + a.length;\r\n        }\r\n        count_insert = 0;\r\n        count_delete = 0;\r\n        text_delete = '';\r\n        text_insert = '';\r\n        break;\r\n    }\r\n    pointer++;\r\n  }\r\n  diffs.pop();  // Remove the dummy entry at the end.\r\n\r\n  return diffs;\r\n};\r\n\r\n\r\n/**\r\n * Find the 'middle snake' of a diff, split the problem in two\r\n * and return the recursively constructed diff.\r\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {number} deadline Time at which to bail if not yet complete.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_bisect_ = function(text1, text2, deadline) {\r\n  // Cache the text lengths to prevent multiple calls.\r\n  var text1_length = text1.length;\r\n  var text2_length = text2.length;\r\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\r\n  var v_offset = max_d;\r\n  var v_length = 2 * max_d;\r\n  var v1 = new Array(v_length);\r\n  var v2 = new Array(v_length);\r\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\r\n  // integers and undefined.\r\n  for (var x = 0; x < v_length; x++) {\r\n    v1[x] = -1;\r\n    v2[x] = -1;\r\n  }\r\n  v1[v_offset + 1] = 0;\r\n  v2[v_offset + 1] = 0;\r\n  var delta = text1_length - text2_length;\r\n  // If the total number of characters is odd, then the front path will collide\r\n  // with the reverse path.\r\n  var front = (delta % 2 != 0);\r\n  // Offsets for start and end of k loop.\r\n  // Prevents mapping of space beyond the grid.\r\n  var k1start = 0;\r\n  var k1end = 0;\r\n  var k2start = 0;\r\n  var k2end = 0;\r\n  for (var d = 0; d < max_d; d++) {\r\n    // Bail out if deadline is reached.\r\n    if ((new Date()).getTime() > deadline) {\r\n      break;\r\n    }\r\n\r\n    // Walk the front path one step.\r\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\r\n      var k1_offset = v_offset + k1;\r\n      var x1;\r\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\r\n        x1 = v1[k1_offset + 1];\r\n      } else {\r\n        x1 = v1[k1_offset - 1] + 1;\r\n      }\r\n      var y1 = x1 - k1;\r\n      while (x1 < text1_length && y1 < text2_length &&\r\n             text1.charAt(x1) == text2.charAt(y1)) {\r\n        x1++;\r\n        y1++;\r\n      }\r\n      v1[k1_offset] = x1;\r\n      if (x1 > text1_length) {\r\n        // Ran off the right of the graph.\r\n        k1end += 2;\r\n      } else if (y1 > text2_length) {\r\n        // Ran off the bottom of the graph.\r\n        k1start += 2;\r\n      } else if (front) {\r\n        var k2_offset = v_offset + delta - k1;\r\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\r\n          // Mirror x2 onto top-left coordinate system.\r\n          var x2 = text1_length - v2[k2_offset];\r\n          if (x1 >= x2) {\r\n            // Overlap detected.\r\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Walk the reverse path one step.\r\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\r\n      var k2_offset = v_offset + k2;\r\n      var x2;\r\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\r\n        x2 = v2[k2_offset + 1];\r\n      } else {\r\n        x2 = v2[k2_offset - 1] + 1;\r\n      }\r\n      var y2 = x2 - k2;\r\n      while (x2 < text1_length && y2 < text2_length &&\r\n             text1.charAt(text1_length - x2 - 1) ==\r\n             text2.charAt(text2_length - y2 - 1)) {\r\n        x2++;\r\n        y2++;\r\n      }\r\n      v2[k2_offset] = x2;\r\n      if (x2 > text1_length) {\r\n        // Ran off the left of the graph.\r\n        k2end += 2;\r\n      } else if (y2 > text2_length) {\r\n        // Ran off the top of the graph.\r\n        k2start += 2;\r\n      } else if (!front) {\r\n        var k1_offset = v_offset + delta - k2;\r\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\r\n          var x1 = v1[k1_offset];\r\n          var y1 = v_offset + x1 - k1_offset;\r\n          // Mirror x2 onto top-left coordinate system.\r\n          x2 = text1_length - x2;\r\n          if (x1 >= x2) {\r\n            // Overlap detected.\r\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // Diff took too long and hit the deadline or\r\n  // number of diffs equals number of characters, no commonality at all.\r\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\r\n};\r\n\r\n\r\n/**\r\n * Given the location of the 'middle snake', split the diff in two parts\r\n * and recurse.\r\n * @param {string} text1 Old string to be diffed.\r\n * @param {string} text2 New string to be diffed.\r\n * @param {number} x Index of split point in text1.\r\n * @param {number} y Index of split point in text2.\r\n * @param {number} deadline Time at which to bail if not yet complete.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_bisectSplit_ = function(text1, text2, x, y,\r\n    deadline) {\r\n  var text1a = text1.substring(0, x);\r\n  var text2a = text2.substring(0, y);\r\n  var text1b = text1.substring(x);\r\n  var text2b = text2.substring(y);\r\n\r\n  // Compute both diffs serially.\r\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\r\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\r\n\r\n  return diffs.concat(diffsb);\r\n};\r\n\r\n\r\n/**\r\n * Split two texts into an array of strings.  Reduce the texts to a string of\r\n * hashes where each Unicode character represents one line.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\r\n *     An object containing the encoded text1, the encoded text2 and\r\n *     the array of unique strings.\r\n *     The zeroth element of the array of unique strings is intentionally blank.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_linesToChars_ = function(text1, text2) {\r\n  var lineArray = [];  // e.g. lineArray[4] == 'Hello\\n'\r\n  var lineHash = {};   // e.g. lineHash['Hello\\n'] == 4\r\n\r\n  // '\\x00' is a valid character, but various debuggers don't like it.\r\n  // So we'll insert a junk entry to avoid generating a null character.\r\n  lineArray[0] = '';\r\n\r\n  /**\r\n   * Split a text into an array of strings.  Reduce the texts to a string of\r\n   * hashes where each Unicode character represents one line.\r\n   * Modifies linearray and linehash through being a closure.\r\n   * @param {string} text String to encode.\r\n   * @return {string} Encoded string.\r\n   * @private\r\n   */\r\n  function diff_linesToCharsMunge_(text) {\r\n    var chars = '';\r\n    // Walk the text, pulling out a substring for each line.\r\n    // text.split('\\n') would would temporarily double our memory footprint.\r\n    // Modifying text would create many large strings to garbage collect.\r\n    var lineStart = 0;\r\n    var lineEnd = -1;\r\n    // Keeping our own length variable is faster than looking it up.\r\n    var lineArrayLength = lineArray.length;\r\n    while (lineEnd < text.length - 1) {\r\n      lineEnd = text.indexOf('\\n', lineStart);\r\n      if (lineEnd == -1) {\r\n        lineEnd = text.length - 1;\r\n      }\r\n      var line = text.substring(lineStart, lineEnd + 1);\r\n      lineStart = lineEnd + 1;\r\n\r\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) :\r\n          (lineHash[line] !== undefined)) {\r\n        chars += String.fromCharCode(lineHash[line]);\r\n      } else {\r\n        chars += String.fromCharCode(lineArrayLength);\r\n        lineHash[line] = lineArrayLength;\r\n        lineArray[lineArrayLength++] = line;\r\n      }\r\n    }\r\n    return chars;\r\n  }\r\n\r\n  var chars1 = diff_linesToCharsMunge_(text1);\r\n  var chars2 = diff_linesToCharsMunge_(text2);\r\n  return {chars1: chars1, chars2: chars2, lineArray: lineArray};\r\n};\r\n\r\n\r\n/**\r\n * Rehydrate the text in a diff from a string of line hashes to real lines of\r\n * text.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @param {!Array.<string>} lineArray Array of unique strings.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_charsToLines_ = function(diffs, lineArray) {\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var chars = diffs[x][1];\r\n    var text = [];\r\n    for (var y = 0; y < chars.length; y++) {\r\n      text[y] = lineArray[chars.charCodeAt(y)];\r\n    }\r\n    diffs[x][1] = text.join('');\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Determine the common prefix of two strings.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {number} The number of characters common to the start of each\r\n *     string.\r\n */\r\ndiff_match_patch.prototype.diff_commonPrefix = function(text1, text2) {\r\n  // Quick check for common null cases.\r\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\r\n    return 0;\r\n  }\r\n  // Binary search.\r\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\r\n  var pointermin = 0;\r\n  var pointermax = Math.min(text1.length, text2.length);\r\n  var pointermid = pointermax;\r\n  var pointerstart = 0;\r\n  while (pointermin < pointermid) {\r\n    if (text1.substring(pointerstart, pointermid) ==\r\n        text2.substring(pointerstart, pointermid)) {\r\n      pointermin = pointermid;\r\n      pointerstart = pointermin;\r\n    } else {\r\n      pointermax = pointermid;\r\n    }\r\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\r\n  }\r\n  return pointermid;\r\n};\r\n\r\n\r\n/**\r\n * Determine the common suffix of two strings.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {number} The number of characters common to the end of each string.\r\n */\r\ndiff_match_patch.prototype.diff_commonSuffix = function(text1, text2) {\r\n  // Quick check for common null cases.\r\n  if (!text1 || !text2 ||\r\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\r\n    return 0;\r\n  }\r\n  // Binary search.\r\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\r\n  var pointermin = 0;\r\n  var pointermax = Math.min(text1.length, text2.length);\r\n  var pointermid = pointermax;\r\n  var pointerend = 0;\r\n  while (pointermin < pointermid) {\r\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\r\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\r\n      pointermin = pointermid;\r\n      pointerend = pointermin;\r\n    } else {\r\n      pointermax = pointermid;\r\n    }\r\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\r\n  }\r\n  return pointermid;\r\n};\r\n\r\n\r\n/**\r\n * Determine if the suffix of one string is the prefix of another.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {number} The number of characters common to the end of the first\r\n *     string and the start of the second string.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_commonOverlap_ = function(text1, text2) {\r\n  // Cache the text lengths to prevent multiple calls.\r\n  var text1_length = text1.length;\r\n  var text2_length = text2.length;\r\n  // Eliminate the null case.\r\n  if (text1_length == 0 || text2_length == 0) {\r\n    return 0;\r\n  }\r\n  // Truncate the longer string.\r\n  if (text1_length > text2_length) {\r\n    text1 = text1.substring(text1_length - text2_length);\r\n  } else if (text1_length < text2_length) {\r\n    text2 = text2.substring(0, text1_length);\r\n  }\r\n  var text_length = Math.min(text1_length, text2_length);\r\n  // Quick check for the worst case.\r\n  if (text1 == text2) {\r\n    return text_length;\r\n  }\r\n\r\n  // Start by looking for a single character match\r\n  // and increase length until no match is found.\r\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\r\n  var best = 0;\r\n  var length = 1;\r\n  while (true) {\r\n    var pattern = text1.substring(text_length - length);\r\n    var found = text2.indexOf(pattern);\r\n    if (found == -1) {\r\n      return best;\r\n    }\r\n    length += found;\r\n    if (found == 0 || text1.substring(text_length - length) ==\r\n        text2.substring(0, length)) {\r\n      best = length;\r\n      length++;\r\n    }\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Do the two texts share a substring which is at least half the length of the\r\n * longer text?\r\n * This speedup can produce non-minimal diffs.\r\n * @param {string} text1 First string.\r\n * @param {string} text2 Second string.\r\n * @return {Array.<string>} Five element Array, containing the prefix of\r\n *     text1, the suffix of text1, the prefix of text2, the suffix of\r\n *     text2 and the common middle.  Or null if there was no match.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.diff_halfMatch_ = function(text1, text2) {\r\n  if (this.Diff_Timeout <= 0) {\r\n    // Don't risk returning a non-optimal diff if we have unlimited time.\r\n    return null;\r\n  }\r\n  var longtext = text1.length > text2.length ? text1 : text2;\r\n  var shorttext = text1.length > text2.length ? text2 : text1;\r\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\r\n    return null;  // Pointless.\r\n  }\r\n  var dmp = this;  // 'this' becomes 'window' in a closure.\r\n\r\n  /**\r\n   * Does a substring of shorttext exist within longtext such that the substring\r\n   * is at least half the length of longtext?\r\n   * Closure, but does not reference any external variables.\r\n   * @param {string} longtext Longer string.\r\n   * @param {string} shorttext Shorter string.\r\n   * @param {number} i Start index of quarter length substring within longtext.\r\n   * @return {Array.<string>} Five element Array, containing the prefix of\r\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\r\n   *     of shorttext and the common middle.  Or null if there was no match.\r\n   * @private\r\n   */\r\n  function diff_halfMatchI_(longtext, shorttext, i) {\r\n    // Start with a 1/4 length substring at position i as a seed.\r\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\r\n    var j = -1;\r\n    var best_common = '';\r\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\r\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\r\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i),\r\n                                               shorttext.substring(j));\r\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i),\r\n                                               shorttext.substring(0, j));\r\n      if (best_common.length < suffixLength + prefixLength) {\r\n        best_common = shorttext.substring(j - suffixLength, j) +\r\n            shorttext.substring(j, j + prefixLength);\r\n        best_longtext_a = longtext.substring(0, i - suffixLength);\r\n        best_longtext_b = longtext.substring(i + prefixLength);\r\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\r\n        best_shorttext_b = shorttext.substring(j + prefixLength);\r\n      }\r\n    }\r\n    if (best_common.length * 2 >= longtext.length) {\r\n      return [best_longtext_a, best_longtext_b,\r\n              best_shorttext_a, best_shorttext_b, best_common];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // First check if the second quarter is the seed for a half-match.\r\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\r\n                             Math.ceil(longtext.length / 4));\r\n  // Check again based on the third quarter.\r\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\r\n                             Math.ceil(longtext.length / 2));\r\n  var hm;\r\n  if (!hm1 && !hm2) {\r\n    return null;\r\n  } else if (!hm2) {\r\n    hm = hm1;\r\n  } else if (!hm1) {\r\n    hm = hm2;\r\n  } else {\r\n    // Both matched.  Select the longest.\r\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\r\n  }\r\n\r\n  // A half-match was found, sort out the return data.\r\n  var text1_a, text1_b, text2_a, text2_b;\r\n  if (text1.length > text2.length) {\r\n    text1_a = hm[0];\r\n    text1_b = hm[1];\r\n    text2_a = hm[2];\r\n    text2_b = hm[3];\r\n  } else {\r\n    text2_a = hm[0];\r\n    text2_b = hm[1];\r\n    text1_a = hm[2];\r\n    text1_b = hm[3];\r\n  }\r\n  var mid_common = hm[4];\r\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\r\n};\r\n\r\n\r\n/**\r\n * Reduce the number of edits by eliminating semantically trivial equalities.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupSemantic = function(diffs) {\r\n  var changes = false;\r\n  var equalities = [];  // Stack of indices where equalities are found.\r\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\r\n  /** @type {?string} */\r\n  var lastequality = null;\r\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\r\n  var pointer = 0;  // Index of current position.\r\n  // Number of characters that changed prior to the equality.\r\n  var length_insertions1 = 0;\r\n  var length_deletions1 = 0;\r\n  // Number of characters that changed after the equality.\r\n  var length_insertions2 = 0;\r\n  var length_deletions2 = 0;\r\n  while (pointer < diffs.length) {\r\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\r\n      equalities[equalitiesLength++] = pointer;\r\n      length_insertions1 = length_insertions2;\r\n      length_deletions1 = length_deletions2;\r\n      length_insertions2 = 0;\r\n      length_deletions2 = 0;\r\n      lastequality = diffs[pointer][1];\r\n    } else {  // An insertion or deletion.\r\n      if (diffs[pointer][0] == DIFF_INSERT) {\r\n        length_insertions2 += diffs[pointer][1].length;\r\n      } else {\r\n        length_deletions2 += diffs[pointer][1].length;\r\n      }\r\n      // Eliminate an equality that is smaller or equal to the edits on both\r\n      // sides of it.\r\n      if (lastequality && (lastequality.length <=\r\n          Math.max(length_insertions1, length_deletions1)) &&\r\n          (lastequality.length <= Math.max(length_insertions2,\r\n                                           length_deletions2))) {\r\n        // Duplicate record.\r\n        diffs.splice(equalities[equalitiesLength - 1], 0,\r\n                     [DIFF_DELETE, lastequality]);\r\n        // Change second copy to insert.\r\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\r\n        // Throw away the equality we just deleted.\r\n        equalitiesLength--;\r\n        // Throw away the previous equality (it needs to be reevaluated).\r\n        equalitiesLength--;\r\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\r\n        length_insertions1 = 0;  // Reset the counters.\r\n        length_deletions1 = 0;\r\n        length_insertions2 = 0;\r\n        length_deletions2 = 0;\r\n        lastequality = null;\r\n        changes = true;\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n\r\n  // Normalize the diff.\r\n  if (changes) {\r\n    this.diff_cleanupMerge(diffs);\r\n  }\r\n  this.diff_cleanupSemanticLossless(diffs);\r\n\r\n  // Find any overlaps between deletions and insertions.\r\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\r\n  //   -> <del>abc</del>xxx<ins>def</ins>\r\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\r\n  //   -> <ins>def</ins>xxx<del>abc</del>\r\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\r\n  pointer = 1;\r\n  while (pointer < diffs.length) {\r\n    if (diffs[pointer - 1][0] == DIFF_DELETE &&\r\n        diffs[pointer][0] == DIFF_INSERT) {\r\n      var deletion = diffs[pointer - 1][1];\r\n      var insertion = diffs[pointer][1];\r\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\r\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\r\n      if (overlap_length1 >= overlap_length2) {\r\n        if (overlap_length1 >= deletion.length / 2 ||\r\n            overlap_length1 >= insertion.length / 2) {\r\n          // Overlap found.  Insert an equality and trim the surrounding edits.\r\n          diffs.splice(pointer, 0,\r\n              [DIFF_EQUAL, insertion.substring(0, overlap_length1)]);\r\n          diffs[pointer - 1][1] =\r\n              deletion.substring(0, deletion.length - overlap_length1);\r\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\r\n          pointer++;\r\n        }\r\n      } else {\r\n        if (overlap_length2 >= deletion.length / 2 ||\r\n            overlap_length2 >= insertion.length / 2) {\r\n          // Reverse overlap found.\r\n          // Insert an equality and swap and trim the surrounding edits.\r\n          diffs.splice(pointer, 0,\r\n              [DIFF_EQUAL, deletion.substring(0, overlap_length2)]);\r\n          diffs[pointer - 1][0] = DIFF_INSERT;\r\n          diffs[pointer - 1][1] =\r\n              insertion.substring(0, insertion.length - overlap_length2);\r\n          diffs[pointer + 1][0] = DIFF_DELETE;\r\n          diffs[pointer + 1][1] =\r\n              deletion.substring(overlap_length2);\r\n          pointer++;\r\n        }\r\n      }\r\n      pointer++;\r\n    }\r\n    pointer++;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Look for single edits surrounded on both sides by equalities\r\n * which can be shifted sideways to align the edit to a word boundary.\r\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function(diffs) {\r\n  /**\r\n   * Given two strings, compute a score representing whether the internal\r\n   * boundary falls on logical boundaries.\r\n   * Scores range from 6 (best) to 0 (worst).\r\n   * Closure, but does not reference any external variables.\r\n   * @param {string} one First string.\r\n   * @param {string} two Second string.\r\n   * @return {number} The score.\r\n   * @private\r\n   */\r\n  function diff_cleanupSemanticScore_(one, two) {\r\n    if (!one || !two) {\r\n      // Edges are the best.\r\n      return 6;\r\n    }\r\n\r\n    // Each port of this function behaves slightly differently due to\r\n    // subtle differences in each language's definition of things like\r\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\r\n    // the choice has been made to use each language's native features\r\n    // rather than force total conformity.\r\n    var char1 = one.charAt(one.length - 1);\r\n    var char2 = two.charAt(0);\r\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\r\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\r\n    var whitespace1 = nonAlphaNumeric1 &&\r\n        char1.match(diff_match_patch.whitespaceRegex_);\r\n    var whitespace2 = nonAlphaNumeric2 &&\r\n        char2.match(diff_match_patch.whitespaceRegex_);\r\n    var lineBreak1 = whitespace1 &&\r\n        char1.match(diff_match_patch.linebreakRegex_);\r\n    var lineBreak2 = whitespace2 &&\r\n        char2.match(diff_match_patch.linebreakRegex_);\r\n    var blankLine1 = lineBreak1 &&\r\n        one.match(diff_match_patch.blanklineEndRegex_);\r\n    var blankLine2 = lineBreak2 &&\r\n        two.match(diff_match_patch.blanklineStartRegex_);\r\n\r\n    if (blankLine1 || blankLine2) {\r\n      // Five points for blank lines.\r\n      return 5;\r\n    } else if (lineBreak1 || lineBreak2) {\r\n      // Four points for line breaks.\r\n      return 4;\r\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\r\n      // Three points for end of sentences.\r\n      return 3;\r\n    } else if (whitespace1 || whitespace2) {\r\n      // Two points for whitespace.\r\n      return 2;\r\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\r\n      // One point for non-alphanumeric.\r\n      return 1;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  var pointer = 1;\r\n  // Intentionally ignore the first and last element (don't need checking).\r\n  while (pointer < diffs.length - 1) {\r\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\r\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\r\n      // This is a single edit surrounded by equalities.\r\n      var equality1 = diffs[pointer - 1][1];\r\n      var edit = diffs[pointer][1];\r\n      var equality2 = diffs[pointer + 1][1];\r\n\r\n      // First, shift the edit as far left as possible.\r\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\r\n      if (commonOffset) {\r\n        var commonString = edit.substring(edit.length - commonOffset);\r\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\r\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\r\n        equality2 = commonString + equality2;\r\n      }\r\n\r\n      // Second, step character by character right, looking for the best fit.\r\n      var bestEquality1 = equality1;\r\n      var bestEdit = edit;\r\n      var bestEquality2 = equality2;\r\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) +\r\n          diff_cleanupSemanticScore_(edit, equality2);\r\n      while (edit.charAt(0) === equality2.charAt(0)) {\r\n        equality1 += edit.charAt(0);\r\n        edit = edit.substring(1) + equality2.charAt(0);\r\n        equality2 = equality2.substring(1);\r\n        var score = diff_cleanupSemanticScore_(equality1, edit) +\r\n            diff_cleanupSemanticScore_(edit, equality2);\r\n        // The >= encourages trailing rather than leading whitespace on edits.\r\n        if (score >= bestScore) {\r\n          bestScore = score;\r\n          bestEquality1 = equality1;\r\n          bestEdit = edit;\r\n          bestEquality2 = equality2;\r\n        }\r\n      }\r\n\r\n      if (diffs[pointer - 1][1] != bestEquality1) {\r\n        // We have an improvement, save it back to the diff.\r\n        if (bestEquality1) {\r\n          diffs[pointer - 1][1] = bestEquality1;\r\n        } else {\r\n          diffs.splice(pointer - 1, 1);\r\n          pointer--;\r\n        }\r\n        diffs[pointer][1] = bestEdit;\r\n        if (bestEquality2) {\r\n          diffs[pointer + 1][1] = bestEquality2;\r\n        } else {\r\n          diffs.splice(pointer + 1, 1);\r\n          pointer--;\r\n        }\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n};\r\n\r\n// Define some regex patterns for matching boundaries.\r\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\r\ndiff_match_patch.whitespaceRegex_ = /\\s/;\r\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\r\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\r\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\r\n\r\n/**\r\n * Reduce the number of edits by eliminating operationally trivial equalities.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupEfficiency = function(diffs) {\r\n  var changes = false;\r\n  var equalities = [];  // Stack of indices where equalities are found.\r\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\r\n  /** @type {?string} */\r\n  var lastequality = null;\r\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\r\n  var pointer = 0;  // Index of current position.\r\n  // Is there an insertion operation before the last equality.\r\n  var pre_ins = false;\r\n  // Is there a deletion operation before the last equality.\r\n  var pre_del = false;\r\n  // Is there an insertion operation after the last equality.\r\n  var post_ins = false;\r\n  // Is there a deletion operation after the last equality.\r\n  var post_del = false;\r\n  while (pointer < diffs.length) {\r\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\r\n      if (diffs[pointer][1].length < this.Diff_EditCost &&\r\n          (post_ins || post_del)) {\r\n        // Candidate found.\r\n        equalities[equalitiesLength++] = pointer;\r\n        pre_ins = post_ins;\r\n        pre_del = post_del;\r\n        lastequality = diffs[pointer][1];\r\n      } else {\r\n        // Not a candidate, and can never become one.\r\n        equalitiesLength = 0;\r\n        lastequality = null;\r\n      }\r\n      post_ins = post_del = false;\r\n    } else {  // An insertion or deletion.\r\n      if (diffs[pointer][0] == DIFF_DELETE) {\r\n        post_del = true;\r\n      } else {\r\n        post_ins = true;\r\n      }\r\n      /*\r\n       * Five types to be split:\r\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\r\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\r\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\r\n       * <ins>A</del>X<ins>C</ins><del>D</del>\r\n       * <ins>A</ins><del>B</del>X<del>C</del>\r\n       */\r\n      if (lastequality && ((pre_ins && pre_del && post_ins && post_del) ||\r\n                           ((lastequality.length < this.Diff_EditCost / 2) &&\r\n                            (pre_ins + pre_del + post_ins + post_del) == 3))) {\r\n        // Duplicate record.\r\n        diffs.splice(equalities[equalitiesLength - 1], 0,\r\n                     [DIFF_DELETE, lastequality]);\r\n        // Change second copy to insert.\r\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\r\n        equalitiesLength--;  // Throw away the equality we just deleted;\r\n        lastequality = null;\r\n        if (pre_ins && pre_del) {\r\n          // No changes made which could affect previous entry, keep going.\r\n          post_ins = post_del = true;\r\n          equalitiesLength = 0;\r\n        } else {\r\n          equalitiesLength--;  // Throw away the previous equality.\r\n          pointer = equalitiesLength > 0 ?\r\n              equalities[equalitiesLength - 1] : -1;\r\n          post_ins = post_del = false;\r\n        }\r\n        changes = true;\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n\r\n  if (changes) {\r\n    this.diff_cleanupMerge(diffs);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Reorder and merge like edit sections.  Merge equalities.\r\n * Any edit section can move as long as it doesn't cross an equality.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n */\r\ndiff_match_patch.prototype.diff_cleanupMerge = function(diffs) {\r\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\r\n  var pointer = 0;\r\n  var count_delete = 0;\r\n  var count_insert = 0;\r\n  var text_delete = '';\r\n  var text_insert = '';\r\n  var commonlength;\r\n  while (pointer < diffs.length) {\r\n    switch (diffs[pointer][0]) {\r\n      case DIFF_INSERT:\r\n        count_insert++;\r\n        text_insert += diffs[pointer][1];\r\n        pointer++;\r\n        break;\r\n      case DIFF_DELETE:\r\n        count_delete++;\r\n        text_delete += diffs[pointer][1];\r\n        pointer++;\r\n        break;\r\n      case DIFF_EQUAL:\r\n        // Upon reaching an equality, check for prior redundancies.\r\n        if (count_delete + count_insert > 1) {\r\n          if (count_delete !== 0 && count_insert !== 0) {\r\n            // Factor out any common prefixies.\r\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\r\n            if (commonlength !== 0) {\r\n              if ((pointer - count_delete - count_insert) > 0 &&\r\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\r\n                  DIFF_EQUAL) {\r\n                diffs[pointer - count_delete - count_insert - 1][1] +=\r\n                    text_insert.substring(0, commonlength);\r\n              } else {\r\n                diffs.splice(0, 0, [DIFF_EQUAL,\r\n                                    text_insert.substring(0, commonlength)]);\r\n                pointer++;\r\n              }\r\n              text_insert = text_insert.substring(commonlength);\r\n              text_delete = text_delete.substring(commonlength);\r\n            }\r\n            // Factor out any common suffixies.\r\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\r\n            if (commonlength !== 0) {\r\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\r\n                  commonlength) + diffs[pointer][1];\r\n              text_insert = text_insert.substring(0, text_insert.length -\r\n                  commonlength);\r\n              text_delete = text_delete.substring(0, text_delete.length -\r\n                  commonlength);\r\n            }\r\n          }\r\n          // Delete the offending records and add the merged ones.\r\n          if (count_delete === 0) {\r\n            diffs.splice(pointer - count_insert,\r\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\r\n          } else if (count_insert === 0) {\r\n            diffs.splice(pointer - count_delete,\r\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\r\n          } else {\r\n            diffs.splice(pointer - count_delete - count_insert,\r\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\r\n                [DIFF_INSERT, text_insert]);\r\n          }\r\n          pointer = pointer - count_delete - count_insert +\r\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\r\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\r\n          // Merge this equality with the previous one.\r\n          diffs[pointer - 1][1] += diffs[pointer][1];\r\n          diffs.splice(pointer, 1);\r\n        } else {\r\n          pointer++;\r\n        }\r\n        count_insert = 0;\r\n        count_delete = 0;\r\n        text_delete = '';\r\n        text_insert = '';\r\n        break;\r\n    }\r\n  }\r\n  if (diffs[diffs.length - 1][1] === '') {\r\n    diffs.pop();  // Remove the dummy entry at the end.\r\n  }\r\n\r\n  // Second pass: look for single edits surrounded on both sides by equalities\r\n  // which can be shifted sideways to eliminate an equality.\r\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\r\n  var changes = false;\r\n  pointer = 1;\r\n  // Intentionally ignore the first and last element (don't need checking).\r\n  while (pointer < diffs.length - 1) {\r\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\r\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\r\n      // This is a single edit surrounded by equalities.\r\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\r\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\r\n        // Shift the edit over the previous equality.\r\n        diffs[pointer][1] = diffs[pointer - 1][1] +\r\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\r\n                                        diffs[pointer - 1][1].length);\r\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\r\n        diffs.splice(pointer - 1, 1);\r\n        changes = true;\r\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\r\n          diffs[pointer + 1][1]) {\r\n        // Shift the edit over the next equality.\r\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\r\n        diffs[pointer][1] =\r\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\r\n            diffs[pointer + 1][1];\r\n        diffs.splice(pointer + 1, 1);\r\n        changes = true;\r\n      }\r\n    }\r\n    pointer++;\r\n  }\r\n  // If shifts were made, the diff needs reordering and another shift sweep.\r\n  if (changes) {\r\n    this.diff_cleanupMerge(diffs);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * loc is a location in text1, compute and return the equivalent location in\r\n * text2.\r\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @param {number} loc Location within text1.\r\n * @return {number} Location within text2.\r\n */\r\ndiff_match_patch.prototype.diff_xIndex = function(diffs, loc) {\r\n  var chars1 = 0;\r\n  var chars2 = 0;\r\n  var last_chars1 = 0;\r\n  var last_chars2 = 0;\r\n  var x;\r\n  for (x = 0; x < diffs.length; x++) {\r\n    if (diffs[x][0] !== DIFF_INSERT) {  // Equality or deletion.\r\n      chars1 += diffs[x][1].length;\r\n    }\r\n    if (diffs[x][0] !== DIFF_DELETE) {  // Equality or insertion.\r\n      chars2 += diffs[x][1].length;\r\n    }\r\n    if (chars1 > loc) {  // Overshot the location.\r\n      break;\r\n    }\r\n    last_chars1 = chars1;\r\n    last_chars2 = chars2;\r\n  }\r\n  // Was the location was deleted?\r\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\r\n    return last_chars2;\r\n  }\r\n  // Add the remaining character length.\r\n  return last_chars2 + (loc - last_chars1);\r\n};\r\n\r\n\r\n/**\r\n * Convert a diff array into a pretty HTML report.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} HTML representation.\r\n */\r\ndiff_match_patch.prototype.diff_prettyHtml = function(diffs) {\r\n  var html = [];\r\n  var pattern_amp = /&/g;\r\n  var pattern_lt = /</g;\r\n  var pattern_gt = />/g;\r\n  var pattern_para = /\\n/g;\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var op = diffs[x][0];    // Operation (insert, delete, equal)\r\n    var data = diffs[x][1];  // Text of change.\r\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;')\r\n        .replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\r\n    switch (op) {\r\n      case DIFF_INSERT:\r\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\r\n        break;\r\n      case DIFF_DELETE:\r\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\r\n        break;\r\n      case DIFF_EQUAL:\r\n        html[x] = '<span>' + text + '</span>';\r\n        break;\r\n    }\r\n  }\r\n  return html.join('');\r\n};\r\n\r\n\r\n/**\r\n * Compute and return the source text (all equalities and deletions).\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} Source text.\r\n */\r\ndiff_match_patch.prototype.diff_text1 = function(diffs) {\r\n  var text = [];\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    if (diffs[x][0] !== DIFF_INSERT) {\r\n      text[x] = diffs[x][1];\r\n    }\r\n  }\r\n  return text.join('');\r\n};\r\n\r\n\r\n/**\r\n * Compute and return the destination text (all equalities and insertions).\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} Destination text.\r\n */\r\ndiff_match_patch.prototype.diff_text2 = function(diffs) {\r\n  var text = [];\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    if (diffs[x][0] !== DIFF_DELETE) {\r\n      text[x] = diffs[x][1];\r\n    }\r\n  }\r\n  return text.join('');\r\n};\r\n\r\n\r\n/**\r\n * Compute the Levenshtein distance; the number of inserted, deleted or\r\n * substituted characters.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {number} Number of changes.\r\n */\r\ndiff_match_patch.prototype.diff_levenshtein = function(diffs) {\r\n  var levenshtein = 0;\r\n  var insertions = 0;\r\n  var deletions = 0;\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var op = diffs[x][0];\r\n    var data = diffs[x][1];\r\n    switch (op) {\r\n      case DIFF_INSERT:\r\n        insertions += data.length;\r\n        break;\r\n      case DIFF_DELETE:\r\n        deletions += data.length;\r\n        break;\r\n      case DIFF_EQUAL:\r\n        // A deletion and an insertion is one substitution.\r\n        levenshtein += Math.max(insertions, deletions);\r\n        insertions = 0;\r\n        deletions = 0;\r\n        break;\r\n    }\r\n  }\r\n  levenshtein += Math.max(insertions, deletions);\r\n  return levenshtein;\r\n};\r\n\r\n\r\n/**\r\n * Crush the diff into an encoded string which describes the operations\r\n * required to transform text1 into text2.\r\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\r\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\r\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\r\n * @return {string} Delta text.\r\n */\r\ndiff_match_patch.prototype.diff_toDelta = function(diffs) {\r\n  var text = [];\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    switch (diffs[x][0]) {\r\n      case DIFF_INSERT:\r\n        text[x] = '+' + encodeURI(diffs[x][1]);\r\n        break;\r\n      case DIFF_DELETE:\r\n        text[x] = '-' + diffs[x][1].length;\r\n        break;\r\n      case DIFF_EQUAL:\r\n        text[x] = '=' + diffs[x][1].length;\r\n        break;\r\n    }\r\n  }\r\n  return text.join('\\t').replace(/%20/g, ' ');\r\n};\r\n\r\n\r\n/**\r\n * Given the original text1, and an encoded string which describes the\r\n * operations required to transform text1 into text2, compute the full diff.\r\n * @param {string} text1 Source string for the diff.\r\n * @param {string} delta Delta text.\r\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\r\n * @throws {!Error} If invalid input.\r\n */\r\ndiff_match_patch.prototype.diff_fromDelta = function(text1, delta) {\r\n  var diffs = [];\r\n  var diffsLength = 0;  // Keeping our own length var is faster in JS.\r\n  var pointer = 0;  // Cursor in text1\r\n  var tokens = delta.split(/\\t/g);\r\n  for (var x = 0; x < tokens.length; x++) {\r\n    // Each token begins with a one character parameter which specifies the\r\n    // operation of this token (delete, insert, equality).\r\n    var param = tokens[x].substring(1);\r\n    switch (tokens[x].charAt(0)) {\r\n      case '+':\r\n        try {\r\n          diffs[diffsLength++] = [DIFF_INSERT, decodeURI(param)];\r\n        } catch (ex) {\r\n          // Malformed URI sequence.\r\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\r\n        }\r\n        break;\r\n      case '-':\r\n        // Fall through.\r\n      case '=':\r\n        var n = parseInt(param, 10);\r\n        if (isNaN(n) || n < 0) {\r\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\r\n        }\r\n        var text = text1.substring(pointer, pointer += n);\r\n        if (tokens[x].charAt(0) == '=') {\r\n          diffs[diffsLength++] = [DIFF_EQUAL, text];\r\n        } else {\r\n          diffs[diffsLength++] = [DIFF_DELETE, text];\r\n        }\r\n        break;\r\n      default:\r\n        // Blank tokens are ok (from a trailing \\t).\r\n        // Anything else is an error.\r\n        if (tokens[x]) {\r\n          throw new Error('Invalid diff operation in diff_fromDelta: ' +\r\n                          tokens[x]);\r\n        }\r\n    }\r\n  }\r\n  if (pointer != text1.length) {\r\n    throw new Error('Delta length (' + pointer +\r\n        ') does not equal source text length (' + text1.length + ').');\r\n  }\r\n  return diffs;\r\n};\r\n\r\n\r\n//  MATCH FUNCTIONS\r\n\r\n\r\n/**\r\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\r\n * @param {string} text The text to search.\r\n * @param {string} pattern The pattern to search for.\r\n * @param {number} loc The location to search around.\r\n * @return {number} Best match index or -1.\r\n */\r\ndiff_match_patch.prototype.match_main = function(text, pattern, loc) {\r\n  // Check for null inputs.\r\n  if (text == null || pattern == null || loc == null) {\r\n    throw new Error('Null input. (match_main)');\r\n  }\r\n\r\n  loc = Math.max(0, Math.min(loc, text.length));\r\n  if (text == pattern) {\r\n    // Shortcut (potentially not guaranteed by the algorithm)\r\n    return 0;\r\n  } else if (!text.length) {\r\n    // Nothing to match.\r\n    return -1;\r\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\r\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\r\n    return loc;\r\n  } else {\r\n    // Do a fuzzy compare.\r\n    return this.match_bitap_(text, pattern, loc);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\r\n * Bitap algorithm.\r\n * @param {string} text The text to search.\r\n * @param {string} pattern The pattern to search for.\r\n * @param {number} loc The location to search around.\r\n * @return {number} Best match index or -1.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.match_bitap_ = function(text, pattern, loc) {\r\n  if (pattern.length > this.Match_MaxBits) {\r\n    throw new Error('Pattern too long for this browser.');\r\n  }\r\n\r\n  // Initialise the alphabet.\r\n  var s = this.match_alphabet_(pattern);\r\n\r\n  var dmp = this;  // 'this' becomes 'window' in a closure.\r\n\r\n  /**\r\n   * Compute and return the score for a match with e errors and x location.\r\n   * Accesses loc and pattern through being a closure.\r\n   * @param {number} e Number of errors in match.\r\n   * @param {number} x Location of match.\r\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\r\n   * @private\r\n   */\r\n  function match_bitapScore_(e, x) {\r\n    var accuracy = e / pattern.length;\r\n    var proximity = Math.abs(loc - x);\r\n    if (!dmp.Match_Distance) {\r\n      // Dodge divide by zero error.\r\n      return proximity ? 1.0 : accuracy;\r\n    }\r\n    return accuracy + (proximity / dmp.Match_Distance);\r\n  }\r\n\r\n  // Highest score beyond which we give up.\r\n  var score_threshold = this.Match_Threshold;\r\n  // Is there a nearby exact match? (speedup)\r\n  var best_loc = text.indexOf(pattern, loc);\r\n  if (best_loc != -1) {\r\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\r\n    // What about in the other direction? (speedup)\r\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\r\n    if (best_loc != -1) {\r\n      score_threshold =\r\n          Math.min(match_bitapScore_(0, best_loc), score_threshold);\r\n    }\r\n  }\r\n\r\n  // Initialise the bit arrays.\r\n  var matchmask = 1 << (pattern.length - 1);\r\n  best_loc = -1;\r\n\r\n  var bin_min, bin_mid;\r\n  var bin_max = pattern.length + text.length;\r\n  var last_rd;\r\n  for (var d = 0; d < pattern.length; d++) {\r\n    // Scan for the best match; each iteration allows for one more error.\r\n    // Run a binary search to determine how far from 'loc' we can stray at this\r\n    // error level.\r\n    bin_min = 0;\r\n    bin_mid = bin_max;\r\n    while (bin_min < bin_mid) {\r\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\r\n        bin_min = bin_mid;\r\n      } else {\r\n        bin_max = bin_mid;\r\n      }\r\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\r\n    }\r\n    // Use the result from this iteration as the maximum for the next.\r\n    bin_max = bin_mid;\r\n    var start = Math.max(1, loc - bin_mid + 1);\r\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\r\n\r\n    var rd = Array(finish + 2);\r\n    rd[finish + 1] = (1 << d) - 1;\r\n    for (var j = finish; j >= start; j--) {\r\n      // The alphabet (s) is a sparse hash, so the following line generates\r\n      // warnings.\r\n      var charMatch = s[text.charAt(j - 1)];\r\n      if (d === 0) {  // First pass: exact match.\r\n        rd[j] = ((rd[j + 1] << 1) | 1) & charMatch;\r\n      } else {  // Subsequent passes: fuzzy match.\r\n        rd[j] = (((rd[j + 1] << 1) | 1) & charMatch) |\r\n                (((last_rd[j + 1] | last_rd[j]) << 1) | 1) |\r\n                last_rd[j + 1];\r\n      }\r\n      if (rd[j] & matchmask) {\r\n        var score = match_bitapScore_(d, j - 1);\r\n        // This match will almost certainly be better than any existing match.\r\n        // But check anyway.\r\n        if (score <= score_threshold) {\r\n          // Told you so.\r\n          score_threshold = score;\r\n          best_loc = j - 1;\r\n          if (best_loc > loc) {\r\n            // When passing loc, don't exceed our current distance from loc.\r\n            start = Math.max(1, 2 * loc - best_loc);\r\n          } else {\r\n            // Already passed loc, downhill from here on in.\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // No hope for a (better) match at greater error levels.\r\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\r\n      break;\r\n    }\r\n    last_rd = rd;\r\n  }\r\n  return best_loc;\r\n};\r\n\r\n\r\n/**\r\n * Initialise the alphabet for the Bitap algorithm.\r\n * @param {string} pattern The text to encode.\r\n * @return {!Object} Hash of character locations.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.match_alphabet_ = function(pattern) {\r\n  var s = {};\r\n  for (var i = 0; i < pattern.length; i++) {\r\n    s[pattern.charAt(i)] = 0;\r\n  }\r\n  for (var i = 0; i < pattern.length; i++) {\r\n    s[pattern.charAt(i)] |= 1 << (pattern.length - i - 1);\r\n  }\r\n  return s;\r\n};\r\n\r\n\r\n//  PATCH FUNCTIONS\r\n\r\n\r\n/**\r\n * Increase the context until it is unique,\r\n * but don't let the pattern expand beyond Match_MaxBits.\r\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\r\n * @param {string} text Source text.\r\n * @private\r\n */\r\ndiff_match_patch.prototype.patch_addContext_ = function(patch, text) {\r\n  if (text.length == 0) {\r\n    return;\r\n  }\r\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\r\n  var padding = 0;\r\n\r\n  // Look for the first and last matches of pattern in text.  If two different\r\n  // matches are found, increase the pattern length.\r\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) &&\r\n         pattern.length < this.Match_MaxBits - this.Patch_Margin -\r\n         this.Patch_Margin) {\r\n    padding += this.Patch_Margin;\r\n    pattern = text.substring(patch.start2 - padding,\r\n                             patch.start2 + patch.length1 + padding);\r\n  }\r\n  // Add one chunk for good luck.\r\n  padding += this.Patch_Margin;\r\n\r\n  // Add the prefix.\r\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\r\n  if (prefix) {\r\n    patch.diffs.unshift([DIFF_EQUAL, prefix]);\r\n  }\r\n  // Add the suffix.\r\n  var suffix = text.substring(patch.start2 + patch.length1,\r\n                              patch.start2 + patch.length1 + padding);\r\n  if (suffix) {\r\n    patch.diffs.push([DIFF_EQUAL, suffix]);\r\n  }\r\n\r\n  // Roll back the start points.\r\n  patch.start1 -= prefix.length;\r\n  patch.start2 -= prefix.length;\r\n  // Extend the lengths.\r\n  patch.length1 += prefix.length + suffix.length;\r\n  patch.length2 += prefix.length + suffix.length;\r\n};\r\n\r\n\r\n/**\r\n * Compute a list of patches to turn text1 into text2.\r\n * Use diffs if provided, otherwise compute it ourselves.\r\n * There are four ways to call this function, depending on what data is\r\n * available to the caller:\r\n * Method 1:\r\n * a = text1, b = text2\r\n * Method 2:\r\n * a = diffs\r\n * Method 3 (optimal):\r\n * a = text1, b = diffs\r\n * Method 4 (deprecated, use method 3):\r\n * a = text1, b = text2, c = diffs\r\n *\r\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\r\n * Array of diff tuples for text1 to text2 (method 2).\r\n * @param {string|!Array.<!diff_match_patch.Diff>} opt_b text2 (methods 1,4) or\r\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\r\n * @param {string|!Array.<!diff_match_patch.Diff>} opt_c Array of diff tuples\r\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\r\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\r\n */\r\ndiff_match_patch.prototype.patch_make = function(a, opt_b, opt_c) {\r\n  var text1, diffs;\r\n  if (typeof a == 'string' && typeof opt_b == 'string' &&\r\n      typeof opt_c == 'undefined') {\r\n    // Method 1: text1, text2\r\n    // Compute diffs from text1 and text2.\r\n    text1 = /** @type {string} */(a);\r\n    diffs = this.diff_main(text1, /** @type {string} */(opt_b), true);\r\n    if (diffs.length > 2) {\r\n      this.diff_cleanupSemantic(diffs);\r\n      this.diff_cleanupEfficiency(diffs);\r\n    }\r\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' &&\r\n      typeof opt_c == 'undefined') {\r\n    // Method 2: diffs\r\n    // Compute text1 from diffs.\r\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(a);\r\n    text1 = this.diff_text1(diffs);\r\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' &&\r\n      typeof opt_c == 'undefined') {\r\n    // Method 3: text1, diffs\r\n    text1 = /** @type {string} */(a);\r\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_b);\r\n  } else if (typeof a == 'string' && typeof opt_b == 'string' &&\r\n      opt_c && typeof opt_c == 'object') {\r\n    // Method 4: text1, text2, diffs\r\n    // text2 is not used.\r\n    text1 = /** @type {string} */(a);\r\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_c);\r\n  } else {\r\n    throw new Error('Unknown call format to patch_make.');\r\n  }\r\n\r\n  if (diffs.length === 0) {\r\n    return [];  // Get rid of the null case.\r\n  }\r\n  var patches = [];\r\n  var patch = new diff_match_patch.patch_obj();\r\n  var patchDiffLength = 0;  // Keeping our own length var is faster in JS.\r\n  var char_count1 = 0;  // Number of characters into the text1 string.\r\n  var char_count2 = 0;  // Number of characters into the text2 string.\r\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\r\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\r\n  // context info.\r\n  var prepatch_text = text1;\r\n  var postpatch_text = text1;\r\n  for (var x = 0; x < diffs.length; x++) {\r\n    var diff_type = diffs[x][0];\r\n    var diff_text = diffs[x][1];\r\n\r\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\r\n      // A new patch starts here.\r\n      patch.start1 = char_count1;\r\n      patch.start2 = char_count2;\r\n    }\r\n\r\n    switch (diff_type) {\r\n      case DIFF_INSERT:\r\n        patch.diffs[patchDiffLength++] = diffs[x];\r\n        patch.length2 += diff_text.length;\r\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text +\r\n                         postpatch_text.substring(char_count2);\r\n        break;\r\n      case DIFF_DELETE:\r\n        patch.length1 += diff_text.length;\r\n        patch.diffs[patchDiffLength++] = diffs[x];\r\n        postpatch_text = postpatch_text.substring(0, char_count2) +\r\n                         postpatch_text.substring(char_count2 +\r\n                             diff_text.length);\r\n        break;\r\n      case DIFF_EQUAL:\r\n        if (diff_text.length <= 2 * this.Patch_Margin &&\r\n            patchDiffLength && diffs.length != x + 1) {\r\n          // Small equality inside a patch.\r\n          patch.diffs[patchDiffLength++] = diffs[x];\r\n          patch.length1 += diff_text.length;\r\n          patch.length2 += diff_text.length;\r\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\r\n          // Time for a new patch.\r\n          if (patchDiffLength) {\r\n            this.patch_addContext_(patch, prepatch_text);\r\n            patches.push(patch);\r\n            patch = new diff_match_patch.patch_obj();\r\n            patchDiffLength = 0;\r\n            // Unlike Unidiff, our patch lists have a rolling context.\r\n            // http://code.google.com/p/google-diff-match-patch/wiki/Unidiff\r\n            // Update prepatch text & pos to reflect the application of the\r\n            // just completed patch.\r\n            prepatch_text = postpatch_text;\r\n            char_count1 = char_count2;\r\n          }\r\n        }\r\n        break;\r\n    }\r\n\r\n    // Update the current character count.\r\n    if (diff_type !== DIFF_INSERT) {\r\n      char_count1 += diff_text.length;\r\n    }\r\n    if (diff_type !== DIFF_DELETE) {\r\n      char_count2 += diff_text.length;\r\n    }\r\n  }\r\n  // Pick up the leftover patch if not empty.\r\n  if (patchDiffLength) {\r\n    this.patch_addContext_(patch, prepatch_text);\r\n    patches.push(patch);\r\n  }\r\n\r\n  return patches;\r\n};\r\n\r\n\r\n/**\r\n * Given an array of patches, return another array that is identical.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\r\n */\r\ndiff_match_patch.prototype.patch_deepCopy = function(patches) {\r\n  // Making deep copies is hard in JavaScript.\r\n  var patchesCopy = [];\r\n  for (var x = 0; x < patches.length; x++) {\r\n    var patch = patches[x];\r\n    var patchCopy = new diff_match_patch.patch_obj();\r\n    patchCopy.diffs = [];\r\n    for (var y = 0; y < patch.diffs.length; y++) {\r\n      patchCopy.diffs[y] = patch.diffs[y].slice();\r\n    }\r\n    patchCopy.start1 = patch.start1;\r\n    patchCopy.start2 = patch.start2;\r\n    patchCopy.length1 = patch.length1;\r\n    patchCopy.length2 = patch.length2;\r\n    patchesCopy[x] = patchCopy;\r\n  }\r\n  return patchesCopy;\r\n};\r\n\r\n\r\n/**\r\n * Merge a set of patches onto the text.  Return a patched text, as well\r\n * as a list of true/false values indicating which patches were applied.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @param {string} text Old text.\r\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\r\n *      new text and an array of boolean values.\r\n */\r\ndiff_match_patch.prototype.patch_apply = function(patches, text) {\r\n  if (patches.length == 0) {\r\n    return [text, []];\r\n  }\r\n\r\n  // Deep copy the patches so that no changes are made to originals.\r\n  patches = this.patch_deepCopy(patches);\r\n\r\n  var nullPadding = this.patch_addPadding(patches);\r\n  text = nullPadding + text + nullPadding;\r\n\r\n  this.patch_splitMax(patches);\r\n  // delta keeps track of the offset between the expected and actual location\r\n  // of the previous patch.  If there are patches expected at positions 10 and\r\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\r\n  // has an effective expected position of 22.\r\n  var delta = 0;\r\n  var results = [];\r\n  for (var x = 0; x < patches.length; x++) {\r\n    var expected_loc = patches[x].start2 + delta;\r\n    var text1 = this.diff_text1(patches[x].diffs);\r\n    var start_loc;\r\n    var end_loc = -1;\r\n    if (text1.length > this.Match_MaxBits) {\r\n      // patch_splitMax will only provide an oversized pattern in the case of\r\n      // a monster delete.\r\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits),\r\n                                  expected_loc);\r\n      if (start_loc != -1) {\r\n        end_loc = this.match_main(text,\r\n            text1.substring(text1.length - this.Match_MaxBits),\r\n            expected_loc + text1.length - this.Match_MaxBits);\r\n        if (end_loc == -1 || start_loc >= end_loc) {\r\n          // Can't find valid trailing context.  Drop this patch.\r\n          start_loc = -1;\r\n        }\r\n      }\r\n    } else {\r\n      start_loc = this.match_main(text, text1, expected_loc);\r\n    }\r\n    if (start_loc == -1) {\r\n      // No match found.  :(\r\n      results[x] = false;\r\n      // Subtract the delta for this failed patch from subsequent patches.\r\n      delta -= patches[x].length2 - patches[x].length1;\r\n    } else {\r\n      // Found a match.  :)\r\n      results[x] = true;\r\n      delta = start_loc - expected_loc;\r\n      var text2;\r\n      if (end_loc == -1) {\r\n        text2 = text.substring(start_loc, start_loc + text1.length);\r\n      } else {\r\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\r\n      }\r\n      if (text1 == text2) {\r\n        // Perfect match, just shove the replacement text in.\r\n        text = text.substring(0, start_loc) +\r\n               this.diff_text2(patches[x].diffs) +\r\n               text.substring(start_loc + text1.length);\r\n      } else {\r\n        // Imperfect match.  Run a diff to get a framework of equivalent\r\n        // indices.\r\n        var diffs = this.diff_main(text1, text2, false);\r\n        if (text1.length > this.Match_MaxBits &&\r\n            this.diff_levenshtein(diffs) / text1.length >\r\n            this.Patch_DeleteThreshold) {\r\n          // The end points match, but the content is unacceptably bad.\r\n          results[x] = false;\r\n        } else {\r\n          this.diff_cleanupSemanticLossless(diffs);\r\n          var index1 = 0;\r\n          var index2;\r\n          for (var y = 0; y < patches[x].diffs.length; y++) {\r\n            var mod = patches[x].diffs[y];\r\n            if (mod[0] !== DIFF_EQUAL) {\r\n              index2 = this.diff_xIndex(diffs, index1);\r\n            }\r\n            if (mod[0] === DIFF_INSERT) {  // Insertion\r\n              text = text.substring(0, start_loc + index2) + mod[1] +\r\n                     text.substring(start_loc + index2);\r\n            } else if (mod[0] === DIFF_DELETE) {  // Deletion\r\n              text = text.substring(0, start_loc + index2) +\r\n                     text.substring(start_loc + this.diff_xIndex(diffs,\r\n                         index1 + mod[1].length));\r\n            }\r\n            if (mod[0] !== DIFF_DELETE) {\r\n              index1 += mod[1].length;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // Strip the padding off.\r\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\r\n  return [text, results];\r\n};\r\n\r\n\r\n/**\r\n * Add some padding on text start and end so that edges can match something.\r\n * Intended to be called only from within patch_apply.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @return {string} The padding string added to each side.\r\n */\r\ndiff_match_patch.prototype.patch_addPadding = function(patches) {\r\n  var paddingLength = this.Patch_Margin;\r\n  var nullPadding = '';\r\n  for (var x = 1; x <= paddingLength; x++) {\r\n    nullPadding += String.fromCharCode(x);\r\n  }\r\n\r\n  // Bump all the patches forward.\r\n  for (var x = 0; x < patches.length; x++) {\r\n    patches[x].start1 += paddingLength;\r\n    patches[x].start2 += paddingLength;\r\n  }\r\n\r\n  // Add some padding on start of first diff.\r\n  var patch = patches[0];\r\n  var diffs = patch.diffs;\r\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\r\n    // Add nullPadding equality.\r\n    diffs.unshift([DIFF_EQUAL, nullPadding]);\r\n    patch.start1 -= paddingLength;  // Should be 0.\r\n    patch.start2 -= paddingLength;  // Should be 0.\r\n    patch.length1 += paddingLength;\r\n    patch.length2 += paddingLength;\r\n  } else if (paddingLength > diffs[0][1].length) {\r\n    // Grow first equality.\r\n    var extraLength = paddingLength - diffs[0][1].length;\r\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\r\n    patch.start1 -= extraLength;\r\n    patch.start2 -= extraLength;\r\n    patch.length1 += extraLength;\r\n    patch.length2 += extraLength;\r\n  }\r\n\r\n  // Add some padding on end of last diff.\r\n  patch = patches[patches.length - 1];\r\n  diffs = patch.diffs;\r\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\r\n    // Add nullPadding equality.\r\n    diffs.push([DIFF_EQUAL, nullPadding]);\r\n    patch.length1 += paddingLength;\r\n    patch.length2 += paddingLength;\r\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\r\n    // Grow last equality.\r\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\r\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\r\n    patch.length1 += extraLength;\r\n    patch.length2 += extraLength;\r\n  }\r\n\r\n  return nullPadding;\r\n};\r\n\r\n\r\n/**\r\n * Look through the patches and break up any which are longer than the maximum\r\n * limit of the match algorithm.\r\n * Intended to be called only from within patch_apply.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n */\r\ndiff_match_patch.prototype.patch_splitMax = function(patches) {\r\n  var patch_size = this.Match_MaxBits;\r\n  for (var x = 0; x < patches.length; x++) {\r\n    if (patches[x].length1 <= patch_size) {\r\n      continue;\r\n    }\r\n    var bigpatch = patches[x];\r\n    // Remove the big old patch.\r\n    patches.splice(x--, 1);\r\n    var start1 = bigpatch.start1;\r\n    var start2 = bigpatch.start2;\r\n    var precontext = '';\r\n    while (bigpatch.diffs.length !== 0) {\r\n      // Create one of several smaller patches.\r\n      var patch = new diff_match_patch.patch_obj();\r\n      var empty = true;\r\n      patch.start1 = start1 - precontext.length;\r\n      patch.start2 = start2 - precontext.length;\r\n      if (precontext !== '') {\r\n        patch.length1 = patch.length2 = precontext.length;\r\n        patch.diffs.push([DIFF_EQUAL, precontext]);\r\n      }\r\n      while (bigpatch.diffs.length !== 0 &&\r\n             patch.length1 < patch_size - this.Patch_Margin) {\r\n        var diff_type = bigpatch.diffs[0][0];\r\n        var diff_text = bigpatch.diffs[0][1];\r\n        if (diff_type === DIFF_INSERT) {\r\n          // Insertions are harmless.\r\n          patch.length2 += diff_text.length;\r\n          start2 += diff_text.length;\r\n          patch.diffs.push(bigpatch.diffs.shift());\r\n          empty = false;\r\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 &&\r\n                   patch.diffs[0][0] == DIFF_EQUAL &&\r\n                   diff_text.length > 2 * patch_size) {\r\n          // This is a large deletion.  Let it pass in one chunk.\r\n          patch.length1 += diff_text.length;\r\n          start1 += diff_text.length;\r\n          empty = false;\r\n          patch.diffs.push([diff_type, diff_text]);\r\n          bigpatch.diffs.shift();\r\n        } else {\r\n          // Deletion or equality.  Only take as much as we can stomach.\r\n          diff_text = diff_text.substring(0,\r\n              patch_size - patch.length1 - this.Patch_Margin);\r\n          patch.length1 += diff_text.length;\r\n          start1 += diff_text.length;\r\n          if (diff_type === DIFF_EQUAL) {\r\n            patch.length2 += diff_text.length;\r\n            start2 += diff_text.length;\r\n          } else {\r\n            empty = false;\r\n          }\r\n          patch.diffs.push([diff_type, diff_text]);\r\n          if (diff_text == bigpatch.diffs[0][1]) {\r\n            bigpatch.diffs.shift();\r\n          } else {\r\n            bigpatch.diffs[0][1] =\r\n                bigpatch.diffs[0][1].substring(diff_text.length);\r\n          }\r\n        }\r\n      }\r\n      // Compute the head context for the next patch.\r\n      precontext = this.diff_text2(patch.diffs);\r\n      precontext =\r\n          precontext.substring(precontext.length - this.Patch_Margin);\r\n      // Append the end context for this patch.\r\n      var postcontext = this.diff_text1(bigpatch.diffs)\r\n                            .substring(0, this.Patch_Margin);\r\n      if (postcontext !== '') {\r\n        patch.length1 += postcontext.length;\r\n        patch.length2 += postcontext.length;\r\n        if (patch.diffs.length !== 0 &&\r\n            patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\r\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\r\n        } else {\r\n          patch.diffs.push([DIFF_EQUAL, postcontext]);\r\n        }\r\n      }\r\n      if (!empty) {\r\n        patches.splice(++x, 0, patch);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Take a list of patches and return a textual representation.\r\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\r\n * @return {string} Text representation of patches.\r\n */\r\ndiff_match_patch.prototype.patch_toText = function(patches) {\r\n  var text = [];\r\n  for (var x = 0; x < patches.length; x++) {\r\n    text[x] = patches[x];\r\n  }\r\n  return text.join('');\r\n};\r\n\r\n\r\n/**\r\n * Parse a textual representation of patches and return a list of Patch objects.\r\n * @param {string} textline Text representation of patches.\r\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\r\n * @throws {!Error} If invalid input.\r\n */\r\ndiff_match_patch.prototype.patch_fromText = function(textline) {\r\n  var patches = [];\r\n  if (!textline) {\r\n    return patches;\r\n  }\r\n  var text = textline.split('\\n');\r\n  var textPointer = 0;\r\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\r\n  while (textPointer < text.length) {\r\n    var m = text[textPointer].match(patchHeader);\r\n    if (!m) {\r\n      throw new Error('Invalid patch string: ' + text[textPointer]);\r\n    }\r\n    var patch = new diff_match_patch.patch_obj();\r\n    patches.push(patch);\r\n    patch.start1 = parseInt(m[1], 10);\r\n    if (m[2] === '') {\r\n      patch.start1--;\r\n      patch.length1 = 1;\r\n    } else if (m[2] == '0') {\r\n      patch.length1 = 0;\r\n    } else {\r\n      patch.start1--;\r\n      patch.length1 = parseInt(m[2], 10);\r\n    }\r\n\r\n    patch.start2 = parseInt(m[3], 10);\r\n    if (m[4] === '') {\r\n      patch.start2--;\r\n      patch.length2 = 1;\r\n    } else if (m[4] == '0') {\r\n      patch.length2 = 0;\r\n    } else {\r\n      patch.start2--;\r\n      patch.length2 = parseInt(m[4], 10);\r\n    }\r\n    textPointer++;\r\n\r\n    while (textPointer < text.length) {\r\n      var sign = text[textPointer].charAt(0);\r\n      try {\r\n        var line = decodeURI(text[textPointer].substring(1));\r\n      } catch (ex) {\r\n        // Malformed URI sequence.\r\n        throw new Error('Illegal escape in patch_fromText: ' + line);\r\n      }\r\n      if (sign == '-') {\r\n        // Deletion.\r\n        patch.diffs.push([DIFF_DELETE, line]);\r\n      } else if (sign == '+') {\r\n        // Insertion.\r\n        patch.diffs.push([DIFF_INSERT, line]);\r\n      } else if (sign == ' ') {\r\n        // Minor equality.\r\n        patch.diffs.push([DIFF_EQUAL, line]);\r\n      } else if (sign == '@') {\r\n        // Start of next patch.\r\n        break;\r\n      } else if (sign === '') {\r\n        // Blank line?  Whatever.\r\n      } else {\r\n        // WTF?\r\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\r\n      }\r\n      textPointer++;\r\n    }\r\n  }\r\n  return patches;\r\n};\r\n\r\n\r\n/**\r\n * Class representing one patch operation.\r\n * @constructor\r\n */\r\ndiff_match_patch.patch_obj = function() {\r\n  /** @type {!Array.<!diff_match_patch.Diff>} */\r\n  this.diffs = [];\r\n  /** @type {?number} */\r\n  this.start1 = null;\r\n  /** @type {?number} */\r\n  this.start2 = null;\r\n  /** @type {number} */\r\n  this.length1 = 0;\r\n  /** @type {number} */\r\n  this.length2 = 0;\r\n};\r\n\r\n\r\n/**\r\n * Emmulate GNU diff's format.\r\n * Header: @@ -382,8 +481,9 @@\r\n * Indicies are printed as 1-based, not 0-based.\r\n * @return {string} The GNU diff string.\r\n */\r\ndiff_match_patch.patch_obj.prototype.toString = function() {\r\n  var coords1, coords2;\r\n  if (this.length1 === 0) {\r\n    coords1 = this.start1 + ',0';\r\n  } else if (this.length1 == 1) {\r\n    coords1 = this.start1 + 1;\r\n  } else {\r\n    coords1 = (this.start1 + 1) + ',' + this.length1;\r\n  }\r\n  if (this.length2 === 0) {\r\n    coords2 = this.start2 + ',0';\r\n  } else if (this.length2 == 1) {\r\n    coords2 = this.start2 + 1;\r\n  } else {\r\n    coords2 = (this.start2 + 1) + ',' + this.length2;\r\n  }\r\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\r\n  var op;\r\n  // Escape the body of the patch with %xx notation.\r\n  for (var x = 0; x < this.diffs.length; x++) {\r\n    switch (this.diffs[x][0]) {\r\n      case DIFF_INSERT:\r\n        op = '+';\r\n        break;\r\n      case DIFF_DELETE:\r\n        op = '-';\r\n        break;\r\n      case DIFF_EQUAL:\r\n        op = ' ';\r\n        break;\r\n    }\r\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\r\n  }\r\n  return text.join('').replace(/%20/g, ' ');\r\n};\r\n\r\n\r\n// The following export code was added by @ForbesLindesay\r\nmodule.exports = diff_match_patch;\r\nmodule.exports['diff_match_patch'] = diff_match_patch;\r\nmodule.exports['DIFF_DELETE'] = DIFF_DELETE;\r\nmodule.exports['DIFF_INSERT'] = DIFF_INSERT;\r\nmodule.exports['DIFF_EQUAL'] = DIFF_EQUAL;\n});\n\n/* global diff_match_patch */\nvar TEXT_DIFF = 2;\nvar DEFAULT_MIN_LENGTH = 60;\nvar cachedDiffPatch = null;\n\nvar getDiffMatchPatch = function getDiffMatchPatch(required) {\n  /* jshint camelcase: false */\n\n  if (!cachedDiffPatch) {\n    var instance = void 0;\n    /* eslint-disable camelcase, new-cap */\n    if (typeof diff_match_patch !== 'undefined') {\n      // already loaded, probably a browser\n      instance = typeof diff_match_patch === 'function' ? new diff_match_patch() : new diff_match_patch.diff_match_patch();\n    } else if (diffMatchPatch) {\n      try {\n        instance = diffMatchPatch && new diffMatchPatch();\n      } catch (err) {\n        instance = null;\n      }\n    }\n    /* eslint-enable camelcase, new-cap */\n    if (!instance) {\n      if (!required) {\n        return null;\n      }\n      var error = new Error('text diff_match_patch library not found');\n      // eslint-disable-next-line camelcase\n      error.diff_match_patch_not_found = true;\n      throw error;\n    }\n    cachedDiffPatch = {\n      diff: function diff(txt1, txt2) {\n        return instance.patch_toText(instance.patch_make(txt1, txt2));\n      },\n      patch: function patch(txt1, _patch) {\n        var results = instance.patch_apply(instance.patch_fromText(_patch), txt1);\n        for (var i = 0; i < results[1].length; i++) {\n          if (!results[1][i]) {\n            var _error = new Error('text patch failed');\n            _error.textPatchFailed = true;\n          }\n        }\n        return results[0];\n      }\n    };\n  }\n  return cachedDiffPatch;\n};\n\nvar diffFilter$3 = function textsDiffFilter(context) {\n  if (context.leftType !== 'string') {\n    return;\n  }\n  var minLength = context.options && context.options.textDiff && context.options.textDiff.minLength || DEFAULT_MIN_LENGTH;\n  if (context.left.length < minLength || context.right.length < minLength) {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  // large text, try to use a text-diff algorithm\n  var diffMatchPatch$$1 = getDiffMatchPatch();\n  if (!diffMatchPatch$$1) {\n    // diff-match-patch library not available,\n    // fallback to regular string replace\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  var diff = diffMatchPatch$$1.diff;\n  context.setResult([diff(context.left, context.right), 0, TEXT_DIFF]).exit();\n};\ndiffFilter$3.filterName = 'texts';\n\nvar patchFilter$3 = function textsPatchFilter(context) {\n  if (context.nested) {\n    return;\n  }\n  if (context.delta[2] !== TEXT_DIFF) {\n    return;\n  }\n\n  // text-diff, use a text-patch algorithm\n  var patch = getDiffMatchPatch(true).patch;\n  context.setResult(patch(context.left, context.delta[0])).exit();\n};\npatchFilter$3.filterName = 'texts';\n\nvar textDeltaReverse = function textDeltaReverse(delta) {\n  var i = void 0;\n  var l = void 0;\n  var lines = void 0;\n  var line = void 0;\n  var lineTmp = void 0;\n  var header = null;\n  var headerRegex = /^@@ +-(\\d+),(\\d+) +\\+(\\d+),(\\d+) +@@$/;\n  var lineHeader = void 0;\n  lines = delta.split('\\n');\n  for (i = 0, l = lines.length; i < l; i++) {\n    line = lines[i];\n    var lineStart = line.slice(0, 1);\n    if (lineStart === '@') {\n      header = headerRegex.exec(line);\n      lineHeader = i;\n\n      // fix header\n      lines[lineHeader] = '@@ -' + header[3] + ',' + header[4] + ' +' + header[1] + ',' + header[2] + ' @@';\n    } else if (lineStart === '+') {\n      lines[i] = '-' + lines[i].slice(1);\n      if (lines[i - 1].slice(0, 1) === '+') {\n        // swap lines to keep default order (-+)\n        lineTmp = lines[i];\n        lines[i] = lines[i - 1];\n        lines[i - 1] = lineTmp;\n      }\n    } else if (lineStart === '-') {\n      lines[i] = '+' + lines[i].slice(1);\n    }\n  }\n  return lines.join('\\n');\n};\n\nvar reverseFilter$3 = function textsReverseFilter(context) {\n  if (context.nested) {\n    return;\n  }\n  if (context.delta[2] !== TEXT_DIFF) {\n    return;\n  }\n\n  // text-diff, use a text-diff algorithm\n  context.setResult([textDeltaReverse(context.delta[0]), 0, TEXT_DIFF]).exit();\n};\nreverseFilter$3.filterName = 'texts';\n\nvar DiffPatcher = function () {\n  function DiffPatcher(options) {\n    classCallCheck(this, DiffPatcher);\n\n    this.processor = new Processor(options);\n    this.processor.pipe(new Pipe('diff').append(collectChildrenDiffFilter, diffFilter, diffFilter$2, diffFilter$3, objectsDiffFilter, diffFilter$1).shouldHaveResult());\n    this.processor.pipe(new Pipe('patch').append(collectChildrenPatchFilter, collectChildrenPatchFilter$1, patchFilter, patchFilter$3, patchFilter$1, patchFilter$2).shouldHaveResult());\n    this.processor.pipe(new Pipe('reverse').append(collectChildrenReverseFilter, collectChildrenReverseFilter$1, reverseFilter, reverseFilter$3, reverseFilter$1, reverseFilter$2).shouldHaveResult());\n  }\n\n  createClass(DiffPatcher, [{\n    key: 'options',\n    value: function options() {\n      var _processor;\n\n      return (_processor = this.processor).options.apply(_processor, arguments);\n    }\n  }, {\n    key: 'diff',\n    value: function diff(left, right) {\n      return this.processor.process(new DiffContext(left, right));\n    }\n  }, {\n    key: 'patch',\n    value: function patch(left, delta) {\n      return this.processor.process(new PatchContext(left, delta));\n    }\n  }, {\n    key: 'reverse',\n    value: function reverse(delta) {\n      return this.processor.process(new ReverseContext(delta));\n    }\n  }, {\n    key: 'unpatch',\n    value: function unpatch(right, delta) {\n      return this.patch(right, this.reverse(delta));\n    }\n  }, {\n    key: 'clone',\n    value: function clone$$1(value) {\n      return clone(value);\n    }\n  }]);\n  return DiffPatcher;\n}();\n\nvar isArray$3 = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nvar getObjectKeys = typeof Object.keys === 'function' ? function (obj) {\n  return Object.keys(obj);\n} : function (obj) {\n  var names = [];\n  for (var property in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, property)) {\n      names.push(property);\n    }\n  }\n  return names;\n};\n\nvar trimUnderscore = function trimUnderscore(str) {\n  if (str.substr(0, 1) === '_') {\n    return str.slice(1);\n  }\n  return str;\n};\n\nvar arrayKeyToSortNumber = function arrayKeyToSortNumber(key) {\n  if (key === '_t') {\n    return -1;\n  } else {\n    if (key.substr(0, 1) === '_') {\n      return parseInt(key.slice(1), 10);\n    } else {\n      return parseInt(key, 10) + 0.1;\n    }\n  }\n};\n\nvar arrayKeyComparer = function arrayKeyComparer(key1, key2) {\n  return arrayKeyToSortNumber(key1) - arrayKeyToSortNumber(key2);\n};\n\nvar BaseFormatter = function () {\n  function BaseFormatter() {\n    classCallCheck(this, BaseFormatter);\n  }\n\n  createClass(BaseFormatter, [{\n    key: 'format',\n    value: function format(delta, left) {\n      var context = {};\n      this.prepareContext(context);\n      this.recurse(context, delta, left);\n      return this.finalize(context);\n    }\n  }, {\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      context.buffer = [];\n      context.out = function () {\n        var _buffer;\n\n        (_buffer = this.buffer).push.apply(_buffer, arguments);\n      };\n    }\n  }, {\n    key: 'typeFormattterNotFound',\n    value: function typeFormattterNotFound(context, deltaType) {\n      throw new Error('cannot format delta type: ' + deltaType);\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      return err.toString();\n    }\n  }, {\n    key: 'finalize',\n    value: function finalize(_ref) {\n      var buffer = _ref.buffer;\n\n      if (isArray$3(buffer)) {\n        return buffer.join('');\n      }\n    }\n  }, {\n    key: 'recurse',\n    value: function recurse(context, delta, left, key, leftKey, movedFrom, isLast) {\n      var useMoveOriginHere = delta && movedFrom;\n      var leftValue = useMoveOriginHere ? movedFrom.value : left;\n\n      if (typeof delta === 'undefined' && typeof key === 'undefined') {\n        return undefined;\n      }\n\n      var type = this.getDeltaType(delta, movedFrom);\n      var nodeType = type === 'node' ? delta._t === 'a' ? 'array' : 'object' : '';\n\n      if (typeof key !== 'undefined') {\n        this.nodeBegin(context, key, leftKey, type, nodeType, isLast);\n      } else {\n        this.rootBegin(context, type, nodeType);\n      }\n\n      var typeFormattter = void 0;\n      try {\n        typeFormattter = this['format_' + type] || this.typeFormattterNotFound(context, type);\n        typeFormattter.call(this, context, delta, leftValue, key, leftKey, movedFrom);\n      } catch (err) {\n        this.typeFormattterErrorFormatter(context, err, delta, leftValue, key, leftKey, movedFrom);\n        if (typeof console !== 'undefined' && console.error) {\n          console.error(err.stack);\n        }\n      }\n\n      if (typeof key !== 'undefined') {\n        this.nodeEnd(context, key, leftKey, type, nodeType, isLast);\n      } else {\n        this.rootEnd(context, type, nodeType);\n      }\n    }\n  }, {\n    key: 'formatDeltaChildren',\n    value: function formatDeltaChildren(context, delta, left) {\n      var self = this;\n      this.forEachDeltaKey(delta, left, function (key, leftKey, movedFrom, isLast) {\n        self.recurse(context, delta[key], left ? left[leftKey] : undefined, key, leftKey, movedFrom, isLast);\n      });\n    }\n  }, {\n    key: 'forEachDeltaKey',\n    value: function forEachDeltaKey(delta, left, fn) {\n      var keys = getObjectKeys(delta);\n      var arrayKeys = delta._t === 'a';\n      var moveDestinations = {};\n      var name = void 0;\n      if (typeof left !== 'undefined') {\n        for (name in left) {\n          if (Object.prototype.hasOwnProperty.call(left, name)) {\n            if (typeof delta[name] === 'undefined' && (!arrayKeys || typeof delta['_' + name] === 'undefined')) {\n              keys.push(name);\n            }\n          }\n        }\n      }\n      // look for move destinations\n      for (name in delta) {\n        if (Object.prototype.hasOwnProperty.call(delta, name)) {\n          var value = delta[name];\n          if (isArray$3(value) && value[2] === 3) {\n            moveDestinations[value[1].toString()] = {\n              key: name,\n              value: left && left[parseInt(name.substr(1))]\n            };\n            if (this.includeMoveDestinations !== false) {\n              if (typeof left === 'undefined' && typeof delta[value[1]] === 'undefined') {\n                keys.push(value[1].toString());\n              }\n            }\n          }\n        }\n      }\n      if (arrayKeys) {\n        keys.sort(arrayKeyComparer);\n      } else {\n        keys.sort();\n      }\n      for (var index = 0, length = keys.length; index < length; index++) {\n        var key = keys[index];\n        if (arrayKeys && key === '_t') {\n          continue;\n        }\n        var leftKey = arrayKeys ? typeof key === 'number' ? key : parseInt(trimUnderscore(key), 10) : key;\n        var isLast = index === length - 1;\n        fn(key, leftKey, moveDestinations[leftKey], isLast);\n      }\n    }\n  }, {\n    key: 'getDeltaType',\n    value: function getDeltaType(delta, movedFrom) {\n      if (typeof delta === 'undefined') {\n        if (typeof movedFrom !== 'undefined') {\n          return 'movedestination';\n        }\n        return 'unchanged';\n      }\n      if (isArray$3(delta)) {\n        if (delta.length === 1) {\n          return 'added';\n        }\n        if (delta.length === 2) {\n          return 'modified';\n        }\n        if (delta.length === 3 && delta[2] === 0) {\n          return 'deleted';\n        }\n        if (delta.length === 3 && delta[2] === 2) {\n          return 'textdiff';\n        }\n        if (delta.length === 3 && delta[2] === 3) {\n          return 'moved';\n        }\n      } else if ((typeof delta === 'undefined' ? 'undefined' : _typeof(delta)) === 'object') {\n        return 'node';\n      }\n      return 'unknown';\n    }\n  }, {\n    key: 'parseTextDiff',\n    value: function parseTextDiff(value) {\n      var output = [];\n      var lines = value.split('\\n@@ ');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        var lineOutput = {\n          pieces: []\n        };\n        var location = /^(?:@@ )?[-+]?(\\d+),(\\d+)/.exec(line).slice(1);\n        lineOutput.location = {\n          line: location[0],\n          chr: location[1]\n        };\n        var pieces = line.split('\\n').slice(1);\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          var piece = pieces[pieceIndex];\n          if (!piece.length) {\n            continue;\n          }\n          var pieceOutput = {\n            type: 'context'\n          };\n          if (piece.substr(0, 1) === '+') {\n            pieceOutput.type = 'added';\n          } else if (piece.substr(0, 1) === '-') {\n            pieceOutput.type = 'deleted';\n          }\n          pieceOutput.text = piece.slice(1);\n          lineOutput.pieces.push(pieceOutput);\n        }\n        output.push(lineOutput);\n      }\n      return output;\n    }\n  }]);\n  return BaseFormatter;\n}();\n\n\n\nvar base = Object.freeze({\n\tdefault: BaseFormatter\n});\n\nvar HtmlFormatter = function (_BaseFormatter) {\n  inherits(HtmlFormatter, _BaseFormatter);\n\n  function HtmlFormatter() {\n    classCallCheck(this, HtmlFormatter);\n    return possibleConstructorReturn(this, (HtmlFormatter.__proto__ || Object.getPrototypeOf(HtmlFormatter)).apply(this, arguments));\n  }\n\n  createClass(HtmlFormatter, [{\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.out('<pre class=\"jsondiffpatch-error\">' + err + '</pre>');\n    }\n  }, {\n    key: 'formatValue',\n    value: function formatValue(context, value) {\n      context.out('<pre>' + htmlEscape(JSON.stringify(value, null, 2)) + '</pre>');\n    }\n  }, {\n    key: 'formatTextDiffString',\n    value: function formatTextDiffString(context, value) {\n      var lines = this.parseTextDiff(value);\n      context.out('<ul class=\"jsondiffpatch-textdiff\">');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.out('<li><div class=\"jsondiffpatch-textdiff-location\">' + ('<span class=\"jsondiffpatch-textdiff-line-number\">' + line.location.line + '</span><span class=\"jsondiffpatch-textdiff-char\">' + line.location.chr + '</span></div><div class=\"jsondiffpatch-textdiff-line\">'));\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          /* global decodeURI */\n          var piece = pieces[pieceIndex];\n          context.out('<span class=\"jsondiffpatch-textdiff-' + piece.type + '\">' + htmlEscape(decodeURI(piece.text)) + '</span>');\n        }\n        context.out('</div></li>');\n      }\n      context.out('</ul>');\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin(context, type, nodeType) {\n      var nodeClass = 'jsondiffpatch-' + type + (nodeType ? ' jsondiffpatch-child-node-type-' + nodeType : '');\n      context.out('<div class=\"jsondiffpatch-delta ' + nodeClass + '\">');\n    }\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd(context) {\n      context.out('</div>' + (context.hasArrows ? '<script type=\"text/javascript\">setTimeout(' + (adjustArrows.toString() + ',10);</script>') : ''));\n    }\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(context, key, leftKey, type, nodeType) {\n      var nodeClass = 'jsondiffpatch-' + type + (nodeType ? ' jsondiffpatch-child-node-type-' + nodeType : '');\n      context.out('<li class=\"' + nodeClass + '\" data-key=\"' + leftKey + '\">' + ('<div class=\"jsondiffpatch-property-name\">' + leftKey + '</div>'));\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(context) {\n      context.out('</li>');\n    }\n\n    /* jshint camelcase: false */\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, left);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, left);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      // recurse\n      var nodeType = delta._t === 'a' ? 'array' : 'object';\n      context.out('<ul class=\"jsondiffpatch-node jsondiffpatch-node-type-' + nodeType + '\">');\n      this.formatDeltaChildren(context, delta, left);\n      context.out('</ul>');\n    }\n  }, {\n    key: 'format_added',\n    value: function format_added(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_modified',\n    value: function format_modified(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value jsondiffpatch-left-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div>' + '<div class=\"jsondiffpatch-value jsondiffpatch-right-value\">');\n      this.formatValue(context, delta[1]);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_deleted',\n    value: function format_deleted(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_moved',\n    value: function format_moved(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div><div class=\"jsondiffpatch-moved-destination\">' + delta[1] + '</div>');\n\n      // draw an SVG arrow from here to move destination\n      context.out(\n      /* jshint multistr: true */\n      '<div class=\"jsondiffpatch-arrow\" ' + 'style=\"position: relative; left: -34px;\">\\n          <svg width=\"30\" height=\"60\" ' + 'style=\"position: absolute; display: none;\">\\n          <defs>\\n              <marker id=\"markerArrow\" markerWidth=\"8\" markerHeight=\"8\"\\n                 refx=\"2\" refy=\"4\"\\n                     orient=\"auto\" markerUnits=\"userSpaceOnUse\">\\n                  <path d=\"M1,1 L1,7 L7,4 L1,1\" style=\"fill: #339;\" />\\n              </marker>\\n          </defs>\\n          <path d=\"M30,0 Q-10,25 26,50\"\\n            style=\"stroke: #88f; stroke-width: 2px; fill: none; ' + 'stroke-opacity: 0.5; marker-end: url(#markerArrow);\"\\n          ></path>\\n          </svg>\\n      </div>');\n      context.hasArrows = true;\n    }\n  }, {\n    key: 'format_textdiff',\n    value: function format_textdiff(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatTextDiffString(context, delta[0]);\n      context.out('</div>');\n    }\n  }]);\n  return HtmlFormatter;\n}(BaseFormatter);\n\nfunction htmlEscape(text) {\n  var html = text;\n  var replacements = [[/&/g, '&amp;'], [/</g, '&lt;'], [/>/g, '&gt;'], [/'/g, '&apos;'], [/\"/g, '&quot;']];\n  for (var i = 0; i < replacements.length; i++) {\n    html = html.replace(replacements[i][0], replacements[i][1]);\n  }\n  return html;\n}\n\nvar adjustArrows = function jsondiffpatchHtmlFormatterAdjustArrows(nodeArg) {\n  var node = nodeArg || document;\n  var getElementText = function getElementText(_ref) {\n    var textContent = _ref.textContent,\n        innerText = _ref.innerText;\n    return textContent || innerText;\n  };\n  var eachByQuery = function eachByQuery(el, query, fn) {\n    var elems = el.querySelectorAll(query);\n    for (var i = 0, l = elems.length; i < l; i++) {\n      fn(elems[i]);\n    }\n  };\n  var eachChildren = function eachChildren(_ref2, fn) {\n    var children = _ref2.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      fn(children[i], i);\n    }\n  };\n  eachByQuery(node, '.jsondiffpatch-arrow', function (_ref3) {\n    var parentNode = _ref3.parentNode,\n        children = _ref3.children,\n        style = _ref3.style;\n\n    var arrowParent = parentNode;\n    var svg = children[0];\n    var path = svg.children[1];\n    svg.style.display = 'none';\n    var destination = getElementText(arrowParent.querySelector('.jsondiffpatch-moved-destination'));\n    var container = arrowParent.parentNode;\n    var destinationElem = void 0;\n    eachChildren(container, function (child) {\n      if (child.getAttribute('data-key') === destination) {\n        destinationElem = child;\n      }\n    });\n    if (!destinationElem) {\n      return;\n    }\n    try {\n      var distance = destinationElem.offsetTop - arrowParent.offsetTop;\n      svg.setAttribute('height', Math.abs(distance) + 6);\n      style.top = -8 + (distance > 0 ? 0 : distance) + 'px';\n      var curve = distance > 0 ? 'M30,0 Q-10,' + Math.round(distance / 2) + ' 26,' + (distance - 4) : 'M30,' + -distance + ' Q-10,' + Math.round(-distance / 2) + ' 26,4';\n      path.setAttribute('d', curve);\n      svg.style.display = '';\n    } catch (err) {}\n  });\n};\n\n/* jshint camelcase: true */\n/* eslint-enable camelcase */\n\nvar showUnchanged = function showUnchanged(show, node, delay) {\n  var el = node || document.body;\n  var prefix = 'jsondiffpatch-unchanged-';\n  var classes = {\n    showing: prefix + 'showing',\n    hiding: prefix + 'hiding',\n    visible: prefix + 'visible',\n    hidden: prefix + 'hidden'\n  };\n  var list = el.classList;\n  if (!list) {\n    return;\n  }\n  if (!delay) {\n    list.remove(classes.showing);\n    list.remove(classes.hiding);\n    list.remove(classes.visible);\n    list.remove(classes.hidden);\n    if (show === false) {\n      list.add(classes.hidden);\n    }\n    return;\n  }\n  if (show === false) {\n    list.remove(classes.showing);\n    list.add(classes.visible);\n    setTimeout(function () {\n      list.add(classes.hiding);\n    }, 10);\n  } else {\n    list.remove(classes.hiding);\n    list.add(classes.showing);\n    list.remove(classes.hidden);\n  }\n  var intervalId = setInterval(function () {\n    adjustArrows(el);\n  }, 100);\n  setTimeout(function () {\n    list.remove(classes.showing);\n    list.remove(classes.hiding);\n    if (show === false) {\n      list.add(classes.hidden);\n      list.remove(classes.visible);\n    } else {\n      list.add(classes.visible);\n      list.remove(classes.hidden);\n    }\n    setTimeout(function () {\n      list.remove(classes.visible);\n      clearInterval(intervalId);\n    }, delay + 400);\n  }, delay);\n};\n\nvar hideUnchanged = function hideUnchanged(node, delay) {\n  return showUnchanged(false, node, delay);\n};\n\nvar defaultInstance = void 0;\n\nfunction format(delta, left) {\n  if (!defaultInstance) {\n    defaultInstance = new HtmlFormatter();\n  }\n  return defaultInstance.format(delta, left);\n}\n\n\n\nvar html = Object.freeze({\n\tshowUnchanged: showUnchanged,\n\thideUnchanged: hideUnchanged,\n\tdefault: HtmlFormatter,\n\tformat: format\n});\n\nvar AnnotatedFormatter = function (_BaseFormatter) {\n  inherits(AnnotatedFormatter, _BaseFormatter);\n\n  function AnnotatedFormatter() {\n    classCallCheck(this, AnnotatedFormatter);\n\n    var _this = possibleConstructorReturn(this, (AnnotatedFormatter.__proto__ || Object.getPrototypeOf(AnnotatedFormatter)).call(this));\n\n    _this.includeMoveDestinations = false;\n    return _this;\n  }\n\n  createClass(AnnotatedFormatter, [{\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      get(AnnotatedFormatter.prototype.__proto__ || Object.getPrototypeOf(AnnotatedFormatter.prototype), 'prepareContext', this).call(this, context);\n      context.indent = function (levels) {\n        this.indentLevel = (this.indentLevel || 0) + (typeof levels === 'undefined' ? 1 : levels);\n        this.indentPad = new Array(this.indentLevel + 1).join('&nbsp;&nbsp;');\n      };\n      context.row = function (json, htmlNote) {\n        context.out('<tr><td style=\"white-space: nowrap;\">' + '<pre class=\"jsondiffpatch-annotated-indent\"' + ' style=\"display: inline-block\">');\n        context.out(context.indentPad);\n        context.out('</pre><pre style=\"display: inline-block\">');\n        context.out(json);\n        context.out('</pre></td><td class=\"jsondiffpatch-delta-note\"><div>');\n        context.out(htmlNote);\n        context.out('</div></td></tr>');\n      };\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.row('', '<pre class=\"jsondiffpatch-error\">' + err + '</pre>');\n    }\n  }, {\n    key: 'formatTextDiffString',\n    value: function formatTextDiffString(context, value) {\n      var lines = this.parseTextDiff(value);\n      context.out('<ul class=\"jsondiffpatch-textdiff\">');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.out('<li><div class=\"jsondiffpatch-textdiff-location\">' + ('<span class=\"jsondiffpatch-textdiff-line-number\">' + line.location.line + '</span><span class=\"jsondiffpatch-textdiff-char\">' + line.location.chr + '</span></div><div class=\"jsondiffpatch-textdiff-line\">'));\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          var piece = pieces[pieceIndex];\n          context.out('<span class=\"jsondiffpatch-textdiff-' + piece.type + '\">' + piece.text + '</span>');\n        }\n        context.out('</div></li>');\n      }\n      context.out('</ul>');\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin(context, type, nodeType) {\n      context.out('<table class=\"jsondiffpatch-annotated-delta\">');\n      if (type === 'node') {\n        context.row('{');\n        context.indent();\n      }\n      if (nodeType === 'array') {\n        context.row('\"_t\": \"a\",', 'Array delta (member names indicate array indices)');\n      }\n    }\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd(context, type) {\n      if (type === 'node') {\n        context.indent(-1);\n        context.row('}');\n      }\n      context.out('</table>');\n    }\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(context, key, leftKey, type, nodeType) {\n      context.row('&quot;' + key + '&quot;: {');\n      if (type === 'node') {\n        context.indent();\n      }\n      if (nodeType === 'array') {\n        context.row('\"_t\": \"a\",', 'Array delta (member names indicate array indices)');\n      }\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(context, key, leftKey, type, nodeType, isLast) {\n      if (type === 'node') {\n        context.indent(-1);\n      }\n      context.row('}' + (isLast ? '' : ','));\n    }\n\n    /* jshint camelcase: false */\n\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged() {}\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination() {}\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      // recurse\n      this.formatDeltaChildren(context, delta, left);\n    }\n  }]);\n  return AnnotatedFormatter;\n}(BaseFormatter);\n\n/* eslint-enable camelcase */\n\nvar wrapPropertyName = function wrapPropertyName(name) {\n  return '<pre style=\"display:inline-block\">&quot;' + name + '&quot;</pre>';\n};\n\nvar deltaAnnotations = {\n  added: function added(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([newValue])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'new value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'insert at index ' + leftKey + formatLegend;\n    }\n    return 'add property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  modified: function modified(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([previousValue, newValue])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'modify value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'modify at index ' + leftKey + formatLegend;\n    }\n    return 'modify property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  deleted: function deleted(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([previousValue, 0, 0])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'delete value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'remove index ' + leftKey + formatLegend;\n    }\n    return 'delete property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  moved: function moved(delta, left, key, leftKey) {\n    return 'move from <span title=\"(position to remove at original state)\">' + ('index ' + leftKey + '</span> to <span title=\"(position to insert at final') + (' state)\">index ' + delta[1] + '</span>');\n  },\n  textdiff: function textdiff(delta, left, key, leftKey) {\n    var location = typeof leftKey === 'undefined' ? '' : typeof leftKey === 'number' ? ' at index ' + leftKey : ' at property ' + wrapPropertyName(leftKey);\n    return 'text diff' + location + ', format is <a href=\"https://code.google.com/' + 'p/google-diff-match-patch/wiki/Unidiff\">a variation of Unidiff</a>';\n  }\n};\n\nvar formatAnyChange = function formatAnyChange(context, delta) {\n  var deltaType = this.getDeltaType(delta);\n  var annotator = deltaAnnotations[deltaType];\n  var htmlNote = annotator && annotator.apply(annotator, Array.prototype.slice.call(arguments, 1));\n  var json = JSON.stringify(delta, null, 2);\n  if (deltaType === 'textdiff') {\n    // split text diffs lines\n    json = json.split('\\\\n').join('\\\\n\"+\\n   \"');\n  }\n  context.indent();\n  context.row(json, htmlNote);\n  context.indent(-1);\n};\n\n/* eslint-disable camelcase */\nAnnotatedFormatter.prototype.format_added = formatAnyChange;\nAnnotatedFormatter.prototype.format_modified = formatAnyChange;\nAnnotatedFormatter.prototype.format_deleted = formatAnyChange;\nAnnotatedFormatter.prototype.format_moved = formatAnyChange;\nAnnotatedFormatter.prototype.format_textdiff = formatAnyChange;\nvar defaultInstance$1 = void 0;\n\nfunction format$1(delta, left) {\n  if (!defaultInstance$1) {\n    defaultInstance$1 = new AnnotatedFormatter();\n  }\n  return defaultInstance$1.format(delta, left);\n}\n\n\n\nvar annotated = Object.freeze({\n\tdefault: AnnotatedFormatter,\n\tformat: format$1\n});\n\nvar OPERATIONS = {\n  add: 'add',\n  remove: 'remove',\n  replace: 'replace',\n  move: 'move'\n};\n\nvar JSONFormatter = function (_BaseFormatter) {\n  inherits(JSONFormatter, _BaseFormatter);\n\n  function JSONFormatter() {\n    classCallCheck(this, JSONFormatter);\n\n    var _this = possibleConstructorReturn(this, (JSONFormatter.__proto__ || Object.getPrototypeOf(JSONFormatter)).call(this));\n\n    _this.includeMoveDestinations = true;\n    return _this;\n  }\n\n  createClass(JSONFormatter, [{\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      get(JSONFormatter.prototype.__proto__ || Object.getPrototypeOf(JSONFormatter.prototype), 'prepareContext', this).call(this, context);\n      context.result = [];\n      context.path = [];\n      context.pushCurrentOp = function (obj) {\n        var op = obj.op,\n            value = obj.value;\n\n        var val = {\n          op: op,\n          path: this.currentPath()\n        };\n        if (typeof value !== 'undefined') {\n          val.value = value;\n        }\n        this.result.push(val);\n      };\n\n      context.pushMoveOp = function (to) {\n        var from = this.currentPath();\n        this.result.push({\n          op: OPERATIONS.move,\n          from: from,\n          path: this.toPath(to)\n        });\n      };\n\n      context.currentPath = function () {\n        return '/' + this.path.join('/');\n      };\n\n      context.toPath = function (toPath) {\n        var to = this.path.slice();\n        to[to.length - 1] = toPath;\n        return '/' + to.join('/');\n      };\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.out('[ERROR] ' + err);\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin() {}\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd() {}\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(_ref, key, leftKey) {\n      var path = _ref.path;\n\n      path.push(leftKey);\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(_ref2) {\n      var path = _ref2.path;\n\n      path.pop();\n    }\n\n    /* jshint camelcase: false */\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged() {}\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination() {}\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      this.formatDeltaChildren(context, delta, left);\n    }\n  }, {\n    key: 'format_added',\n    value: function format_added(context, delta) {\n      context.pushCurrentOp({ op: OPERATIONS.add, value: delta[0] });\n    }\n  }, {\n    key: 'format_modified',\n    value: function format_modified(context, delta) {\n      context.pushCurrentOp({ op: OPERATIONS.replace, value: delta[1] });\n    }\n  }, {\n    key: 'format_deleted',\n    value: function format_deleted(context) {\n      context.pushCurrentOp({ op: OPERATIONS.remove });\n    }\n  }, {\n    key: 'format_moved',\n    value: function format_moved(context, delta) {\n      var to = delta[1];\n      context.pushMoveOp(to);\n    }\n  }, {\n    key: 'format_textdiff',\n    value: function format_textdiff() {\n      throw new Error('Not implemented');\n    }\n  }, {\n    key: 'format',\n    value: function format(delta, left) {\n      var context = {};\n      this.prepareContext(context);\n      this.recurse(context, delta, left);\n      return context.result;\n    }\n  }]);\n  return JSONFormatter;\n}(BaseFormatter);\n\nvar last = function last(arr) {\n  return arr[arr.length - 1];\n};\n\nvar sortBy = function sortBy(arr, pred) {\n  arr.sort(pred);\n  return arr;\n};\n\nvar compareByIndexDesc = function compareByIndexDesc(indexA, indexB) {\n  var lastA = parseInt(indexA, 10);\n  var lastB = parseInt(indexB, 10);\n  if (!(isNaN(lastA) || isNaN(lastB))) {\n    return lastB - lastA;\n  } else {\n    return 0;\n  }\n};\n\nvar opsByDescendingOrder = function opsByDescendingOrder(removeOps) {\n  return sortBy(removeOps, function (a, b) {\n    var splitA = a.path.split('/');\n    var splitB = b.path.split('/');\n    if (splitA.length !== splitB.length) {\n      return splitA.length - splitB.length;\n    } else {\n      return compareByIndexDesc(last(splitA), last(splitB));\n    }\n  });\n};\n\nvar partitionOps = function partitionOps(arr, fns) {\n  var initArr = Array(fns.length + 1).fill().map(function () {\n    return [];\n  });\n  return arr.map(function (item) {\n    var position = fns.map(function (fn) {\n      return fn(item);\n    }).indexOf(true);\n    if (position < 0) {\n      position = fns.length;\n    }\n    return { item: item, position: position };\n  }).reduce(function (acc, item) {\n    acc[item.position].push(item.item);\n    return acc;\n  }, initArr);\n};\nvar isMoveOp = function isMoveOp(_ref3) {\n  var op = _ref3.op;\n  return op === 'move';\n};\nvar isRemoveOp = function isRemoveOp(_ref4) {\n  var op = _ref4.op;\n  return op === 'remove';\n};\n\nvar reorderOps = function reorderOps(diff) {\n  var _partitionOps = partitionOps(diff, [isMoveOp, isRemoveOp]),\n      _partitionOps2 = slicedToArray(_partitionOps, 3),\n      moveOps = _partitionOps2[0],\n      removedOps = _partitionOps2[1],\n      restOps = _partitionOps2[2];\n\n  var removeOpsReverse = opsByDescendingOrder(removedOps);\n  return [].concat(toConsumableArray(removeOpsReverse), toConsumableArray(moveOps), toConsumableArray(restOps));\n};\n\nvar defaultInstance$2 = void 0;\n\nvar format$2 = function format(delta, left) {\n  if (!defaultInstance$2) {\n    defaultInstance$2 = new JSONFormatter();\n  }\n  return reorderOps(defaultInstance$2.format(delta, left));\n};\n\nvar log = function log(delta, left) {\n  console.log(format$2(delta, left));\n};\n\n\n\nvar jsonpatch = Object.freeze({\n\tdefault: JSONFormatter,\n\tpartitionOps: partitionOps,\n\tformat: format$2,\n\tlog: log\n});\n\nfunction chalkColor(name) {\n  return chalk && chalk[name] || function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return args;\n  };\n}\n\nvar colors = {\n  added: chalkColor('green'),\n  deleted: chalkColor('red'),\n  movedestination: chalkColor('gray'),\n  moved: chalkColor('yellow'),\n  unchanged: chalkColor('gray'),\n  error: chalkColor('white.bgRed'),\n  textDiffLine: chalkColor('gray')\n};\n\nvar ConsoleFormatter = function (_BaseFormatter) {\n  inherits(ConsoleFormatter, _BaseFormatter);\n\n  function ConsoleFormatter() {\n    classCallCheck(this, ConsoleFormatter);\n\n    var _this = possibleConstructorReturn(this, (ConsoleFormatter.__proto__ || Object.getPrototypeOf(ConsoleFormatter)).call(this));\n\n    _this.includeMoveDestinations = false;\n    return _this;\n  }\n\n  createClass(ConsoleFormatter, [{\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      get(ConsoleFormatter.prototype.__proto__ || Object.getPrototypeOf(ConsoleFormatter.prototype), 'prepareContext', this).call(this, context);\n      context.indent = function (levels) {\n        this.indentLevel = (this.indentLevel || 0) + (typeof levels === 'undefined' ? 1 : levels);\n        this.indentPad = new Array(this.indentLevel + 1).join('  ');\n        this.outLine();\n      };\n      context.outLine = function () {\n        this.buffer.push('\\n' + (this.indentPad || ''));\n      };\n      context.out = function () {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        for (var i = 0, l = args.length; i < l; i++) {\n          var lines = args[i].split('\\n');\n          var text = lines.join('\\n' + (this.indentPad || ''));\n          if (this.color && this.color[0]) {\n            text = this.color[0](text);\n          }\n          this.buffer.push(text);\n        }\n      };\n      context.pushColor = function (color) {\n        this.color = this.color || [];\n        this.color.unshift(color);\n      };\n      context.popColor = function () {\n        this.color = this.color || [];\n        this.color.shift();\n      };\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.pushColor(colors.error);\n      context.out('[ERROR]' + err);\n      context.popColor();\n    }\n  }, {\n    key: 'formatValue',\n    value: function formatValue(context, value) {\n      context.out(JSON.stringify(value, null, 2));\n    }\n  }, {\n    key: 'formatTextDiffString',\n    value: function formatTextDiffString(context, value) {\n      var lines = this.parseTextDiff(value);\n      context.indent();\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.pushColor(colors.textDiffLine);\n        context.out(line.location.line + ',' + line.location.chr + ' ');\n        context.popColor();\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          var piece = pieces[pieceIndex];\n          context.pushColor(colors[piece.type]);\n          context.out(piece.text);\n          context.popColor();\n        }\n        if (i < l - 1) {\n          context.outLine();\n        }\n      }\n      context.indent(-1);\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin(context, type, nodeType) {\n      context.pushColor(colors[type]);\n      if (type === 'node') {\n        context.out(nodeType === 'array' ? '[' : '{');\n        context.indent();\n      }\n    }\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd(context, type, nodeType) {\n      if (type === 'node') {\n        context.indent(-1);\n        context.out(nodeType === 'array' ? ']' : '}');\n      }\n      context.popColor();\n    }\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(context, key, leftKey, type, nodeType) {\n      context.pushColor(colors[type]);\n      context.out(leftKey + ': ');\n      if (type === 'node') {\n        context.out(nodeType === 'array' ? '[' : '{');\n        context.indent();\n      }\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(context, key, leftKey, type, nodeType, isLast) {\n      if (type === 'node') {\n        context.indent(-1);\n        context.out(nodeType === 'array' ? ']' : '}' + (isLast ? '' : ','));\n      }\n      if (!isLast) {\n        context.outLine();\n      }\n      context.popColor();\n    }\n\n    /* jshint camelcase: false */\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      this.formatValue(context, left);\n    }\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      this.formatValue(context, left);\n    }\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      // recurse\n      this.formatDeltaChildren(context, delta, left);\n    }\n  }, {\n    key: 'format_added',\n    value: function format_added(context, delta) {\n      this.formatValue(context, delta[0]);\n    }\n  }, {\n    key: 'format_modified',\n    value: function format_modified(context, delta) {\n      context.pushColor(colors.deleted);\n      this.formatValue(context, delta[0]);\n      context.popColor();\n      context.out(' => ');\n      context.pushColor(colors.added);\n      this.formatValue(context, delta[1]);\n      context.popColor();\n    }\n  }, {\n    key: 'format_deleted',\n    value: function format_deleted(context, delta) {\n      this.formatValue(context, delta[0]);\n    }\n  }, {\n    key: 'format_moved',\n    value: function format_moved(context, delta) {\n      context.out('==> ' + delta[1]);\n    }\n  }, {\n    key: 'format_textdiff',\n    value: function format_textdiff(context, delta) {\n      this.formatTextDiffString(context, delta[0]);\n    }\n  }]);\n  return ConsoleFormatter;\n}(BaseFormatter);\n\nvar defaultInstance$3 = void 0;\n\nvar format$3 = function format(delta, left) {\n  if (!defaultInstance$3) {\n    defaultInstance$3 = new ConsoleFormatter();\n  }\n  return defaultInstance$3.format(delta, left);\n};\n\nfunction log$1(delta, left) {\n  console.log(format$3(delta, left));\n}\n\n\n\nvar console$1 = Object.freeze({\n\tdefault: ConsoleFormatter,\n\tformat: format$3,\n\tlog: log$1\n});\n\n\n\nvar index = Object.freeze({\n\tbase: base,\n\thtml: html,\n\tannotated: annotated,\n\tjsonpatch: jsonpatch,\n\tconsole: console$1\n});\n\n// use as 2nd parameter for JSON.parse to revive Date instances\nfunction dateReviver(key, value) {\n  var parts = void 0;\n  if (typeof value === 'string') {\n    // eslint-disable-next-line max-len\n    parts = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d*))?(Z|([+-])(\\d{2}):(\\d{2}))$/.exec(value);\n    if (parts) {\n      return new Date(Date.UTC(+parts[1], +parts[2] - 1, +parts[3], +parts[4], +parts[5], +parts[6], +(parts[7] || 0)));\n    }\n  }\n  return value;\n}\n\nfunction create(options) {\n  return new DiffPatcher(options);\n}\n\nvar defaultInstance$4 = void 0;\n\nfunction diff() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.diff.apply(defaultInstance$4, arguments);\n}\n\nfunction patch() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.patch.apply(defaultInstance$4, arguments);\n}\n\nfunction unpatch() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.unpatch.apply(defaultInstance$4, arguments);\n}\n\nfunction reverse() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.reverse.apply(defaultInstance$4, arguments);\n}\n\nfunction clone$1() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.clone.apply(defaultInstance$4, arguments);\n}\n\nexports.DiffPatcher = DiffPatcher;\nexports.formatters = index;\nexports.console = console$1;\nexports.create = create;\nexports.dateReviver = dateReviver;\nexports.diff = diff;\nexports.patch = patch;\nexports.unpatch = unpatch;\nexports.reverse = reverse;\nexports.clone = clone$1;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","const m = require(\"mithril\");\n\n\nmodule.exports = {\n\n    getClassNames(attrs) {\n        const classNames = [];\n        classNames.push(attrs.raised ? \"mmf-button--raised\" : \"mmf-button--flat\");\n        classNames.push(attrs.disabled ? \"is-disabled\" : \"is-enabled\");\n        if (attrs.class) {\n            classNames.push(attrs.class);\n        }\n        return classNames.join(\" \");\n    },\n\n    view(vnode) {\n        const attrs = Object.assign({\n            disabled: false,\n            onclick: event => vnode.attrs.onclick(event)\n        }, vnode.attrs);\n\n        attrs.class = this.getClassNames(vnode.attrs);\n\n        return m(\"button.mmf-button\", attrs, vnode.children);\n    }\n};\n","const m = require(\"mithril\");\n\n\nmodule.exports = {\n    view({ attrs }) {\n        return m(\"input.mmf-checkbox\",\n            {\n                id: attrs.id,\n                type: \"checkbox\",\n                disabled: attrs.disabled === true,\n                checked: attrs.value,\n                onchange: e => attrs.onchange(e.target.checked),\n                onfocus: attrs.onfocus,\n                onblur: attrs.onblur\n            }\n        );\n    }\n};\n","const m = require(\"mithril\");\nconst Checkbox = require(\"../checkbox\");\nconst Label = require(\"../label\");\nconst Errors = require(\"../errors\");\n\n\nconst defaultOptions = {\n    id: null,\n    title: \"\",\n    disabled: false,\n    value: \"\",\n    errors: [],\n    description: \"\",\n    placeholder: \"\",\n    onchange: Function.prototype\n};\n\n\nmodule.exports = {\n    view(vnode) {\n        const attrs = Object.assign({}, defaultOptions, vnode.attrs);\n\n        return m(`.mmf-form.mmf-form--checkbox.mmf-form--${attrs.disabled ? \"disabled\" : \"enabled\"}`,\n            {\n                \"class\": Errors.getErrorClass(attrs.errors)\n            },\n            m(Checkbox,\n                {\n                    id: vnode.attrs.id,\n                    disabled: attrs.disabled,\n                    value: vnode.attrs.value,\n                    onchange: vnode.attrs.onchange,\n                    onfocus: vnode.attrs.onfocus,\n                    onblur: vnode.attrs.onblur\n                }\n            ),\n            m(Label, attrs),\n            m(Errors, attrs),\n            attrs.description ? m(\".mmf-meta\", attrs.description) : \"\",\n            vnode.children\n        );\n    }\n};\n","module.exports = function getErrorClass(errors) {\n    if (errors == null || errors.length === 0) {\n        return \"no-error\";\n    }\n\n    for (let i = 0, l = errors.length; i < l; i += 1) {\n        if (typeof errors[i] === \"string\" || errors[i].severity !== \"warning\") {\n            return \"has-error\";\n        }\n    }\n\n    return \"has-warning\";\n};\n","const m = require(\"mithril\");\n\nfunction isVNode(object) {\n    return typeof object.tag === \"string\" && object.attrs != null && typeof object.attrs === \"object\";\n}\n\n\nmodule.exports = {\n\n    getErrorClass: require(\"./getErrorClass\"),\n\n    view(vnode) {\n        if (vnode.attrs.errors == null || vnode.attrs.errors.length === 0) {\n            return \"\";\n        }\n\n        return m(\"ul.mmf-form__errors\",\n            vnode.attrs.errors.map(error => {\n                if (isVNode(error)) {\n                    return m(`li.mmf-form__error.mmf-form__error--${error.attrs.severity}`, error);\n                }\n\n                if (error && typeof error === \"object\") {\n                    if (error.severity === \"warning\") {\n                        return m(\"li.mmf-form__error.mmf-form__error--warning\", m.trust(error.message));\n                    }\n                    return m(\"li.mmf-form__error.mmf-form__error--error\", m.trust(error.message));\n                }\n                return m(\"li.mmf-form__error.mmf-form__error--error\", m.trust(error));\n            })\n        );\n    }\n};\n","const m = require(\"mithril\");\nconst RATIO_DEFAULT = [16, 9];\n\nfunction isEmpty(value) {\n    return value == null || value === \"\";\n}\n\nfunction getRatioStyle(ratio) {\n    return `${getRatio(ratio).toFixed(2)}%`;\n}\n\nfunction getRatio(ratio) {\n    let dim = ratio.split(\":\").map(parseFloat);\n    dim = dim.length === 2 ? dim : RATIO_DEFAULT;\n    return (100 * dim[1] / dim[0]);\n}\n\n\nconst MetaDescription = {\n    view(vnode) {\n        const attrs = vnode.attrs;\n        return [\n            isEmpty(attrs.url) ?\n                m(\".mmf-preview__placeholder\", attrs.placeholder) : [\n                    attrs.description ? m(\".mmf-preview__description\", m.trust(attrs.description)) : \"\",\n                    m(\".mmf-preview__overflow-indicator\")\n                ],\n            vnode.children\n        ];\n    }\n};\n\n\nconst InlineImage = {\n    view(vnode) {\n        const attrs = vnode.attrs;\n        return m(\".mmf-preview__content\",\n            {\n                style: isEmpty(attrs.url) ? \"\" : `padding-bottom: ${getRatioStyle(attrs.maxRatio)};`,\n                oncreate: attrs.oncreate\n            },\n            isEmpty(attrs.url) ?\n                m(\".mmf-preview__placeholder\", attrs.placeholder) : [\n                    m(\"img\", {\n                        src: attrs.url,\n                        onload: attrs.onload\n                    }),\n                    attrs.description ? m(\".mmf-preview__description\", m.trust(attrs.description)) : \"\",\n                    m(\".mmf-preview__overflow-indicator\")\n                ],\n            vnode.children\n        );\n    }\n};\n\n\nconst ImagePreview = {\n\n    overflowContainer: null,\n\n    updateRatio(maxRatio, image) {\n        if (this.overflowContainer != null && image.naturalWidth) {\n            const ratioMax = getRatio(maxRatio);\n            const ratioImg = getRatio(`${image.naturalWidth}:${image.naturalHeight}`);\n\n            if (ratioMax >= ratioImg) {\n                this.overflowContainer.style.paddingBottom = `${ratioImg.toFixed(2)}%`;\n                this.overflowContainer.classList.remove(\"with-overflow\");\n                this.hasOverflow = false;\n            } else {\n                this.overflowContainer.style.paddingBottom = `${ratioMax.toFixed(2)}%`;\n                this.overflowContainer.classList.add(\"with-overflow\");\n                this.hasOverflow = true;\n            }\n        }\n    },\n\n    view(vnode) {\n        const attrs = Object.assign({\n            url: null,\n            \"class\": \"\",\n            asBackgroundImage: false,\n            description: null,\n            placeholder: null,\n            onclick: null,\n            maxRatio: \"16:9\",\n            // \"private\"\n            onload: event => this.updateRatio(attrs.maxRatio, event.currentTarget),\n            oncreate: content => { this.overflowContainer = content.dom; }\n        }, vnode.attrs);\n\n        return m(\".mmf-preview.mmf-preview--image\",\n            {\n                \"class\": attrs.class + (isEmpty(attrs.url) ? \"\" : \" with-image\"),\n                style: (attrs.asBackgroundImage && !isEmpty(attrs.url)) ?\n                    `background-image: url(${attrs.url});` : \"\"\n            },\n            attrs.asBackgroundImage ? m(MetaDescription, attrs, vnode.children) : m(InlineImage, attrs, vnode.children)\n        );\n    }\n};\n\n\nmodule.exports = ImagePreview;\n","const m = require(\"mithril\");\n\n\nmodule.exports = {\n    value: null,\n    hasFocus: false,\n\n    onupdate(vnode) {\n        // @prevent redraw of input\n        vnode.dom.id = vnode.attrs.id; // updating the pointer dependend attributes outside of mithril\n    },\n\n    view({ attrs }) {\n        let value = attrs.value;\n        if (this.hasFocus && this.value != null) {\n            value = this.value; // this will remove any changes applied to this data from \"outside\"\n        }\n\n        this.value = value;\n\n        const inputAttributes = {\n            // id: attrs.id, // if the element is pointer sensitive it will be rebuild on pointer updates, loosing focus\n            type: attrs.type,\n            value,\n            placeholder: attrs.placeholder,\n            disabled: attrs.disabled === true,\n            oninput: e => (this.value = e.target.value),\n            // @fixme this might trigger updates, but ensures the property is always set (on initial rendering)\n            oncreate: vnode => (vnode.dom.id = attrs.id),\n            onfocus: event => {\n                this.hasFocus = true;\n                attrs.onfocus && attrs.onfocus(event);\n            },\n            onblur: event => {\n                this.hasFocus = false;\n                attrs.onblur && attrs.onblur(event);\n            }\n        };\n\n        const updateEvent = attrs.instantUpdate === true ? \"onkeyup\" : \"onchange\";\n        inputAttributes[updateEvent] = () => attrs.onchange(this.value);\n\n        return m(\"input.mmf-input\", inputAttributes);\n    }\n};\n","const m = require(\"mithril\");\nconst Input = require(\"../input\");\nconst Label = require(\"../label\");\nconst sanitizeValue = require(\"./sanitizeValue\");\nconst Errors = require(\"../errors\");\n\n\nconst TYPES = {\n    string: \"text\",\n    integer: \"number\",\n    number: \"number\"\n};\n\n\nmodule.exports = {\n    oncreate(vnode) {\n        this.$form = vnode.dom;\n    },\n\n    updateClasses(value) {\n        const hasValue = value !== \"\";\n        this.$form.classList.remove(hasValue ? \"isEmpty\" : \"isNotEmpty\");\n        this.$form.classList.add(hasValue === false ? \"isEmpty\" : \"isNotEmpty\");\n    },\n\n    onfocus() {\n        this.$form.classList.add(\"hasFocus\");\n        this.$form.classList.remove(\"hasNoFocus\");\n    },\n\n    onblur(value) {\n        this.$form.classList.add(\"hasNoFocus\");\n        this.$form.classList.remove(\"hasFocus\");\n        this.updateClasses(value);\n    },\n\n    hasFocus() {\n        return this.$form && this.$form.classList.contains(\"hasFocus\");\n    },\n\n    view(vnode) {\n        const inputType = TYPES[vnode.attrs.type] || \"text\";\n        const attrs = Object.assign({\n            id: null,\n            title: \"\",\n            value: \"\",\n            errors: [],\n            description: \"\",\n            placeholder: \"\",\n            instantUpdate: false,\n            onblur: Function.prototype,\n            onfocus: Function.prototype,\n            onchange: Function.prototype\n        }, vnode.attrs);\n\n        const focusClass = this.hasFocus() ? \"hasFocus\" : \"hasNoFocus\";\n        const errorClass = Errors.getErrorClass(attrs.errors);\n        const emptyClass = attrs.value === \"\" ? \"isEmpty\" : \"isNotEmpty\";\n\n        const view = m(`.mmf-form.mmf-form--input.mmf-form--${attrs.disabled ? \"disabled\" : \"enabled\"}`,\n            {\n                \"class\": `${focusClass} ${errorClass} ${emptyClass}`\n            },\n            m(Label, attrs),\n            m(Input,\n                {\n                    type: inputType,\n                    id: attrs.id,\n                    disabled: attrs.disabled,\n                    instantUpdate: attrs.instantUpdate,\n                    placeholder: attrs.placeholder,\n                    onchange: value => attrs.onchange(sanitizeValue(inputType, value)),\n                    value: attrs.value,\n                    onfocus: e => {\n                        this.onfocus();\n                        attrs.onfocus && attrs.onfocus(e);\n                    },\n                    onblur: e => {\n                        this.onblur(e.target.value);\n                        attrs.onblur && attrs.onblur(e);\n                    }\n                }\n            ),\n            m(Errors, attrs),\n            attrs.description ? m(\".mmf-meta\", attrs.description) : \"\",\n            vnode.children\n        );\n\n        return view;\n    }\n};\n","module.exports = function sanitizeValue(type, value) {\n    if (type === \"number\") {\n        const intValue = parseInt(value);\n        const floatValue = parseFloat(value);\n        if (floatValue == value) { // eslint-disable-line\n            return floatValue;\n        } else if (isNaN(intValue)) {\n            return value;\n        }\n        return intValue;\n    }\n    return value;\n};\n","const m = require(\"mithril\");\n\n\nmodule.exports = {\n    view(vnode) {\n        return m(\"label.mmf-label\",\n            {\n                \"for\": vnode.attrs.id,\n                \"class\": vnode.attrs.class\n            },\n            vnode.attrs.title\n        );\n    }\n};\n","const m = require(\"mithril\");\n\n\nmodule.exports = {\n    view(vnode) {\n        return m(\"div.mmf-select__wrapper\",\n            {\n                \"class\": vnode.attrs.disabled === true ? \"is-disabled\" : \"is-enabled\",\n                oncreate: _vnode => (this.$wrapper = _vnode.dom)\n            },\n            m(\"select.mmf-select\",\n                {\n                    id: vnode.attrs.id,\n                    value: vnode.attrs.value,\n                    disabled: vnode.attrs.disabled,\n                    \"class\": vnode.attrs.class,\n                    onfocus: () => {\n                        this.$wrapper && this.$wrapper.classList.add(\"has-focus\");\n                        vnode.attrs.onfocus && vnode.attrs.onfocus(vnode);\n                    },\n                    onblur: () => {\n                        this.$wrapper && this.$wrapper.classList.remove(\"has-focus\");\n                        vnode.attrs.onblur && vnode.attrs.onblur(vnode);\n                    },\n                    // @reminder will always be string, which must be specified in json-schema or else datatype must\n                    // be passed to select-component\n                    onchange: e => vnode.attrs.onchange(e.target.value)\n                },\n                vnode.attrs.options.map(value => {\n                    const title = value.title || value;\n                    // value must be a string or else is discarded\n                    value = `${value.value == null ? value : value.value}`;\n                    return m(\"option\", { value }, title);\n                })\n            )\n        );\n    }\n};\n","const m = require(\"mithril\");\nconst Select = require(\"../select\");\nconst Label = require(\"../label\");\nconst Errors = require(\"../errors\");\n\n\nmodule.exports = {\n    view(vnode) {\n        const attrs = Object.assign({\n            id: null,\n            value: \"\",\n            options: [{ title: \"-\", value: false }],\n            errors: [],\n            description: \"\",\n            placeholder: \"\",\n            onchange: Function.prototype\n        }, vnode.attrs);\n\n        return m(`.mmf-form.mmf-form--select.mmf-form--${attrs.disabled ? \"disabled\" : \"enabled\"}`,\n            {\n                \"class\": Errors.getErrorClass(attrs.errors)\n            },\n            m(Select, attrs),\n            m(Label, Object.assign({ \"class\": \"mmf-grow-2\" }, attrs)),\n            m(Errors, attrs),\n            attrs.description ? m(\".mmf-meta\", attrs.description) : \"\",\n            vnode.children\n        );\n    }\n};\n","const m = require(\"mithril\");\nconst autosize = require(\"autosize\");\nconst raf = window.requestAnimationFrame;\n\n\nmodule.exports = {\n\n    textarea: null,\n    focus: false,\n\n    onupdate(vnode) {\n        raf(() => autosize.update(vnode.dom));\n    },\n\n    view(vnode) {\n        const attrs = Object.assign({\n            id: null,\n            value: \"\",\n            rows: 1,\n            placeholder: \"\",\n            disabled: false,\n            instantUpdate: false,\n            onblur: Function.prototype,\n            onfocus: Function.prototype,\n            onchange: Function.prototype,\n            oncreate: Function.prototype,\n            onbeforeremove: Function.prototype\n        }, vnode.attrs);\n\n        const disabled = attrs.disabled === true;\n\n        if (this.focus) {\n            // keep current value, while input is being active this prevents\n            // jumps in cursor, caused by race conditions\n            // @attention - this may produce other problems\n            attrs.value = this.textarea.value;\n        }\n\n        const textareaAttributes = {\n            id: attrs.id,\n            value: attrs.value,\n            rows: attrs.rows,\n            disabled,\n            placeholder: attrs.placeholder,\n            onblur: e => {\n                this.focus = false;\n                attrs.onblur && attrs.onblur(e);\n            },\n            onfocus: e => {\n                this.focus = true;\n                attrs.onfocus && attrs.onfocus(e);\n            },\n            onupdate: node => autosize.update(node.dom),\n            oncreate: node => {\n                this.textarea = node.dom;\n                attrs.oncreate(node);\n                autosize(node.dom);\n                autosize.update(vnode.dom);\n            },\n            onbeforeremove: node => {\n                attrs.onbeforeremove(node);\n                autosize.destroy(node.dom);\n            }\n        };\n\n        const updateEvent = attrs.instantUpdate === true ? \"onkeyup\" : \"onchange\";\n        textareaAttributes[updateEvent] = e => attrs.onchange(e.target.value);\n\n        return m(\"textarea.mmf-textarea\", textareaAttributes);\n    }\n};\n","const m = require(\"mithril\");\nconst Textarea = require(\"../textarea\");\nconst Label = require(\"../label\");\nconst Errors = require(\"../errors\");\n\n\nfunction isEmpty(value) {\n    return value == null || value === \"\";\n}\n\nmodule.exports = {\n\n    oncreate(vnode) {\n        this.$form = vnode.dom;\n        this.onblur(vnode.attrs.value);\n    },\n\n    onfocus() {\n        this.$form.classList.remove(\"hasNoFocus\");\n        this.$form.classList.add(\"hasFocus\");\n    },\n\n    onblur(value) {\n        this.$form.classList.remove(\"hasFocus\");\n        this.$form.classList.add(\"hasNoFocus\");\n        this.updateClasses(value);\n    },\n\n    updateClasses(value) {\n        const hasValue = isEmpty(value) === false;\n        this.$form.classList.remove(hasValue ? \"isEmpty\" : \"isNotEmpty\");\n        this.$form.classList.add(hasValue === false ? \"isEmpty\" : \"isNotEmpty\");\n    },\n\n    onupdate(vnode) {\n        this.updateClasses(vnode.attrs.value);\n    },\n\n    view(vnode) {\n        const attrs = Object.assign({\n            id: null,\n            title: \"\",\n            value: \"\",\n            errors: [],\n            disabled: false,\n            description: \"\",\n            placeholder: \"\",\n            rows: 1,\n            instantUpdate: false,\n            onblur: Function.prototype,\n            onfocus: Function.prototype,\n            onchange: Function.prototype\n        }, vnode.attrs);\n\n        const disabled = attrs.disabled === true;\n\n        return m(`.mmf-form.mmf-form--textarea.mmf-form--${disabled ? \"disabled\" : \"enabled\"}`,\n            {\n                \"class\": Errors.getErrorClass(attrs.errors)\n            },\n            m(Label, attrs),\n            m(Textarea, {\n                id: attrs.id,\n                value: attrs.value,\n                disabled,\n                instantUpdate: attrs.instantUpdate,\n                placeholder: attrs.placeholder,\n                rows: attrs.rows,\n                // onchange: m.withAttr(\"value\", attrs.onchange),\n                onchange: attrs.onchange,\n                onblur: e => {\n                    this.onblur(e.target.value);\n                    attrs.onblur(e);\n                },\n                onfocus: e => {\n                    this.onfocus();\n                    attrs.onfocus(e);\n                }\n            }),\n            m(Errors, attrs),\n            attrs.description ? m(\".mmf-meta\", attrs.description) : \"\",\n            vnode.children\n        );\n    }\n};\n","module.exports = {\n    button: require(\"./components/button\"),\n    checkbox: require(\"./components/checkbox\"),\n    checkboxForm: require(\"./components/checkboxform\"),\n    errors: require(\"./components/errors\"),\n    input: require(\"./components/input\"),\n    inputForm: require(\"./components/inputform\"),\n    label: require(\"./components/label\"),\n    select: require(\"./components/select\"),\n    selectForm: require(\"./components/selectform\"),\n    textarea: require(\"./components/textarea\"),\n    textareaForm: require(\"./components/textareaform\"),\n    imagePreview: require(\"./components/imagepreview\")\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.parseActions = parseActions;\nexports.default = undoable;\nexports.distinctState = distinctState;\nexports.includeAction = includeAction;\nexports.ifAction = ifAction;\nexports.excludeAction = excludeAction;\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n// debug output\nvar __DEBUG__ = undefined;\nfunction debug() {\n  if (__DEBUG__) {\n    var _console;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (!console.group) {\n      args.unshift('%credux-undo', 'font-style: italic');\n    }\n    (_console = console).log.apply(_console, args);\n  }\n}\nfunction debugStart(action, state) {\n  if (__DEBUG__) {\n    var args = ['action', action.type];\n    if (console.group) {\n      var _console2;\n\n      args.unshift('%credux-undo', 'font-style: italic');\n      (_console2 = console).groupCollapsed.apply(_console2, args);\n      console.log('received', { state: state, action: action });\n    } else {\n      debug.apply(undefined, args);\n    }\n  }\n}\nfunction debugEnd() {\n  if (__DEBUG__) {\n    return console.groupEnd && console.groupEnd();\n  }\n}\n// /debug output\n\n// action types\nvar ActionTypes = exports.ActionTypes = {\n  UNDO: '@@redux-undo/UNDO',\n  REDO: '@@redux-undo/REDO',\n  JUMP_TO_FUTURE: '@@redux-undo/JUMP_TO_FUTURE',\n  JUMP_TO_PAST: '@@redux-undo/JUMP_TO_PAST'\n};\n// /action types\n\n// action creators to change the state\nvar ActionCreators = exports.ActionCreators = {\n  undo: function undo() {\n    return { type: ActionTypes.UNDO };\n  },\n  redo: function redo() {\n    return { type: ActionTypes.REDO };\n  },\n  jumpToFuture: function jumpToFuture(index) {\n    return { type: ActionTypes.JUMP_TO_FUTURE, index: index };\n  },\n  jumpToPast: function jumpToPast(index) {\n    return { type: ActionTypes.JUMP_TO_PAST, index: index };\n  }\n};\n// /action creators\n\n// length: get length of history\nfunction length(history) {\n  var past = history.past;\n  var future = history.future;\n\n  return past.length + 1 + future.length;\n}\n// /length\n\n// insert: insert `state` into history, which means adding the current state\n//         into `past`, setting the new `state` as `present` and erasing\n//         the `future`.\nfunction insert(history, state, limit) {\n  debug('insert', { state: state, history: history, free: limit - length(history) });\n\n  var past = history.past;\n  var present = history.present;\n\n  var historyOverflow = limit && length(history) >= limit;\n\n  if (present === undefined) {\n    // init history\n    return {\n      past: [],\n      present: state,\n      future: []\n    };\n  }\n\n  return {\n    past: [].concat(_toConsumableArray(past.slice(historyOverflow ? 1 : 0)), [present]),\n    present: state,\n    future: []\n  };\n}\n// /insert\n\n// undo: go back to the previous point in history\nfunction undo(history) {\n  debug('undo', { history: history });\n\n  var past = history.past;\n  var present = history.present;\n  var future = history.future;\n\n\n  if (past.length <= 0) return history;\n\n  return {\n    past: past.slice(0, past.length - 1), // remove last element from past\n    present: past[past.length - 1], // set element as new present\n    future: [present].concat(_toConsumableArray(future))\n  };\n}\n// /undo\n\n// redo: go to the next point in history\nfunction redo(history) {\n  debug('redo', { history: history });\n\n  var past = history.past;\n  var present = history.present;\n  var future = history.future;\n\n\n  if (future.length <= 0) return history;\n\n  return {\n    future: future.slice(1, future.length), // remove element from future\n    present: future[0], // set element as new present\n    past: [].concat(_toConsumableArray(past), [present // old present state is in the past now\n    ])\n  };\n}\n// /redo\n\n// jumpToFuture: jump to requested index in future history\nfunction jumpToFuture(history, index) {\n  if (index === 0) return redo(history);\n\n  var past = history.past;\n  var present = history.present;\n  var future = history.future;\n\n\n  return {\n    future: future.slice(index + 1),\n    present: future[index],\n    past: past.concat([present]).concat(future.slice(0, index))\n  };\n}\n// /jumpToFuture\n\n// jumpToPast: jump to requested index in past history\nfunction jumpToPast(history, index) {\n  if (index === history.past.length - 1) return undo(history);\n\n  var past = history.past;\n  var present = history.present;\n  var future = history.future;\n\n\n  return {\n    future: past.slice(index + 1).concat([present]).concat(future),\n    present: past[index],\n    past: past.slice(0, index)\n  };\n}\n// /jumpToPast\n\n// wrapState: for backwards compatibility to 0.4\nfunction wrapState(state) {\n  return _extends({}, state, {\n    history: state\n  });\n}\n// /wrapState\n\n// updateState\nfunction updateState(state, history) {\n  return wrapState(_extends({}, state, history));\n}\n// /updateState\n\n// createHistory\nfunction createHistory(state) {\n  return {\n    past: [],\n    present: state,\n    future: []\n  };\n}\n// /createHistory\n\n// parseActions\nfunction parseActions(rawActions) {\n  var defaultValue = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\n  if (Array.isArray(rawActions)) {\n    return rawActions;\n  } else if (typeof rawActions === 'string') {\n    return [rawActions];\n  }\n  return defaultValue;\n}\n// /parseActions\n\n// redux-undo higher order reducer\nfunction undoable(reducer) {\n  var rawConfig = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n  __DEBUG__ = rawConfig.debug;\n\n  var config = {\n    initialState: rawConfig.initialState,\n    initTypes: parseActions(rawConfig.initTypes, ['@@redux/INIT', '@@INIT']),\n    limit: rawConfig.limit,\n    filter: rawConfig.filter || function () {\n      return true;\n    },\n    undoType: rawConfig.undoType || ActionTypes.UNDO,\n    redoType: rawConfig.redoType || ActionTypes.REDO,\n    jumpToPastType: rawConfig.jumpToPastType || ActionTypes.JUMP_TO_PAST,\n    jumpToFutureType: rawConfig.jumpToFutureType || ActionTypes.JUMP_TO_FUTURE\n  };\n  config.history = rawConfig.initialHistory || createHistory(config.initialState);\n\n  if (config.initTypes.length === 0) {\n    console.warn('redux-undo: supply at least one action type in initTypes to ensure initial state');\n  }\n\n  return function (state, action) {\n    debugStart(action, state);\n    var res = undefined;\n    switch (action.type) {\n      case config.undoType:\n        res = undo(state);\n        debug('after undo', res);\n        debugEnd();\n        return res ? updateState(state, res) : state;\n\n      case config.redoType:\n        res = redo(state);\n        debug('after redo', res);\n        debugEnd();\n        return res ? updateState(state, res) : state;\n\n      case config.jumpToPastType:\n        res = jumpToPast(state, action.index);\n        debug('after jumpToPast', res);\n        debugEnd();\n        return res ? updateState(state, res) : state;\n\n      case config.jumpToFutureType:\n        res = jumpToFuture(state, action.index);\n        debug('after jumpToFuture', res);\n        debugEnd();\n        return res ? updateState(state, res) : state;\n\n      default:\n        res = reducer(state && state.present, action);\n\n        if (config.initTypes.some(function (actionType) {\n          return actionType === action.type;\n        })) {\n          debug('reset history due to init action');\n          debugEnd();\n          return wrapState(_extends({}, state, createHistory(res)));\n        }\n\n        if (config.filter && typeof config.filter === 'function') {\n          if (!config.filter(action, res, state && state.present)) {\n            debug('filter prevented action, not storing it');\n            debugEnd();\n            return wrapState(_extends({}, state, {\n              present: res\n            }));\n          }\n        }\n\n        var history = state && state.present !== undefined ? state : config.history;\n        var updatedHistory = insert(history, res, config.limit);\n        debug('after insert', { history: updatedHistory, free: config.limit - length(updatedHistory) });\n        debugEnd();\n\n        return wrapState(_extends({}, state, updatedHistory));\n    }\n  };\n}\n// /redux-undo\n\n// distinctState helper\nfunction distinctState() {\n  return function (action, currentState, previousState) {\n    return currentState !== previousState;\n  };\n}\n// /distinctState\n\n// includeAction helper\nfunction includeAction(rawActions) {\n  var actions = parseActions(rawActions);\n  return function (action) {\n    return actions.indexOf(action.type) >= 0;\n  };\n}\n// /includeAction\n\n// deprecated ifAction helper\nfunction ifAction(rawActions) {\n  console.error('Deprecation Warning: Please change `ifAction` to `includeAction`');\n  return includeAction(rawActions);\n}\n// /ifAction\n\n// excludeAction helper\nfunction excludeAction() {\n  var rawActions = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n  var actions = parseActions(rawActions);\n  return function (action) {\n    return actions.indexOf(action.type) < 0;\n  };\n}\n// /excludeAction","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nimport compose from './compose';\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\nexport default function applyMiddleware() {\n  for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function (reducer, preloadedState, enhancer) {\n      var store = createStore(reducer, preloadedState, enhancer);\n      var _dispatch = store.dispatch;\n      var chain = [];\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch(action) {\n          return _dispatch(action);\n        }\n      };\n      chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(undefined, chain)(store.dispatch);\n\n      return _extends({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}","function bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(undefined, arguments));\n  };\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\nexport default function bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error('bindActionCreators expected an object or a function, instead received ' + (actionCreators === null ? 'null' : typeof actionCreators) + '. ' + 'Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?');\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}","import { ActionTypes } from './createStore';\nimport isPlainObject from 'lodash-es/isPlainObject';\nimport warning from './utils/warning';\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionName = actionType && '\"' + actionType.toString() + '\"' || 'an action';\n\n  return 'Given action ' + actionName + ', reducer \"' + key + '\" returned undefined. ' + 'To ignore an action, you must explicitly return the previous state. ' + 'If you want this reducer to hold no value, you can return null instead of undefined.';\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return 'The ' + argumentName + ' has unexpected type of \"' + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + '\". Expected argument to be an object with the following ' + ('keys: \"' + reducerKeys.join('\", \"') + '\"');\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n\n  if (unexpectedKeys.length > 0) {\n    return 'Unexpected ' + (unexpectedKeys.length > 1 ? 'keys' : 'key') + ' ' + ('\"' + unexpectedKeys.join('\", \"') + '\" found in ' + argumentName + '. ') + 'Expected to find one of the known reducer keys instead: ' + ('\"' + reducerKeys.join('\", \"') + '\". Unexpected keys will be ignored.');\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, { type: ActionTypes.INIT });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined during initialization. ' + 'If the state passed to the reducer is undefined, you must ' + 'explicitly return the initial state. The initial state may ' + 'not be undefined. If you don\\'t want to set a value for this reducer, ' + 'you can use null instead of undefined.');\n    }\n\n    var type = '@@redux/PROBE_UNKNOWN_ACTION_' + Math.random().toString(36).substring(7).split('').join('.');\n    if (typeof reducer(undefined, { type: type }) === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined when probed with a random type. ' + ('Don\\'t try to handle ' + ActionTypes.INIT + ' or other actions in \"redux/*\" ') + 'namespace. They are considered private. Instead, you must return the ' + 'current state for any unknown actions, unless it is undefined, ' + 'in which case you must return the initial state, regardless of the ' + 'action type. The initial state may not be undefined, but can be null.');\n    }\n  });\n}\n\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\nexport default function combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning('No reducer provided for key \"' + key + '\"');\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers);\n\n  var unexpectedKeyCache = void 0;\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError = void 0;\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments[1];\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n}","/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\nexport default function compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(undefined, arguments));\n    };\n  });\n}","import isPlainObject from 'lodash-es/isPlainObject';\nimport $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nexport var ActionTypes = {\n  INIT: '@@redux/INIT'\n\n  /**\n   * Creates a Redux store that holds the state tree.\n   * The only way to change the data in the store is to call `dispatch()` on it.\n   *\n   * There should only be a single store in your app. To specify how different\n   * parts of the state tree respond to actions, you may combine several reducers\n   * into a single reducer function by using `combineReducers`.\n   *\n   * @param {Function} reducer A function that returns the next state tree, given\n   * the current state tree and the action to handle.\n   *\n   * @param {any} [preloadedState] The initial state. You may optionally specify it\n   * to hydrate the state from the server in universal apps, or to restore a\n   * previously serialized user session.\n   * If you use `combineReducers` to produce the root reducer function, this must be\n   * an object with the same shape as `combineReducers` keys.\n   *\n   * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n   * to enhance the store with third-party capabilities such as middleware,\n   * time travel, persistence, etc. The only store enhancer that ships with Redux\n   * is `applyMiddleware()`.\n   *\n   * @returns {Store} A Redux store that lets you read the state, dispatch actions\n   * and subscribe to changes.\n   */\n};export default function createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.INIT });\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object') {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return { unsubscribe: unsubscribe };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}","import createStore from './createStore';\nimport combineReducers from './combineReducers';\nimport bindActionCreators from './bindActionCreators';\nimport applyMiddleware from './applyMiddleware';\nimport compose from './compose';\nimport warning from './utils/warning';\n\n/*\n* This is a dummy function to check if the function name has been altered by minification.\n* If the function has been minified and NODE_ENV !== 'production', warn the user.\n*/\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \\'production\\'. ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { createStore, combineReducers, bindActionCreators, applyMiddleware, compose };","/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nexport default function warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n    /* eslint-disable no-empty */\n  } catch (e) {}\n  /* eslint-enable no-empty */\n}","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","(function(module) {\n    'use strict';\n\n    module.exports.is_uri = is_iri;\n    module.exports.is_http_uri = is_http_iri;\n    module.exports.is_https_uri = is_https_iri;\n    module.exports.is_web_uri = is_web_iri;\n    // Create aliases\n    module.exports.isUri = is_iri;\n    module.exports.isHttpUri = is_http_iri;\n    module.exports.isHttpsUri = is_https_iri;\n    module.exports.isWebUri = is_web_iri;\n\n\n    // private function\n    // internal URI spitter method - direct from RFC 3986\n    var splitUri = function(uri) {\n        var splitted = uri.match(/(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?/);\n        return splitted;\n    };\n\n    function is_iri(value) {\n        if (!value) {\n            return;\n        }\n\n        // check for illegal characters\n        if (/[^a-z0-9\\:\\/\\?\\#\\[\\]\\@\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=\\.\\-\\_\\~\\%]/i.test(value)) return;\n\n        // check for hex escapes that aren't complete\n        if (/%[^0-9a-f]/i.test(value)) return;\n        if (/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)) return;\n\n        var splitted = [];\n        var scheme = '';\n        var authority = '';\n        var path = '';\n        var query = '';\n        var fragment = '';\n        var out = '';\n\n        // from RFC 3986\n        splitted = splitUri(value);\n        scheme = splitted[1]; \n        authority = splitted[2];\n        path = splitted[3];\n        query = splitted[4];\n        fragment = splitted[5];\n\n        // scheme and path are required, though the path can be empty\n        if (!(scheme && scheme.length && path.length >= 0)) return;\n\n        // if authority is present, the path must be empty or begin with a /\n        if (authority && authority.length) {\n            if (!(path.length === 0 || /^\\//.test(path))) return;\n        } else {\n            // if authority is not present, the path must not start with //\n            if (/^\\/\\//.test(path)) return;\n        }\n\n        // scheme must begin with a letter, then consist of letters, digits, +, ., or -\n        if (!/^[a-z][a-z0-9\\+\\-\\.]*$/.test(scheme.toLowerCase()))  return;\n\n        // re-assemble the URL per section 5.3 in RFC 3986\n        out += scheme + ':';\n        if (authority && authority.length) {\n            out += '//' + authority;\n        }\n\n        out += path;\n\n        if (query && query.length) {\n            out += '?' + query;\n        }\n\n        if (fragment && fragment.length) {\n            out += '#' + fragment;\n        }\n\n        return out;\n    }\n\n    function is_http_iri(value, allowHttps) {\n        if (!is_iri(value)) {\n            return;\n        }\n\n        var splitted = [];\n        var scheme = '';\n        var authority = '';\n        var path = '';\n        var port = '';\n        var query = '';\n        var fragment = '';\n        var out = '';\n\n        // from RFC 3986\n        splitted = splitUri(value);\n        scheme = splitted[1]; \n        authority = splitted[2];\n        path = splitted[3];\n        query = splitted[4];\n        fragment = splitted[5];\n\n        if (!scheme)  return;\n\n        if(allowHttps) {\n            if (scheme.toLowerCase() != 'https') return;\n        } else {\n            if (scheme.toLowerCase() != 'http') return;\n        }\n\n        // fully-qualified URIs must have an authority section that is\n        // a valid host\n        if (!authority) {\n            return;\n        }\n\n        // enable port component\n        if (/:(\\d+)$/.test(authority)) {\n            port = authority.match(/:(\\d+)$/)[0];\n            authority = authority.replace(/:\\d+$/, '');\n        }\n\n        out += scheme + ':';\n        out += '//' + authority;\n        \n        if (port) {\n            out += port;\n        }\n        \n        out += path;\n        \n        if(query && query.length){\n            out += '?' + query;\n        }\n\n        if(fragment && fragment.length){\n            out += '#' + fragment;\n        }\n        \n        return out;\n    }\n\n    function is_https_iri(value) {\n        return is_http_iri(value, true);\n    }\n\n    function is_web_iri(value) {\n        return (is_http_iri(value) || is_https_iri(value));\n    }\n\n})(module);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","const editors = [];\nconst validators = [];\n\nmodule.exports = {\n\n    editor: function (constructor) {\n        console.log(`register editor ${constructor.name}`);\n        editors.push(constructor);\n    },\n\n    // format validator\n    validator: function (keyword, value, validator) {\n        validators.push([\"format\", value, validator]);\n    },\n\n    keywordValidator: function (datatype, property, validator) {\n        validators.push([\"keyword\", datatype, property, validator]);\n    },\n\n    getEditors: () => editors,\n    getValidators: () => validators\n};\n","const gp = require(\"gson-pointer\");\nconst mitt = require(\"mitt\");\nconst diffpatch = require(\"./utils/diffpatch\");\nconst copy = require(\"./utils/copy\");\nconst isRootPointer = require(\"./utils/isRootPointer\");\nconst dataReducer = require(\"./reducers/dataReducer\");\nconst ActionCreators = require(\"./reducers/actions\").ActionCreators;\nconst ActionTypes = require(\"./reducers/actions\").ActionTypes;\nconst getParentPointer = require(\"./utils/getParentPointer\");\nconst getTypeOf = require(\"json-schema-library/lib/getTypeOf\");\nconst getPatchesPerPointer = require(\"./utils/getPatchesPerPointer\");\n\nconst State = require(\"./State\");\nconst DEBUG = false;\n\n/**\n * @name DataService.EVENTS\n * @type {Object}\n * @property {String} BEFORE_UPDATE    - called before starting data update\n * @property {String} AFTER_UPDATE     - called after data udpate was performed\n */\nconst EVENTS = {\n    BEFORE_UPDATE: \"beforeUpdate\",\n    AFTER_UPDATE: \"afterUpdate\",\n    FINAL_UPDATE: \"finalUpdate\"\n};\n\n\n/**\n * Read and modify form data and notify observers\n *\n * @param {State} state     - current state/store of application\n * @param {Any} data        - current application data (form)\n */\nclass DataService {\n    constructor(state, data) {\n        if (!(state instanceof State)) {\n            throw new Error(\"Given state in DataService must be of instance 'State'\");\n        }\n\n        this.observers = {};\n        this.emitter = mitt();\n        this.EVENTS = EVENTS;\n\n        this.id = \"data\";\n        this.state = state;\n        this.state.register(this.id, dataReducer);\n\n        let lastUpdate = {};\n\n        // improved version - supporting multiple patches\n        this.onStateChanged = () => {\n            const current = this.state.get(this.id);\n            const patches = getPatchesPerPointer(lastUpdate, current.data.present);\n            if (patches.length === 0) {\n                DEBUG && console.info(\"DataService abort update event -- nothing changed\");\n                return;\n            }\n\n            DEBUG && console.log(\"Patch locations\", patches.map(delta => delta.pointer));\n\n            for (let i = 0, l = patches.length; i < l; i += 1) {\n                const eventLocation = patches[i].pointer;\n                const parentData = this.getDataByReference(eventLocation);\n                const parentDataType = getTypeOf(parentData);\n                this.emit(EVENTS.AFTER_UPDATE, eventLocation, { type: parentDataType, patch: patches[i].patch });\n                this.bubbleObservers(eventLocation, { type: parentDataType, patch: patches[i].patch });\n            }\n\n            this.emitter.emit(EVENTS.FINAL_UPDATE, patches);\n            lastUpdate = current.data.present;\n        };\n\n        this.state.subscribe(this.id, this.onStateChanged);\n\n        if (data !== undefined) {\n            this.set(\"#\", data);\n            this.resetUndoRedo();\n        }\n    }\n\n    resetUndoRedo() {\n        this.state.get(this.id).data.past.length = 0;\n    }\n\n    destroy() {\n        this.state.unsubscribe(this.id, this.onStateChanged);\n        this.state.unregister(this.id);\n    }\n\n    /**\n     * Get a copy of current data from the requested _json-pointer_\n     * @param {JsonPointer} [pointer=\"#\"]  - data to fetch. Defaults to _root_\n     * @returns {Any} data, associated with _pointer_\n     */\n    get(pointer = \"#\") {\n        const value = this.getDataByReference(pointer);\n        return copy(value);\n    }\n\n    getDataByReference(pointer = \"#\") {\n        // eslint-disable-next-line no-invalid-this\n        return gp.get(this.state.get(this.id).data.present, pointer);\n    }\n\n    /**\n     * Change data at the given _pointer_\n     * @param {JsonPointer}  pointer    - data location to modify\n     * @param {Any}  value              - new value at pointer\n     * @param {Boolean} [isSynched]\n     */\n    set(pointer, value, isSynched = false) {\n        if (this.isValid(pointer) === false) {\n            throw new Error(`Pointer ${pointer} does not exist in data`);\n        }\n\n        const currentValue = this.getDataByReference(pointer);\n        if (diffpatch.diff(currentValue, value) == null) {\n            DEBUG && console.info(\"DataService abort update -- value not changed\");\n            return;\n        }\n\n        this.emit(EVENTS.BEFORE_UPDATE, pointer, { action: ActionTypes.DATA_SET, isSynched });\n        this.state.dispatch(ActionCreators.setData(pointer, value, currentValue, isSynched));\n\n        if (pointer === \"#\" && isSynched === false) {\n            // do not add root changes to undo\n            this.state.get(this.id).data.past.pop();\n        }\n    }\n\n    /**\n     * Delete data at the given _pointer_\n     * @param  {JsonPointer} pointer    - data location to delete\n     */\n    delete(pointer) {\n        if (isRootPointer(pointer)) {\n            throw new Error(\"Can not remove root data via delete. Use set(\\\"#/\\\", {}) instead.\");\n        }\n\n        const key = pointer.split(\"/\").pop();\n        const parentPointer = getParentPointer(pointer);\n        const data = this.get(parentPointer);\n\n        gp.delete(data, key);\n        this.set(parentPointer, data);\n    }\n\n    undoCount() {\n        return this.state.get(this.id).data.past.length;\n    }\n\n    redoCount() {\n        return this.state.get(this.id).data.future.length;\n    }\n\n    undo() {\n        this.emit(EVENTS.BEFORE_UPDATE, \"#\", { action: ActionTypes.UNDO });\n        this.state.dispatch(ActionCreators.undo());\n    }\n\n    redo() {\n        this.emit(EVENTS.BEFORE_UPDATE, \"#\", { action: ActionTypes.REDO });\n        this.state.dispatch(ActionCreators.redo());\n    }\n\n    on(eventType, callback) {\n        if (eventType === undefined) {\n            throw new Error(\"Missing event type in DataService.on\");\n        }\n        this.emitter.on(eventType, callback);\n        return callback;\n    }\n\n    off(...args) {\n        this.emitter.off(...args);\n    }\n\n    emit(eventType, pointer, data) {\n        this.emitter.emit(eventType, createEventObject(pointer, data));\n    }\n\n    observe(pointer, callback, bubbleEvents = false) {\n        callback.bubbleEvents = bubbleEvents;\n        this.observers[pointer] = this.observers[pointer] || [];\n        this.observers[pointer].push(callback);\n        return callback;\n    }\n\n    removeObserver(pointer, callback) {\n        if (this.observers[pointer] && this.observers[pointer].length > 0) {\n            this.observers[pointer] = this.observers[pointer].filter(cb => cb !== callback);\n        }\n    }\n\n    notify(pointer, event) {\n        if (this.observers[pointer] == null || this.observers[pointer].length === 0) {\n            return;\n        }\n        const observers = this.observers[pointer];\n        for (let i = 0, l = observers.length; i < l; i += 1) {\n            if (observers[i].bubbleEvents === true || event.pointer === pointer) {\n                observers[i](event);\n            }\n        }\n    }\n\n    bubbleObservers(pointer, data) {\n        const eventObject = createEventObject(pointer, data);\n        const frags = gp.split(pointer);\n        while (frags.length) {\n            this.notify(gp.join(frags, true), eventObject);\n            frags.length -= 1;\n        }\n        this.notify(\"#\", eventObject);\n    }\n\n    isValid(pointer) {\n        return isRootPointer(pointer) || gp.get(this.getDataByReference(), pointer) !== undefined;\n    }\n}\n\n\nfunction createEventObject(pointer, data) {\n    const parentPointer = getParentPointer(pointer);\n    return Object.assign(data, {\n        pointer,\n        parentPointer\n    });\n}\n\n\nmodule.exports = DataService;\nmodule.exports.EVENTS = EVENTS;\n","const mitt = require(\"mitt\");\nconst gp = require(\"gson-pointer\");\nconst UIState = require(\"./uistate\");\nconst getId = require(\"../utils/getID\");\nconst DELAY = 25;\n\nconst emitter = mitt();\n\n\n/**\n * Register to page changes, target-pointer changes or to (re)scroll to the current pointer in view.\n *\n * The LocationService manages global pointer states and scroll position:\n *  - the \"current pointer\" tracks the currently focused editor and\n *  - the \"page pointer\" corresponds to the first property of \"current pointer\", which may be used for main page loading\n *\n * ### Motivation\n *\n * Jumping to specific editors via the navigation requires a targeting system. A page reload may occur for a called\n * anchor, and thus is scrolled into view async. In other cases the current view may be completely rebuilt which\n * resets the scroll position to top. A stored pointer (current) may be used to retrieve the scroll position.\n * named anchors fail when hash routes are present. Thus anchors are processed via javascript.\n *\n * @type {Object}\n */\nconst LocationService = {\n\n    PAGE_EVENT: \"page\",\n    TARGET_EVENT: \"target\",\n\n    // update page and target pointer\n    goto(targetPointer) {\n        const path = gp.split(targetPointer);\n\n        if (path.length === 0 || (path.length === 1 && path[0] === \"\")) {\n            return;\n        }\n\n        const nextPage = path[0];\n        const currentPage = UIState.getCurrentPage();\n        if (currentPage !== nextPage) {\n            UIState.setCurrentPage(gp.join(nextPage, true));\n        }\n        UIState.setCurrentPointer(gp.join(targetPointer, true));\n        this.focus();\n    },\n\n    // set target pointer\n    setCurrent(pointer) {\n        if (pointer !== this.getCurrent()) {\n            UIState.setCurrentPointer(pointer);\n            emitter.emit(\"focus\", pointer);\n        }\n    },\n\n    getCurrent() {\n        return UIState.getCurrentPointer();\n    },\n\n    // focus target pointer\n    focus() {\n        clearTimeout(this.timeout);\n        const pointer = UIState.getCurrentPointer();\n        const id = getId(pointer);\n        const targetElement = document.getElementById(id);\n        // console.log(`pointer ${pointer} - id ${id}`, targetElement);\n        if (targetElement == null) {\n            // console.log(`Location:focus - target ${pointer} (id ${id}) not found`);\n            return;\n        }\n        // const targetPosition = targetElement.getBoundingClientRect().top\n        this.timeout = setTimeout(() => {\n            // try scrolling to header-row in container (low height) to have a more robust scroll target position\n            let scrollTarget = targetElement.querySelector(\".editron-container > .editron-container__header\");\n            scrollTarget = (scrollTarget == null || scrollTarget.offsetParent === null) ? targetElement : scrollTarget;\n            scrollTarget.scrollIntoView();\n\n            // @todo only fire focus event?\n            targetElement.dispatchEvent(new Event(\"focus\"));\n            targetElement.focus && targetElement.focus();\n\n        }, DELAY);\n    },\n\n    blur(pointer) {\n        if (UIState.getCurrentPointer() !== pointer) {\n            return;\n        }\n        UIState.setCurrentPointer(\"\");\n        emitter.emit(\"blur\", pointer);\n    },\n\n    on: (...args) => emitter.on(...args),\n    off: (...args) => emitter.off(...args)\n};\n\nUIState.on(UIState.EVENTS.CURRENT_PAGE_EVENT, pointer => emitter.emit(LocationService.PAGE_EVENT, pointer));\nUIState.on(UIState.EVENTS.CURRENT_POINTER_EVENT, pointer => emitter.emit(LocationService.TARGET_EVENT, pointer));\n\n\nmodule.exports = LocationService;\n","/* eslint no-use-before-define: 0 */\nconst m = require(\"mithril\");\nconst Overlay = require(\"../components/overlay\");\nconst createElement = require(\"../utils/createElement\");\nconst UIState = require(\"./uistate\");\n\n\nUIState.on(UIState.EVENTS.OVERLAY_EVENT, (value = {}) => OverlayService.onChange(value.element, value.options));\n\n\n/**\n * Opens an overlay with a DOM-Node as contents\n * @type {Object}\n */\nconst OverlayService = {\n\n    /**\n     * Opens the overlay, showing the given `container` as conten\n     *\n     * Options\n     *  {Boolean} ok            - display `ok`, instead of `abort`\n     *  {Boolean} fullscreen    - fullscreen size of overlay, regardless of content\n     *  {Function} onAbort      - called when Overlay is closed via ok/abort\n     *  {Function} onSave       - called when Overlay is closed via save\n     *\n     * @param  {HTMLElement} container\n     * @param  {Obejct} options\n     */\n    open(container, options) {\n        UIState.setOverlay({\n            element: container,\n            options: Object.assign({\n                ok: false,\n                save: true,\n                fullscreen: false,\n                onAbort: Function.prototype,\n                onSave: Function.prototype\n            }, options)\n        });\n    },\n\n    close() {\n        UIState.setOverlay();\n        // must destroy component for reuse\n        m.render(this.getElement(), m(\"i\"));\n    },\n\n    onChange(container, options) {\n        if (container == null) {\n            const $el = this.getElement();\n            $el.parentNode && $el.parentNode.removeChild($el);\n            return;\n        }\n\n        const $el = this.getElement();\n        container.classList.add(\"overlay__item\");\n        m.render($el,\n            m(Overlay, {\n                container,\n                fullscreen: options.fullscreen,\n                showSave: options.save,\n                titleAbort: options.ok ? \"OK\" : \"Abbrechen\",\n                onSave: () => {\n                    options.onSave();\n                    this.close();\n                },\n                onAbort: () => this.close(), // calls onremove -> onAbort\n                onremove: () => options.onAbort()\n            })\n        );\n\n        document.body.appendChild($el);\n    },\n\n    getElement() {\n        if (this.$element == null) {\n            this.$element = createElement(\".ui-overlay\");\n            this.$element.addEventListener(\"click\", (e) => {\n                // close popup if clicked on \"background\"\n                if (e.target === this.$element) {\n                    this.close();\n                }\n            });\n        }\n        return this.$element;\n    }\n};\n\n\nmodule.exports = OverlayService;\n","const Core = require(\"json-schema-library\").cores.JsonEditor;\nconst copy = require(\"./utils/copy\");\nconst jsl = require(\"json-schema-library\");\nconst getChildSchemaSelection = require(\"json-schema-library\").getChildSchemaSelection;\n\n\n/**\n * Manages json-schema interactions and adds caching of reoccuring json-schema requests\n *\n * @param {Object} schema       - json-schema\n * @param {Object} [data={}]    - data corresponding to json-schema\n * @param {Core} [core={}]      - instance of json-schema-library Core\n */\nclass SchemaService {\n\n    constructor(schema = {}, data = {}, core = new Core()) {\n        this.core = core;\n        this.setSchema(schema);\n        this.setData(data);\n    }\n\n    /**\n     * Update data by any missing (default) values specified in the json-schema\n     * @param {Object} [data=currentData]   - update given data or use the internal stored data (via `setData(data)`)\n     * @param {Object} [schema]             - specific json schema, or the internal store schema (via `setSchema(root)`)\n     * @return {Any} json data with valid default data values\n     */\n    addDefaultData(data = this.data, schema = this.schema) {\n        return this.core.getTemplate(data, schema);\n    }\n\n    /**\n     * Create the template data object based on the json-schema, which fullfills the schemas structure as much as\n     * possible\n     * @param  {Object} schema\n     * @return {Any} data corresponding to json-schema\n     */\n    getTemplate(schema) {\n        return this.core.getTemplate(undefined, schema);\n    }\n\n    /**\n     * @param  {JsonPointer} pointer\n     * @param  {String|Number} property\n     * @return {Array} list of valid items to insert at the given position\n     */\n    getChildSchemaSelection(pointer, property) {\n        const parentSchema = this.get(pointer);\n        return getChildSchemaSelection(this.core, property, parentSchema);\n    }\n\n    /**\n     * Sets the root data. This is optional and used within internal functions to support optional _data_-parameters.\n     * On every change in data, call this method with that latest state `schemaService.setData(latestData)`;\n     *\n     * @param {Any} data    - latest root data corresponding to stored json-schema\n     */\n    setData(data) {\n        this.data = this.addDefaultData(data);\n        this.resetCache();\n    }\n\n    /**\n     * Set or change the application schema\n     * @param {Object} schema\n     */\n    setSchema(schema) {\n        this.core.setSchema(schema);\n        this.schema = this.core.getSchema();\n        this.resetCache();\n    }\n\n    resetCache() {\n        this.cache = {};\n    }\n\n    /**\n     * Return the json-schema for the requested pointer. Resolved the pointer on the stored schema by the accompanied\n     * json-data, which is required to resolve optional json-schema values.\n     *\n     * @param  {JsonPointer} pointer    - pointer in data\n     * @param  {Any} [data]             - root data, corresponding to json-schema. This is optional, when the root-data\n     *                                       is up-to-date (via setData)\n     * @return {Object} json-schema for the requested pointer\n     */\n    get(pointer, data) {\n        if (data) {\n            const result = jsl.getSchema(this.core, pointer, data, this.schema);\n            return copy(result);\n        }\n\n        if (this.cache[pointer] === undefined) {\n            const result = jsl.getSchema(this.core, pointer, this.data, this.schema);\n            if (result.variableSchema === true) {\n                // @special case: do not cache dynamic schema object (oneOf)\n                return result;\n            }\n            this.cache[pointer] = copy(result);\n        }\n\n        return this.cache[pointer];\n    }\n\n    destroy() {\n        this.setData(null);\n        this.setSchema(null);\n    }\n}\n\n\nmodule.exports = SchemaService;\n","/**\n * Simple session service to store and retrieve user-specific data\n * @type {Object}\n */\nmodule.exports = {\n    get(key, defaultValue) {\n        if (window.localStorage == null) {\n            return defaultValue;\n        }\n\n        if (localStorage.getItem(key) == null) {\n            this.set(key, defaultValue);\n        }\n        try {\n            return JSON.parse(localStorage.getItem(key));\n        } catch(error) {\n            return defaultValue;\n        }\n\n    },\n    set(key, value) {\n        if (window.localStorage) {\n            localStorage.setItem(key, JSON.stringify(value));\n        }\n    },\n    toggle(key) {\n        const value = !this.get(key, false);\n        this.set(key, value);\n        return value;\n    }\n};\n","const redux = require(\"redux\");\nconst mitt = require(\"mitt\");\nconst FLAG_CHANGED = \"hasChanged\";\n\n\nclass State {\n    constructor() {\n        this.FLAG_CHANGED = FLAG_CHANGED;\n\n        this.reducers = {\n            action: (state, action) => action\n        };\n        this.emitter = mitt();\n        this.store = redux.createStore(() => {}); // eslint-disable-line @typescript-eslint/no-empty-function\n        this.store.subscribe(() => this.onChange(this.store.getState()));\n    }\n\n    onChange(currentState) {\n        Object\n            .keys(currentState)\n            .forEach(id => {\n                const subState = currentState[id];\n                if (subState[FLAG_CHANGED] != null && subState[FLAG_CHANGED] !== false) {\n                    this.emitter.emit(id, subState);\n                }\n            });\n    }\n\n    // eslint-disable-next-line\n    // http://stackoverflow.com/questions/32968016/how-to-dynamically-load-reducers-for-code-splitting-in-a-redux-application\n    register(id, reducer) {\n        if (this.reducers[id]) {\n            throw new Error(`A reducer with id ${id} is already registered`);\n        }\n        this.reducers[id] = reducer;\n        this.store.replaceReducer(redux.combineReducers(this.reducers));\n    }\n\n    unregister(id) {\n        // @todo either remove reducers and data or make them reusable (per application id)\n        // delete this.reducers[id];\n        // this.store.replaceReducer(redux.combineReducers(this.reducers));\n        const currentState = this.store.getState();\n        delete currentState[id];\n    }\n\n    get(id) {\n        const currentState = this.store.getState();\n        return id == null ? currentState : currentState[id];\n    }\n\n    dispatch(...args) {\n        return this.store.dispatch(...args);\n    }\n\n    /**\n     * Subscribe to change (all) events\n     * @param  {[type]}   id       [description]\n     * @param  {Function} callback [description]\n     */\n    subscribe(id, callback) {\n        if (typeof id !== \"string\" || typeof callback !== \"function\") {\n            throw new Error(`Invalid arguments for state.subscribe ${arguments}`);\n        }\n\n        const state = this.store.getState();\n        if (state[id] && state[id][FLAG_CHANGED] != null) {\n            this.emitter.on(id, callback);\n        } else {\n            throw new Error(`Could not subscribe to state ${id}. Property ${FLAG_CHANGED} not available`);\n        }\n    }\n\n    unsubscribe(id, callback) {\n        if (typeof id !== \"string\" || typeof callback !== \"function\") {\n            throw new Error(`Invalid arguments for state.unsubscribe ${arguments}`);\n        }\n\n        this.emitter.off(id, callback);\n    }\n}\n\nState.FLAG_CHANGED = FLAG_CHANGED;\n\n\nmodule.exports = State;\n","const mitt = require(\"mitt\");\nconst Core = require(\"json-schema-library\").cores.JsonEditor;\nconst State = require(\"./State\");\nconst ActionCreators = require(\"./reducers/actions\").ActionCreators;\nconst errorReducer = require(\"./reducers/errorReducer\");\nconst Validation = require(\"./utils/Validation\");\nconst BubblingCollectionObservable = require(\"./utils/BubblingCollectionObservable\");\n\n\nconst EVENTS = {\n    BEFORE_VALIDATION: \"beforeValidation\",\n    AFTER_VALIDATION: \"afterValidation\",\n    ON_ERROR: \"onError\"\n};\n\n\n/**\n * @class  ValidationService\n */\nclass ValidationService {\n\n    constructor(state, schema = {}, core = new Core()) {\n        if (!(state instanceof State)) {\n            throw new Error(\"Given state in ValidationService must be of instance 'State'\");\n        }\n\n        this.core = core;\n        this.set(schema);\n        this.observer = new BubblingCollectionObservable();\n        this.emitter = mitt();\n        this.id = \"errors\";\n        this.state = state;\n        this.state.register(this.id, errorReducer);\n        this.setErrorHandler(error => error);\n        this.EVENTS = EVENTS;\n    }\n\n    setErrorHandler(callback) {\n        this.errorHandler = callback;\n    }\n\n    /**\n     * Starts the validation, executing callback handlers and emitters on the go\n     *\n     * @param  {Any} data               - data to validate\n     * @param  {JsonPointer} [pointer]  - optional location. Per default all data is validated\n     * @return {Promise} promise, resolving with list of errors when all async validations are performed\n     */\n    validate(data, pointer = \"#\") {\n        if (this.currentValidation) {\n            this.currentValidation.cancel();\n        }\n\n        this.emit(EVENTS.BEFORE_VALIDATION);\n\n        // @feature selective-validation\n        this.observer.clearEvents(pointer);\n        // reset stored list of events\n        let remainingErrors = [];\n        if (pointer !== \"#\") {\n            // the following filtering is a duplicate from BubblingCollectionObservable.clearEvents\n            remainingErrors = this.state.get(this.id)\n                .filter(e => e.data.pointer == null || e.data.pointer.startsWith(pointer) === false);\n        }\n\n        this.state.dispatch(ActionCreators.setErrors(remainingErrors));\n        this.currentValidation = new Validation(data, pointer, this.errorHandler);\n        return this.currentValidation.start(\n            this.core,\n            (newError, currentErrors) => {\n                // @feature selective-validation\n                const completeListOfErrors = remainingErrors.concat(currentErrors);\n\n                this.state.dispatch(ActionCreators.setErrors(completeListOfErrors));\n                this.observer.notify(newError.data.pointer, newError);\n                this.emit(EVENTS.ON_ERROR, newError);\n            },\n            validationErrors => {\n                // @feature selective-validation\n                const completeListOfErrors = remainingErrors.concat(validationErrors);\n\n                this.state.dispatch(ActionCreators.setErrors(completeListOfErrors));\n                this.emit(EVENTS.AFTER_VALIDATION, completeListOfErrors);\n                this.currentValidation = null;\n            }\n        );\n    }\n\n    set(schema) {\n        this.core.setSchema(schema);\n        this.schema = this.core.getSchema();\n    }\n\n    get() {\n        return this.schema;\n    }\n\n    on(eventType, callback) {\n        if (eventType === undefined) {\n            throw new Error(\"Missing event type in ValidationService.on\");\n        }\n        this.emitter.on(eventType, callback);\n        return callback;\n    }\n\n    off(...args) {\n        this.emitter && this.emitter.off(...args);\n    }\n\n    emit(eventType, event = {}) {\n        this.emitter.emit(eventType, event);\n    }\n\n    observe(pointer, callback, bubbledEvents = false) {\n        this.observer.observe(pointer, callback, bubbledEvents);\n        return callback;\n    }\n\n    removeObserver(pointer, callback) {\n        this.observer.removeObserver(pointer, callback);\n    }\n\n    notify(pointer, event = {}) {\n        this.observer.notify(pointer, event);\n    }\n\n    getErrorsAndWarnings(pointer = undefined, withChildErrors = false) {\n        const errors = this.state.get(this.id) || [];\n        if (pointer == null) {\n            return errors;\n        }\n        // filter by pointer\n        const selectError = new RegExp(`^${pointer}${withChildErrors ? \"\" : \"$\"}`);\n        return errors.filter(error => selectError.test(error.data.pointer));\n    }\n\n    getErrors(pointer = undefined, withChildErrors = false) {\n        return this.getErrorsAndWarnings(pointer, withChildErrors).filter(error => error.severity !== \"warning\");\n    }\n\n    getWarnings(pointer = undefined, withChildWarnings = false) {\n        return this.getErrorsAndWarnings(pointer, withChildWarnings).filter(error => error.severity === \"warning\");\n    }\n\n    destroy() {\n        this.set(null);\n        this.emitter = null;\n        this.observer = null;\n        this.state.unregister(this.id, errorReducer);\n    }\n}\n\n\nmodule.exports = ValidationService;\nmodule.exports.EVENTS = EVENTS;\n","module.exports = {\n    LocationService: require(\"./LocationService\"),\n    OverlayService: require(\"./OverlayService\"),\n    SessionService: require(\"./SessionService\"),\n    UIState: require(\"./uistate\")\n};\n","/* eslint object-property-newline: 0 */\nconst UndoActionCreators = require(\"redux-undo\").ActionCreators;\nconst UndoActionTypes = require(\"redux-undo\").ActionTypes;\n\nconst ActionTypes = {\n    // data\n    DATA_SET: \"DATA_SET\",\n    UNDO: UndoActionTypes.UNDO,\n    REDO: UndoActionTypes.REDO,\n    // validation\n    ERRORS_SET: \"ERRORS_SET\"\n};\n\nconst ActionCreators = {\n    setData(pointer, newValue, prevValue, isSynched = false) {\n        return { type: ActionTypes.DATA_SET, pointer, value: newValue, prevValue, isSynched };\n    },\n    undo() {\n        return UndoActionCreators.undo();\n    },\n    redo() {\n        return UndoActionCreators.redo();\n    },\n    setErrors(errors = []) {\n        return { type: ActionTypes.ERRORS_SET, errors };\n    }\n};\n\n\nmodule.exports = {\n    ActionTypes,\n    ActionCreators\n};\n","const undoable = require(\"redux-undo\").default;\n\n/* eslint no-case-declarations: 0 */\nconst gp = require(\"gson-pointer\");\nconst copy = require(\"../utils/copy\");\nconst isRootPointer = require(\"../utils/isRootPointer\");\nconst ActionTypes = require(\"./actions\").ActionTypes;\nconst redux = require(\"redux\");\nconst ensureItemIDs = require(\"../utils/ensureItemIDs\");\n\n\nconst actions = [ActionTypes.DATA_SET, ActionTypes.UNDO, ActionTypes.REDO];\nconst defaultState = {\n    hasChanged: false,\n    action: null,\n    data: null\n};\n\nfunction dataReducer(state = defaultState, action) {\n    switch (action.type) {\n        case ActionTypes.DATA_SET:\n            if (isRootPointer(action.pointer)) {\n                return ensureItemIDs(copy(action.value));\n            }\n            const newState = copy(state);\n            gp.set(newState, action.pointer, copy(action.value));\n            return ensureItemIDs(newState);\n\n        default:\n            return state;\n    }\n}\n\nconst config = {\n    debug: false,\n    filter: (action) => actions.includes(action.type)\n};\n\n\nmodule.exports = redux.combineReducers({\n    hasChanged: (state, action) => actions.includes(action.type),\n    data: undoable(dataReducer, config)\n});\n","const ActionTypes = require(\"./actions\").ActionTypes;\n\n\nmodule.exports = function (state = [], action) {\n    return action.type === ActionTypes.ERRORS_SET ? action.errors : state;\n};\n","const ActionTypes = {\n    UI_PAGE_SET: \"UI_PAGE_SET\",\n    UI_OVERLAY_SET: \"UI_OVERLAY_SET\",\n    UI_CURRENT_SET: \"UI_CURRENT_SET\"\n};\n\nconst ActionCreators = {\n    setCurrentPage(pointer = \"#\") {\n        return {\n            type: ActionTypes.UI_PAGE_SET,\n            value: pointer\n        };\n    },\n    setCurrentPointer(pointer = \"#\") {\n        return {\n            type: ActionTypes.UI_CURRENT_SET,\n            value: pointer\n        };\n    },\n    setOverlay(content = false) {\n        return {\n            type: ActionTypes.UI_OVERLAY_SET,\n            value: content\n        };\n    }\n};\n\n\nmodule.exports = {\n    ActionTypes,\n    ActionCreators\n};\n","const mitt = require(\"mitt\");\nconst State = require(\"../State\");\nconst ActionCreators = require(\"./actions\").ActionCreators;\nconst uiReducer = require(\"./uiReducer\");\n\n\nconst EVENTS = {\n    OVERLAY_EVENT: \"overlay\",\n    CURRENT_POINTER_EVENT: \"current\",\n    CURRENT_PAGE_EVENT: \"page\"\n};\n\n\nclass UIState {\n\n    constructor() {\n        this.id = \"ui\";\n        this.state = new State();\n        this.emitter = mitt();\n        this.state.register(this.id, uiReducer);\n        // @todo: subscribe to state-changes and diff current state?\n    }\n\n    get(property) {\n        return this.state.get(this.id).ui[property];\n    }\n\n    getCurrentPointer() {\n        return this.get(\"currentPointer\");\n    }\n\n    getCurrentPage() {\n        return this.get(\"currentPage\");\n    }\n\n    setOverlay(content = false) {\n        const currentContent = this.get(\"overlay\");\n        if (currentContent !== content) {\n            this.state.dispatch(ActionCreators.setOverlay(content));\n            this.emitter.emit(EVENTS.OVERLAY_EVENT, this.get(\"overlay\"));\n        }\n    }\n\n    on(...args) { this.emitter.on(...args); }\n    off(...args) { this.emitter.off(...args); }\n\n    setCurrentPage(pointer) {\n        const currentPage = this.get(\"currentPage\");\n        if (currentPage !== pointer) {\n            this.state.dispatch(ActionCreators.setCurrentPage(pointer));\n            this.emitter.emit(EVENTS.CURRENT_PAGE_EVENT, this.get(\"currentPage\"));\n        }\n    }\n\n    setCurrentPointer(pointer) {\n        const currentPointer = this.get(\"currentPointer\");\n        if (currentPointer !== pointer) {\n            this.state.dispatch(ActionCreators.setCurrentPointer(pointer));\n            this.emitter.emit(EVENTS.CURRENT_POINTER_EVENT, this.get(\"currentPointer\"));\n        }\n    }\n}\n\nconst Singleton = new UIState();\nSingleton.UIStateContructor = UIState;\nSingleton.EVENTS = EVENTS;\n\nmodule.exports = Singleton;\n","const redux = require(\"redux\");\nconst ActionTypes = require(\"./actions\").ActionTypes;\n\nconst defaultState = {\n    hasChanged: false,\n    currentPage: \"#\",\n    currentPointer: \"#\",\n    overlay: false\n};\n\nfunction uiReducer(state = defaultState, action) {\n    switch (action.type) {\n        case ActionTypes.UI_PAGE_SET:\n            state = Object.assign({}, state);\n            state.currentPage = action.value;\n            return state;\n        case ActionTypes.UI_CURRENT_SET:\n            state = Object.assign({}, state);\n            state.currentPointer = action.value;\n            return state;\n        case ActionTypes.UI_OVERLAY_SET:\n            state = Object.assign({}, state);\n            state.overlay = action.value;\n            return state;\n        default:\n            return state;\n    }\n}\n\nfunction hasChanged(state = false, action) { // eslint-disable-line @typescript-eslint/no-unused-vars\n    return ActionTypes[action.type] == null ? false : action.type;\n}\n\n\nmodule.exports = redux.combineReducers({\n    hasChanged,\n    ui: uiReducer\n});\n","/* eslint arrow-parens: 0 */\nconst gp = require(\"gson-pointer\");\n\n\n/**\n * > Internal helper, mainly used in [ValidationService](#validationservice) to support the weird notification behaviour\n * of error-events.\n *\n *\n * ### Motivation\n *\n * Error-events in the validation process occur per error, because we want them to pass as quickly as\n * possible (Asynchronous errors may take a long time and available instant feedback are postponed). In the previous\n * version two events were required in every editor\n *\n * 1. observing \"start validation\"-events to reset the errors and\n * 2. observing \"add error\"-events to build up the asynchronous incoming error-list\n *\n * This is tedious and brings some overhead using the api. Thus, the observe \"set error\"-event, introduced hereby\n * will collect the errors and repeatedly call the observer with the current, complete list of errors\n *\n * 1. for the observable and\n * 2. any observable that includes listening to changes of child-editors\n *\n *\n * ### Usage as observer\n *\n * An observer will receive an up-to-date version of all events occuring at the location\n *\n * ```js\n *  // init\n *  observable.observe(\"#/pointer/to/my/location\", (errors) => {\n *      // list of current errors, continously updated\n *      this.errors = errors;\n *      this.processErrors(); // or some such\n *  });\n *  ```\n *\n * or if you are interested in events occuring further down in data\n *\n * ```js\n *  // init\n *  observable.observe(\"#/pointer/to/my/location\", (errors) => {\n *      // list of current errors at location from pointer and further down within the data structure e.g.\n *      // \"#/pointer/to/my/location\", \"#/pointer/to/my/location/xy\", \"#/pointer/to/my/location/az/er\", etc\n *      continously updated\n *      this.errors = errors;\n *      this.processErrors(); // or some such\n *  }, true); // <- bubble events\n *  ```\n * and remove the event listener with\n *\n * ```js\n *  observable.observe(\"#/pointer/to/my/location\", myRegisteredCallbackFunction);\n * ```\n *\n * ### Usage as observable\n *\n * ```js\n *  // init\n *  this.observers = new BubblingCollectionObservable();\n *  // notify session\n *  this.observers.notify(\"#/pointer/to/location\", { event });\n *  // another notification\n *  this.observers.notify(\"#/pointer/to/any-location\", { event2 });\n *  // same target or if listening with the option `receiveChildEvents`, will receive\n *  [{ event }, { event2 }] // observable event\n *  // and reset session by\n *  this.observers.reset(); // any observers will be reset with an events receiving an empty list\n *  [] // observable event\n *  // sending another notification will notify the target with a new list of events\n *  this.observers.notify(\"#/pointer/to/any-location\", { event3 });\n *  [{ event3 }] // observable event\n * ```\n *\n *\n */\nclass BubblingCollectionObservable {\n    constructor() {\n        this.observers = {};\n        this.eventCollection = {};\n        this.bubbleCollection = {};\n    }\n\n    /**\n     * Observe events on the _pointer_ (`#/observe/location`). May also observe\n     * events of _child-pointers_ (`#/observe/location/child/item`) with the\n     * option `receiveChildEvents` set to `true`\n     *\n     * @param  {JsonPointer} pointer        - location to observe\n     * @param  {Function} cb                - observer\n     * @param  {Boolean}  [receiveChildEvents=false]\n     * @return {Function} callback cb\n     */\n    observe(pointer, cb, receiveChildEvents = false) {\n        this.observers[pointer] = this.observers[pointer] || [];\n        if (this.observers[pointer].includes(cb) === false) {\n            cb.receiveChildEvents = receiveChildEvents;\n            this.observers[pointer].push(cb);\n        }\n        return cb;\n    }\n\n    /**\n     * Remove an observer\n     * @param  {JsonPointer} pointer\n     * @param  {Function} cb\n     */\n    removeObserver(pointer, cb) {\n        if (this.observers[pointer] == null) {\n            return;\n        }\n        const index = this.observers[pointer].indexOf(cb);\n        if (index !== -1) {\n            this.observers[pointer].splice(index, 1);\n        }\n    }\n\n    /**\n     * @todo this might become obsolete by clearEvents\n     *\n     * Reset all collections from the previous events, starting with a list of\n     * empty events. Any previously called observers will be called again with\n     * an empty event-list `[]`.\n     */\n    reset() {\n        // notify observers of reset by sending an empty list of events\n        const map = {};\n        Object.keys(this.eventCollection).concat(Object.keys(this.bubbleCollection))\n            // .filter(pointer => pointer.includes(sourcePointer))\n            .forEach(p => { map[p] = true; });\n        this.eventCollection = {};\n        this.bubbleCollection = {};\n        Object.keys(map).forEach(pointer => this._notify(pointer, pointer, []));\n        this.eventCollection = {};\n        this.bubbleCollection = {};\n    }\n\n    /**\n     * Clears all events at a given pointer and notifies all listeners with\n     * their changed list of events\n     *\n     * @param  {JsonPointer} pointer\n     * @param  {boolean} [clearChildren=true]    if false, children of `pointer` will not be reset\n     */\n    clearEvents(pointer, clearChildren = true) {\n        let changed = false;\n\n        if (clearChildren) {\n            Object.keys(this.eventCollection).forEach(target => {\n                if (!(target.startsWith(pointer) && target !== pointer)) {\n                    return;\n                }\n                if (this.eventCollection[target].length > 0) {\n                    changed = true;\n                    this.eventCollection[target].length = 0;\n                    this.bubbleCollection[target] = {}; // reset bubble collection\n                    this._notify(target, target, this.eventCollection[target]);\n                }\n            });\n        }\n\n        const collection = this.eventCollection[pointer];\n        if ((Array.isArray(collection) && collection.length > 0)) {\n            changed = true;\n            collection.length = 0;\n            this.bubbleCollection[pointer] = {}; // reset bubble collection\n        }\n\n        if (changed) {\n            // clear target and notify parents\n            this._notifyAll(pointer, collection);\n        }\n    }\n\n    /**\n     * Notifies all listeners of `pointer` (bubble notification)\n     *\n     * @param  {JsonPointer} pointer\n     * @param  {Array} eventCollection    - array of events at target `pointer`\n     */\n    _notifyAll(pointer, eventCollection) {\n        const frags = gp.split(pointer);\n        while (frags.length > 0) {\n            const p = gp.join(frags, true);\n            this._notify(p, pointer, eventCollection);\n            frags.pop();\n        }\n        this._notify(\"#\", pointer, eventCollection);\n    }\n\n    /**\n     * Notify observers at _pointer_. Note that the received event is a\n     * aggregated event-list []. For a first call the received event will look\n     * like `[{ event }]` and the next event will be `[{ event }, { newEvent }]`,\n     * etc, until `reset()` ist called by the observable.\n     *\n     * @param  {JsonPointer} pointer\n     * @param  {Any} event\n     */\n    notify(pointer, event) {\n        this.eventCollection[pointer] = this.eventCollection[pointer] || [];\n        this.eventCollection[pointer].push(event);\n\n        this._notifyAll(pointer, this.eventCollection[pointer]);\n    }\n\n    _notify(observerPointer, sourcePointer, event) {\n        if (this.observers[observerPointer] == null) {\n            return;\n        }\n        this.observers[observerPointer].forEach(cb => {\n            if (cb.receiveChildEvents === false && observerPointer === sourcePointer) {\n                cb(event);\n                return;\n            }\n            if (cb.receiveChildEvents === false && observerPointer !== sourcePointer) {\n                return;\n            }\n\n            this.bubbleCollection[observerPointer] = this.bubbleCollection[observerPointer] || {};\n            const map = this.bubbleCollection[observerPointer];\n            map[sourcePointer] = event;\n            const events = Object.keys(map).reduce((res, next) => res.concat(map[next]), []);\n            cb(events);\n        });\n    }\n}\n\n\nmodule.exports = BubblingCollectionObservable;\n","const gp = require(\"gson-pointer\");\nconst validateAsync = require(\"json-schema-library/lib/validateAsync\");\n\n\n/**\n * @class  Validation\n *\n * @param {Object|Array} data       - application json data\n * @param {Object} schema           - json-schema describing data\n * @param {Function} [errorHandler] - optional callback to modify errors\n */\nclass Validation {\n\n    constructor(data, pointer, errorHandler) {\n        this.errors = [];\n        this.data = data;\n        this.pointer = pointer;\n        this.canceled = false;\n        this.errorHandler = errorHandler;\n    }\n\n    start(core, onErrorCb, onDoneCb) {\n        this.cbDone = onDoneCb;\n        this.cbError = onErrorCb;\n\n        // @feature selective-validation\n        const pointer = this.pointer;\n        let data = this.data;\n        let schema = core.getSchema();\n        if (pointer !== \"#\") {\n            schema = core.getSchema(pointer, data);\n            data = gp.get(data, pointer);\n        }\n\n        // console.log(\"validate\", pointer, data, JSON.stringify(schema, null, 2));\n\n        // validateAsync(core, value, { schema = core.rootSchema, pointer = \"#\", onError })\n        return validateAsync(core, data, { schema, pointer, onError: this.onError.bind(this) })\n            .then(errors => {\n                this.onDone(errors);\n                return errors;\n            })\n            .catch(error => this.onFail(error));\n    }\n\n    onError(validationError) {\n        if (this.canceled) {\n            return;\n        }\n        validationError = this.errorHandler(validationError);\n        this.errors.push(validationError);\n        this.cbError(validationError, this.errors);\n    }\n\n    onDone(validationErrors) {\n        if (this.canceled) {\n            return;\n        }\n        if (this.errors.length !== validationErrors.length) {\n            console.error(\"Inconsistent validation errors. Not all errors were emitted by validateAsync()\");\n        }\n        this.cbDone(this.errors);\n    }\n\n    onFail(error) {\n        if (this.canceled) {\n            return;\n        }\n\n        console.error(\"Validation failed\", error);\n        this.cbDone(this.errors);\n    }\n\n    cancel() {\n        this.canceled = true;\n    }\n}\n\n\nmodule.exports = Validation;\n","module.exports = function copy(data) {\n    if (data === undefined || (Array.isArray(data) === false && typeof data !== \"object\")) {\n        return data;\n    }\n    return JSON.parse(JSON.stringify(data));\n};\n","const DiffPatcher = require(\"jsondiffpatch\").DiffPatcher;\nconst diffMatchPatch = require(\"diff_match_patch\");\nconst options = {\n    // used to match objects when diffing arrays, by default only === operator is used\n    // this function is used only to when objects are not equal by ref\n    objectHash: obj => obj._id,\n    arrays: {\n        // default true, detect items moved inside the array (otherwise they will be registered as remove+add)\n        detectMove: true,\n        // default false, the value of items moved is not included in deltas\n        includeValueOnMove: false\n    }\n};\n\ntry {\n    // required in browser environments\n    window[\"diff_match_patch\"] = diffMatchPatch;\n} catch (e) {\n    // loaded by default in nodejs\n}\n\nconst diffpatch = new DiffPatcher(options); // jsondiffpatch.create(options);\ndiffpatch.options = options;\n\n\nmodule.exports = diffpatch;\n","const getTypeOf = require(\"json-schema-library/lib/getTypeOf\");\nconst ID_PROPERTY = \"_id\";\n\n\nfunction generateId(index) {\n    return `${index}${Math.random()}${Date.now()}`;\n}\n\n\nfunction addMissingItemIDs(list) {\n    list.forEach((item, index) => {\n        if (item[ID_PROPERTY] == null) {\n            const type = getTypeOf(item);\n            if (type === \"object\" || type === \"array\") {\n                item[ID_PROPERTY] = ensureItemIDs.config.generateId(index);\n            }\n        }\n    });\n}\n\n\nfunction ensureItemIDs(data) {\n    const dataType = getTypeOf(data);\n    if (dataType === \"array\") {\n        ensureItemIDs.config.addMissingItemIDs(data);\n        data.forEach((item) => ensureItemIDs(item));\n\n    } else if (dataType === \"object\") {\n        Object.keys(data).forEach((key) => ensureItemIDs(data[key]));\n    }\n\n    return data;\n}\n\n\nensureItemIDs.config = {\n    ID_PROPERTY,\n    addMissingItemIDs,\n    generateId\n};\n\n\nmodule.exports = ensureItemIDs;\n","const gp = require(\"gson-pointer\");\n\nmodule.exports = (pointer) => {\n    const list = gp.split(pointer);\n    list.pop();\n    return gp.join(list, pointer[0] === \"#\");\n};\n","const diffpatch = require(\"./diffpatch\");\nconst gp = require(\"gson-pointer\");\n\nfunction sortByPointer(a, b) {\n    if (a.pointer < b.pointer) {\n        return -1;\n    } else if (a.pointer > b.pointer) {\n        return 1;\n    }\n    return 0;\n}\n\n\nfunction findPatches(pointer, diff, result = []) {\n    // for a diff: { a: { '0': [ 'modifiedString' ], _t: 'a', _0: [ 'string', 0, 0 ] } }\n    // return diff[a] as patch and \".../a\" as pointer\n\n    Object.keys(diff).forEach((key) => {\n        if (key === \"_t\") {\n            return;\n        }\n\n        if (Array.isArray(diff[key])) {\n            const entry = {\n                pointer: `${pointer}/${key}`,\n                patch: diff[key]\n            };\n\n            const propertyAdded = diff[key].length === 1;\n            const propertyRemoved = diff[key][2] === 0;\n\n            if (diff._t === \"a\") {\n                entry.isArrayItem = true;\n            } else if (propertyAdded || propertyRemoved) {\n                entry.changedKey = true;\n            }\n\n            result.push(entry);\n\n        } else {\n            findPatches(`${pointer}/${key}`, diff[key], result);\n        }\n    });\n\n    return result;\n}\n\n\n/*\n    Between two objects, returns the json-pointer of the edit\n\n    - for now, returns common pointer of multiple changes (if any)\n    - returns parent pointer for any array-items or object-properties that are added or removed. this ensures a\n        container, array or object, receives a notification of changed children.\n*/\nmodule.exports = function getPatchesPerPointer(previousValue, newValue) {\n    const diff = diffpatch.diff(previousValue, newValue);\n    if (diff == null) {\n        return [];\n    }\n\n    const patches = findPatches(\"#\", diff);\n    // merge all item patches by their parent-pointer\n    const map = {};\n    // @todo this should be directly resolved in 'findPatches'\n    patches.forEach((entry) => {\n        if (entry.isArrayItem) {\n            const parent = gp.join(entry.pointer, \"..\");\n            const key = entry.pointer.replace(`${parent}/`, \"\");\n            map[parent] = map[parent] || { _t: \"a\" };\n            map[parent][key] = entry.patch;\n        } else if (entry.changedKey) {\n            const parent = gp.join(entry.pointer, \"..\");\n            const key = entry.pointer.replace(`${parent}/`, \"\");\n            map[parent] = map[parent] || {};\n            map[parent][key] = entry.patch;\n        } else {\n            map[entry.pointer] = entry.patch;\n        }\n    });\n\n    return Object.keys(map)\n        .map((pointer) => ({ pointer, patch: map[pointer] }))\n        .sort(sortByPointer);\n};\n","module.exports = require(\"gson-pointer/lib/isRoot\");\n","const { eachSchema } = require(\"json-schema-library\");\nconst gp = require(\"gson-pointer\");\nconst UI_PROPERTY = \"editron:ui\";\nconst populated = require(\"./populated\");\n\n\nfunction isPointer(string) {\n    return typeof string === \"string\" && /^(#?\\/.+|\\.?\\.\\/.+)/.test(string);\n}\n\n\n// returns a list of {title, pointer} from root-node to pointer, excluding root node\nfunction getBreadcrumps(pointer, controller) {\n    const breadcrumps = [];\n    while (pointer !== \"#\") {\n        breadcrumps.unshift({\n            title: getOption(pointer, controller, \"title\"),\n            pointer\n        });\n        pointer = gp.join(pointer, \"..\");\n    }\n    return breadcrumps;\n}\n\n\nfunction enumOptions(schema) {\n    let options;\n    if (schema[UI_PROPERTY].enum) {\n        options = schema.enum.map((value, index) => ({\n            title: schema[UI_PROPERTY].enum[index] || schema.enum[index],\n            value: schema.enum[index]\n        }));\n    } else if (schema.options && schema.options.enum_titles) {\n        // @legacy support jdorn/json-editor\n        options = schema.enum.map((value, index) => ({\n            title: schema.options.enum_titles[index] || schema.enum[index],\n            value: schema.enum[index]\n        }));\n    } else {\n        options = schema.enum;\n    }\n    return options;\n}\n\n\n/**\n * Resolves the given pointer absolute or relative in data\n *\n * @param  {String} pointer             - current base pointer for relative targets\n * @param  {Controller} controller\n * @param  {String} pointerToResolve    - relative or absolute pointer (must start with `/` or `../`)\n * @return {Mixed} target value of at #/pointer/pointerToResolve or false\n */\nfunction resolveReference(pointer, controller, pointerToResolve) {\n    if (populated(pointerToResolve) === false || isPointer(pointerToResolve) === false) {\n        return null;\n    }\n\n    let targetPointer = pointerToResolve;\n    if (targetPointer[0] !== \"#\") {\n        targetPointer = gp.join(pointer, targetPointer);\n    }\n\n    const result = controller.data().get(targetPointer);\n    return populated(result, result, null);\n}\n\n\n/**\n * Returns the resolved copy of an options object. This method is used by the controller to help setup the\n * main options object of an editor instance. It is simplified, in that it currently does  not resolve any reference\n * on the current data\n *\n * @param {String} pointer\n * @param {Controller} controller\n * @return {Object} a resolved copy of the editron:ui settings\n */\nfunction copyOptions(pointer, controller) {\n    const schema = controller.schema().get(pointer);\n\n    const settings = Object.assign({\n        hidden: false,\n        description: schema.description\n    }, schema.options, schema[UI_PROPERTY]); // @legacy options\n\n    settings.title = getTitle(pointer, controller); // this comes last, because ensures an '*' is appended if required\n\n    Object\n        .keys(settings)\n        .forEach(option => {\n            settings[option] = resolveOption(pointer, controller, settings[option]);\n        });\n\n    return settings;\n}\n\n\n/**\n * Ensures each schema contains a valid schema[UI_PROPERTY] object\n * @param  {Object} rootSchema\n * @return {Object} extended clone of json-schema\n */\nfunction extendSchema(rootSchema) {\n    rootSchema = JSON.parse(JSON.stringify(rootSchema));\n    eachSchema(rootSchema, childSchema => {\n        childSchema[UI_PROPERTY] = childSchema[UI_PROPERTY] || {};\n        childSchema[UI_PROPERTY] = Object.assign({\n            hidden: false,\n            title: childSchema.title || \"\",\n            description: childSchema.description || \"\"\n        }, childSchema.options, childSchema[UI_PROPERTY]); // @legacy options\n    });\n\n    return rootSchema;\n}\n\n\n/**\n * Resolves a list of pointers, where the first found value is returned. Supports simple strings as fallback.\n *  e.g. `[\"/data/local/title\", \"/data/local/subtitle\", \"Title\"]`\n *\n * @param  {String} pointer     [description]\n * @param  {Controller} controller  [description]\n * @param  {String|Array} optionValue [description]\n * @return {Mixed} the option value\n */\nfunction resolveOption(pointer, controller, optionValue) {\n    if (Array.isArray(optionValue)) {\n        for (let i = 0; i < optionValue.length; i += 1) {\n            const option = optionValue[i];\n            if (isPointer(option)) {\n                const value = resolveReference(pointer, controller, option);\n                if (populated(value)) {\n                    return value;\n                }\n            } else if (populated(option)) {\n                return option;\n            }\n        }\n    }\n    return optionValue;\n}\n\n\n/**\n * Returns the first defined option set in schema. Supports relative and absolute pointers in data\n *\n * @param  {String} pointer\n * @param  {Controller} controller\n * @param  {...[String]} options    - a list of option properties. The first non-empty option will be returned\n * @return {Mixed} the first non-empty option\n */\nfunction getOption(pointer, controller, ...options) {\n    const schema = controller.schema().get(pointer);\n    const editronOptions = schema[UI_PROPERTY] || {};\n\n    if (options.length === 0) {\n        throw new Error(\"Expected at least one options property to be given in getOption\");\n    }\n\n    for (let i = 0; i < options.length; i += 1) {\n        const option = editronOptions[options[i]];\n        const resolver = isPointer(option) ? resolveReference : resolveOption;\n        const value = resolver(pointer, controller, option);\n\n        if (populated(value)) {\n            return value;\n        } else if (populated(schema[options[i]])) {\n            return schema[options[i]];\n        }\n    }\n\n    return null;\n}\n\n\nfunction getTitle(pointer, controller) {\n    const schema = controller.schema().get(pointer);\n    const title = getOption(pointer, controller, \"title\") || \"\";\n    return schema.minLength ? `${title.replace(/\\s*\\*\\s*$/, \"\")} *` : title;\n}\n\n\nfunction getDefaultOption(schema, option) {\n    return schema[UI_PROPERTY] ? (schema[UI_PROPERTY][option] || \"\") : \"\";\n}\n\n\nmodule.exports = {\n    UI_PROPERTY,\n    getOption,\n    copyOptions,\n    extendSchema,\n    getBreadcrumps,\n    getTitle,\n    enumOptions,\n    getDefaultOption\n};\n","const m = require(\"mithril\");\nconst createElement = require(\"./createElement\");\nconst LocationService = require(\"../services/LocationService\");\nconst OverlayService = require(\"../services/OverlayService\");\nconst SelectTileComponent = require(\"../components/overlayselecttiles\");\nconst UISchema = require(\"./UISchema\");\n\n/**\n * Request to insert an array child item at the given pointer. If multiple options are present, a dialogue is opened to\n * let the user select the appropriate type of child (oneof).\n *\n * @param {Object} dataService\n * @param {Object} schemaService\n * @param {String} pointer  - to array on which to insert the child\n * @param {Number} index    - index within array, where the child should be inserted (does not replace). Default: 0\n */\nmodule.exports = function addItem(dataService, schemaService, pointer, index = 0) {\n    const list = dataService.get(pointer);\n    const schema = schemaService.get(pointer);\n    if (schema.type !== \"array\") {\n        throw new Error(`Can not add item to a non-array (${pointer})`);\n    }\n\n    const selectOptions = schemaService.getChildSchemaSelection(pointer, index);\n\n    // single option, immediately create template data and add item to list\n    if (selectOptions.length === 1) {\n        addSelection(0, schemaService, dataService);\n        return;\n    }\n\n    // multiple options, ask user\n    const element = createElement(\".overlay__item\");\n    const selection = selectOptions.map((item, oneOfIndex) => ({\n        icon: UISchema.getDefaultOption(item, \"icon\"),\n        title: UISchema.getDefaultOption(item, \"title\"),\n        description: UISchema.getDefaultOption(item, \"description\"),\n        value: oneOfIndex\n    }));\n\n    // create user-selection\n    m.render(element, m(SelectTileComponent, {\n        description: \"Modulauswahl - Bitte whlen\",\n        value: \"0\",\n        options: selection,\n        onchange: (value) => {\n            const selectedIndex = parseInt(value, 10);\n            addSelection(selectedIndex, schemaService, dataService);\n            OverlayService.close();\n            LocationService.goto(`${pointer}/${index}`);\n        }\n    }));\n\n    // add data of selection\n    function addSelection(selectedIndex) {\n        const itemSchema = selectOptions[selectedIndex];\n        const itemData = schemaService.getTemplate(itemSchema);\n        list.splice(index, 0, itemData);\n        dataService.set(pointer, list);\n    }\n\n    // and ask question\n    OverlayService.open(element, { save: false });\n};\n","module.exports = {\n    addItem(pointer, controller, index) {\n        controller.addItemTo(pointer, index);\n    },\n    removeItem(pointer, controller, index) {\n        const nextList = controller.data().get(pointer);\n        nextList.splice(index, 1);\n        controller.data().set(pointer, nextList);\n    },\n    moveItem(pointer, controller, index, destinationIndex) {\n        if (destinationIndex < 0) {\n            return;\n        }\n\n        const list = controller.data().get(pointer);\n        if (list[index] == null || list[destinationIndex] == null) {\n            return;\n        }\n\n        list.splice(destinationIndex, 0, list.splice(index, 1)[0]);\n        controller.data().set(pointer, list);\n    },\n    moveElement(list, index, destinationIndex) {\n        list.splice(destinationIndex, 0, list.splice(index, 1)[0]);\n    }\n};\n","const m = require(\"mithril\");\n\nmodule.exports = function createElement(selector, attributes) {\n    const vnode = m(selector, attributes);\n    const element = document.createElement(vnode.tag);\n    Object.keys(vnode.attrs).forEach((key) => {\n        if (key === \"className\") {\n            vnode.attrs[key].split(\" \").forEach((className) => element.classList.add(className));\n        } else if (vnode.attrs[key] != null) {\n            element.setAttribute(key, vnode.attrs[key]);\n        }\n    });\n    return element;\n};\n","const { Foxy, handler } = require(\"@technik-sde/foxy\");\n\n\nconst defaultOptions = {\n    handlers: [\n        handler.unsplash,\n        handler.image,\n        handler.video\n    ]\n};\n\n\nmodule.exports = function createProxy(options = {}) {\n    if (options.constructor.name === \"Foxy\") {\n        return options;\n    }\n\n    const o = { ...defaultOptions, ...options };\n\n    if (Array.isArray(o.handlers)) {\n        return new Foxy(o);\n    }\n\n    throw new Error(`Failed initializing proxy from: ${JSON.stringify(options)}`);\n};\n","/**\n * Converts a json-pointer to a valid dom-id (url selection)\n * https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html\n *\n * @param  {String} pointer\n * @return {String} unique id\n */\nmodule.exports = function getID(pointer) {\n    return `${pointer.replace(/(^[#/]*|\\/+$)/, \"\")}`.replace(/\\/+/g, \".\");\n};\n","const render = require(\"json-schema-library/lib/utils/render\");\n\ntranslate.strings = {};\ntranslateError.strings = {};\n\n\nfunction translate(key, data) {\n    if (typeof translate.strings[key] === \"string\") {\n        return render(translate.strings[key], data);\n    } else if (typeof translate.strings[key] === \"function\") {\n        return translate.strings[key](data);\n    }\n    return key;\n}\n\n\nfunction translateError(controller, error) {\n    if (typeof translateError.strings[error.code] === \"string\") {\n        error.message = render(translateError.strings[error.code], error.data);\n    } else if (typeof translateError.strings[error.code] === \"function\") {\n        error.message = translateError.strings[error.code](controller, error);\n    }\n    return error;\n}\n\n\nfunction addLanguage(lang, keys) {\n    const _keys = (keys == null && Object.prototype.toString.call(lang) === \"[object Object]\") ? lang : keys;\n    Object.assign(translateError.strings, _keys.errors);\n    Object.assign(translate.strings, _keys.strings);\n}\n\n\nconst i18n = {\n    translate,\n    translateError,\n    addLanguage\n};\n\n\nmodule.exports = i18n;\n","module.exports = {\n    addItem: require(\"./addItem\"),\n    array: require(\"./array\"),\n    createElement: require(\"./createElement\"),\n    getID: require(\"./getID\"),\n    i18n: require(\"./i18n\"),\n    isNodeContext: require(\"./isNodeContext\"),\n    populated: require(\"./populated\"),\n    selection: require(\"./selection\"),\n    selectEditor: require(\"./selectEditor\"),\n    UISchem: require(\"./UISchema\")\n};\n","/* global process */\nmodule.exports = function isNodeContext() {\n    if (typeof process === \"object\") {\n        if (typeof process.versions === \"object\") {\n            if (typeof process.versions.node !== \"undefined\") {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n","// returns true if the value is valid, that is: it has content\nmodule.exports = function populated(value, returnIf, returnElse = \"\") {\n    let isPopulated = true;\n\n    if (value == null || value === \"\" || value === \"#\") {\n        isPopulated = false;\n    } else if (typeof value === \"string\") {\n        isPopulated = value.replace(/<[^>]+>/g, \"\").replace(/[^A-Za-z0-9]/g, \"\").length > 0;\n    } else if (Array.isArray(value)) {\n        isPopulated = value.length > 0;\n    } else if (Object.prototype.toString.call(value) === \"[object Object]\") {\n        isPopulated = Object.keys(value).length > 0;\n    }\n\n    if (returnIf === undefined && returnElse === \"\") {\n        return isPopulated;\n    }\n\n    return isPopulated ? returnIf : returnElse;\n};\n","/**\n * Selects an editor based on the given schema\n *\n * @param  {Array} editorViews  - List of editors with a static function 'editorOf'\n * @param  {String} pointer     - current pointer in data\n * @param  {Controller} controller\n * @param  {Object} options     - the complete and resolved (UISchema) options object (editron:ui + additions)\n * @return {Boolean|Constructor} The constructor of the chosen editor od false if no editor could be resolved\n *  or is denied\n */\nfunction select(editorViews, pointer, controller, options) {\n    // @todo export this to a configurable function (this is distributed across modules: json-schema-library)\n    if (/_id$/.test(pointer)) {\n        return false; // abort if it is an internal value\n    }\n\n    const schema = controller.schema().get(pointer);\n    if (schema.type === \"error\") {\n        // data-pointer could not be found in schema\n        // @todo find a better solution for additional data: maybe an 'additional data'-editor\n        return false;\n    }\n\n    // @ui-option hidden\n    if (options.hidden === true) {\n        return false;\n    }\n\n    for (let i = 0, l = editorViews.length; i < l; i += 1) {\n        if (editorViews[i].editorOf(pointer, controller, options)) {\n            return editorViews[i];\n        }\n    }\n\n    return undefined;\n}\n\n\nmodule.exports = select;\n","const getID = require(\"./getID\");\n\n\n/**\n * Return true, if the given element may blur in the requested direction\n * @param  {HTMLElement} element\n * @param  {\"up\"|\"down\"|\"left\"|\"right\"} direction\n * @return {Boolean} may blur\n */\nfunction mayBlur(element, direction) {\n    const dir = (direction === \"down\" || direction === \"right\") ? 1 : -1;\n\n    if (element.mayBlur) {\n        return element.mayBlur(direction);\n    }\n\n    if (element.tagName === \"INPUT\" && element.type === \"number\") {\n        // there is no selection-indicator for numbers, so we cannot determine\n        // if the motion is within the input-field. Must use input.type=text\n        // for this to work\n        return false;\n    }\n\n    if (element.tagName === \"INPUT\" && element.type === \"checkbox\") {\n        return true;\n    }\n\n    if (element.tagName === \"SELECT\") {\n        return false;\n    }\n\n    if (element.tagName === \"INPUT\") {\n        if (direction === \"up\" || direction === \"down\") {\n            return true;\n        }\n        if (direction === \"left\" && element.selectionStart === 0) {\n            return true;\n        }\n        if (direction === \"right\" && element.value.length === element.selectionEnd) {\n            return true;\n        }\n        return false;\n    }\n\n    if (element.tagName === \"TEXTAREA\") {\n        if (element.value === \"\") {\n            return true;\n        } else if (dir === -1 && element.selectionStart === 0) {\n            return true;\n        } else if (dir === 1 && element.value.length === element.selectionEnd) {\n            return true;\n        }\n        return false;\n    }\n\n    return true;\n}\n\n/**\n * Return the current active element or false\n * @param  {Controller} controller\n * @param  {HTMLElement} parent\n * @return {HTMLElement|false}\n */\nfunction getActiveInput(controller, parent = document) {\n    const currentPointer = controller.location().getCurrent();\n    const currentId = `#${getID(currentPointer)}`;\n    if (currentId === \"#\") {\n        console.log(\"abort empty selection\", currentPointer, \"active element\", document.activeElement);\n        return false;\n    }\n\n    const activeInput = parent.querySelector(currentId);\n    if (activeInput == null) { return false; }\n    if (activeInput !== document.activeElement) {\n        console.log(\"selection: active input is not the same as current editor\", activeInput, document.activeElement);\n    }\n    return activeInput;\n}\n\n\nfunction getAvailableInputs(parent) {\n    return [...parent.querySelectorAll(\"input,textarea,select\")];\n}\n\n\n/**\n * Return the next input-element or false\n * @param  {Controller} controller\n * @param  {\"up\"|\"down\"|\"left\"|\"right\"} direction\n * @param  {HTMLElement} options.parent\n * @return {HTMLElement|false}\n */\nfunction getNextInput(controller, direction = \"down\", { parent = document } = {}) {\n    const activeElement = getActiveInput(controller, parent);\n    const allElements = getAvailableInputs(parent);\n    const dir = (direction === \"down\" || direction === \"right\") ? 1 : -1;\n    const currentIndex = allElements.indexOf(activeElement);\n    if (currentIndex === -1) {\n        return false;\n    }\n\n    const nextElement = allElements[currentIndex + dir];\n    if (nextElement && nextElement.focus) {\n        return nextElement;\n    }\n\n    return false;\n}\n\n\n/**\n * move the focus from current element to next visible input-element\n * inputs being (textarea, input and select with an id-attribute containing a json-pointer-id)\n *\n * @param  {Controller}  controller\n * @param  {\"up\"|\"down\"|\"left\"|\"right\"} direction\n * @param  {Object} options\n * @param  {Boolean} options.force    ignores movement restrictions (e.g. navigation in textarea)\n * @param  {HTMLElement} options.parent    scan only in given parentNode\n * @returns {Boolean} true - if there was a new target was found or the move prevented\n */\nfunction focusNextInput(controller, direction = \"down\", options = {}) {\n    const { force = false, parent = document } = options;\n    const activeElement = getActiveInput(controller, parent);\n\n    if (force === false && mayBlur(activeElement, direction) === false) {\n        // console.log(\"prevent blur of\", activeElement);\n        return true;\n    }\n\n    const nextElement = getNextInput(controller, direction, options);\n    if (nextElement) {\n        nextElement.focus();\n        return true;\n    }\n\n    return false;\n}\n\n\nmodule.exports = {\n    focusNextInput,\n    getNextInput,\n    getAvailableInputs,\n    getActiveInput,\n    mayBlur\n};\n","module.exports = m;"],"sourceRoot":""}